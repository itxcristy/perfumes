var e,t=Object.defineProperty,s=Object.defineProperties,r=Object.getOwnPropertyDescriptors,i=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable,o=(e,s,r)=>s in e?t(e,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[s]=r,l=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&o(e,s,t[s]);if(i)for(var s of i(t))a.call(t,s)&&o(e,s,t[s]);return e},c=(e,t)=>s(e,r(t)),u=(e,t,s)=>o(e,"symbol"!=typeof t?t+"":t,s),d=(e,t,s)=>new Promise((r,i)=>{var n=e=>{try{o(s.next(e))}catch(t){i(t)}},a=e=>{try{o(s.throw(e))}catch(t){i(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(n,a);o((s=s.apply(e,t)).next())});import{r as h,j as m,X as f,I as p,T as g,C as y,a as w,A as x,S as b,U as v,M as C,b as j,c as E,L as S,E as k,d as N,P as R,e as P,f as q,F as T,g as M,h as A,i as O,W as I,R as L}from"./vendor-react-CeB5Z5vL.js";const D=new class{constructor(){u(this,"token",null)}setToken(e){this.token=e,e?localStorage.setItem("auth_token",e):localStorage.removeItem("auth_token")}getToken(){return this.token||localStorage.getItem("auth_token")}request(e){return d(this,arguments,function*(e,t={}){var s;const r=`http://localhost:5000/api${e}`,i=l({"Content-Type":"application/json"},t.headers),n=this.getToken();n&&(i.Authorization=`Bearer ${n}`);try{const e=yield fetch(r,c(l({},t),{headers:i})),n=yield e.json();if(!e.ok)throw new Error((null==(s=n.error)?void 0:s.message)||"API request failed");return n}catch(a){throw a}})}get(e){return d(this,null,function*(){return this.request(e,{method:"GET"})})}post(e,t){return d(this,null,function*(){return this.request(e,{method:"POST",body:JSON.stringify(t)})})}put(e,t){return d(this,null,function*(){return this.request(e,{method:"PUT",body:JSON.stringify(t)})})}delete(e){return d(this,null,function*(){return this.request(e,{method:"DELETE"})})}register(e,t,s){return d(this,null,function*(){const r=yield this.post("/auth/register",{email:e,password:t,fullName:s});return r.token&&this.setToken(r.token),r})}login(e,t){return d(this,null,function*(){const s=yield this.post("/auth/login",{email:e,password:t});return s.token&&this.setToken(s.token),s})}logout(){return d(this,null,function*(){this.setToken(null)})}getCurrentUser(){return d(this,null,function*(){return this.get("/auth/me")})}updateProfile(e){return d(this,null,function*(){return this.put("/auth/profile",e)})}getProducts(e){return d(this,null,function*(){const t=new URLSearchParams;(null==e?void 0:e.page)&&t.append("page",e.page.toString()),(null==e?void 0:e.limit)&&t.append("limit",e.limit.toString()),(null==e?void 0:e.categoryId)&&t.append("categoryId",e.categoryId),(null==e?void 0:e.search)&&t.append("search",e.search),(null==e?void 0:e.featured)&&t.append("featured","true");const s=t.toString();return this.get("/products"+(s?"?"+s:""))})}getProduct(e){return d(this,null,function*(){return this.get(`/products/${e}`)})}createProduct(e){return d(this,null,function*(){return this.post("/products",e)})}updateProduct(e,t){return d(this,null,function*(){return this.put(`/products/${e}`,t)})}deleteProduct(e){return d(this,null,function*(){return this.delete(`/products/${e}`)})}getCategories(){return d(this,null,function*(){return this.get("/categories")})}getCategory(e){return d(this,null,function*(){return this.get(`/categories/${e}`)})}createCategory(e){return d(this,null,function*(){return this.post("/categories",e)})}updateCategory(e,t){return d(this,null,function*(){return this.put(`/categories/${e}`,t)})}deleteCategory(e){return d(this,null,function*(){return this.delete(`/categories/${e}`)})}getCart(){return d(this,null,function*(){return this.get("/cart")})}addToCart(e,t,s){return d(this,null,function*(){return this.post("/cart",{productId:e,quantity:t,variantId:s})})}updateCartItem(e,t){return d(this,null,function*(){return this.put(`/cart/${e}`,{quantity:t})})}removeFromCart(e){return d(this,null,function*(){return this.delete(`/cart/${e}`)})}clearCart(){return d(this,null,function*(){return this.delete("/cart")})}},F=localStorage.getItem("auth_token");F&&D.setToken(F);const z=h.createContext(void 0),$=()=>{const e=h.useContext(z);if(!e)throw new Error("useError must be used within an ErrorProvider");return e},B=({children:e})=>{const[t,s]=h.useState(null);return m.jsx(z.Provider,{value:{error:t,setError:s,clearError:()=>s(null)},children:e})},_=h.createContext(void 0),H=()=>{const e=h.useContext(_);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},W=({children:e})=>{const[t,s]=h.useState(null),[r,i]=h.useState(!0),[n,a]=h.useState(!1),[o,l]=h.useState("login"),{setError:c}=$();h.useEffect(()=>{d(null,null,function*(){try{const e=yield D.getCurrentUser();e.user&&(s(e.user),c(null))}catch(e){s(null)}finally{i(!1)}})},[]);const u=(e,t)=>d(null,null,function*(){try{i(!0);const r=yield D.login(e,t);if(!r.user)throw new Error("Login failed");s(r.user),c(null)}catch(r){const e=r instanceof Error?r.message:"Login failed";throw c(e),r}finally{i(!1)}}),f=(e,t,r)=>d(null,null,function*(){try{i(!0);const n=yield D.register(e,t,r);if(!n.user)throw new Error("Registration failed");s(n.user),c(null)}catch(n){const e=n instanceof Error?n.message:"Registration failed";throw c(e),n}finally{i(!1)}}),p=()=>d(null,null,function*(){try{i(!0),yield D.logout(),s(null),localStorage.removeItem("user_preferences"),localStorage.removeItem("cart_items"),c(null)}catch(e){const t=e instanceof Error?e.message:"Logout failed";throw c(t),e}finally{i(!1)}}),g={user:t,loading:r,login:(e,t)=>d(null,null,function*(){try{return yield u(e,t),null}catch(s){return s instanceof Error?s.message:"Login failed"}}),logout:()=>d(null,null,function*(){yield p()}),register:e=>d(null,null,function*(){try{return yield f(e.email,e.password,e.name||"User"),!0}catch(t){return!1}}),signIn:u,signUp:f,signOut:p,resetPassword:e=>d(null,null,function*(){throw new Error("Password reset not yet implemented")}),updatePassword:e=>d(null,null,function*(){throw new Error("Password update not yet implemented")}),resendVerification:()=>d(null,null,function*(){throw new Error("Email verification not yet implemented")}),updateProfile:e=>d(null,null,function*(){try{if(!t)throw new Error("No user is currently authenticated");const r=yield D.updateProfile(e);r.user&&s(r.user)}catch(r){const e=r instanceof Error?r.message:"Profile update failed";throw c(e),r}}),openMobileAuth:(e="login")=>{l(e),a(!0)},closeMobileAuth:()=>{a(!1)},isMobileAuthOpen:n,mobileAuthMode:o};return m.jsx(_.Provider,{value:g,children:e})};class U extends Error{constructor(e,t,s,r){super(t),this.code=e,this.details=s,this.originalError=r,this.name="AppError"}}class Q extends U{constructor(e,t){super("VALIDATION_ERROR",e,t),this.name="ValidationError"}}class V extends U{constructor(e,t,s){super("DATABASE_ERROR",e,t,s),this.name="DatabaseError"}}class Z extends U{constructor(e,t,s){super("NETWORK_ERROR",e,t,s),this.name="NetworkError"}}class J extends U{constructor(e,t){super("AUTHENTICATION_ERROR",e,t),this.name="AuthenticationError"}}class G{static handle(e){return e instanceof U?e:"ValidationError"===e.name?new Q(e.message,e.details):"DatabaseError"===e.name||"PostgrestError"===e.name?new V(e.message,e.details,e):"NetworkError"===e.name||"FetchError"===e.name?new Z(e.message,e.details,e):"AuthError"===e.name?new J(e.message,e.details):new U("INTERNAL_ERROR",e.message||"An unexpected error occurred",void 0,e)}static formatError(e){return{success:!1,error:{code:e.code,message:e.message,details:e.details}}}}function Y(e){if(!e||!e.message)return!1;const t=e.message.toLowerCase();return["infinite recursion","recursive reference","row-level security policy","rls recursion","policy recursion"].some(e=>t.includes(e))}const K=h.createContext(void 0),X=()=>{const e=h.useContext(K);if(!e)throw new Error("useNotification must be used within a NotificationProvider");return e},ee=({children:e})=>{const[t,s]=h.useState([]),r=h.useRef(new Map),i=e=>{const i=Date.now(),a=`${i}-${Math.random().toString(36).substring(2,9)}`,o=e.duration||5e3;if(t.some(t=>t.type===e.type&&t.message===e.message&&t.title===e.title&&i-t.timestamp<2e3))return;const u=c(l({},e),{id:a,timestamp:i,duration:o,isVisible:!1,isDismissing:!1});if(s(e=>[u,...e]),setTimeout(()=>{s(e=>e.map(e=>e.id===a?c(l({},e),{isVisible:!0}):e))},10),o>0){const e=setTimeout(()=>{n(a)},o);r.current.set(a,e)}},n=e=>{const t=r.current.get(e);t&&(clearTimeout(t),r.current.delete(e)),s(t=>t.map(t=>t.id===e?c(l({},t),{isDismissing:!0}):t)),setTimeout(()=>{s(t=>t.filter(t=>t.id!==e))},300)};h.useEffect(()=>()=>{r.current.forEach(e=>clearTimeout(e)),r.current.clear()},[]);const a=({notification:e})=>{const[t,s]=h.useState(100),r=h.useRef(null);h.useEffect(()=>{if(e.duration&&e.duration>0&&e.isVisible&&!e.isDismissing){const t=Date.now(),i=e.duration,n=()=>{const e=Date.now()-t,a=Math.max(0,100-e/i*100);s(a),a>0&&(r.current=setTimeout(n,50))};n()}return()=>{r.current&&clearTimeout(r.current)}},[e.duration,e.isVisible,e.isDismissing]);const i=(()=>{switch(e.type){case"success":return{container:"bg-white border-l-4 border-emerald-500 shadow-lg shadow-emerald-500/20",icon:m.jsx(w,{className:"h-5 w-5 text-emerald-600"}),iconBg:"bg-emerald-50",progress:"bg-emerald-500"};case"error":return{container:"bg-white border-l-4 border-red-500 shadow-lg shadow-red-500/20",icon:m.jsx(y,{className:"h-5 w-5 text-red-600"}),iconBg:"bg-red-50",progress:"bg-red-500"};case"warning":return{container:"bg-white border-l-4 border-amber-500 shadow-lg shadow-amber-500/20",icon:m.jsx(g,{className:"h-5 w-5 text-amber-600"}),iconBg:"bg-amber-50",progress:"bg-amber-500"};default:return{container:"bg-white border-l-4 border-blue-500 shadow-lg shadow-blue-500/20",icon:m.jsx(p,{className:"h-5 w-5 text-blue-600"}),iconBg:"bg-blue-50",progress:"bg-blue-500"}}})();return m.jsxs("div",{className:`\n          ${i.container}\n          rounded-lg overflow-hidden backdrop-blur-sm max-w-sm w-full\n          transform transition-all duration-300 ease-out\n          ${e.isVisible&&!e.isDismissing?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}\n          ${e.isDismissing?"translate-x-full opacity-0 scale-95":""}\n        `,children:[m.jsx("div",{className:"p-4",children:m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:`flex-shrink-0 ${i.iconBg} rounded-full p-2 mr-3`,children:i.icon}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:e.title}),m.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:e.message})]}),m.jsx("button",{onClick:()=>{return t=e.id,void n(t);var t},className:"flex-shrink-0 ml-3 p-1 rounded-lg hover:bg-gray-100 transition-colors duration-200 group",children:m.jsx(f,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600"})})]})}),e.duration&&e.duration>0&&m.jsx("div",{className:"h-1 bg-gray-200",children:m.jsx("div",{className:`h-full ${i.progress} transition-all duration-75 ease-linear`,style:{width:`${t}%`}})})]})};return h.useEffect(()=>{let e=!1;const t=()=>{e||(requestAnimationFrame(()=>{(()=>{const e=document.querySelector(".notification-container");if(e){const t=window.pageYOffset||document.documentElement.scrollTop,s=Math.max(20,t+20);e.style.top=`${s}px`}})(),e=!1}),e=!0)};return window.addEventListener("scroll",t,{passive:!0}),()=>window.removeEventListener("scroll",t)},[]),m.jsxs(K.Provider,{value:{showNotification:i,showError:(e,t)=>{const s="type"in e?e:G.handle(e);i({type:"error",title:"Oops! Something went wrong",message:s.message,duration:7e3})},showSuccess:(e,t="Success!")=>{i({type:"success",title:t,message:e,duration:4e3})},showInfo:(e,t="Info")=>{i({type:"info",title:t,message:e,duration:5e3})},showWarning:(e,t="Heads up!")=>{i({type:"warning",title:t,message:e,duration:6e3})}},children:[e,m.jsx("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none notification-container",style:{position:"fixed",top:"1rem",right:"1rem",maxHeight:"calc(100vh - 2rem)",overflow:"hidden",zIndex:9999},children:m.jsx("div",{className:"flex flex-col-reverse gap-3 max-w-sm w-full",children:t.map(e=>m.jsx("div",{className:"pointer-events-auto",children:m.jsx(a,{notification:e})},e.id))})})]})},te=h.createContext(void 0),se=()=>{const e=h.useContext(te);if(!e)throw new Error("useCart must be used within a CartProvider");return e},re=({children:e})=>{const{user:t}=H(),{showNotification:s}=X(),[r,i]=h.useState([]),[n,a]=h.useState(!1),[o,u]=h.useState([]),f=h.useCallback(()=>{try{const e=localStorage.getItem("guestCart");if(e){const t=JSON.parse(e);return u(t),t}}catch(e){}return[]},[]),p=h.useCallback(e=>{try{localStorage.setItem("guestCart",JSON.stringify(e)),u(e)}catch(t){}},[]),g=h.useCallback(()=>d(null,null,function*(){if(t&&o.length>0)try{for(const e of o)yield D.addToCart(e.product.id,e.quantity,e.variantId);return localStorage.removeItem("guestCart"),u([]),yield y(),!0}catch(e){return!1}return!1}),[t,o]),y=h.useCallback(()=>d(null,null,function*(){a(!0);try{if(t){const e=yield D.getCart();i(e.items||[])}else{const e=f();i(e)}}catch(e){t&&s("Failed to load cart","error")}finally{a(!1)}}),[t,f,s]);h.useEffect(()=>{t?g():f()},[t]),h.useEffect(()=>{y()},[t]);const w=h.useCallback((e,r=1,n)=>d(null,null,function*(){try{if(t)yield D.addToCart(e.id,r,n),yield y(),s("Added to cart","success");else{const t={id:`${e.id}-${n||"default"}`,product:e,quantity:r,variantId:n,createdAt:new Date},a=[...o,t];p(a),i(a),s("Added to cart","success")}}catch(a){s("Failed to add to cart","error")}}),[t,o,y,p,s]),x=h.useCallback((e,r)=>d(null,null,function*(){try{if(t)yield D.updateCartItem(e,r),yield y();else{const t=o.map(t=>t.id===e?c(l({},t),{quantity:r}):t);p(t),i(t)}}catch(n){s("Failed to update cart","error")}}),[t,o,y,p,s]),b=h.useCallback(e=>d(null,null,function*(){try{if(t)yield D.removeFromCart(e),yield y();else{const t=o.filter(t=>t.id!==e);p(t),i(t)}s("Removed from cart","success")}catch(r){s("Failed to remove from cart","error")}}),[t,o,y,p,s]),v=h.useCallback(()=>d(null,null,function*(){try{t&&(yield D.clearCart()),localStorage.removeItem("guestCart"),i([]),u([]),s("Cart cleared","success")}catch(e){s("Failed to clear cart","error")}}),[t,s]),C=r.reduce((e,t)=>e+t.product.price*t.quantity,0),j=r.reduce((e,t)=>e+t.quantity,0),E={items:r,loading:n,subtotal:C,itemCount:j,addToCart:w,updateQuantity:x,removeFromCart:b,clearCart:v,fetchCart:y};return m.jsx(te.Provider,{value:E,children:e})},ie=h.createContext(void 0),ne=()=>{const e=h.useContext(ie);if(!e)throw new Error("useWishlist must be used within a WishlistProvider");return e},ae=({children:e})=>{const{user:t}=H(),{showNotification:s}=X(),[r,i]=h.useState([]),[n,a]=h.useState(!0),o=h.useCallback(()=>d(null,null,function*(){if(!t)return i([]),void a(!1);a(!0);try{const e=yield getWishlistItems(t.id);i(e)}catch(e){s({type:"error",title:"Error",message:"Failed to fetch wishlist items. Please try again later."})}a(!1)}),[t,s]);h.useEffect(()=>{o()},[o]);const l=e=>d(null,null,function*(){if(t)try{(yield removeFromWishlistDB(e))?yield o():s({type:"error",title:"Error",message:"Failed to remove item from wishlist."})}catch(r){s({type:"error",title:"Error",message:"Failed to remove item from wishlist. Please try again later."})}}),c=e=>r.some(t=>t.product.id===e),u={items:r,addItem:e=>d(null,null,function*(){if(t)if(c(e.id))yield l(e.id),s({type:"info",title:"Removed from Wishlist",message:`${e.name} removed from your wishlist.`});else try{(yield addToWishlistDB(e.id))?(yield o(),s({type:"success",title:"Added to Wishlist",message:`${e.name} added to your wishlist.`})):s({type:"error",title:"Error",message:"Could not add item to wishlist."})}catch(r){s({type:"error",title:"Error",message:"Failed to add item to wishlist. Please try again later."})}else s({type:"info",title:"Authentication Required",message:"Please log in or create an account to add items to your wishlist."})}),removeItem:l,isInWishlist:c,clearWishlist:()=>d(null,null,function*(){if(t)try{const e=r.map(e=>removeFromWishlistDB(e.product.id));yield Promise.all(e),i([])}catch(e){s({type:"error",title:"Error",message:"Failed to clear wishlist. Please try again later."})}}),loading:n};return m.jsx(ie.Provider,{value:u,children:e})},oe=h.createContext(void 0),le=()=>{const e=h.useContext(oe);if(!e)throw new Error("useProducts must be used within a ProductProvider");return e},ce=({children:e})=>{const[t,s]=h.useState([]),[r,i]=h.useState([]),[n,a]=h.useState([]),[o,c]=h.useState(!1),[u,f]=h.useState({page:1,limit:20,total:0,pages:0}),{setError:p}=$();h.useEffect(()=>{g()},[]),h.useEffect(()=>{y(1)},[]);const g=h.useCallback(()=>d(null,null,function*(){try{const e=yield D.getCategories();a(e.data||[])}catch(e){p(e instanceof Error?e.message:"Failed to fetch categories")}}),[p]),y=h.useCallback((e=1,t=20,r)=>d(null,null,function*(){try{c(!0);const i=yield D.getProducts(l({page:e,limit:t},r));s(i.data||[]),f(i.pagination),p(null)}catch(i){p(i instanceof Error?i.message:"Failed to fetch products")}finally{c(!1)}}),[p]),w=h.useCallback(()=>d(null,null,function*(){try{const e=yield D.getProducts({featured:!0,limit:10});i(e.data||[])}catch(e){p(e instanceof Error?e.message:"Failed to fetch featured products")}}),[p]),x=h.useCallback(e=>d(null,null,function*(){try{return yield D.getProduct(e)}catch(t){return p(t instanceof Error?t.message:"Failed to fetch product"),null}}),[p]),b=h.useCallback(e=>d(null,null,function*(){try{c(!0);const t=yield D.getProducts({search:e,limit:50});s(t.data||[]),f(t.pagination)}catch(t){p(t instanceof Error?t.message:"Search failed")}finally{c(!1)}}),[p]),v=h.useCallback(e=>d(null,null,function*(){try{c(!0);const t=yield D.getProducts({categoryId:e,limit:50});s(t.data||[]),f(t.pagination)}catch(t){p(t instanceof Error?t.message:"Filter failed")}finally{c(!1)}}),[p]),C=h.useCallback(e=>d(null,null,function*(){try{const t=yield D.createProduct(e);return yield y(1),t}catch(t){throw p(t instanceof Error?t.message:"Failed to create product"),t}}),[p,y]),j=h.useCallback((e,t)=>d(null,null,function*(){try{const s=yield D.updateProduct(e,t);return yield y(u.page),s}catch(s){throw p(s instanceof Error?s.message:"Failed to update product"),s}}),[p,y,u.page]),E=h.useCallback(e=>d(null,null,function*(){try{yield D.deleteProduct(e),yield y(u.page)}catch(t){throw p(t instanceof Error?t.message:"Failed to delete product"),t}}),[p,y,u.page]),S=h.useCallback(e=>d(null,null,function*(){try{const t=yield D.createCategory(e);return yield g(),t}catch(t){throw p(t instanceof Error?t.message:"Failed to create category"),t}}),[p,g]),k=h.useCallback((e,t)=>d(null,null,function*(){try{const s=yield D.updateCategory(e,t);return yield g(),s}catch(s){throw p(s instanceof Error?s.message:"Failed to update category"),s}}),[p,g]),N=h.useCallback(e=>d(null,null,function*(){try{yield D.deleteCategory(e),yield g()}catch(t){throw p(t instanceof Error?t.message:"Failed to delete category"),t}}),[p,g]),R=h.useCallback(()=>{u.page<u.pages&&y(u.page+1)},[u,y]),P=h.useCallback(()=>{u.page>1&&y(u.page-1)},[u,y]),q=h.useCallback(e=>{e>=1&&e<=u.pages&&y(e)},[u,y]),T={products:t,featuredProducts:r,categories:n,loading:o,pagination:u,fetchProducts:y,fetchFeaturedProducts:w,getProductById:x,searchProducts:b,filterByCategory:v,createProduct:C,updateProduct:j,deleteProduct:E,createCategory:S,updateCategory:k,deleteCategory:N,nextPage:R,previousPage:P,goToPage:q};return m.jsx(oe.Provider,{value:T,children:e})},ue=h.createContext(void 0),de=()=>{const e=h.useContext(ue);if(!e)throw new Error("useOrders must be used within an OrderProvider");return e},he=({children:e})=>{const{user:t}=H(),{showNotification:s}=X(),[r,i]=h.useState([]),[n,a]=h.useState(!1),o=h.useCallback(()=>d(null,null,function*(){if(t){a(!0);try{const e=yield getOrders(t.id);i(e)}catch(e){s({type:"error",title:"Error",message:"Failed to load orders. Please try again later."})}finally{a(!1)}}else i([])}),[t,s]);h.useEffect(()=>{o()},[o]);const l={orders:r,loading:n,createOrder:(e,r,i,n)=>d(null,null,function*(){if(!t)return s({type:"error",title:"Authentication Required",message:"Please log in to place an order"}),null;a(!0);try{const t=yield createOrderDB({items:e,shippingAddress:r,billingAddress:void 0,paymentMethod:i});return t?(s({type:"success",title:"Order Placed",message:"Your order has been placed successfully!"}),yield o(),t):(s({type:"error",title:"Order Failed",message:"Failed to create order. Please try again."}),null)}catch(n){return s({type:"error",title:"Order Failed",message:"An unexpected error occurred. Please try again."}),null}finally{a(!1)}}),updateOrderStatus:(e,t)=>d(null,null,function*(){try{return(yield updateOrderStatusDB(e,t))?(yield o(),s({type:"success",title:"Status Updated",message:`Order status updated to ${t}`}),!0):(s({type:"error",title:"Update Failed",message:"Failed to update order status"}),!1)}catch(r){return s({type:"error",title:"Update Failed",message:"Failed to update order status. Please try again later."}),!1}}),getOrderById:e=>d(null,null,function*(){try{return yield getOrderByIdDB(e)}catch(t){const s=r.find(t=>t.id===e);return s||null}}),getUserOrders:e=>d(null,null,function*(){const s=e||(null==t?void 0:t.id);if(!s)return[];try{return yield getOrders(s)}catch(r){return[]}})};return m.jsx(ue.Provider,{value:l,children:e})},me=h.createContext(void 0),fe=()=>{const e=h.useContext(me);if(!e)throw new Error("useAddresses must be used within an AddressProvider");return e},pe=({children:e})=>{const[t,s]=h.useState([]),[r,i]=h.useState(!1),{user:n}=H(),{showNotification:a}=X(),o=h.useCallback(()=>d(null,null,function*(){if(n){i(!0);try{const e=yield getUserAddresses(n.id);s(e)}catch(e){a({type:"error",title:"Error",message:"Failed to fetch addresses"})}finally{i(!1)}}else s([])}),[n,a]);h.useEffect(()=>{o()},[o]);const l={addresses:t,addAddress:e=>d(null,null,function*(){if(n)try{(yield addAddressDB(e))?(yield o(),a({type:"success",title:"Address Added",message:"Your address has been added successfully"})):a({type:"error",title:"Error",message:"Failed to add address"})}catch(t){a({type:"error",title:"Error",message:"Failed to add address"})}else a({type:"error",title:"Authentication Required",message:"Please log in to add an address"})}),updateAddress:e=>d(null,null,function*(){try{(yield updateAddressDB(e))?(yield o(),a({type:"success",title:"Address Updated",message:"Your address has been updated successfully"})):a({type:"error",title:"Error",message:"Failed to update address"})}catch(t){a({type:"error",title:"Error",message:"Failed to update address"})}}),deleteAddress:e=>d(null,null,function*(){try{(yield deleteAddressDB(e))?(yield o(),a({type:"success",title:"Address Deleted",message:"Your address has been deleted successfully"})):a({type:"error",title:"Error",message:"Failed to delete address"})}catch(t){a({type:"error",title:"Error",message:"Failed to delete address"})}}),setDefaultAddress:(e,t)=>d(null,null,function*(){try{(yield setDefaultAddressDB(e,t))?(yield o(),a({type:"success",title:"Default Address Set",message:`Default ${t} address has been updated`})):a({type:"error",title:"Error",message:"Failed to set default address"})}catch(s){a({type:"error",title:"Error",message:"Failed to set default address"})}}),fetchAddresses:o,loading:r};return m.jsx(me.Provider,{value:l,children:e})},ge={neutral:{primary:{50:"#f8fafc",100:"#f1f5f9",500:"#475569",600:"#334155",700:"#1e293b",900:"#020617"},secondary:{50:"#fafaf9",100:"#f5f5f4",500:"#78716c",600:"#57534e",700:"#44403c",900:"#1c1917"}},warm:{primary:{50:"#fef7ed",100:"#fdedd3",500:"#ea580c",600:"#dc2626",700:"#b91c1c",900:"#7c2d12"},secondary:{50:"#fefce8",100:"#fef3c7",500:"#eab308",600:"#ca8a04",700:"#a16207",900:"#713f12"}},cool:{primary:{50:"#eff6ff",100:"#dbeafe",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8",900:"#1e3a8a"},secondary:{50:"#f0fdfa",100:"#ccfbf1",500:"#14b8a6",600:"#0d9488",700:"#0f766e",900:"#134e4a"}},vibrant:{primary:{50:"#fdf4ff",100:"#fae8ff",500:"#a855f7",600:"#9333ea",700:"#7c3aed",900:"#581c87"},secondary:{50:"#fef2f2",100:"#fee2e2",500:"#ef4444",600:"#dc2626",700:"#b91c1c",900:"#7f1d1d"}},monochrome:{primary:{50:"#f9fafb",100:"#f3f4f6",500:"#6b7280",600:"#4b5563",700:"#374151",900:"#111827"},secondary:{50:"#f9fafb",100:"#f3f4f6",500:"#6b7280",600:"#4b5563",700:"#374151",900:"#111827"}}},ye={compact:{fontFamily:{sans:["Inter","system-ui","sans-serif"],serif:["Playfair Display","Georgia","serif"],mono:["JetBrains Mono","Menlo","monospace"],display:["Cormorant Garamond","Playfair Display","serif"]},fontSize:{xs:{size:"0.75rem",lineHeight:"1rem"},sm:{size:"0.875rem",lineHeight:"1.25rem"},base:{size:"1rem",lineHeight:"1.5rem"},lg:{size:"1.125rem",lineHeight:"1.75rem"},xl:{size:"1.25rem",lineHeight:"1.75rem"},"2xl":{size:"1.5rem",lineHeight:"2rem"},"3xl":{size:"1.875rem",lineHeight:"2.25rem"},"4xl":{size:"2.25rem",lineHeight:"2.5rem"}},fontWeight:{light:300,normal:400,medium:500,semibold:600,bold:700}},comfortable:{fontFamily:{sans:["Inter","system-ui","sans-serif"],serif:["Playfair Display","Georgia","serif"],mono:["JetBrains Mono","Menlo","monospace"],display:["Cormorant Garamond","Playfair Display","serif"]},fontSize:{xs:{size:"0.8125rem",lineHeight:"1.125rem"},sm:{size:"0.9375rem",lineHeight:"1.375rem"},base:{size:"1.0625rem",lineHeight:"1.625rem"},lg:{size:"1.1875rem",lineHeight:"1.875rem"},xl:{size:"1.3125rem",lineHeight:"1.875rem"},"2xl":{size:"1.5625rem",lineHeight:"2.125rem"},"3xl":{size:"1.9375rem",lineHeight:"2.375rem"},"4xl":{size:"2.3125rem",lineHeight:"2.625rem"}},fontWeight:{light:300,normal:400,medium:500,semibold:600,bold:700}},spacious:{fontFamily:{sans:["Inter","system-ui","sans-serif"],serif:["Playfair Display","Georgia","serif"],mono:["JetBrains Mono","Menlo","monospace"],display:["Cormorant Garamond","Playfair Display","serif"]},fontSize:{xs:{size:"0.875rem",lineHeight:"1.25rem"},sm:{size:"1rem",lineHeight:"1.5rem"},base:{size:"1.125rem",lineHeight:"1.75rem"},lg:{size:"1.25rem",lineHeight:"2rem"},xl:{size:"1.375rem",lineHeight:"2rem"},"2xl":{size:"1.625rem",lineHeight:"2.25rem"},"3xl":{size:"2rem",lineHeight:"2.5rem"},"4xl":{size:"2.375rem",lineHeight:"2.75rem"}},fontWeight:{light:300,normal:400,medium:500,semibold:600,bold:700}}},we={none:{sm:"0px",default:"0px",md:"0px",lg:"0px",xl:"0px",full:"0px"},small:{sm:"2px",default:"4px",md:"6px",lg:"8px",xl:"12px",full:"9999px"},medium:{sm:"4px",default:"6px",md:"8px",lg:"12px",xl:"16px",full:"9999px"},large:{sm:"6px",default:"8px",md:"12px",lg:"16px",xl:"24px",full:"9999px"},full:{sm:"9999px",default:"9999px",md:"9999px",lg:"9999px",xl:"9999px",full:"9999px"}},xe=()=>{const[e,t]=h.useState(()=>"undefined"==typeof window?{mode:"light",colorScheme:"neutral",fontScale:"comfortable",borderRadius:"medium",animationLevel:"normal",highContrast:!1,reducedMotion:!1}:function(){try{const e=localStorage.getItem("theme_preferences");if(e)return l(l({},{mode:"auto",colorScheme:"neutral",fontScale:"comfortable",borderRadius:"medium",animationLevel:"normal",highContrast:!1,reducedMotion:!1}),JSON.parse(e))}catch(e){}return{mode:"auto",colorScheme:"neutral",fontScale:"comfortable",borderRadius:"medium",animationLevel:"normal",highContrast:!1,reducedMotion:!1}}()),[s,r]=h.useState(()=>"undefined"==typeof window?{prefersDark:!1,prefersReducedMotion:!1,prefersHighContrast:!1}:be()),i=h.useMemo(()=>{const t="light",s=ge[e.colorScheme],r=ye[e.fontScale],i=we[e.borderRadius],n=function(e){const t=!1;return{primary:e.primary||ge.neutral.primary,secondary:e.secondary||ge.neutral.secondary,accent:e.primary||ge.neutral.primary,neutral:ge.neutral.primary,semantic:{success:{50:"#f0fdf4",500:"#22c55e",600:"#16a34a",700:"#15803d"},warning:{50:"#fffbeb",500:"#f59e0b",600:"#d97706",700:"#b45309"},error:{50:"#fef2f2",500:"#ef4444",600:"#dc2626",700:"#b91c1c"},info:{50:"#eff6ff",500:"#3b82f6",600:"#2563eb",700:"#1d4ed8"}},background:{primary:t?"#0f172a":"#ffffff",secondary:t?"#1e293b":"#f8fafc",tertiary:t?"#334155":"#f1f5f9",overlay:t?"rgba(0, 0, 0, 0.8)":"rgba(255, 255, 255, 0.8)"},text:{primary:t?"#f8fafc":"#0f172a",secondary:t?"#cbd5e1":"#475569",tertiary:t?"#94a3b8":"#64748b",inverse:t?"#0f172a":"#f8fafc",disabled:t?"#64748b":"#94a3b8"},border:{subtle:t?"#334155":"#e2e8f0",default:t?"#475569":"#cbd5e1",strong:t?"#64748b":"#94a3b8",interactive:t?"#3b82f6":"#2563eb"}}}(s,0,e.highContrast);return{mode:t,colorScheme:e.colorScheme,colors:n,typography:r,spacing:{scale:"compact"===e.fontScale?.875:"spacious"===e.fontScale?1.125:1,base:16,sizes:ve(e.fontScale)},borderRadius:e.borderRadius,animationLevel:e.reducedMotion?"none":e.animationLevel,fontScale:e.fontScale,customProperties:Ce(n,r,i)}},[e,s]),n=h.useCallback(e=>{t(t=>{const s=l(l({},t),e);return function(e){try{localStorage.setItem("theme_preferences",JSON.stringify(e))}catch(t){}}(s),s})},[]);return h.useEffect(()=>{!function(e){const t=document.documentElement;Object.entries(e.customProperties).forEach(([e,s])=>{t.style.setProperty(e,s)}),t.className=t.className.replace(/theme-\w+/g,""),t.classList.add(`theme-${e.mode}`),t.classList.add(`color-scheme-${e.colorScheme}`),t.classList.add(`font-scale-${e.fontScale}`),t.classList.add(`border-radius-${e.borderRadius}`),t.classList.add(`animation-${e.animationLevel}`),t.style.colorScheme="light"}(i)},[i]),h.useEffect(()=>{const e=[window.matchMedia("(prefers-color-scheme: dark)"),window.matchMedia("(prefers-reduced-motion: reduce)"),window.matchMedia("(prefers-contrast: high)")],t=()=>{r(be())};return e.forEach(e=>e.addEventListener("change",t)),()=>{e.forEach(e=>e.removeEventListener("change",t))}},[]),{preferences:e,themeConfig:i,systemPreferences:s,updatePreferences:n,resetToDefaults:()=>n({mode:"auto",colorScheme:"neutral",fontScale:"comfortable",borderRadius:"medium",animationLevel:"normal",highContrast:!1,reducedMotion:!1})}};function be(){return{prefersDark:window.matchMedia("(prefers-color-scheme: dark)").matches,prefersReducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,prefersHighContrast:window.matchMedia("(prefers-contrast: high)").matches||window.matchMedia("(-ms-high-contrast: active)").matches||window.matchMedia("(forced-colors: active)").matches}}function ve(e){const t=16*("compact"===e?.875:"spacious"===e?1.125:1);return{xs:.25*t+"px",sm:.5*t+"px",md:1*t+"px",lg:1.5*t+"px",xl:2*t+"px","2xl":3*t+"px","3xl":4*t+"px","4xl":6*t+"px"}}function Ce(e,t,s){const r={};return Object.entries(e.background).forEach(([e,t])=>{r[`--color-background-${e}`]=t}),Object.entries(e.text).forEach(([e,t])=>{r[`--color-text-${e}`]=t}),Object.entries(e.border).forEach(([e,t])=>{r[`--color-border-${e}`]=t}),r["--font-family-sans"]=t.fontFamily.sans.join(", "),r["--font-family-serif"]=t.fontFamily.serif.join(", "),r["--font-family-mono"]=t.fontFamily.mono.join(", "),Object.entries(s).forEach(([e,t])=>{r[`--border-radius-${e}`]=t}),r}const je=h.createContext(void 0),Ee=()=>{const e=h.useContext(je);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},Se=({children:e})=>{const{preferences:t,themeConfig:s,systemPreferences:r,updatePreferences:i,resetToDefaults:n}=xe();h.useEffect(()=>{const e=`Theme changed to ${s.mode} mode with ${s.colorScheme} color scheme`,t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.textContent=e,document.body.appendChild(t),setTimeout(()=>{document.body.contains(t)&&document.body.removeChild(t)},1e3)},[s.mode,s.colorScheme]);const a={themeConfig:s,preferences:t,systemPreferences:r,setMode:e=>i({mode:e}),setColorScheme:e=>i({colorScheme:e}),setFontScale:e=>i({fontScale:e}),setBorderRadius:e=>i({borderRadius:e}),setAnimationLevel:e=>i({animationLevel:e}),toggleHighContrast:()=>i({highContrast:!t.highContrast}),toggleReducedMotion:()=>i({reducedMotion:!t.reducedMotion}),updatePreferences:i,resetToDefaults:n,theme:s.mode,actualTheme:s.mode};return m.jsx(je.Provider,{value:a,children:e})},ke=({isOpen:e,onClose:t,initialMode:s="login"})=>{const[r,i]=h.useState(s),[n,a]=h.useState(!1),[o,u]=h.useState(!1),[p,g]=h.useState(!1),[A,O]=h.useState(1),[I,L]=h.useState(!1),{signIn:D,signUp:F}=H(),{showNotification:z}=X(),[$,B]=h.useState({email:"",password:"",confirmPassword:"",fullName:"",phone:"",dateOfBirth:"",address:"",agreeToTerms:!1,subscribeNewsletter:!0}),[_,W]=h.useState({});h.useEffect(()=>(e?(i(s),O(1),B({email:"",password:"",confirmPassword:"",fullName:"",phone:"",dateOfBirth:"",address:"",agreeToTerms:!1,subscribeNewsletter:!0}),W({}),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e,s]);const U=e=>{const t=[];return e.length<8&&t.push("At least 8 characters"),/[A-Z]/.test(e)||t.push("One uppercase letter"),/[a-z]/.test(e)||t.push("One lowercase letter"),/\d/.test(e)||t.push("One number"),/[!@#$%^&*(),.?":{}|<>]/.test(e)||t.push("One special character"),{isValid:0===t.length,errors:t}},Q=(e,t)=>{B(s=>c(l({},s),{[e]:t})),_[e]&&W(t=>{const s=l({},t);return delete s[e],s})},V=e=>{const t=U(e),s=Math.max(0,5-t.errors.length);return 0===s?{strength:0,label:"Very Weak",color:"bg-red-500"}:s<=2?{strength:20*s,label:"Weak",color:"bg-orange-500"}:s<=3?{strength:20*s,label:"Fair",color:"bg-yellow-500"}:s<=4?{strength:20*s,label:"Good",color:"bg-blue-500"}:{strength:100,label:"Strong",color:"bg-green-500"}};return e?m.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 overflow-hidden",style:{position:"fixed",top:0,left:0,right:0,bottom:0,zIndex:9999,display:"flex",alignItems:"center",justifyContent:"center",overflow:"hidden",margin:0,padding:"1rem"},children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden border border-neutral-200 relative",style:{position:"relative",maxHeight:"90vh",overflow:"hidden",margin:"auto",zIndex:1e4,width:"100%",maxWidth:"48rem"},children:[m.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 flex-shrink-0",children:[m.jsx("button",{onClick:t,className:"absolute top-4 right-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors duration-200","aria-label":"Close",children:m.jsx(f,{className:"h-5 w-5"})}),"login"!==r&&"verify"!==r&&m.jsx("button",{onClick:()=>{"signup"===r&&2===A?O(1):i("login")},className:"absolute top-4 left-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors","aria-label":"Back",children:m.jsx(x,{className:"h-5 w-5"})}),m.jsxs("div",{className:"text-center mt-6",children:[m.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4",children:"verify"===r?m.jsx(w,{className:"h-8 w-8"}):"forgot"===r||"reset"===r?m.jsx(b,{className:"h-8 w-8"}):m.jsx(v,{className:"h-8 w-8"})}),m.jsxs("h2",{className:"text-2xl font-bold",children:["login"===r&&"Welcome to Aligarh Attar House","signup"===r&&(1===A?"Create Account":"Complete Profile"),"forgot"===r&&"Reset Password","verify"===r&&"Check Your Email","reset"===r&&"New Password"]}),m.jsxs("p",{className:"text-indigo-100 mt-2",children:["login"===r&&"Sign in to discover premium attars","signup"===r&&(1===A?"Join our community of fragrance lovers":"Tell us about yourself"),"forgot"===r&&"Enter your email to reset your password","verify"===r&&"We sent a verification link to your email","reset"===r&&"Enter your new password"]})]})]}),m.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:"verify"===r?m.jsxs("div",{className:"text-center space-y-4",children:[m.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:m.jsx(C,{className:"h-10 w-10 text-green-600"})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Verification Email Sent"}),m.jsxs("p",{className:"text-gray-600 mt-2",children:["We've sent a verification link to ",m.jsx("strong",{children:$.email})]}),m.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Didn't receive the email? Check your spam folder or"," ",m.jsx("button",{className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"resend verification email"})]})]}),m.jsx("button",{onClick:()=>i("login"),className:"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors font-medium",children:"Back to Login"})]}):m.jsxs("form",{onSubmit:e=>d(null,null,function*(){if(e.preventDefault(),(()=>{const e={};var t;if($.email?(t=$.email,/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t)||(e.email="Please enter a valid email address")):e.email="Email is required",$.password){if("signup"===r){const t=U($.password);t.isValid||(e.password=t.errors.join(", "))}}else e.password="Password is required";return"signup"===r&&(1===A&&$.password!==$.confirmPassword&&(e.confirmPassword="Passwords do not match"),2===A&&($.fullName.trim()||(e.fullName="Full name is required"),$.agreeToTerms||(e.agreeToTerms="You must agree to the terms and conditions"),$.phone&&!/^\+?[\d\s-()]+$/.test($.phone)&&(e.phone="Please enter a valid phone number"),$.address.trim()||(e.address="Address is required"))),W(e),0===Object.keys(e).length})()){g(!0);try{"login"===r?(yield D($.email,$.password),z({type:"success",title:"Welcome back!",message:"Successfully logged in."}),t()):"signup"===r?1===A?O(2):(yield F($.email,$.password,{fullName:$.fullName,phone:$.phone,dateOfBirth:$.dateOfBirth,address:$.address,subscribeNewsletter:$.subscribeNewsletter}),i("verify"),z({type:"success",title:"Account created!",message:"Please check your email to verify your account."})):"forgot"===r&&(z({type:"success",title:"Password reset link sent!",message:"Check your email for instructions."}),i("login"))}catch(s){const e=s instanceof Error?s.message:"An error occurred. Please try again.";z({type:"error",title:"Authentication Error",message:e})}finally{g(!1)}}}),className:"space-y-4",children:[("login"===r||"signup"===r&&1===A)&&m.jsxs("div",{className:"text-center mb-6",children:[m.jsxs("div",{className:"inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-full px-4 py-2 mb-4",children:[m.jsx(j,{className:"h-5 w-5 text-purple-600"}),m.jsx("span",{className:"text-sm font-semibold text-purple-800",children:"Premium Attar Collection"}),m.jsx(E,{className:"h-5 w-5 text-amber-500"})]}),m.jsx("p",{className:"text-sm text-gray-600",children:"Experience the finest natural perfumes from around the world"})]}),("login"===r||"forgot"===r||"signup"===r&&1===A)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-text-primary mb-3",children:"Email Address"}),m.jsxs("div",{className:"relative",children:[m.jsx(C,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-text-tertiary"}),m.jsx("input",{type:"email",value:$.email,onChange:e=>Q("email",e.target.value),className:"input-field-luxury pl-10 "+(_.email?"border-state-error focus:border-state-error focus:ring-state-error/20":""),placeholder:"Enter your email",disabled:p,required:!0})]}),_.email&&m.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[m.jsx(y,{className:"h-4 w-4 mr-1"}),_.email]})]}),("login"===r||"reset"===r||"signup"===r&&1===A)&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),m.jsx("input",{type:n?"text":"password",value:$.password,onChange:e=>Q("password",e.target.value),className:"form-input pl-10 pr-12 "+(_.password?"form-input-error":""),placeholder:"Enter your password",disabled:p,required:!0}),m.jsx("button",{type:"button",onClick:()=>a(!n),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200","aria-label":n?"Hide password":"Show password",children:n?m.jsx(k,{className:"h-5 w-5"}):m.jsx(N,{className:"h-5 w-5"})})]}),_.password&&m.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[m.jsx(y,{className:"h-4 w-4 mr-1"}),_.password]}),"signup"===r&&1===A&&$.password&&m.jsxs("div",{className:"mt-3",children:[m.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[m.jsx("span",{children:"Password Strength"}),m.jsx("span",{className:"font-medium",children:V($.password).label})]}),m.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:m.jsx("div",{className:`h-2 rounded-full ${V($.password).color} transition-all duration-300`,style:{width:`${V($.password).strength}%`}})}),m.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use 8+ characters with a mix of letters, numbers & symbols"})]})]}),"signup"===r&&1===A&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Confirm Password"}),m.jsxs("div",{className:"relative",children:[m.jsx(S,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),m.jsx("input",{type:o?"text":"password",value:$.confirmPassword,onChange:e=>Q("confirmPassword",e.target.value),className:"form-input pl-10 pr-12 "+(_.confirmPassword?"form-input-error":""),placeholder:"Confirm your password",disabled:p,required:!0}),m.jsx("button",{type:"button",onClick:()=>u(!o),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200","aria-label":o?"Hide password":"Show password",children:o?m.jsx(k,{className:"h-5 w-5"}):m.jsx(N,{className:"h-5 w-5"})})]}),_.confirmPassword&&m.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[m.jsx(y,{className:"h-4 w-4 mr-1"}),_.confirmPassword]})]}),"signup"===r&&2===A&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Full Name"}),m.jsxs("div",{className:"relative",children:[m.jsx(v,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),m.jsx("input",{type:"text",value:$.fullName,onChange:e=>Q("fullName",e.target.value),className:"form-input pl-10 "+(_.fullName?"form-input-error":""),placeholder:"Enter your full name",disabled:p,required:!0})]}),_.fullName&&m.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[m.jsx(y,{className:"h-4 w-4 mr-1"}),_.fullName]})]}),"signup"===r&&2===A&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Phone Number"}),m.jsxs("div",{className:"relative",children:[m.jsx(R,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),m.jsx("input",{type:"tel",value:$.phone,onChange:e=>Q("phone",e.target.value),className:"form-input pl-10 "+(_.phone?"form-input-error":""),placeholder:"Enter your phone number",disabled:p,required:!0})]}),_.phone&&m.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[m.jsx(y,{className:"h-4 w-4 mr-1"}),_.phone]})]}),"signup"===r&&2===A&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Date of Birth"}),m.jsxs("div",{className:"relative",children:[m.jsx(P,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),m.jsx("input",{type:"date",value:$.dateOfBirth,onChange:e=>Q("dateOfBirth",e.target.value),className:"form-input pl-10",disabled:p,required:!0})]})]}),"signup"===r&&2===A&&m.jsxs("div",{children:[m.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Address"}),m.jsxs("div",{className:"relative",children:[m.jsxs("svg",{className:"absolute left-3 top-3 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),m.jsx("textarea",{value:$.address,onChange:e=>Q("address",e.target.value),className:"form-input pl-10",placeholder:"Enter your full address",disabled:p,rows:3,required:!0})]}),_.address&&m.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[m.jsx(y,{className:"h-4 w-4 mr-1"}),_.address]})]}),"login"===r&&m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:I,onChange:e=>L(e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:p}),m.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),m.jsx("button",{type:"button",onClick:()=>i("forgot"),className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",disabled:p,children:"Forgot password?"})]}),"signup"===r&&2===A&&m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex items-center h-5",children:m.jsx("input",{id:"subscribe-newsletter",name:"subscribe-newsletter",type:"checkbox",checked:$.subscribeNewsletter,onChange:e=>Q("subscribeNewsletter",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:p})}),m.jsxs("div",{className:"ml-3 text-sm",children:[m.jsx("label",{htmlFor:"subscribe-newsletter",className:"font-medium text-gray-700",children:"Subscribe to our newsletter"}),m.jsx("p",{className:"text-gray-500",children:"Get updates on new arrivals and special offers"})]})]}),"signup"===r&&2===A&&m.jsxs("div",{className:"flex items-start",children:[m.jsx("div",{className:"flex items-center h-5",children:m.jsx("input",{id:"terms-agreement",name:"terms-agreement",type:"checkbox",checked:$.agreeToTerms,onChange:e=>Q("agreeToTerms",e.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded "+(_.agreeToTerms?"border-state-error":""),disabled:p,required:!0})}),m.jsxs("div",{className:"ml-3 text-sm",children:[m.jsxs("label",{htmlFor:"terms-agreement",className:"font-medium text-gray-700",children:["I agree to the ",m.jsx("a",{href:"#",className:"text-indigo-600 hover:text-indigo-500",children:"Terms and Conditions"})]}),_.agreeToTerms&&m.jsxs("p",{className:"mt-1 text-sm text-state-error flex items-center",children:[m.jsx(y,{className:"h-4 w-4 mr-1"}),_.agreeToTerms]})]})]}),m.jsx("div",{children:m.jsx("button",{type:"submit",disabled:p,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:p?m.jsxs(m.Fragment,{children:[m.jsx(q,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):"login"===r?"Sign In":"signup"===r&&1===A?"Continue":"signup"===r&&2===A?"Create Account":"forgot"===r?"Send Reset Link":"Submit"})}),m.jsx("div",{className:"text-center text-sm text-gray-600",children:"login"===r?m.jsxs("p",{children:["Don't have an account?"," ",m.jsx("button",{type:"button",onClick:()=>i("signup"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:p,children:"Sign up"})]}):"signup"===r?m.jsxs("p",{children:["Already have an account?"," ",m.jsx("button",{type:"button",onClick:()=>i("login"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:p,children:"Sign in"})]}):"forgot"===r?m.jsxs("p",{children:["Remember your password?"," ",m.jsx("button",{type:"button",onClick:()=>i("login"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:p,children:"Sign in"})]}):null}),("login"===r||"signup"===r&&1===A)&&m.jsx("div",{className:"pt-4 border-t border-gray-200",children:m.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs text-gray-500",children:[m.jsxs("div",{className:"flex items-center",children:[m.jsx(b,{className:"h-4 w-4 mr-1 text-green-500"}),m.jsx("span",{children:"Secure"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(T,{className:"h-4 w-4 mr-1 text-blue-500"}),m.jsx("span",{children:"Private"})]}),m.jsxs("div",{className:"flex items-center",children:[m.jsx(M,{className:"h-4 w-4 mr-1 text-purple-500"}),m.jsx("span",{children:"Trusted"})]})]})})]})})]})}):null},Ne=h.createContext(void 0),Re=()=>{const e=h.useContext(Ne);if(!e)throw new Error("useAuthModal must be used within an AuthModalProvider");return e},Pe=({children:e})=>{const[t,s]=h.useState(!1),[r,i]=h.useState(null),[n,a]=h.useState(null),o=()=>{s(!1),i(null),a(null)},l={showAuthModal:(e,t)=>{a(e),i(t),s(!0)},hideAuthModal:o,isModalOpen:t,modalAction:r,selectedProduct:n};return m.jsxs(Ne.Provider,{value:l,children:[e,t&&n&&A.createPortal(m.jsx(ke,{isOpen:t,onClose:()=>{o()},initialMode:"login"}),document.body)]})},qe=h.createContext(void 0),Te=({children:e})=>{const{user:t}=H(),{showNotification:s}=X(),[r,i]=h.useState({isSecureConnection:!1,hasValidSession:!1,rateLimitStatus:{userCreation:!0,emailSending:!0}}),[n,a]=h.useState([]),[o,u]=h.useState("");h.useEffect(()=>{d(),f(),p();const e=setInterval(()=>{f(),y()},6e4);return()=>clearInterval(e)},[]);const d=()=>{const e="https:"===window.location.protocol||"localhost"===window.location.hostname||"127.0.0.1"===window.location.hostname;i(t=>c(l({},t),{isSecureConnection:e})),e||s({type:"warning",title:"Insecure Connection",message:"Please use HTTPS for secure data transmission."})},f=()=>{const e=!!t&&!!t.id;i(t=>c(l({},t),{hasValidSession:e}))},p=()=>{const e=btoa(Math.random().toString()).substr(10,32);u(e),sessionStorage.setItem("csrf_token",e)},g=e=>{a(t=>[...t,e]),"permission_denied"!==e.type&&"suspicious_activity"!==e.type||s({type:"error",title:"Access Denied",message:"You do not have permission to perform this action."})},y=()=>{a(e=>e.slice(-100))},w={isSecureConnection:r.isSecureConnection,hasValidSession:r.hasValidSession,rateLimitStatus:r.rateLimitStatus,checkPermission:(e,s)=>{if(!t)return g({type:"permission_denied",action:e,resource:s,details:{reason:"No authenticated user"},timestamp:new Date}),!1;const r=t.role,i={user_management:{create:["admin"],read:["admin","seller"],update:["admin"],delete:["admin"],bulk_operations:["admin"]},email_operations:{send_welcome:["admin"],send_confirmation:["admin"],resend_confirmation:["admin"]},system_settings:{read:["admin"],update:["admin"]}}[s||"user_management"];if(!i)return!1;const n=i[e];if(!n)return!1;const a=n.includes(r);return a||g({type:"permission_denied",action:e,resource:s,details:{userRole:r,requiredRoles:n},timestamp:new Date}),a},logSecurityEvent:g,validateCSRF:e=>e===sessionStorage.getItem("csrf_token")&&e===o};return m.jsx(qe.Provider,{value:w,children:e})},Me=()=>{const e=h.useContext(qe);if(!e)throw new Error("useSecurity must be used within a SecurityProvider");return e},Ae=()=>{const[e,t]=h.useState({isOnline:navigator.onLine,isSlowConnection:!1,connectionType:"unknown",effectiveType:"unknown",downlink:0,rtt:0});return h.useEffect(()=>{const e=()=>{const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;t({isOnline:navigator.onLine,isSlowConnection:"2g"===(null==e?void 0:e.effectiveType)||"slow-2g"===(null==e?void 0:e.effectiveType),connectionType:(null==e?void 0:e.type)||"unknown",effectiveType:(null==e?void 0:e.effectiveType)||"unknown",downlink:(null==e?void 0:e.downlink)||0,rtt:(null==e?void 0:e.rtt)||0})},s=()=>e(),r=()=>e(),i=()=>e();window.addEventListener("online",s),window.addEventListener("offline",r);const n=navigator.connection;return n&&n.addEventListener("change",i),e(),()=>{window.removeEventListener("online",s),window.removeEventListener("offline",r),n&&n.removeEventListener("change",i)}},[]),e};new class{constructor(e={}){u(this,"failures",0),u(this,"lastFailureTime",0),u(this,"state","closed"),u(this,"config"),u(this,"halfOpenSuccesses",0),u(this,"metrics",{requestCount:0,successCount:0,failureCount:0,averageResponseTime:0,bandwidthUsage:0,retryCount:0,circuitBreakerEvents:0}),u(this,"failureTimestamps",[]),this.config=l({failureThreshold:5,resetTimeout:6e4,monitoringPeriod:3e5,halfOpenAttempts:3},e)}execute(e){return d(this,null,function*(){this.metrics.requestCount++;const t=Date.now();if("open"===this.state){if(!(Date.now()-this.lastFailureTime>this.config.resetTimeout))throw new Error("Circuit breaker is open - service unavailable");this.state="half-open",this.halfOpenSuccesses=0,this.metrics.circuitBreakerEvents++}try{const s=yield e();"half-open"===this.state?(this.halfOpenSuccesses++,this.halfOpenSuccesses>=this.config.halfOpenAttempts&&(this.state="closed",this.failures=0,this.failureTimestamps=[],this.metrics.circuitBreakerEvents++)):this.metrics.successCount++;const r=Date.now()-t;return this.metrics.averageResponseTime=(this.metrics.averageResponseTime*(this.metrics.successCount-1)+r)/this.metrics.successCount,s}catch(s){this.failures++,this.lastFailureTime=Date.now(),this.failureTimestamps.push(this.lastFailureTime),this.metrics.failureCount++,this.metrics.circuitBreakerEvents++;const e=Date.now()-this.config.monitoringPeriod;this.failureTimestamps=this.failureTimestamps.filter(t=>t>e);const t=this.failureTimestamps.length;throw(this.failures>=this.config.failureThreshold||"half-open"===this.state||t>=this.config.failureThreshold&&"closed"===this.state)&&(this.state="open"),s}})}getState(){return{state:this.state,failures:this.failures,lastFailureTime:this.lastFailureTime,halfOpenSuccesses:this.halfOpenSuccesses,metrics:l({},this.metrics),recentFailureRate:this.failureTimestamps.length/(this.config.monitoringPeriod/1e3/60)}}reset(){this.state="closed",this.failures=0,this.lastFailureTime=0,this.halfOpenSuccesses=0,this.failureTimestamps=[]}getMetrics(){return l({},this.metrics)}}({failureThreshold:5,resetTimeout:6e4,monitoringPeriod:3e5,halfOpenAttempts:3}),new class{constructor(){u(this,"queue",[]),u(this,"isProcessing",!1),u(this,"maxRetries",3),u(this,"maxAge",864e5),u(this,"bandwidthThreshold",.5),u(this,"persistenceKey","offline-request-queue"),this.loadPersistedRequests(),window.addEventListener("online",()=>{this.processQueue()}),window.addEventListener("offline",()=>{this.persistQueue()}),setInterval(()=>{this.cleanupOldRequests()},6e4)}enqueue(e){return d(this,arguments,function*(e,t="normal",s=[],r=!1,i){return new Promise((n,a)=>{const o=`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,l=["critical","high","normal","low","background"],c=this.queue.findIndex(e=>l.indexOf(e.priority)>l.indexOf(t)),u={id:o,request:e,resolve:n,reject:a,timestamp:Date.now(),retries:0,priority:t,tags:s,persist:r,data:i};-1===c?this.queue.push(u):this.queue.splice(c,0,u),navigator.onLine?this.processQueue():r&&this.persistQueue()})})}processQueue(){return d(this,null,function*(){if(this.isProcessing||!navigator.onLine||0===this.queue.length)return;this.isProcessing=!0;const e=["critical","high","normal","low","background"];this.queue.sort((t,s)=>e.indexOf(t.priority)-e.indexOf(s.priority));const t=this.queue.filter(e=>"critical"===e.priority||"high"===e.priority),s=this.queue.filter(e=>"critical"!==e.priority&&"high"!==e.priority),r=(e,t=3)=>d(this,null,function*(){for(let s=0;s<e.length;s+=t){const r=e.slice(s,s+t);yield Promise.all(r.map(e=>d(this,null,function*(){try{const t=yield e.request();e.resolve(t),this.queue=this.queue.filter(t=>t.id!==e.id)}catch(t){e.retries++,e.retries<this.maxRetries?(e.priority=this.downgradePriority(e.priority),this.queue=this.queue.filter(t=>t.id!==e.id),this.queue.push(e)):(e.reject(t),this.queue=this.queue.filter(t=>t.id!==e.id))}})))}});t.length>0&&(yield r(t,3)),s.length>0&&(yield r(s,2)),this.isProcessing=!1,this.queue.length>0&&this.persistQueue()})}downgradePriority(e){const t=["critical","high","normal","low","background"],s=t.indexOf(e);if(s>=0&&s<t.length-1){const r=t[s+1];return null!=r?r:e}return e}cleanupOldRequests(){const e=Date.now();this.queue.length;this.queue=this.queue.filter(t=>{const s=e-t.timestamp>this.maxAge;return s&&t.reject(new Error("Request expired")),!s}),this.queue.length}getQueueStatus(){return{queueLength:this.queue.length,isProcessing:this.isProcessing,oldestRequest:this.queue.length>0&&this.queue[0]?this.queue[0].timestamp:null,priorityBreakdown:this.getPriorityBreakdown(),persistedRequests:this.queue.filter(e=>e.persist).length}}getPriorityBreakdown(){const e={critical:0,high:0,normal:0,low:0,background:0};return this.queue.forEach(t=>{e[t.priority]++}),e}clearQueue(){this.queue.forEach(e=>{e.reject(new Error("Queue cleared"))}),this.queue=[],this.clearPersistedQueue()}cancelRequestsByTag(e){const t=this.queue.length;this.queue=this.queue.filter(t=>!(t&&t.tags&&t.tags.includes(e))||(t.reject(new Error(`Request cancelled by tag: ${e}`)),!1)),t!==this.queue.length&&this.queue.some(e=>e.persist)&&this.persistQueue()}setBandwidthThreshold(e){this.bandwidthThreshold=e}persistQueue(){try{const e=this.queue.filter(e=>e.persist).map(e=>({id:e.id,timestamp:e.timestamp,retries:e.retries,priority:e.priority,tags:e.tags,data:e.data}));e.length>0?localStorage.setItem(this.persistenceKey,JSON.stringify(e)):this.clearPersistedQueue()}catch(e){}}loadPersistedRequests(){try{const e=localStorage.getItem(this.persistenceKey);if(e){JSON.parse(e)}}catch(e){}}clearPersistedQueue(){try{localStorage.removeItem(this.persistenceKey)}catch(e){}}sync(){return d(this,null,function*(){navigator.onLine&&(yield this.processQueue())})}};const Oe=new class{constructor(){u(this,"pendingRequests",new Map)}deduplicate(e,t){return d(this,null,function*(){if(this.pendingRequests.has(e))return this.pendingRequests.get(e);const s=t().finally(()=>{this.pendingRequests.delete(e)});return this.pendingRequests.set(e,s),s})}clear(){this.pendingRequests.clear()}},Ie=h.createContext(void 0),Le=({children:e,showStatusBar:t=!0,enableGracefulDegradation:s=!0})=>{const r=Ae(),i=(()=>{const e=Ae(),[t,s]=h.useState("none");return h.useEffect(()=>{e.isOnline?e.isSlowConnection||e.downlink<.5?s("partial"):s("none"):s("full")},[e]),{networkStatus:e,degradationLevel:t,shouldLoadImages:"full"!==t,shouldLoadAnimations:"none"===t,shouldUseOptimizedQueries:"none"!==t,shouldShowOfflineMessage:"full"===t,shouldReduceImageQuality:"none"!==t}})(),[n,a]=h.useState(!1),[o,l]=h.useState("offline");h.useEffect(()=>{r.isOnline?r.isSlowConnection?(l("slow"),a(!0)):n&&"offline"===o?(l("restored"),setTimeout(()=>a(!1),3e3)):"slow"===o&&a(!1):(l("offline"),a(!0))},[r.isOnline,r.isSlowConnection]);const c=()=>d(null,null,function*(){try{JSON.parse(localStorage.getItem("failedErrorReports")||"[]").length>0&&localStorage.removeItem("failedErrorReports")}catch(e){}}),u={isOnline:r.isOnline,isSlowConnection:r.isSlowConnection,connectionType:r.connectionType,degradationLevel:s?i.degradationLevel:"none",shouldLoadImages:!s||i.shouldLoadImages,shouldLoadAnimations:!s||i.shouldLoadAnimations,shouldUseOptimizedQueries:!!s&&i.shouldUseOptimizedQueries,retryFailedRequests:c};return m.jsxs(Ie.Provider,{value:u,children:[e,t&&m.jsx(m.Fragment,{children:n&&m.jsx(De,{config:(()=>{switch(o){case"offline":return{icon:m.jsx(I,{className:"h-5 w-5"}),title:"You're offline",message:"Some features may not work properly. We'll retry when you're back online.",bgColor:"bg-red-500",textColor:"text-white"};case"slow":return{icon:m.jsx(O,{className:"h-5 w-5"}),title:"Slow connection detected",message:"We've optimized the interface for better performance.",bgColor:"bg-orange-500",textColor:"text-white"};case"restored":return{icon:m.jsx(w,{className:"h-5 w-5"}),title:"Connection restored",message:"All features are now available.",bgColor:"bg-green-500",textColor:"text-white"};default:return null}})(),onRetry:c,onDismiss:()=>a(!1),showRetry:"offline"===o})})]})},De=({config:e,onRetry:t,onDismiss:s,showRetry:r})=>e?m.jsx(motion.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},exit:{opacity:0,y:-50},className:`fixed top-0 left-0 right-0 ${e.bgColor} ${e.textColor} p-3 z-50 shadow-lg`,children:m.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[e.icon,m.jsxs("div",{children:[m.jsx("div",{className:"font-medium text-sm",children:e.title}),m.jsx("div",{className:"text-xs opacity-90",children:e.message})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[r&&m.jsx("button",{onClick:t,className:"bg-white bg-opacity-20 hover:bg-opacity-30 px-3 py-1 rounded text-sm transition-colors",children:"Retry"}),m.jsx("button",{onClick:s,className:"bg-white bg-opacity-20 hover:bg-opacity-30 p-1 rounded transition-colors",children:""})]})]})}):null,Fe=()=>{const e=(()=>{const e=h.useContext(Ie);if(!e)throw new Error("useNetwork must be used within a NetworkStatusProvider");return e})();return c(l({},e),{getImageProps:(t,s)=>e.shouldLoadImages?{src:t,alt:s,loading:"lazy"}:{src:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjAwIiBoZWlnaHQ9IjIwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48cmVjdCB3aWR0aD0iMTAwJSIgaGVpZ2h0PSIxMDAlIiBmaWxsPSIjZjNmNGY2Ii8+PHRleHQgeD0iNTAlIiB5PSI1MCUiIGZvbnQtZmFtaWx5PSJBcmlhbCwgc2Fucy1zZXJpZiIgZm9udC1zaXplPSIxNCIgZmlsbD0iIzk5YTNhZiIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZHk9Ii4zZW0iPkltYWdlPC90ZXh0Pjwvc3ZnPg==",alt:`${s} (Image loading disabled)`,loading:"lazy"},getAnimationProps:()=>e.shouldLoadAnimations?{}:{initial:!1,animate:!1,transition:{duration:0}},getQueryConfig:()=>e.shouldUseOptimizedQueries?{staleTime:3e5,cacheTime:6e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0}:{staleTime:0,cacheTime:3e5,refetchOnWindowFocus:!1,refetchOnReconnect:!0}})},ze=h.memo(({children:e})=>m.jsx(B,{children:m.jsx(Se,{children:m.jsx(ee,{children:m.jsx(W,{children:m.jsx(Te,{children:m.jsx(Pe,{children:m.jsx(ce,{children:m.jsx(re,{children:m.jsx(ae,{children:m.jsx(he,{children:m.jsx(pe,{children:m.jsx(Le,{children:e})})})})})})})})})})})}));ze.displayName="CombinedProvider";const $e=new class{constructor(e={}){u(this,"config"),u(this,"activeRequests",new Map),u(this,"requestQueue",[]),u(this,"metrics",{activeRequests:0,queuedRequests:0,completedRequests:0,failedRequests:0,bandwidthUsage:0,memoryUsage:0,averageResponseTime:0,requestDistribution:{critical:0,high:0,normal:0,low:0,background:0},successRate:100,retryCount:0}),u(this,"isProcessing",!1),u(this,"deduplicator"),u(this,"requestBundles",new Map),this.config=l({maxConcurrentRequests:6,enableDeduplication:!0,enablePrefetching:!0},e),this.deduplicator=Oe,setInterval(()=>{this.cleanupCompletedRequests()},3e4)}addRequest(e){return d(this,null,function*(){const t=l({id:`req_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,retryCount:0,maxRetries:3,timeout:3e4},e);return this.metrics.requestDistribution[t.priority]=(this.metrics.requestDistribution[t.priority]||0)+1,new Promise((e,s)=>{t.onSuccess=e,t.onError=s,this.config.enableDeduplication&&t.dedupKey?this.deduplicator.deduplicate(t.dedupKey,()=>this.processRequest(t)).then(e).catch(s):this.enqueueRequest(t)})})}enqueueRequest(e){const t=["critical","high","normal","low","background"],s=this.requestQueue.findIndex(s=>t.indexOf(s.priority)>t.indexOf(e.priority));-1===s?this.requestQueue.push(e):this.requestQueue.splice(s,0,e),this.metrics.queuedRequests=this.requestQueue.length,this.processQueue()}processQueue(){return d(this,null,function*(){if(!(this.isProcessing||this.activeRequests.size>=this.config.maxConcurrentRequests)){for(this.isProcessing=!0;this.requestQueue.length>0&&this.activeRequests.size<this.config.maxConcurrentRequests;){const e=this.requestQueue.shift();if(e.dependencies.length>0){if(!e.dependencies.every(e=>!this.activeRequests.has(e))){this.requestQueue.unshift(e);continue}}this.activeRequests.set(e.id,e),this.metrics.activeRequests=this.activeRequests.size,this.metrics.queuedRequests=this.requestQueue.length,this.processRequest(e).catch(t=>{var s;null==(s=e.onError)||s.call(e,t)})}this.isProcessing=!1}})}processRequest(e){return d(this,null,function*(){var t,s;const r=Date.now();try{const s=new Promise((t,s)=>{setTimeout(()=>s(new Error(`Request timeout after ${e.timeout}ms`)),e.timeout)}),i=yield Promise.race([this.executeRequest(e),s]),n=Date.now()-r;this.updateMetrics(n,!0),this.activeRequests.delete(e.id),this.metrics.activeRequests=this.activeRequests.size,this.metrics.completedRequests++;const a=this.metrics.completedRequests+this.metrics.failedRequests;return a>0&&(this.metrics.successRate=this.metrics.completedRequests/a*100),null==(t=e.onSuccess)||t.call(e,i),i}catch(i){const t=Date.now()-r;if(this.updateMetrics(t,!1),!(e.retryCount<e.maxRetries)){this.activeRequests.delete(e.id),this.metrics.activeRequests=this.activeRequests.size,this.metrics.failedRequests++;const t=this.metrics.completedRequests+this.metrics.failedRequests;throw t>0&&(this.metrics.successRate=this.metrics.completedRequests/t*100),null==(s=e.onError)||s.call(e,i),i}{e.retryCount++,this.metrics.retryCount++;const t=Math.min(1e3*Math.pow(2,e.retryCount),1e4);yield new Promise(e=>setTimeout(e,t)),this.enqueueRequest(c(l({},e),{priority:this.downgradePriority(e.priority)}))}}this.processQueue()})}executeRequest(e){return d(this,null,function*(){try{if(e.url&&(e.url.includes(".jpg")||e.url.includes(".png")||e.url.includes(".webp")||e.url.includes(".avif"))){const t=yield fetch(e.url);if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return t.json()}const t=yield fetch(e.url,{method:"GET",headers:{"Content-Type":"application/json"}});if(!t.ok)throw new Error(`HTTP ${t.status}: ${t.statusText}`);return t.json()}catch(t){throw t}})}updateMetrics(e,t){this.metrics.averageResponseTime=(this.metrics.averageResponseTime*(this.metrics.completedRequests+this.metrics.failedRequests-1)+e)/(this.metrics.completedRequests+this.metrics.failedRequests);const s=this.metrics.completedRequests+this.metrics.failedRequests;s>0&&(this.metrics.successRate=this.metrics.completedRequests/s*100)}downgradePriority(e){const t=["critical","high","normal","low","background"],s=t.indexOf(e);return s>=0&&s<t.length-1?t[s+1]:e}cancelRequestsByTag(e){this.requestQueue=this.requestQueue.filter(t=>{var s;return!t.tags.includes(e)||(null==(s=t.onError)||s.call(t,new Error(`Request cancelled by tag: ${e}`)),!1)}),this.activeRequests.forEach((t,s)=>{var r;t.tags.includes(e)&&(null==(r=t.onError)||r.call(t,new Error(`Request cancelled by tag: ${e}`)),this.activeRequests.delete(s))}),this.metrics.queuedRequests=this.requestQueue.length,this.metrics.activeRequests=this.activeRequests.size}bundleRequests(e,t,s=3){return d(this,null,function*(){this.requestBundles.set(t,e);const r=[];for(let t=0;t<e.length;t+=s){const i=e.slice(t,t+s),n=yield Promise.all(i.map(e=>e()));r.push(...n)}return r})}prefetchResources(e){return d(this,null,function*(){if(!this.config.enablePrefetching)return;const t=e.map(e=>c(l({},e),{priority:"background",maxRetries:1}));yield Promise.all(t.map(e=>this.addRequest(e)))})}getMetrics(){return l({},this.metrics)}cleanupCompletedRequests(){this.metrics.completedRequests>1e3&&(this.metrics.completedRequests=Math.floor(this.metrics.completedRequests/2)),this.metrics.failedRequests>1e3&&(this.metrics.failedRequests=Math.floor(this.metrics.failedRequests/2))}clear(){this.activeRequests.forEach(e=>{var t;null==(t=e.onError)||t.call(e,new Error("Request cancelled: ResourceManager cleared"))}),this.requestQueue.forEach(e=>{var t;null==(t=e.onError)||t.call(e,new Error("Request cancelled: ResourceManager cleared"))}),this.activeRequests.clear(),this.requestQueue=[],this.metrics.activeRequests=0,this.metrics.queuedRequests=0}}({maxConcurrentRequests:6,enableDeduplication:!0,enablePrefetching:!0});const Be=(e=class{constructor(){u(this,"measurements",new Map),u(this,"metrics",[]),u(this,"maxMetrics",100)}static getInstance(){return e.instance||(e.instance=new e),e.instance}startMeasure(e){this.measurements.set(e,performance.now())}endMeasure(e,t=!0){const s=this.measurements.get(e);if(!s)return this.startMeasure(e),0;const r=performance.now()-s;return this.metrics.push({name:e,duration:r,timestamp:Date.now(),success:t}),this.metrics.length>this.maxMetrics&&this.metrics.shift(),this.measurements.delete(e),r}getStats(){const e=this.metrics.filter(e=>Date.now()-e.timestamp<3e5),t=e.filter(e=>e.success);if(0===e.length)return{totalRequests:0,successRate:0,averageTime:0,slowestOperation:null,fastestOperation:null};const s=t.map(e=>e.duration),r=s.reduce((e,t)=>e+t,0)/s.length,i=e.reduce((e,t)=>t.duration>e.duration?t:e),n=e.reduce((e,t)=>t.duration<e.duration?t:e);return{totalRequests:e.length,successRate:t.length/e.length*100,averageTime:r,slowestOperation:i,fastestOperation:n}}measureAsync(e,t){return d(this,null,function*(){this.startMeasure(e);try{const s=yield t();return this.endMeasure(e),s}catch(s){throw this.endMeasure(e),s}})}measureSync(e,t){this.startMeasure(e);try{const s=t();return this.endMeasure(e),s}catch(s){throw this.endMeasure(e),s}}},u(e,"instance"),e).getInstance();const _e=new class{constructor(){u(this,"metrics",[]),u(this,"observers",[]),u(this,"isEnabled",!0),u(this,"detailedMetrics",{}),this.initializeObservers(),this.trackPageLoad()}initializeObservers(){if("undefined"!=typeof window&&"PerformanceObserver"in window)try{const e=new PerformanceObserver(e=>{var t;const s=e.getEntries(),r=s[s.length-1];this.recordMetric("lcp",r.startTime,"timing",{element:(null==(t=r.element)?void 0:t.tagName)||"unknown"}),this.detailedMetrics.lcp=r.startTime});e.observe({entryTypes:["largest-contentful-paint"]}),this.observers.push(e);const t=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("fid",e.processingStart-e.startTime,"timing"),this.detailedMetrics.fid=e.processingStart-e.startTime})});t.observe({entryTypes:["first-input"]}),this.observers.push(t);const s=new PerformanceObserver(e=>{let t=0;e.getEntries().forEach(e=>{e.hadRecentInput||(t+=e.value)}),t>0&&(this.recordMetric("cls",t,"gauge"),this.detailedMetrics.cls=t)});s.observe({entryTypes:["layout-shift"]}),this.observers.push(s);const r=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("long_task",e.duration,"timing",{type:e.name}),this.detailedMetrics.longTasks=(this.detailedMetrics.longTasks||0)+1,this.detailedMetrics.longTaskDuration=(this.detailedMetrics.longTaskDuration||0)+e.duration})});r.observe({entryTypes:["longtask"]}),this.observers.push(r);const i=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{this.recordMetric("ttfb",e.responseStart-e.requestStart,"timing"),this.recordMetric("dom_content_loaded",e.domContentLoadedEventEnd-e.fetchStart,"timing"),this.recordMetric("load_complete",e.loadEventEnd-e.fetchStart,"timing"),this.detailedMetrics.ttfb=e.responseStart-e.requestStart})});i.observe({entryTypes:["navigation"]}),this.observers.push(i)}catch(e){this.isEnabled=!1}else this.isEnabled=!1}trackPageLoad(){"undefined"!=typeof window&&window.addEventListener("load",()=>{setTimeout(()=>{const e=performance.getEntriesByType("navigation")[0];e&&(this.recordMetric("ttfb",e.responseStart-e.requestStart,"timing"),this.recordMetric("dom_content_loaded",e.domContentLoadedEventEnd-e.fetchStart,"timing"),this.recordMetric("load_complete",e.loadEventEnd-e.fetchStart,"timing"),this.detailedMetrics.ttfb=e.responseStart-e.requestStart,this.detailedMetrics.domContentLoaded=e.domContentLoadedEventEnd-e.fetchStart,this.detailedMetrics.windowLoadTime=e.loadEventEnd-e.fetchStart,this.detailedMetrics.firstByteTime=e.responseStart-e.requestStart);performance.getEntriesByType("paint").forEach(e=>{this.recordMetric(e.name.replace("-","_"),e.startTime,"timing"),"first-contentful-paint"===e.name&&(this.detailedMetrics.fcp=e.startTime)});const t=performance.getEntriesByType("resource"),s=t.filter(e=>e.duration>1e3);this.recordMetric("slow_resources_count",s.length,"counter"),this.detailedMetrics.slowResourcesCount=s.length,this.detailedMetrics.totalResources=t.length,this.logPerformanceSummary()},1e3)})}recordMetric(e,t,s,r){if(!this.isEnabled)return;const i={name:e,value:t,timestamp:Date.now(),type:s,tags:r};this.metrics.push(i),this.checkPerformanceThresholds(i)}checkPerformanceThresholds(e){const t={lcp:2500,fid:100,cls:.1,ttfb:800,long_task:50,fcp:1800,image_load:3e3}[e.name];t&&e.value}logPerformanceSummary(){this.getPerformanceSummary()}getPerformanceSummary(){const e={},t=this.metrics.reduce((e,t)=>(e[t.name]||(e[t.name]=[]),e[t.name].push(t.value),e),{});return Object.entries(t).forEach(([t,s])=>{const r=s.reduce((e,t)=>e+t,0)/s.length,i=Math.max(...s),n=Math.min(...s);e[t]={average:Math.round(r),max:Math.round(i),min:Math.round(n),count:s.length}}),e}startTiming(e){const t=performance.now();return()=>{const s=performance.now()-t;this.recordMetric(e,s,"timing")}}trackComponentRender(e,t){this.recordMetric("component_render",t,"timing",{component:e})}trackDatabaseQuery(e,t,s){this.recordMetric("db_query",t,"timing",{query:e,success:s.toString()})}trackUserInteraction(e,t){this.recordMetric("user_interaction",t||1,"counter",{action:e})}trackImageLoad(e,t,s){this.recordMetric("image_load",t,"timing",{image:e,success:s.toString()}),s&&(this.detailedMetrics.imageLoadTime?this.detailedMetrics.imageLoadTime=(this.detailedMetrics.imageLoadTime+t)/2:this.detailedMetrics.imageLoadTime=t)}trackApiResponse(e,t,s){this.recordMetric("api_response",t,"timing",{endpoint:e,success:s.toString()}),s&&(this.detailedMetrics.apiResponseTime?this.detailedMetrics.apiResponseTime=(this.detailedMetrics.apiResponseTime+t)/2:this.detailedMetrics.apiResponseTime=t)}trackCachePerformance(e){this.recordMetric("cache_hit_rate",e,"gauge"),this.detailedMetrics.cacheHitRate=e}getAllMetrics(){return[...this.metrics]}getDetailedMetrics(){return l({},this.detailedMetrics)}clearMetrics(){this.metrics=[],this.detailedMetrics={}}destroy(){this.observers.forEach(e=>e.disconnect()),this.observers=[],this.metrics=[],this.detailedMetrics={}}},He=e=>{const t=L.useRef(0);return{startLoading:L.useCallback(()=>{t.current=performance.now()},[]),endLoading:L.useCallback(s=>{if(t.current){const r=performance.now()-t.current;_e.trackImageLoad(e,r,s),t.current=0}},[e])}},We=({href:e,children:t})=>m.jsx("a",{href:e,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-md focus:shadow-lg",onFocus:e=>e.currentTarget.classList.remove("sr-only"),onBlur:e=>e.currentTarget.classList.add("sr-only"),children:t}),Ue=Object.freeze(Object.defineProperty({__proto__:null,SkipLink:We,initializeAccessibility:()=>{var e;if(!document.querySelector("main")){const t=document.querySelector('#main-content, .main-content, [role="main"]');if(t&&"MAIN"!==t.tagName){const s=document.createElement("main");s.id="main-content",null==(e=t.parentNode)||e.insertBefore(s,t),s.appendChild(t)}}document.addEventListener("keydown",e=>{if("Escape"===e.key){document.querySelectorAll('[role="dialog"][aria-hidden="false"]').forEach(e=>{const t=e.querySelector('[data-close], [aria-label*="close"]');t&&t.click()})}})}},Symbol.toStringTag,{value:"Module"}));const Qe=new class{constructor(){u(this,"registration",null),u(this,"updateCheckInterval",null),this.setupUpdateChecking()}register(){return d(this,null,function*(){if(!this.isSupported())return null;try{return this.registration=yield navigator.serviceWorker.register("/sw.js",{scope:"/"}),this.registration.addEventListener("updatefound",()=>{var e;const t=null==(e=this.registration)?void 0:e.installing;t&&this.handleServiceWorkerUpdate(t)}),navigator.serviceWorker.addEventListener("message",e=>{this.handleServiceWorkerMessage(e)}),this.registration}catch(e){return null}})}unregister(){return d(this,null,function*(){if(!this.registration)return!1;try{const e=yield this.registration.unregister();return this.registration=null,this.updateCheckInterval&&(clearInterval(this.updateCheckInterval),this.updateCheckInterval=null),e}catch(e){return!1}})}update(){return d(this,null,function*(){if(this.registration)try{yield this.registration.update()}catch(e){}})}clearCache(){return d(this,null,function*(){return this.sendMessage("CLEAR_CACHE")})}getCacheStats(){return d(this,null,function*(){return(yield this.sendMessage("CACHE_STATS")).stats})}prefetchResources(e){return d(this,null,function*(){return this.sendMessage("PREFETCH_RESOURCES",{urls:e})})}isSupported(){return"serviceWorker"in navigator}getRegistration(){return this.registration}sendMessage(e,t){return d(this,null,function*(){if(!navigator.serviceWorker.controller)throw new Error("No service worker controller available");return new Promise((s,r)=>{const i=new MessageChannel;i.port1.onmessage=e=>{e.data.error?r(new Error(e.data.error)):s(e.data)},navigator.serviceWorker.controller.postMessage({type:e,payload:t},[i.port2])})})}handleServiceWorkerUpdate(e){e.addEventListener("statechange",()=>{"installed"===e.state&&navigator.serviceWorker.controller&&this.showUpdateNotification()})}handleServiceWorkerMessage(e){const{type:t,payload:s}=e.data;switch(t){case"CACHE_UPDATED":case"OFFLINE_READY":break;case"UPDATE_AVAILABLE":this.showUpdateNotification()}}showUpdateNotification(){window.dispatchEvent(new CustomEvent("sw-update-available",{detail:{registration:this.registration}}))}setupUpdateChecking(){this.updateCheckInterval=setInterval(()=>{this.registration&&this.update().catch(console.error)},18e5)}applyUpdate(){return d(this,null,function*(){this.registration&&this.registration.waiting&&(this.registration.waiting.postMessage({type:"SKIP_WAITING"}),window.location.reload())})}},Ve=new class{constructor(e){u(this,"sw"),this.sw=e}prefetchCriticalResources(){return d(this,null,function*(){const e=["/assets/css/index.css","/assets/js/vendor.js","/assets/js/main.js"];try{yield this.sw.prefetchResources(e)}catch(t){}})}prefetchRoute(e){return d(this,null,function*(){const t=this.getRouteResources(e);try{yield this.sw.prefetchResources(t)}catch(s){}})}getCacheHealth(){return d(this,null,function*(){try{const e=yield this.sw.getCacheStats(),t=[];let s=0;return Object.entries(e).forEach(([e,r])=>{s+=r.entryCount||0,r.entryCount>100&&t.push(`${e} cache has many entries (${r.entryCount})`),r.exists||t.push(`${e} cache is not properly initialized`)}),{totalSize:s,cacheStatus:e,recommendations:t}}catch(e){return{totalSize:0,cacheStatus:{},recommendations:["Failed to get cache statistics"]}}})}getRouteResources(e){return{"/products":["/api/products","/api/categories"],"/dashboard":["/api/dashboard/analytics","/api/user/profile"],"/checkout":["/api/payment/methods","/api/shipping/options"]}[e]||[]}}(Qe);"undefined"!=typeof window&&(window.addEventListener("load",()=>{Qe.register().then(e=>{e&&Ve.prefetchCriticalResources().catch(console.error)}).catch(console.error)}),window.addEventListener("online",()=>{Qe.update().catch(console.error)}),window.addEventListener("offline",()=>{}));const Ze=(e,t,s="csv")=>d(null,null,function*(){if("csv"===s){if(0===t.length)return;const s=Object.keys(t[0]),r=[s.join(","),...t.map(e=>s.map(t=>{const s=e[t];return"string"==typeof s&&(s.includes(",")||s.includes('"'))?`"${s.replace(/"/g,'""')}"`:s}).join(","))].join("\n"),i=new Blob([r],{type:"text/csv"}),n=URL.createObjectURL(i),a=document.createElement("a");a.href=n,a.download=`${e}_${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(n)}else{const s=JSON.stringify(t,null,2),r=new Blob([s],{type:"application/json"}),i=URL.createObjectURL(r),n=document.createElement("a");n.href=i,n.download=`${e}_${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)}}),Je=(e,t)=>d(null,null,function*(){return{success:!0}}),Ge=e=>{const t=[],s=[],r=(e=>{const t=[],s=[];if(!e)return t.push("Email is required"),{isValid:!1,errors:t,warnings:s};/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)||t.push("Please enter a valid email address"),e.length>254&&t.push("Email address is too long (maximum 254 characters)");const r=e.split("@")[0];r&&r.length>64&&t.push("Email local part is too long (maximum 64 characters)");const i=e.split("@")[1];i&&(i.length>253&&t.push("Email domain is too long (maximum 253 characters)"),/^[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(\.[a-zA-Z0-9]([a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/.test(i)||t.push("Email domain format is invalid"));const n={"gmial.com":"gmail.com","gmai.com":"gmail.com","yahooo.com":"yahoo.com","hotmial.com":"hotmail.com","outlok.com":"outlook.com"};return i&&n[i.toLowerCase()]&&s.push(`Did you mean ${n[i.toLowerCase()]}?`),{isValid:0===t.length,errors:t,warnings:s}})(e.email),i=(e=>{const t=[],s=[];return e?(e.length<2&&t.push("Name must be at least 2 characters long"),e.length>100&&t.push("Name is too long (maximum 100 characters)"),/^[a-zA-Z\s\-'\.]+$/.test(e)||t.push("Name can only contain letters, spaces, hyphens, and apostrophes"),e.includes("  ")&&s.push("Name contains multiple consecutive spaces"),(e.startsWith(" ")||e.endsWith(" "))&&s.push("Name has leading or trailing spaces"),{isValid:0===t.length,errors:t,warnings:s}):(t.push("Name is required"),{isValid:!1,errors:t,warnings:s})})(e.name),n=(e=>{const t=[];return e?(["admin","seller","customer"].includes(e.toLowerCase())||t.push("Invalid role. Must be admin, seller, or customer"),{isValid:0===t.length,errors:t}):(t.push("Role is required"),{isValid:!1,errors:t})})(e.role),a=(e=>{const t=[],s=[];if(!e)return{isValid:!0,errors:t,warnings:s};const r=e.replace(/\D/g,"");return r.length<10&&t.push("Phone number must be at least 10 digits"),r.length>15&&t.push("Phone number is too long (maximum 15 digits)"),/^[\+]?[1-9][\d]{0,15}$/.test(r)||t.push("Please enter a valid phone number"),{isValid:0===t.length,errors:t,warnings:s}})(e.phone||""),o=(e=>{const t=[],s=[];if(!e)return{isValid:!0,errors:t,warnings:s};const r=new Date(e),i=new Date;if(isNaN(r.getTime()))return t.push("Please enter a valid date"),{isValid:!1,errors:t,warnings:s};r>i&&t.push("Date of birth cannot be in the future");const n=new Date;n.setFullYear(n.getFullYear()-120),r<n&&t.push("Date of birth seems unrealistic (over 120 years ago)");const a=new Date;return a.setFullYear(a.getFullYear()-13),r>a&&s.push("User appears to be under 13 years old. Additional parental consent may be required."),{isValid:0===t.length,errors:t,warnings:s}})(e.dateOfBirth||"");return t.push(...r.errors),t.push(...i.errors),t.push(...n.errors),t.push(...a.errors),t.push(...o.errors),s.push(...r.warnings||[]),s.push(...i.warnings||[]),s.push(...a.warnings||[]),s.push(...o.warnings||[]),{isValid:0===t.length,errors:t,warnings:s}},Ye=e=>e?e.replace(/[<>]/g,"").replace(/javascript:/gi,"").replace(/on\w+=/gi,"").trim():"",Ke=()=>{const[e,t]=h.useState(()=>"undefined"==typeof window?{reducedMotion:!1,highContrast:!1,largeText:!1,screenReader:!1,keyboardNavigation:!1,focusVisible:!1,colorBlindness:"none"}:Xe());h.useEffect(()=>{const e=()=>{t(Xe())},s=[window.matchMedia("(prefers-reduced-motion: reduce)"),window.matchMedia("(prefers-contrast: high)"),window.matchMedia("(prefers-color-scheme: dark)")];return s.forEach(t=>{t.addEventListener("change",e)}),window.addEventListener("storage",e),()=>{s.forEach(t=>{t.removeEventListener("change",e)}),window.removeEventListener("storage",e)}},[]);return{preferences:e,updatePreference:h.useCallback((e,s)=>{t(t=>c(l({},t),{[e]:s}));try{const t=JSON.parse(localStorage.getItem("accessibility_preferences")||"{}");localStorage.setItem("accessibility_preferences",JSON.stringify(c(l({},t),{[e]:s})))}catch(r){}},[])}};function Xe(){const e={reducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)").matches,highContrast:window.matchMedia("(prefers-contrast: high)").matches,largeText:!1,screenReader:!1,keyboardNavigation:!1,focusVisible:!1,colorBlindness:"none"};e.screenReader=!!(window.navigator.userAgent.match(/NVDA|JAWS|VoiceOver|ORCA|Dragon/i)||window.speechSynthesis||window.speechSynthesis);try{const t=JSON.parse(localStorage.getItem("accessibility_preferences")||"{}");Object.assign(e,t)}catch(t){}return e}const et=()=>{const e=h.useRef(null);h.useEffect(()=>{if(!e.current){const t=document.createElement("div");t.setAttribute("aria-live","polite"),t.setAttribute("aria-atomic","true"),t.className="sr-only",t.style.cssText="\n        position: absolute !important;\n        width: 1px !important;\n        height: 1px !important;\n        padding: 0 !important;\n        margin: -1px !important;\n        overflow: hidden !important;\n        clip: rect(0, 0, 0, 0) !important;\n        white-space: nowrap !important;\n        border: 0 !important;\n      ",document.body.appendChild(t),e.current=t}return()=>{e.current&&document.body.contains(e.current)&&document.body.removeChild(e.current)}},[]);return{announce:h.useCallback((t,s="polite")=>{e.current&&(e.current.setAttribute("aria-live",s),e.current.textContent="",setTimeout(()=>{e.current&&(e.current.textContent=t)},100))},[])}},tt={checkAltText:(e=document.body)=>{const t=e.querySelectorAll("img");return Array.from(t).filter(e=>!e.alt&&!e.getAttribute("aria-label")&&!e.getAttribute("aria-labelledby")&&"presentation"!==e.getAttribute("role"))},checkFormLabels:(e=document.body)=>{const t=e.querySelectorAll("input, select, textarea");return Array.from(t).filter(e=>{var t;const s=e;return!(null==(t=s.labels)?void 0:t.length)&&!s.getAttribute("aria-label")&&!s.getAttribute("aria-labelledby")&&"hidden"!==s.type})},checkHeadingHierarchy:(e=document.body)=>{const t=Array.from(e.querySelectorAll("h1, h2, h3, h4, h5, h6")),s=[];let r=0;return t.forEach(e=>{const t=parseInt(e.tagName.charAt(1));t>r+1&&s.push({element:e,issue:`Heading level ${t} follows level ${r}, skipping levels`}),r=t}),s},generateReport:(e=document.body)=>({missingAltText:tt.checkAltText(e),missingFormLabels:tt.checkFormLabels(e),headingIssues:tt.checkHeadingHierarchy(e),timestamp:(new Date).toISOString()})},st={xs:320,sm:640,md:768,lg:1024,xl:1280,"2xl":1536,"3xl":1920,"4xl":2560},rt={xs:"100%",sm:"640px",md:"768px",lg:"1024px",xl:"1280px","2xl":"1536px","3xl":"1920px","4xl":"2560px"},it={xs:4,sm:8,md:12,lg:12,xl:12,"2xl":12,"3xl":16,"4xl":20},nt={xs:{base:4,scale:1},sm:{base:4,scale:1.2},md:{base:6,scale:1.4},lg:{base:8,scale:1.6},xl:{base:10,scale:1.8},"2xl":{base:12,scale:2},"3xl":{base:16,scale:2.2},"4xl":{base:20,scale:2.4}},at={xs:{base:14,scale:1},sm:{base:14,scale:1.1},md:{base:16,scale:1.2},lg:{base:16,scale:1.3},xl:{base:18,scale:1.4},"2xl":{base:18,scale:1.5},"3xl":{base:20,scale:1.6},"4xl":{base:22,scale:1.7}},ot=()=>{const[e,t]=h.useState(()=>"undefined"==typeof window?{width:1024,height:768,breakpoint:"lg",deviceType:"desktop",orientation:"landscape",pixelRatio:1,isTouch:!1,isPWA:!1,isRetina:!1,aspectRatio:1.33,safeAreaInsets:{top:0,right:0,bottom:0,left:0}}:lt()),s=h.useCallback(()=>{t(lt())},[]);h.useEffect(()=>{s();const e=function(e,t){let s;return(...r)=>{clearTimeout(s),s=setTimeout(()=>e.apply(null,r),t)}}(s,150);window.addEventListener("resize",e);const t=()=>{setTimeout(s,100)};window.addEventListener("orientationchange",t);const r=()=>{s()};return window.addEventListener("beforeinstallprompt",r),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",t),window.removeEventListener("beforeinstallprompt",r)}},[s]);const r=h.useCallback(t=>e.breakpoint===t,[e.breakpoint]),i=h.useCallback(t=>e.width>=st[t],[e.width]),n=h.useCallback(t=>e.width<st[t],[e.width]),a=h.useCallback(t=>{const s=Object.keys(st).sort((e,t)=>st[e]-st[t]);for(let r=s.length-1;r>=0;r--){const i=s[r];if(e.width>=st[i]&&void 0!==t[i])return t[i]}for(const e of s)if(void 0!==t[e])return t[e]},[e.width]),o=h.useCallback(()=>rt[e.breakpoint],[e.breakpoint]),u=h.useCallback(()=>it[e.breakpoint],[e.breakpoint]),d=h.useCallback((t=1)=>{const s=nt[e.breakpoint];return s.base*s.scale*t},[e.breakpoint]),m=h.useCallback((t=1)=>{const s=at[e.breakpoint];return s.base*s.scale*t},[e.breakpoint]);return c(l({},e),{isBreakpoint:r,isBreakpointUp:i,isBreakpointDown:n,getResponsiveValue:a,getContainerSize:o,getGridColumns:u,getSpacing:d,getTypographySize:m,isMobile:"mobile"===e.deviceType,isTablet:"tablet"===e.deviceType,isDesktop:"desktop"===e.deviceType,isPortrait:"portrait"===e.orientation,isLandscape:"landscape"===e.orientation})};function lt(){const e=window.innerWidth,t=window.innerHeight,s=window.devicePixelRatio||1,r=e/t;let i="xs";const n=Object.entries(st);for(const[o,l]of n.reverse())if(e>=l){i=o;break}let a="desktop";e<st.md?a="mobile":e<st.lg?a="tablet":e>=st["3xl"]&&(a="tv");return{width:e,height:t,breakpoint:i,deviceType:a,orientation:e>t?"landscape":"portrait",pixelRatio:s,isTouch:"ontouchstart"in window||navigator.maxTouchPoints>0,isPWA:window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||!0===window.navigator.standalone,isRetina:s>1,aspectRatio:r,safeAreaInsets:{top:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-top")||"0"),right:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-right")||"0"),bottom:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-bottom")||"0"),left:parseInt(getComputedStyle(document.documentElement).getPropertyValue("--safe-area-inset-left")||"0")}}}const ct=e=>{const{getGridColumns:t,getResponsiveValue:s}=ot(),r=h.useMemo(()=>e&&s(e)||t(),[e,s,t]),i=h.useCallback(e=>"number"==typeof e?Math.min(e,r):Math.min(s(e)||1,r),[r,s]),n=h.useCallback(e=>i(e)/r*100+"%",[i,r]);return{gridColumns:r,getColumnSpan:i,getColumnWidth:n}};export{ze as C,We as S,He as a,H as b,le as c,ne as d,se as e,de as f,$e as g,Ze as h,Je as i,Me as j,X as k,Ke as l,et as m,ot as n,tt as o,ct as p,Ee as q,Be as r,Ye as s,Re as t,Fe as u,Ge as v,fe as w,$ as x,Y as y,Ue as z};
