var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(s,t,a)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:a}):s[t]=a,n=(e,s)=>{for(var t in s||(s={}))r.call(s,t)&&i(e,t,s[t]);if(a)for(var t of a(s))l.call(s,t)&&i(e,t,s[t]);return e},o=(e,a)=>s(e,t(a)),d=(e,s,t)=>i(e,"symbol"!=typeof s?s+"":s,t),c=(e,s,t)=>new Promise((a,r)=>{var l=e=>{try{n(t.next(e))}catch(s){r(s)}},i=e=>{try{n(t.throw(e))}catch(s){r(s)}},n=e=>e.done?a(e.value):Promise.resolve(e.value).then(l,i);n((t=t.apply(e,s)).next())});import{R as m,j as x,W as u,k as h,C as g,a as p,X as y,r as b,T as f,S as j,l as N,D as v,H as w,m as C,n as k,o as S,p as P,q as _,s as E,t as A,G as T,u as F,v as D,w as O,B as R,x as M,y as L,z as I,J as $,K as U,N as K,O as z,Q as B,V,Y as W,Z as H,_ as G,$ as q,a0 as J,U as Z,a1 as Y,i as Q,a2 as X,a3 as ee,a4 as se,a5 as te,a6 as ae,a7 as re,a8 as le,a9 as ie,aa as ne,ab as oe,ac as de,d as ce,ad as me,ae as xe,af as ue,ag as he,M as ge,P as pe,e as ye,E as be,ah as fe,ai as je,aj as Ne,ak as ve,al as we,am as Ce,an as ke,ao as Se,ap as Pe,aq as _e,ar as Ee,as as Ae,at as Te,au as Fe,av as De,aw as Oe,I as Re,ax as Me,ay as Le,az as Ie,aA as $e,aB as Ue,aC as Ke,aD as ze,aE as Be,aF as Ve,aG as We,aH as He,aI as Ge}from"./vendor-react-CeB5Z5vL.js";import{u as qe,a as Je,g as Ze,b as Ye,c as Qe,d as Xe,e as es,f as ss,h as ts,i as as,j as rs,k as ls,v as is,s as ns,l as os,m as ds,n as cs,o as ms,p as xs,q as us}from"./app-core-KQJ4Bmso.js";import{P as hs}from"./components-product-Bui-kWM1.js";import{m as gs,A as ps}from"./vendor-animations-BBvRWpqR.js";import{s as ys}from"./vendor-db-Dgdc4Uw_.js";const bs={},fs=function(e,s,t){let a=Promise.resolve();if(s&&s.length>0){let e=function(e){return Promise.all(e.map(e=>Promise.resolve(e).then(e=>({status:"fulfilled",value:e}),e=>({status:"rejected",reason:e}))))};document.getElementsByTagName("link");const t=document.querySelector("meta[property=csp-nonce]"),r=(null==t?void 0:t.nonce)||(null==t?void 0:t.getAttribute("nonce"));a=e(s.map(e=>{if((e=function(e){return"/"+e}(e))in bs)return;bs[e]=!0;const s=e.endsWith(".css"),t=s?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${e}"]${t}`))return;const a=document.createElement("link");return a.rel=s?"stylesheet":"modulepreload",s||(a.as="script"),a.crossOrigin="",a.href=e,r&&a.setAttribute("nonce",r),document.head.appendChild(a),s?new Promise((s,t)=>{a.addEventListener("load",s),a.addEventListener("error",()=>t(new Error(`Unable to preload CSS for ${e}`)))}):void 0}))}function r(e){const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=e,window.dispatchEvent(s),!s.defaultPrevented)throw e}return a.then(s=>{for(const e of s||[])"rejected"===e.status&&r(e.reason);return e().catch(r)})},js=({product:e,className:s="",alt:t,size:a="medium",priority:r="normal",onError:l,onLoad:i})=>{var n;const[o,d]=m.useState(!1),[u,h]=m.useState(0),[g,p]=m.useState(!0),y=qe(),{startLoading:b,endLoading:f}=Je((null==(n=e.images)?void 0:n[u])||""),j=(()=>{if(e.images&&e.images.length>0){const s=e.images.filter(e=>e&&""!==e.trim()&&!e.includes("placeholder")&&(e.startsWith("http")||e.startsWith("/")));if(s.length>0)return s[u]||s[0]}return null})(),N=!j||o||!y.shouldLoadImages;return m.useEffect(()=>{var s;j&&y.shouldLoadImages&&(s=j,c(null,null,function*(){if(s)try{b(),yield Ze.addRequest({url:s,priority:r,tags:[`product-${e.id}`,"image"],dependencies:[],dedupKey:`image-${s}`,maxRetries:2,timeout:1e4}),f(!0)}catch(t){f(!1)}}))},[j,r,y.shouldLoadImages]),m.useEffect(()=>{y.shouldLoadImages||p(!1)},[y.shouldLoadImages]),x.jsxs(x.Fragment,{children:[g&&y.shouldLoadImages&&x.jsx("div",{className:`bg-gray-200 animate-pulse ${s}`}),x.jsx("img",{src:N?(e=>{const s=e.charAt(0).toUpperCase(),t=[{bg:"#E3F2FD",text:"#1976D2"},{bg:"#F3E5F5",text:"#7B1FA2"},{bg:"#E8F5E8",text:"#388E3C"},{bg:"#FFF3E0",text:"#F57C00"},{bg:"#FCE4EC",text:"#C2185B"},{bg:"#E0F2F1",text:"#00796B"},{bg:"#FFF8E1",text:"#F9A825"},{bg:"#EFEBE9",text:"#5D4037"}],r=Math.abs(s.charCodeAt(0))%t.length,l=r>=0&&r<t.length?t[r]:t[0],i={small:{width:100,height:100,fontSize:32},medium:{width:200,height:200,fontSize:64},large:{width:400,height:400,fontSize:128}}[a],n=(null==l?void 0:l.bg)||"#E3F2FD",o=(null==l?void 0:l.text)||"#1976D2",d=`\n      <svg width="${i.width}" height="${i.height}" xmlns="http://www.w3.org/2000/svg">\n        <rect width="100%" height="100%" fill="${n}"/>\n        <text x="50%" y="50%" font-family="system-ui, -apple-system, sans-serif" \n              font-size="${i.fontSize}" font-weight="600" \n              fill="${o}" text-anchor="middle" \n              dominant-baseline="central">${s}</text>\n      </svg>\n    `;return`data:image/svg+xml;base64,${btoa(d)}`})(e.name):j,alt:t||e.name,className:s,onError:()=>{f(!1),o||(d(!0),p(!1),l&&l())},onLoad:()=>{f(!0),p(!1),i&&i()},loading:"critical"===r?"eager":"lazy",style:{display:g&&y.shouldLoadImages?"none":"block"}})]})},Ns=({size:e="medium",text:s,subText:t,overlay:a=!1,className:r="",stage:l="loading",progress:i=0,showProgress:n=!1,onRetry:o})=>{const d={small:"h-4 w-4",medium:"h-10 w-10",large:"h-12 w-12"},c=x.jsx("div",{className:`flex flex-col items-center justify-center py-8 ${r}`,children:x.jsxs("div",{className:"flex flex-col items-center",children:[(()=>{switch(l){case"success":return x.jsx(p,{className:`${d[e]} text-green-500`});case"error":return x.jsx(g,{className:`${d[e]} text-red-500`});case"offline":return x.jsx(u,{className:`${d[e]} text-gray-500`});default:return x.jsx(h,{className:`${d[e]} text-primary`})}})(),n&&"loading"===l&&x.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full mt-4 overflow-hidden",children:x.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${i}%`}})}),s&&x.jsx("p",{className:`mt-4 text-sm font-medium ${(()=>{switch(l){case"success":return"text-green-600";case"error":return"text-red-600";default:return"text-gray-600"}})()}`,children:s}),t&&x.jsx("p",{className:"mt-2 text-xs text-gray-500 text-center max-w-xs",children:t}),"error"===l&&o&&x.jsx("button",{onClick:o,className:"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm font-medium",children:"Try Again"}),"offline"===l&&x.jsxs("div",{className:"mt-4 flex items-center text-xs text-gray-500",children:[x.jsx(u,{className:"h-3 w-3 mr-1"}),x.jsx("span",{children:"Check your internet connection"})]})]})});return a?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:c})}):c},vs=({isOpen:e,onClose:s,title:t,children:a,size:r="md"})=>(m.useEffect(()=>{const t=t=>{"Escape"===t.key&&e&&s()};return e&&(document.addEventListener("keydown",t),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",t),document.body.style.overflow="unset"}},[e,s]),x.jsx(x.Fragment,{children:e&&x.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto backdrop-blur-sm",role:"dialog","aria-modal":"true","aria-labelledby":"modal-title",children:x.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60",onClick:s,"aria-hidden":"true"}),x.jsxs("div",{className:`relative bg-white rounded-2xl shadow-2xl w-full mx-4 border border-neutral-200 ${{sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl"}[r]}`,children:[x.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-neutral-200",children:[x.jsx("h2",{id:"modal-title",className:"text-xl font-semibold text-neutral-900 font-luxury",children:t}),x.jsx("button",{onClick:s,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors duration-200","aria-label":"Close modal",children:x.jsx(y,{className:"h-5 w-5 text-neutral-600"})})]}),x.jsx("div",{className:"p-6",children:a})]})]})})}));class ws extends b.Component{constructor(e){super(e),d(this,"retryTimeoutId",null),d(this,"reportError",(e,s,t)=>c(this,null,function*(){try{this.setState({isReported:!0})}catch(e){}})),d(this,"handleRetry",()=>{const{maxRetries:e=3}=this.props;if(this.state.retryCount>=e)return;this.setState({isRetrying:!0,retryCount:this.state.retryCount+1});const s=Math.min(1e3*Math.pow(2,this.state.retryCount),1e4);this.retryTimeoutId=setTimeout(()=>{this.setState({hasError:!1,error:null,errorInfo:null,isRetrying:!1,showDetails:!1})},s)}),d(this,"handleGoHome",()=>{window.location.href="/dashboard"}),d(this,"handleReportError",()=>{if(this.state.error&&this.state.errorInfo){const e={errorId:this.state.errorId,errorType:this.state.errorType,context:this.props.context,timestamp:(new Date).toISOString(),url:window.location.href,userId:this.getCurrentUserId()};this.reportError(this.state.error,this.state.errorInfo,e)}}),d(this,"handleCopyError",()=>c(this,null,function*(){if(this.state.error){const s=`Error ID: ${this.state.errorId}\nType: ${this.state.errorType}\nMessage: ${this.state.error.message}\nStack: ${this.state.error.stack}\nTimestamp: ${(new Date).toISOString()}\nURL: ${window.location.href}`;try{yield navigator.clipboard.writeText(s)}catch(e){}}})),d(this,"toggleDetails",()=>{this.setState({showDetails:!this.state.showDetails})}),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0,isRetrying:!1,errorId:"",errorType:"unknown",isReported:!1,showDetails:!1}}componentWillUnmount(){this.retryTimeoutId&&clearTimeout(this.retryTimeoutId)}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null,errorId:`error_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,errorType:ws.classifyError(e),isReported:!1,showDetails:!1}}static classifyError(e){var s;const t=e.message.toLowerCase(),a=(null==(s=e.stack)?void 0:s.toLowerCase())||"";return t.includes("network")||t.includes("fetch")||t.includes("connection")?"network":t.includes("database")||t.includes("supabase")||t.includes("postgres")?"database":t.includes("chunk")||t.includes("loading")||a.includes("import")?"chunk":a.includes("render")||t.includes("render")?"render":"unknown"}componentDidCatch(e,s){this.setState({error:e,errorInfo:s});const t={errorId:this.state.errorId,errorType:this.state.errorType,context:this.props.context,userAgent:navigator.userAgent,timestamp:(new Date).toISOString(),url:window.location.href,userId:this.getCurrentUserId(),componentStack:s.componentStack,errorBoundary:"AdminErrorBoundary"};this.props.onError&&this.props.onError(e,s),!1!==this.props.enableReporting&&this.shouldAutoReport(e)&&this.reportError(e,s,t)}getCurrentUserId(){var e;try{const s=JSON.parse(localStorage.getItem("supabase.auth.token")||"{}");return(null==(e=null==s?void 0:s.user)?void 0:e.id)||null}catch(s){return null}}shouldAutoReport(e){return["chunk","network","database"].includes(this.state.errorType)||e.message.includes("ChunkLoadError")||e.message.includes("Loading chunk")}getErrorIcon(){switch(this.state.errorType){case"network":return x.jsx(u,{className:"h-8 w-8 text-red-600"});case"database":return x.jsx(v,{className:"h-8 w-8 text-red-600"});case"chunk":return x.jsx(N,{className:"h-8 w-8 text-orange-600"});case"render":return x.jsx(j,{className:"h-8 w-8 text-purple-600"});default:return x.jsx(f,{className:"h-8 w-8 text-red-600"})}}getErrorTitle(){switch(this.state.errorType){case"network":return"Connection Problem";case"database":return"Database Error";case"chunk":return"Loading Error";case"render":return"Rendering Error";default:return"Something went wrong"}}getErrorMessage(){switch(this.state.errorType){case"network":return"Unable to connect to the server. Please check your internet connection and try again.";case"database":return"There was a problem accessing the database. Our team has been notified.";case"chunk":return"Failed to load application resources. This usually resolves with a page refresh.";case"render":return"A component failed to render properly. Please try refreshing the page.";default:return"We encountered an unexpected error. Please try again or contact support if the problem persists."}}renderMinimalFallback(){return x.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[this.getErrorIcon(),x.jsxs("div",{children:[x.jsx("h3",{className:"font-medium text-red-900",children:this.getErrorTitle()}),x.jsx("p",{className:"text-sm text-red-700 mt-1",children:this.getErrorMessage()})]})]}),x.jsx("div",{className:"mt-3 flex space-x-2",children:x.jsx("button",{onClick:this.handleRetry,disabled:this.state.isRetrying||this.state.retryCount>=(this.props.maxRetries||3),className:"text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 disabled:opacity-50",children:this.state.isRetrying?"Retrying...":"Retry"})})]})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:"minimal"===this.props.fallbackComponent?this.renderMinimalFallback():x.jsx("div",{className:"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8",children:x.jsx("div",{className:"sm:mx-auto sm:w-full sm:max-w-lg",children:x.jsx("div",{className:"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10",children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:this.getErrorIcon()}),x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:this.getErrorTitle()}),x.jsx("p",{className:"text-gray-600 mb-4",children:this.getErrorMessage()}),x.jsxs("div",{className:"bg-gray-50 rounded-lg p-3 mb-6",children:[x.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Error ID"}),x.jsx("p",{className:"text-sm font-mono text-gray-700",children:this.state.errorId})]}),this.state.retryCount>0&&x.jsxs("div",{className:"mb-4 text-sm text-gray-500",children:["Retry attempt: ",this.state.retryCount," / ",this.props.maxRetries||3]}),!1,x.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 mb-4",children:[x.jsxs("button",{onClick:this.handleRetry,disabled:this.state.isRetrying||this.state.retryCount>=(this.props.maxRetries||3),className:"flex-1 flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx(N,{className:"h-4 w-4 mr-2 "+(this.state.isRetrying?"animate-spin":"")}),this.state.isRetrying?"Retrying...":"Try Again"]}),x.jsxs("button",{onClick:this.handleGoHome,className:"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[x.jsx(w,{className:"h-4 w-4 mr-2"}),"Go Home"]})]}),x.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 text-sm",children:[x.jsxs("button",{onClick:this.handleCopyError,className:"flex items-center justify-center px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[x.jsx(C,{className:"h-4 w-4 mr-1"}),"Copy Error Details"]}),!1!==this.props.enableReporting&&!this.state.isReported&&x.jsxs("button",{onClick:this.handleReportError,className:"flex items-center justify-center px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors",children:[x.jsx(k,{className:"h-4 w-4 mr-1"}),"Report Error"]}),this.state.isReported&&x.jsxs("div",{className:"flex items-center justify-center px-3 py-2 text-green-600",children:[x.jsx(p,{className:"h-4 w-4 mr-1"}),"Error Reported"]})]}),!1]})})})}):this.props.children}}const Cs=b.lazy(()=>fs(()=>Promise.resolve().then(()=>at),void 0).then(e=>({default:e.ComprehensiveAdminDashboard}))),ks=b.lazy(()=>fs(()=>Promise.resolve().then(()=>ct),void 0)),Ss=b.lazy(()=>fs(()=>Promise.resolve().then(()=>ht),void 0).then(e=>({default:e.ProductManagement}))),Ps=b.lazy(()=>fs(()=>Promise.resolve().then(()=>gt),void 0).then(e=>({default:e.OrderManager}))),_s=b.lazy(()=>fs(()=>Promise.resolve().then(()=>ft),void 0).then(e=>({default:e.CategoryManagement}))),Es=b.lazy(()=>fs(()=>Promise.resolve().then(()=>jt),void 0).then(e=>({default:e.CollectionManagement}))),As=b.lazy(()=>fs(()=>Promise.resolve().then(()=>Nt),void 0).then(e=>({default:e.SettingsManagement}))),Ts=b.lazy(()=>fs(()=>Promise.resolve().then(()=>vt),void 0).then(e=>({default:e.AnalyticsDashboard}))),Fs=b.lazy(()=>fs(()=>Promise.resolve().then(()=>wt),void 0).then(e=>({default:e.AdvancedReports}))),Ds=b.lazy(()=>fs(()=>Promise.resolve().then(()=>Ct),void 0).then(e=>({default:e.MarketingManagement}))),Os=b.lazy(()=>fs(()=>Promise.resolve().then(()=>kt),void 0).then(e=>({default:e.AuditLogs}))),Rs=b.lazy(()=>fs(()=>Promise.resolve().then(()=>St),void 0).then(e=>({default:e.AccessibilityDashboard}))),Ms=b.lazy(()=>fs(()=>Promise.resolve().then(()=>At),void 0).then(e=>({default:e.ThemeCustomizationDashboard}))),Ls=b.memo(({item:e,isActive:s,onClick:t,collapsed:a})=>x.jsxs("button",{onClick:t,className:"w-full flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-all duration-200 "+(s?"bg-indigo-100 text-indigo-700 border-r-2 border-indigo-500":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),title:a?e.name:void 0,children:[x.jsx("span",{className:"flex-shrink-0",children:e.icon}),!a&&x.jsx("span",{className:"ml-3 truncate",children:e.name})]}));Ls.displayName="NavigationItem";const Is=b.memo(({component:e,isActive:s})=>s?x.jsx(b.Suspense,{fallback:x.jsx(Ns,{}),children:x.jsx(e,{})}):null);Is.displayName="ComponentRenderer";const $s=b.memo(()=>{var e,s;const[t,a]=b.useState("dashboard"),[r,l]=b.useState(!1),[i,n]=b.useState(!1),[o,d]=b.useState(!1),[m,u]=b.useState(window.innerWidth<768);b.useEffect(()=>{const e=()=>{u(window.innerWidth<768)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),b.useEffect(()=>{const e=setTimeout(()=>c(null,null,function*(){try{yield fs(()=>Promise.resolve().then(()=>at),void 0),setTimeout(()=>c(null,null,function*(){yield Promise.all([fs(()=>Promise.resolve().then(()=>ct),void 0),fs(()=>Promise.resolve().then(()=>ht),void 0),fs(()=>Promise.resolve().then(()=>gt),void 0)])}),2e3)}catch(e){}}),500);return()=>clearTimeout(e)},[]);const h=b.useMemo(()=>[{name:"Dashboard",icon:x.jsx(S,{className:"h-5 w-5"}),component:Cs,preload:!0},{name:"Users",icon:x.jsx(P,{className:"h-5 w-5"}),component:ks},{name:"Products",icon:x.jsx(_,{className:"h-5 w-5"}),component:Ss},{name:"Orders",icon:x.jsx(E,{className:"h-5 w-5"}),component:Ps},{name:"Categories",icon:x.jsx(A,{className:"h-5 w-5"}),component:_s},{name:"Collections",icon:x.jsx(T,{className:"h-5 w-5"}),component:Es},{name:"Marketing",icon:x.jsx(F,{className:"h-5 w-5"}),component:Ds},{name:"Analytics",icon:x.jsx(D,{className:"h-5 w-5"}),component:Ts},{name:"Reports",icon:x.jsx(O,{className:"h-5 w-5"}),component:Fs},{name:"Audit Logs",icon:x.jsx(R,{className:"h-5 w-5"}),component:Os},{name:"Accessibility",icon:x.jsx(M,{className:"h-5 w-5"}),component:Rs},{name:"Theme",icon:x.jsx(L,{className:"h-5 w-5"}),component:Ms},{name:"Settings",icon:x.jsx(I,{className:"h-5 w-5"}),component:As}],[]),g=b.useCallback(e=>{const s=e.toLowerCase();s!==t&&(d(!0),a(s),setTimeout(()=>{d(!1)},150))},[t]);b.useEffect(()=>{h.filter(e=>e.preload).forEach(e=>{e.component})},[h]);const p=b.useMemo(()=>h.find(e=>e.name.toLowerCase()===t),[h,t]),f=()=>{l(!1)};return x.jsxs("div",{className:"flex h-screen bg-gray-50 overflow-hidden",children:[x.jsxs("div",{className:"sr-only",children:[x.jsx("a",{href:"#main-content",className:"focus:not-sr-only focus:absolute focus:top-4 focus:left-4 bg-blue-600 text-white px-4 py-2 rounded z-50",children:"Skip to main content"}),x.jsx("a",{href:"#sidebar-nav",className:"focus:not-sr-only focus:absolute focus:top-4 focus:left-32 bg-blue-600 text-white px-4 py-2 rounded z-50",children:"Skip to navigation"})]}),r&&m&&x.jsx("div",{className:"fixed inset-0 z-40 bg-black bg-opacity-50 transition-opacity duration-300",onClick:f}),x.jsx("aside",{className:`${m?r?"translate-x-0":"-translate-x-full":i?"w-16":"w-64"} ${m?"fixed inset-y-0 left-0 z-50 w-64":"flex-shrink-0"} bg-white transform transition-all duration-300 ease-in-out shadow-lg border-r border-gray-200 h-full`,"aria-label":"Admin navigation sidebar",role:"navigation",children:x.jsxs("div",{className:"flex flex-col h-full",children:[x.jsxs("div",{className:"flex items-center justify-between flex-shrink-0 px-4 py-4 border-b border-gray-200",children:[(!i||m)&&x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:x.jsx(j,{className:"h-6 w-6 text-indigo-600"})}),x.jsx("h1",{className:"text-xl font-bold text-gray-900",children:"Admin Panel"})]}),x.jsx("button",{className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors "+(i&&!m?"mx-auto":""),onClick:m?f:()=>{m?l(!r):n(!i)},"aria-label":m?"Close sidebar":"Toggle sidebar",children:m?x.jsx(y,{className:"h-5 w-5"}):i?x.jsx($,{className:"h-5 w-5"}):x.jsx(U,{className:"h-5 w-5"})})]}),x.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[x.jsx("nav",{id:"sidebar-nav",className:"flex-1 px-3 py-4 space-y-1 overflow-y-auto","aria-label":"Admin dashboard navigation",role:"navigation",children:h.map(e=>{const s=t===e.name.toLowerCase();return x.jsx(Ls,{item:e,isActive:s,onClick:()=>g(e.name),collapsed:i&&!m},e.name)})}),(!i||m)&&x.jsx("div",{className:"flex-shrink-0 border-t border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-center space-x-3 text-sm text-gray-500",children:[x.jsx(R,{className:"h-4 w-4"}),x.jsx("span",{children:"Admin Dashboard v2.0"})]})})]})]})}),x.jsxs("main",{id:"main-content",className:"flex flex-col flex-1 min-w-0 h-full overflow-hidden","aria-label":"Main dashboard content",role:"main",children:[m&&x.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200 sticky top-0 z-30",children:x.jsxs("div",{className:"flex items-center justify-between px-4 py-3",children:[x.jsx("button",{onClick:()=>l(!0),className:"p-2 rounded-lg text-gray-500 hover:text-gray-700 hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500 transition-colors","aria-label":"Open sidebar",children:x.jsx(K,{className:"h-6 w-6"})}),x.jsx("h1",{className:"text-lg font-semibold text-gray-900 truncate",children:(null==(e=h.find(e=>e.name.toLowerCase()===t))?void 0:e.name)||"Admin Dashboard"}),x.jsx("div",{className:"w-10"})," "]})}),!m&&x.jsx("div",{className:"bg-white border-b border-gray-200 px-6 py-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:(null==(s=h.find(e=>e.name.toLowerCase()===t))?void 0:s.name)||"Admin Dashboard"}),x.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Manage your e-commerce platform"})]}),x.jsx("div",{className:"flex items-center space-x-3",children:x.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:x.jsx(R,{className:"h-5 w-5"})})})]})}),x.jsx("div",{className:"flex-1 overflow-y-auto bg-gray-50",children:x.jsx("div",{className:"p-4 md:p-6 lg:p-8 h-full",children:x.jsx("div",{className:"max-w-7xl mx-auto h-full",children:x.jsx(ws,{children:o?x.jsx(Ns,{}):p?x.jsx(Is,{component:p.component,isActive:!0}):x.jsx("div",{className:"text-center py-12",children:x.jsx("p",{className:"text-gray-500",children:"Component not found"})})})})})})]})]})});$s.displayName="AdminDashboard";const Us=()=>{const{user:e}=Ye(),{products:s}=Qe(),t=s.filter(s=>s.sellerId===(null==e?void 0:e.id)),a=[{title:"Total Sales",value:"$23,450",change:"+15.2%",icon:B,color:"bg-green-500"},{title:"Products Listed",value:t.length.toString(),change:`+${t.length}`,icon:_,color:"bg-blue-500"},{title:"Orders",value:"145",change:"+8.1%",icon:E,color:"bg-purple-500"},{title:"Growth",value:"12.5%",change:"+2.1%",icon:F,color:"bg-orange-500"}];return x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:a.map((e,s)=>x.jsx(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),x.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:e.value}),x.jsxs("p",{className:"text-sm text-green-600 mt-1",children:[e.change," from last month"]})]}),x.jsx("div",{className:`${e.color} p-3 rounded-lg`,children:x.jsx(e.icon,{className:"h-6 w-6 text-white"})})]})},e.title))}),x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recent Activity"}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[x.jsx("span",{className:"text-gray-700",children:'New order received for "Premium Attar"'}),x.jsx("span",{className:"text-sm text-gray-500",children:"2 hours ago"})]}),x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[x.jsx("span",{className:"text-gray-700",children:'Product "Royal Oudh" inventory updated'}),x.jsx("span",{className:"text-sm text-gray-500",children:"5 hours ago"})]})]})]})]})},Ks=()=>x.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Sales Analytics"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[x.jsx(D,{className:"h-8 w-8 text-blue-500 mb-2"}),x.jsx("h3",{className:"font-semibold text-gray-900",children:"Sales Trends"}),x.jsx("p",{className:"text-sm text-gray-600",children:"View detailed sales performance over time"})]}),x.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[x.jsx(F,{className:"h-8 w-8 text-green-500 mb-2"}),x.jsx("h3",{className:"font-semibold text-gray-900",children:"Revenue Growth"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Track monthly revenue growth metrics"})]}),x.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[x.jsx(_,{className:"h-8 w-8 text-purple-500 mb-2"}),x.jsx("h3",{className:"font-semibold text-gray-900",children:"Top Products"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Identify best-performing products"})]})]})]}),zs=()=>{const{user:e}=Ye(),{products:s,deleteProduct:t}=Qe(),[a,r]=b.useState(!1),[l,i]=b.useState(null),n=s.filter(s=>s.sellerId===(null==e?void 0:e.id));return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex justify-between items-center",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Products Management"}),x.jsxs("button",{onClick:()=>{i(null),r(!0)},className:"bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2",children:[x.jsx(H,{className:"h-4 w-4"}),x.jsx("span",{children:"Add Product"})]})]}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"w-full",children:[x.jsx("thead",{className:"bg-gray-50",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Price"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Stock"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),x.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(e=>x.jsxs("tr",{children:[x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx(js,{product:{id:e.id,name:e.name,images:e.images},className:"h-10 w-10 rounded object-cover",alt:e.name,size:"small"}),x.jsxs("div",{className:"ml-4",children:[x.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),x.jsx("div",{className:"text-sm text-gray-500",children:e.category})]})]})}),x.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:["$",e.price]}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.stock}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full "+(e.stock>0?"bg-green-100 text-green-800":"bg-red-100 text-red-800"),children:e.stock>0?"In Stock":"Out of Stock"})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>(e=>{i(e),r(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 p-1",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>{return s=e.id,void(window.confirm("Are you sure you want to delete this product?")&&t(s));var s},className:"text-red-600 hover:text-red-900 p-1",children:x.jsx(q,{className:"h-4 w-4"})})]})})]},e.id))})]})})}),x.jsx(vs,{isOpen:a,onClose:()=>r(!1),title:l?"Edit Product":"Add New Product",size:"xl",children:x.jsx(hs,{product:l,onClose:()=>r(!1)})})]})},Bs=()=>x.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Order Management"}),x.jsx("p",{className:"text-gray-600",children:"Manage your orders, process shipments, and track delivery status."})]}),Vs=()=>x.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Promotions & Marketing"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[x.jsx(A,{className:"h-8 w-8 text-orange-500 mb-2"}),x.jsx("h3",{className:"font-semibold text-gray-900",children:"Discount Campaigns"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Create and manage product discounts"})]}),x.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[x.jsx(W,{className:"h-8 w-8 text-red-500 mb-2"}),x.jsx("h3",{className:"font-semibold text-gray-900",children:"Featured Products"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Promote your best products"})]})]})]}),Ws=()=>x.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Customer Reviews"}),x.jsx("p",{className:"text-gray-600",children:"Monitor and respond to customer feedback and reviews."})]}),Hs=()=>x.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Seller Settings"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[x.jsx(I,{className:"h-8 w-8 text-gray-500 mb-2"}),x.jsx("h3",{className:"font-semibold text-gray-900",children:"Store Settings"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Manage your store profile and preferences"})]}),x.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg",children:[x.jsx(V,{className:"h-8 w-8 text-green-500 mb-2"}),x.jsx("h3",{className:"font-semibold text-gray-900",children:"Payment Settings"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Configure payment methods and payouts"})]})]})]}),Gs=[{id:"overview",label:"Overview",icon:x.jsx(w,{className:"h-5 w-5"})},{id:"products",label:"Products",icon:x.jsx(_,{className:"h-5 w-5"})},{id:"orders",label:"Orders",icon:x.jsx(E,{className:"h-5 w-5"}),badge:"3"},{id:"analytics",label:"Analytics",icon:x.jsx(D,{className:"h-5 w-5"})},{id:"promotions",label:"Promotions",icon:x.jsx(A,{className:"h-5 w-5"})},{id:"reviews",label:"Reviews",icon:x.jsx(z,{className:"h-5 w-5"})},{id:"reports",label:"Reports",icon:x.jsx(O,{className:"h-5 w-5"})},{id:"settings",label:"Settings",icon:x.jsx(I,{className:"h-5 w-5"})}],qs=()=>{const[e,s]=b.useState("overview"),[t,a]=b.useState(!1);return x.jsxs("div",{className:"min-h-screen bg-gray-50 flex",children:[x.jsxs(gs.div,{variants:{expanded:{width:"256px"},collapsed:{width:"64px"}},animate:t?"collapsed":"expanded",transition:{duration:.3},className:"bg-white border-r border-gray-200 shadow-sm relative",children:[x.jsxs("div",{className:"p-4 border-b border-gray-200 flex items-center justify-between",children:[!t&&x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(_,{className:"h-6 w-6 text-indigo-600"}),x.jsx("span",{className:"font-semibold text-gray-900",children:"Seller Center"})]}),x.jsx("button",{onClick:()=>a(!t),className:"p-1 rounded-lg hover:bg-gray-100 transition-colors",children:t?x.jsx($,{className:"h-4 w-4 text-gray-500"}):x.jsx(U,{className:"h-4 w-4 text-gray-500"})})]}),x.jsx("nav",{className:"p-2 space-y-1 overflow-y-auto max-h-[calc(100vh-80px)]",children:Gs.map(a=>x.jsxs(gs.button,{onClick:()=>s(a.id),className:"w-full flex items-center space-x-3 px-3 py-2 rounded-lg text-left transition-colors "+(e===a.id?"bg-indigo-100 text-indigo-700":"text-gray-600 hover:bg-gray-100 hover:text-gray-900"),whileHover:{scale:1.02},whileTap:{scale:.98},children:[x.jsx("span",{className:"flex-shrink-0",children:a.icon}),x.jsx(ps,{children:!t&&x.jsx(gs.span,{initial:{opacity:0,width:0},animate:{opacity:1,width:"auto"},exit:{opacity:0,width:0},transition:{duration:.2},className:"truncate font-medium",children:a.label})}),!t&&a.badge&&x.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:a.badge})]},a.id))})]}),x.jsx("div",{className:"flex-1 overflow-auto",children:x.jsx(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{duration:.3},className:"p-6",children:(()=>{switch(e){case"overview":default:return x.jsx(Us,{});case"products":return x.jsx(zs,{});case"orders":return x.jsx(Bs,{});case"analytics":case"reports":return x.jsx(Ks,{});case"promotions":return x.jsx(Vs,{});case"reviews":return x.jsx(Ws,{});case"settings":return x.jsx(Hs,{})}})()},e)})]})},Js=e=>{const{columns:s,data:t,loading:a=!1,onRowClick:r,emptyMessage:l="No data available",className:i=""}=e,[n,o]=b.useState(window.innerWidth);if(b.useEffect(()=>{const e=()=>{o(window.innerWidth)};return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),a)return x.jsx("div",{className:"flex items-center justify-center p-8",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600"})});const d=s.filter(e=>{if("all"===e.responsive||!e.responsive)return!0;return n>=({xs:0,sm:640,md:768,lg:1024,xl:1280}[e.responsive]||0)}),c=d.some(e=>e.width||e.minWidth||e.maxWidth)&&n>=768;return x.jsxs("div",{className:`overflow-hidden rounded-lg border border-gray-200 shadow-sm ${i}`,children:[x.jsx("div",{className:"hidden md:block overflow-x-auto",children:x.jsxs("table",{className:"min-w-full divide-y divide-gray-200 ",style:{tableLayout:c?"fixed":"auto"},children:[x.jsx("thead",{className:"bg-gray-50",children:x.jsx("tr",{children:d.map(e=>x.jsx("th",{className:`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${e.className||""}`,style:{width:e.width?"string"==typeof e.width?e.width:`${e.width}px`:"auto",minWidth:e.minWidth?"string"==typeof e.minWidth?e.minWidth:`${e.minWidth}px`:"auto",maxWidth:e.maxWidth?"string"==typeof e.maxWidth?e.maxWidth:`${e.maxWidth}px`:"none"},children:e.title},e.key))})}),x.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:0===t.length?x.jsx("tr",{children:x.jsx("td",{colSpan:d.length,className:"px-6 py-12 text-center",children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("div",{className:"text-gray-400 mb-2",children:x.jsx("svg",{className:"h-12 w-12",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:l})]})})}):t.map((e,s)=>x.jsx("tr",{onClick:()=>null==r?void 0:r(e),className:"hover:bg-gray-50 "+(r?"cursor-pointer":""),children:d.map(t=>x.jsx("td",{className:`px-6 py-4 text-sm ${t.className||""}`,style:{width:t.width?"string"==typeof t.width?t.width:`${t.width}px`:"auto",minWidth:t.minWidth?"string"==typeof t.minWidth?t.minWidth:`${t.minWidth}px`:"auto",maxWidth:t.maxWidth?"string"==typeof t.maxWidth?t.maxWidth:`${t.maxWidth}px`:"none",whiteSpace:t.width||t.maxWidth?"nowrap":"normal",overflow:"hidden",textOverflow:"ellipsis"},children:t.render?t.render(e[t.key],e):e[t.key]},`${e.id||s}-${t.key}`))},e.id||s))})]})}),x.jsx("div",{className:"md:hidden",children:0===t.length?x.jsx("div",{className:"p-6 text-center",children:x.jsxs("div",{className:"flex flex-col items-center justify-center",children:[x.jsx("div",{className:"text-gray-400 mb-2",children:x.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:l})]})}):x.jsx("div",{className:"divide-y divide-gray-200",children:t.map((e,s)=>x.jsx("div",{onClick:()=>null==r?void 0:r(e),className:"p-4 "+(r?"cursor-pointer hover:bg-gray-50":""),children:x.jsx("div",{className:"space-y-3",children:d.map(t=>x.jsxs("div",{className:"flex justify-between",children:[x.jsx("dt",{className:"text-sm font-medium text-gray-500",children:t.title}),x.jsx("dd",{className:"text-sm text-gray-900 break-words max-w-[60%]",children:t.render?t.render(e[t.key],e):e[t.key]})]},`${e.id||s}-${t.key}`))})},e.id||s))})})]})},Zs=()=>{const{items:e}=Xe(),{itemCount:s}=es(),{user:t}=Ye(),{orders:a,loading:r}=ss(),[l,i]=b.useState(!0);b.useEffect(()=>{c(null,null,function*(){i(!1)})},[t]);const n=a.filter(e=>["pending","confirmed","processing","shipped"].includes(e.status)).length,o=[{title:"Orders",value:a.length.toString(),description:`${n} pending delivery`,icon:_,color:"bg-blue-500",href:"/orders"},{title:"Wishlist",value:e.length.toString(),description:"Items saved for later",icon:J,color:"bg-red-500",href:"/wishlist"},{title:"Cart",value:s.toString(),description:"Items ready to purchase",icon:V,color:"bg-green-500",href:"#"}],d=a.slice(0,3).map(e=>{var s,t,a;const r=e.items[0];return{id:e.id,orderNumber:e.orderNumber,product:(null==(s=null==r?void 0:r.product)?void 0:s.name)||"Unknown Product",image:(null==(a=null==(t=null==r?void 0:r.product)?void 0:t.images)?void 0:a[0])||"/src/assets/images/products/sample-product-2.jpg",amount:`$${e.total.toFixed(2)}`,status:e.status.charAt(0).toUpperCase()+e.status.slice(1),date:new Date(e.createdAt).toLocaleDateString(),itemCount:e.items.length}}),m=d.length>0?d:[{id:"1",orderNumber:"ORD-DEMO-001",product:"Wireless Bluetooth Headphones",image:"https://images.unsplash.com/photo-1505740420928-5e560c06d30e?w=100&h=100&fit=crop",amount:"$129.99",status:"Delivered",date:"2025-01-10",itemCount:1},{id:"2",orderNumber:"ORD-DEMO-002",product:"Smart Fitness Watch",image:"https://images.unsplash.com/photo-1523275335684-37898b6baf30?w=100&h=100&fit=crop",amount:"$299.99",status:"Shipped",date:"2025-01-12",itemCount:1},{id:"3",orderNumber:"ORD-DEMO-003",product:"Premium Coffee Beans",image:"https://images.unsplash.com/photo-1447933601403-0c6688de566e?w=100&h=100&fit=crop",amount:"$24.99",status:"Processing",date:"2025-01-14",itemCount:2}],u=[{key:"product",title:"Product",minWidth:200,render:(e,s)=>x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("img",{src:s.image,alt:s.product,className:"h-10 w-10 rounded-lg object-cover"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:s.product}),x.jsxs("p",{className:"text-sm text-gray-600",children:[s.orderNumber," • ",s.date,s.itemCount>1&&` • ${s.itemCount} items`]})]})]})},{key:"amount",title:"Amount",width:100,render:e=>x.jsx("p",{className:"font-semibold text-gray-900",children:e})},{key:"status",title:"Status",width:100,render:e=>x.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full "+("Delivered"===e?"bg-green-100 text-green-700":"Shipped"===e?"bg-blue-100 text-blue-700":"Processing"===e?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e})}],h=[{icon:Z,title:"Edit Profile",description:"Update your personal information"},{icon:Y,title:"Manage Addresses",description:"Add or edit shipping addresses"},{icon:R,title:"Notifications",description:"Manage your notification preferences"},{icon:V,title:"Payment Methods",description:"Add or remove payment cards"}];return x.jsxs("div",{className:"p-6 space-y-6",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Dashboard"}),x.jsx("p",{className:"text-gray-600 mt-2",children:"Welcome back! Here's an overview of your account."})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:o.map((e,s)=>x.jsx(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*s},className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 hover:shadow-md transition-shadow cursor-pointer",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:e.title}),x.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:e.value}),x.jsx("p",{className:"text-sm text-gray-500 mt-1",children:e.description})]}),x.jsx("div",{className:`${e.color} p-3 rounded-lg`,children:x.jsx(e.icon,{className:"h-6 w-6 text-white"})})]})},e.title))}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsxs(gs.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[x.jsx("div",{className:"p-6 border-b border-gray-100",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-700 text-sm font-medium",children:"View all orders"})]})}),x.jsx("div",{className:"p-6",children:l?x.jsx("div",{className:"space-y-4",children:[1,2,3].map(e=>x.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg animate-pulse",children:[x.jsx("div",{className:"h-12 w-12 bg-gray-300 rounded-lg"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4 mb-2"}),x.jsx("div",{className:"h-3 bg-gray-300 rounded w-1/2"})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("div",{className:"h-4 bg-gray-300 rounded w-16 mb-2"}),x.jsx("div",{className:"h-6 bg-gray-300 rounded w-20"})]})]},e))}):x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"hidden md:block",children:x.jsx(Js,{columns:u,data:m,loading:!1,emptyMessage:"No orders yet"})}),x.jsxs("div",{className:"md:hidden space-y-4",children:[m.map(e=>x.jsxs("div",{className:"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[x.jsx("img",{src:e.image,alt:e.product,className:"h-12 w-12 rounded-lg object-cover"}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("p",{className:"font-medium text-gray-900 truncate",children:e.product}),x.jsxs("p",{className:"text-sm text-gray-600",children:[e.orderNumber," • ",e.date,e.itemCount>1&&` • ${e.itemCount} items`]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"font-semibold text-gray-900",children:e.amount}),x.jsx("span",{className:"inline-block px-2 py-1 text-xs font-medium rounded-full "+("Delivered"===e.status?"bg-green-100 text-green-700":"Shipped"===e.status?"bg-blue-100 text-blue-700":"Processing"===e.status?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-700"),children:e.status})]})]},e.id)),0===m.length&&x.jsxs("div",{className:"text-center py-8 text-gray-500",children:[x.jsx(_,{className:"h-12 w-12 mx-auto mb-4 text-gray-300"}),x.jsx("p",{children:"No orders yet"}),x.jsx("p",{className:"text-sm",children:"Start shopping to see your orders here!"})]})]})]})})]}),x.jsxs(gs.div,{initial:{opacity:0,x:20},animate:{opacity:1,x:0},transition:{delay:.4},className:"bg-white rounded-xl shadow-sm border border-gray-100",children:[x.jsx("div",{className:"p-6 border-b border-gray-100",children:x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Quick Actions"})}),x.jsx("div",{className:"p-6",children:x.jsx("div",{className:"space-y-3",children:h.map(e=>x.jsxs(gs.button,{whileHover:{scale:1.02},whileTap:{scale:.98},className:"w-full flex items-center space-x-4 p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors text-left",children:[x.jsx("div",{className:"p-2 bg-indigo-100 rounded-lg",children:x.jsx(e.icon,{className:"h-5 w-5 text-indigo-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:e.title}),x.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]},e.title))})})]})]}),x.jsx(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},className:"bg-gradient-to-r from-indigo-500 to-purple-600 rounded-xl p-6 text-white",children:x.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Recommended for You"}),x.jsx("p",{className:"text-indigo-100",children:"Discover products based on your preferences and purchase history."})]}),x.jsx(gs.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-white text-indigo-600 px-6 py-2 rounded-lg font-medium hover:bg-gray-100 transition-colors self-start md:self-auto",children:"Shop Now"})]})})]})},Ys=({error:e,onRetry:s,type:t="general",showRetry:a=!0,className:r="",size:l="medium"})=>x.jsx("div",{className:`bg-white rounded-lg border border-red-200 ${(()=>{switch(l){case"small":return"p-4 text-sm";case"large":return"p-8 text-lg";default:return"p-6 text-base"}})()} ${r}`,children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"flex justify-center mb-4",children:(()=>{switch(t){case"network":return x.jsx(u,{className:"h-8 w-8 text-red-500"});case"database":return x.jsx(v,{className:"h-8 w-8 text-red-500"});case"timeout":return x.jsx(Q,{className:"h-8 w-8 text-orange-500"});default:return x.jsx(f,{className:"h-8 w-8 text-red-500"})}})()}),x.jsx("h3",{className:"font-semibold text-gray-900 mb-2",children:(()=>{switch(t){case"network":return"Connection Problem";case"database":return"Database Error";case"timeout":return"Request Timed Out";default:return"Something Went Wrong"}})()}),x.jsx("p",{className:"text-gray-600 mb-4",children:(()=>{if(e)return e;switch(t){case"network":return"Please check your internet connection and try again.";case"database":return"Unable to connect to the database. Please try again later.";case"timeout":return"The request took too long to complete. Please try again.";default:return"An unexpected error occurred. Please try again."}})()}),a&&s&&x.jsxs("button",{onClick:s,className:"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark",children:[x.jsx(N,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})}),Qs=({isOnline:e,onRetry:s})=>e?null:x.jsx("div",{className:"fixed top-0 left-0 right-0 bg-red-500 text-white p-3 z-50 animate-fade-in-down",children:x.jsxs("div",{className:"container mx-auto flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(u,{className:"h-5 w-5 mr-2"}),x.jsx("span",{children:"You're offline. Some features may not work properly."})]}),s&&x.jsx("button",{onClick:s,className:"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm transition-colors",children:"Retry"})]})}),Xs=({tableName:e,displayName:s,onBack:t})=>{const[a,r]=b.useState([]),[l,i]=b.useState([]),[d,m]=b.useState(!0),[u,h]=b.useState(null),[g,p]=b.useState(""),[j,v]=b.useState("created_at"),[w,C]=b.useState("desc"),[k,S]=b.useState({currentPage:1,totalPages:1,totalRecords:0,recordsPerPage:10}),[P,_]=b.useState(new Set),[E,A]=b.useState(!1),[T,F]=b.useState(null),[D,O]=b.useState({}),[R,M]=b.useState(!1),[L,I]=b.useState(!1),$=b.useCallback(()=>c(null,null,function*(){try{const{data:s,error:t}=yield ys.from(e).select("*").limit(1);if(!t&&s&&s.length>0){const e=s[0],t=Object.keys(e).map(s=>({name:s,type:K(e[s]),nullable:null===e[s],displayName:B(s)}));return void i(t)}i([{name:"id",type:"uuid",nullable:!1,displayName:"ID"},{name:"name",type:"text",nullable:!1,displayName:"Name"},{name:"description",type:"text",nullable:!0,displayName:"Description"},{name:"price",type:"numeric",nullable:!1,displayName:"Price"},{name:"created_at",type:"timestamp",nullable:!0,displayName:"Created At"},{name:"updated_at",type:"timestamp",nullable:!0,displayName:"Updated At"}])}catch(s){i([{name:"id",type:"uuid",nullable:!1,displayName:"ID"},{name:"name",type:"text",nullable:!1,displayName:"Name"},{name:"description",type:"text",nullable:!0,displayName:"Description"},{name:"price",type:"numeric",nullable:!1,displayName:"Price"},{name:"created_at",type:"timestamp",nullable:!0,displayName:"Created At"},{name:"updated_at",type:"timestamp",nullable:!0,displayName:"Updated At"}])}}),[e]),K=e=>null==e?"text":"boolean"==typeof e?"boolean":"number"==typeof e?Number.isInteger(e)?"integer":"numeric":"string"==typeof e?/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(e)?"uuid":/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}/.test(e)?"timestamp":/^\d{4}-\d{2}-\d{2}$/.test(e)?"date":"text":Array.isArray(e)?"array":"object"==typeof e?"json":"text",z=b.useCallback(()=>c(null,null,function*(){try{h(null);const{count:s,error:t}=yield ys.from(e).select("*",{count:"exact",head:!0});if(t)throw t;const a=s||0,i=Math.ceil(a/k.recordsPerPage),d=(k.currentPage-1)*k.recordsPerPage;let c=ys.from(e).select("*").range(d,d+k.recordsPerPage-1);if(j&&(c=c.order(j,{ascending:"asc"===w})),g){const e=l.filter(e=>e.type.includes("text")||e.type.includes("varchar"));if(e.length>0){const s=e.map(e=>`${e.name}.ilike.%${g}%`).join(",");c=c.or(s)}}const{data:m,error:x}=yield c;if(x)throw x;r(m||[]),S(e=>o(n({},e),{totalRecords:a,totalPages:i}))}catch(t){h(`Failed to load ${s} data`)}finally{m(!1),A(!1)}}),[e,l,k.currentPage,k.recordsPerPage,j,w,g,s]);b.useEffect(()=>{$()},[$]),b.useEffect(()=>{l.length>0&&z()},[l,z]);const B=e=>e.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" "),V=e=>{e>=1&&e<=k.totalPages&&S(s=>o(n({},s),{currentPage:e}))},W=(e,s)=>{O(t=>o(n({},t),{[e]:s}))},J=[{key:"id",title:"ID",width:100,render:e=>x.jsx("span",{className:"font-mono text-sm",children:(null==e?void 0:e.slice(0,8))||"-"})},{key:"data",title:"Data",minWidth:200,render:(e,s)=>x.jsxs("div",{className:"max-w-xs truncate",children:[JSON.stringify(s,null,2).slice(0,100),"..."]})},{key:"created_at",title:"Created",width:150,render:e=>x.jsx("span",{className:"text-sm text-gray-500",children:e?new Date(e).toLocaleDateString():"-"})},{key:"actions",title:"Actions",width:100,render:(s,t)=>x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:e=>{e.stopPropagation(),(e=>{F(e),O(n({},e)),I(!0)})(t)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded",title:"Edit Record",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{onClick:s=>{var a;s.stopPropagation(),t.id&&(a=String(t.id),c(null,null,function*(){if(window.confirm("Are you sure you want to delete this record? This action cannot be undone.")){h(null);try{const{error:s}=yield ys.from(e).delete().eq("id",a);if(s)throw new Error(`Failed to delete record: ${s.message}`);yield z()}catch(s){const e=s instanceof Error?s.message:"Failed to delete record";h(e)}}}))},className:"text-red-600 hover:text-red-900 p-1 rounded",title:"Delete Record",children:x.jsx(q,{className:"h-4 w-4"})})]})}];return u?x.jsxs("div",{className:"space-y-6",children:[x.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:x.jsxs("div",{children:[x.jsxs("button",{onClick:t,className:"flex items-center text-indigo-600 hover:text-indigo-800 mb-2",children:[x.jsx(U,{className:"h-4 w-4 mr-1"}),"Back to Dashboard"]}),x.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[s," Management"]})]})}),x.jsx(Ys,{error:u,onRetry:()=>{h(null),z()},type:"database",size:"large"})]}):x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-4",children:[x.jsxs("div",{children:[x.jsxs("button",{onClick:t,className:"flex items-center text-indigo-600 hover:text-indigo-800 mb-2",children:[x.jsx(U,{className:"h-4 w-4 mr-1"}),"Back to Dashboard"]}),x.jsxs("h2",{className:"text-2xl font-bold text-gray-900",children:[s," Management"]}),x.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage ",s.toLowerCase()," data (",k.totalRecords," total records)"]})]}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsxs("button",{onClick:()=>{F({id:"new"}),O({}),I(!0)},className:"flex items-center px-3 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[x.jsx(H,{className:"h-4 w-4 mr-1"}),"Add New"]}),x.jsxs("button",{onClick:()=>c(null,null,function*(){try{yield ts(e,s)}catch(t){h("Failed to export data")}}),className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:[x.jsx(X,{className:"h-4 w-4 mr-1"}),"Export"]}),x.jsxs("button",{onClick:()=>{A(!0),z()},disabled:E,className:"flex items-center px-3 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50",children:[x.jsx(N,{className:"h-4 w-4 mr-1 "+(E?"animate-spin":"")}),"Refresh"]})]})]}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:x.jsxs("div",{className:"flex flex-col md:flex-row md:items-center gap-4",children:[x.jsx("div",{className:"flex-1",children:x.jsxs("div",{className:"relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 h-4 w-4"}),x.jsx("input",{type:"text",placeholder:`Search ${s}...`,value:g,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 w-full"})]})}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(se,{className:"h-4 w-4 text-gray-500"}),x.jsxs("select",{className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{children:"All Columns"}),l.map(e=>x.jsx("option",{value:e.name,children:e.displayName},e.name))]})]})]})}),P.size>0&&x.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("p",{className:"text-indigo-800",children:[P.size," ",1===P.size?"record":"records"," selected"]}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsxs("button",{onClick:()=>c(null,null,function*(){if(0!==P.size&&window.confirm(`Are you sure you want to delete ${P.size} records? This action cannot be undone.`))try{const s=Array.from(P);yield as(e,s),_(new Set),z()}catch(s){h("Failed to delete records")}}),className:"flex items-center px-3 py-1.5 text-sm font-medium text-red-700 bg-red-100 border border-red-300 rounded-md hover:bg-red-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[x.jsx(q,{className:"h-4 w-4 mr-1"}),"Delete Selected"]}),x.jsx("button",{onClick:()=>_(new Set),className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Clear Selection"})]})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:d?x.jsx("div",{className:"flex items-center justify-center p-12",children:x.jsx(Ns,{})}):x.jsxs(x.Fragment,{children:[x.jsx(Js,{columns:J,data:a,loading:d,emptyMessage:`No ${s.toLowerCase()} found`}),k.totalPages>1&&x.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[x.jsxs("div",{className:"text-sm text-gray-700",children:["Showing page ",k.currentPage," of ",k.totalPages]}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("button",{onClick:()=>V(k.currentPage-1),disabled:1===k.currentPage,className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),x.jsx("button",{onClick:()=>V(k.currentPage+1),disabled:k.currentPage===k.totalPages,className:"px-3 py-1.5 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})}),L&&T&&x.jsx("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:x.jsxs("div",{className:"relative top-20 mx-auto p-5 border w-11/12 md:w-3/4 lg:w-1/2 shadow-lg rounded-md bg-white",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"new"===T.id?`Add New ${s} Record`:`Edit ${s} Record`}),x.jsx("button",{onClick:()=>{I(!1),h(null)},className:"text-gray-400 hover:text-gray-600",children:x.jsx(y,{className:"h-6 w-6"})})]}),u&&x.jsx("div",{className:"mb-4 p-3 bg-red-50 border border-red-200 rounded-md",children:x.jsxs("div",{className:"flex",children:[x.jsx("div",{className:"flex-shrink-0",children:x.jsx(f,{className:"h-5 w-5 text-red-400"})}),x.jsxs("div",{className:"ml-3",children:[x.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error"}),x.jsx("div",{className:"mt-1 text-sm text-red-700",children:u})]})]})}),x.jsx("div",{className:"max-h-96 overflow-y-auto",children:x.jsx("div",{className:"space-y-4",children:l.filter(e=>"id"!==e.name&&"created_at"!==e.name&&"updated_at"!==e.name).map(e=>x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:e.displayName}),"boolean"===e.type?x.jsxs("select",{value:D[e.name]?"true":"false",onChange:s=>W(e.name,"true"===s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",children:[x.jsx("option",{value:"true",children:"Yes"}),x.jsx("option",{value:"false",children:"No"})]}):e.type.includes("text")||e.type.includes("varchar")?x.jsx("textarea",{value:String(D[e.name]||""),onChange:s=>W(e.name,s.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500",rows:3}):e.type.includes("json")||e.type.includes("array")?x.jsx("textarea",{value:JSON.stringify(D[e.name]||"",null,2),onChange:s=>{try{const t=JSON.parse(s.target.value);W(e.name,t)}catch(t){W(e.name,s.target.value)}},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono text-sm",rows:4,placeholder:"Enter valid JSON"}):x.jsx("input",{type:e.type.includes("int")||e.type.includes("numeric")?"number":"text",value:String(D[e.name]||""),onChange:s=>{const t=e.type.includes("int")||e.type.includes("numeric")?parseFloat(s.target.value)||0:s.target.value;W(e.name,t)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]},e.name))})}),x.jsxs("div",{className:"flex justify-end space-x-3 mt-6 pt-4 border-t",children:[x.jsx("button",{onClick:()=>I(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),x.jsx("button",{onClick:()=>c(null,null,function*(){if(T){M(!0),h(null);try{const s=n({},D),t=l.filter(e=>!e.nullable&&"id"!==e.name&&"created_at"!==e.name&&"updated_at"!==e.name);for(const e of t){const t=s[e.name];if(!t||""===t)throw new Error(`${e.displayName} is required`);if((e.type.includes("numeric")||e.type.includes("decimal")||e.type.includes("money"))&&"price"===e.name){const a=parseFloat(String(t));if(isNaN(a)||a<=0)throw new Error(`${e.displayName} must be a valid positive number`);s[e.name]=a}if(e.type.includes("uuid")&&e.name.endsWith("_id")){const s=String(t);if(s&&!/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s))throw new Error(`${e.displayName} must be a valid UUID format`)}}if(Object.keys(s).forEach(e=>{if(""===s[e]){const t=l.find(s=>s.name===e);(null==t?void 0:t.nullable)&&(s[e]=null)}}),"new"===T.id&&(s.created_at=(new Date).toISOString()),s.updated_at=(new Date).toISOString(),"new"===T.id){const{data:t,error:a}=yield ys.from(e).insert(s).select();if(a)throw new Error(`Failed to create record: ${a.message}`)}else{const{data:t,error:a}=yield ys.from(e).update(s).eq("id",T.id).select();if(a)throw new Error(`Failed to update record: ${a.message}`)}yield z(),I(!1),F(null),O({})}catch(s){const e=s instanceof Error?s.message:"Failed to save record";h(e)}finally{M(!1)}}}),disabled:R,className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 flex items-center",children:R?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white mr-2"}),"Saving..."]}):x.jsxs(x.Fragment,{children:[x.jsx(te,{className:"h-4 w-4 mr-2"}),"Save Changes"]})})]})]})})]})},et=()=>{const[e,s]=b.useState([]),[t,a]=b.useState(null),[r,l]=b.useState(!0),[i,n]=b.useState(""),[o,d]=b.useState(!1),[c,m]=b.useState(1),u=[{name:"profiles",displayName:"User Profiles",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"email",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"full_name",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"avatar_url",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"role",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"phone",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"date_of_birth",type:"date",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"is_active",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"email_verified",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:["orders","cart_items","wishlist_items","reviews","addresses","payment_methods","user_preferences","user_security_settings"],belongsTo:[]},position:{x:100,y:100},color:"bg-blue-500"},{name:"user_preferences",displayName:"User Preferences",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"email_order_updates",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"email_promotions",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"email_newsletter",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"push_order_updates",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"language",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"timezone",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"currency",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles"]},position:{x:400,y:50},color:"bg-indigo-500"},{name:"user_security_settings",displayName:"Security Settings",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"two_factor_enabled",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"two_factor_method",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"login_alerts",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"session_timeout",type:"integer",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"password_changed_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"failed_login_attempts",type:"integer",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles"]},position:{x:400,y:150},color:"bg-red-500"},{name:"categories",displayName:"Categories",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"name",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"slug",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"description",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"parent_id",type:"uuid",nullable:!0,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"categories",referencedColumn:"id"},{name:"is_active",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:["products"],belongsTo:["categories"]},position:{x:700,y:100},color:"bg-purple-500"},{name:"products",displayName:"Products",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"name",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"slug",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"price",type:"numeric",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"category_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"categories",referencedColumn:"id"},{name:"seller_id",type:"uuid",nullable:!0,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"stock",type:"integer",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:["order_items","cart_items","wishlist_items","reviews","product_variants"],belongsTo:["categories","profiles"]},position:{x:1e3,y:100},color:"bg-green-500"},{name:"addresses",displayName:"Addresses",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"type",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"full_name",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"street_address",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"city",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"state",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"postal_code",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"country",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"phone",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"is_default",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles"]},position:{x:100,y:300},color:"bg-teal-500"},{name:"payment_methods",displayName:"Payment Methods",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"type",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"provider",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"last_four",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"expiry_month",type:"integer",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"expiry_year",type:"integer",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"holder_name",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"is_default",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"is_verified",type:"boolean",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles"]},position:{x:100,y:450},color:"bg-pink-500"},{name:"orders",displayName:"Orders",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"order_number",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"status",type:"text",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"total_amount",type:"numeric",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"updated_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:["order_items","order_tracking"],belongsTo:["profiles"]},position:{x:400,y:300},color:"bg-orange-500"},{name:"order_items",displayName:"Order Items",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"order_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"orders",referencedColumn:"id"},{name:"product_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"products",referencedColumn:"id"},{name:"quantity",type:"integer",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"unit_price",type:"numeric",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"total_price",type:"numeric",nullable:!1,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["orders","products"]},position:{x:700,y:300},color:"bg-orange-400"},{name:"cart_items",displayName:"Cart Items",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"product_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"products",referencedColumn:"id"},{name:"quantity",type:"integer",nullable:!1,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["profiles","products"]},position:{x:1e3,y:300},color:"bg-yellow-500"},{name:"reviews",displayName:"Reviews",columns:[{name:"id",type:"uuid",nullable:!1,isPrimaryKey:!0,isForeignKey:!1},{name:"product_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"products",referencedColumn:"id"},{name:"user_id",type:"uuid",nullable:!1,isPrimaryKey:!1,isForeignKey:!0,referencedTable:"profiles",referencedColumn:"id"},{name:"rating",type:"integer",nullable:!1,isPrimaryKey:!1,isForeignKey:!1},{name:"comment",type:"text",nullable:!0,isPrimaryKey:!1,isForeignKey:!1},{name:"created_at",type:"timestamp",nullable:!0,isPrimaryKey:!1,isForeignKey:!1}],relationships:{hasMany:[],belongsTo:["products","profiles"]},position:{x:1e3,y:450},color:"bg-yellow-600"}];b.useEffect(()=>{s(u)},[u]);const h=e.filter(e=>e.name.toLowerCase().includes(i.toLowerCase())||e.displayName.toLowerCase().includes(i.toLowerCase()));return x.jsxs("div",{className:(o?"fixed inset-0 z-50 bg-white":"relative")+" p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-6",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[x.jsx(v,{className:"h-6 w-6 mr-2 text-primary"}),"Database Schema"]}),x.jsx("p",{className:"text-gray-600",children:"Interactive visualization of database structure and relationships"})]}),x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsxs("div",{className:"relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",placeholder:"Search tables...",value:i,onChange:e=>n(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]}),x.jsxs("button",{onClick:()=>l(!r),className:"flex items-center px-3 py-2 rounded-lg transition-colors "+(r?"bg-primary text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[x.jsx(ae,{className:"h-4 w-4 mr-2"}),"Relationships"]}),x.jsx("button",{onClick:()=>d(!o),className:"flex items-center px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:o?x.jsx(re,{className:"h-4 w-4"}):x.jsx(le,{className:"h-4 w-4"})})]})]}),x.jsx("div",{className:"bg-gray-50 rounded-xl border border-gray-200 overflow-hidden",style:{height:o?"calc(100vh - 120px)":"600px"},children:x.jsxs("div",{className:"relative w-full h-full overflow-auto",style:{transform:`scale(${c})`,transformOrigin:"top left"},children:[(()=>{if(!r)return null;const s=[];return e.forEach(t=>{t.relationships.belongsTo.forEach(a=>{const r=e.find(e=>e.name===a);if(r){const e=t.position.x+150,l=t.position.y+50,i=r.position.x+150,n=r.position.y+50;s.push(x.jsx("line",{x1:e,y1:l,x2:i,y2:n,stroke:"#6B7280",strokeWidth:"2",strokeDasharray:"5,5",opacity:"0.6"},`${t.name}-${a}`))}})}),x.jsx("svg",{className:"absolute inset-0 pointer-events-none",style:{zIndex:0},children:s})})(),h.map(e=>x.jsxs(gs.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"absolute bg-white rounded-lg shadow-md border-2 transition-all duration-200 "+(t===e.name?"border-primary shadow-lg":"border-gray-200"),style:{left:e.position.x,top:e.position.y,width:"300px",zIndex:t===e.name?10:1},onClick:()=>a(t===e.name?null:e.name),children:[x.jsx("div",{className:`${e.color} text-white p-3 rounded-t-lg`,children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(ie,{className:"h-4 w-4 mr-2"}),x.jsx("h3",{className:"font-semibold text-sm",children:e.displayName})]}),x.jsx("span",{className:"text-xs opacity-75",children:e.name})]})}),x.jsx("div",{className:"p-3 max-h-64 overflow-y-auto",children:x.jsx("div",{className:"space-y-1",children:e.columns.map(e=>{return x.jsxs("div",{className:"flex items-center justify-between p-2 rounded text-xs "+(e.isPrimaryKey?"bg-yellow-50 border border-yellow-200":e.isForeignKey?"bg-blue-50 border border-blue-200":"bg-gray-50"),children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-4 h-4 flex items-center justify-center mr-2",children:e.isPrimaryKey?x.jsx(ne,{className:"h-3 w-3 text-yellow-600"}):e.isForeignKey?x.jsx(ae,{className:"h-3 w-3 text-blue-600"}):(s=e.type,s.includes("uuid")?x.jsx(ne,{className:"h-3 w-3"}):s.includes("text")||s.includes("varchar")?x.jsx("span",{className:"text-xs",children:"T"}):s.includes("integer")||s.includes("numeric")?x.jsx("span",{className:"text-xs",children:"#"}):s.includes("boolean")?x.jsx("span",{className:"text-xs",children:"B"}):s.includes("timestamp")||s.includes("date")?x.jsx("span",{className:"text-xs",children:"D"}):x.jsx("span",{className:"text-xs",children:"?"}))}),x.jsx("span",{className:"font-medium "+(e.isPrimaryKey?"text-yellow-800":e.isForeignKey?"text-blue-800":"text-gray-700"),children:e.name})]}),x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("span",{className:"text-gray-500",children:e.type}),!e.nullable&&x.jsx("span",{className:"text-red-500 text-xs",children:"*"})]})]},e.name);var s})})}),(e.relationships.hasMany.length>0||e.relationships.belongsTo.length>0)&&x.jsx("div",{className:"border-t border-gray-200 p-3 bg-gray-50 rounded-b-lg",children:x.jsxs("div",{className:"text-xs text-gray-600",children:[e.relationships.hasMany.length>0&&x.jsxs("div",{className:"mb-1",children:[x.jsx("span",{className:"font-medium",children:"Has many:"})," ",e.relationships.hasMany.join(", ")]}),e.relationships.belongsTo.length>0&&x.jsxs("div",{children:[x.jsx("span",{className:"font-medium",children:"Belongs to:"})," ",e.relationships.belongsTo.join(", ")]})]})})]},e.name))]})}),x.jsxs("div",{className:"flex items-center justify-between mt-4",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>m(Math.max(.5,c-.1)),className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50",children:"-"}),x.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(100*c),"%"]}),x.jsx("button",{onClick:()=>m(Math.min(2,c+.1)),className:"px-3 py-1 border border-gray-300 rounded hover:bg-gray-50",children:"+"})]}),x.jsxs("div",{className:"flex items-center space-x-4 text-xs text-gray-600",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(ne,{className:"h-3 w-3 text-yellow-600 mr-1"}),"Primary Key"]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(ae,{className:"h-3 w-3 text-blue-600 mr-1"}),"Foreign Key"]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("span",{className:"text-red-500 mr-1",children:"*"}),"Required"]})]})]})]})},st=new Map,tt=b.memo(()=>{var e;const[s,t]=b.useState(null),[a,r]=b.useState(null),[l,i]=b.useState([]),[n,o]=b.useState(null),[d,m]=b.useState(!0),[u,h]=b.useState(null),[g,p]=b.useState(null),[y,j]=b.useState(""),[w,C]=b.useState(!1),[k,S]=b.useState("overview"),[T,O]=b.useState(!0),[M,L]=b.useState(null),$={profiles:{name:"profiles",displayName:"User Profiles",icon:x.jsx(P,{className:"h-6 w-6"}),description:"User accounts and profile information",color:"bg-blue-500"},user_preferences:{name:"user_preferences",displayName:"User Preferences",icon:x.jsx(I,{className:"h-6 w-6"}),description:"User notification and display preferences",color:"bg-indigo-500"},user_security_settings:{name:"user_security_settings",displayName:"Security Settings",icon:x.jsx(I,{className:"h-6 w-6"}),description:"User security and authentication settings",color:"bg-red-500"},products:{name:"products",displayName:"Products",icon:x.jsx(_,{className:"h-6 w-6"}),description:"Product catalog and inventory",color:"bg-green-500"},categories:{name:"categories",displayName:"Categories",icon:x.jsx(A,{className:"h-6 w-6"}),description:"Product categories and organization",color:"bg-purple-500"},orders:{name:"orders",displayName:"Orders",icon:x.jsx(E,{className:"h-6 w-6"}),description:"Customer orders and transactions",color:"bg-orange-500"},order_items:{name:"order_items",displayName:"Order Items",icon:x.jsx(_,{className:"h-5 w-5"}),description:"Individual items within orders",color:"bg-orange-400"},cart_items:{name:"cart_items",displayName:"Shopping Carts",icon:x.jsx(E,{className:"h-5 w-5"}),description:"Active shopping cart items",color:"bg-yellow-500"},wishlist_items:{name:"wishlist_items",displayName:"Wishlists",icon:x.jsx(z,{className:"h-6 w-6"}),description:"Customer wishlist items",color:"bg-pink-500"},reviews:{name:"reviews",displayName:"Reviews",icon:x.jsx(z,{className:"h-5 w-5"}),description:"Product reviews and ratings",color:"bg-yellow-600"},addresses:{name:"addresses",displayName:"Addresses",icon:x.jsx(Y,{className:"h-6 w-6"}),description:"Customer shipping and billing addresses",color:"bg-teal-500"},payment_methods:{name:"payment_methods",displayName:"Payment Methods",icon:x.jsx(V,{className:"h-6 w-6"}),description:"Customer payment information",color:"bg-indigo-500"},product_variants:{name:"product_variants",displayName:"Product Variants",icon:x.jsx(_,{className:"h-5 w-5"}),description:"Product variations and options",color:"bg-teal-500"},order_tracking:{name:"order_tracking",displayName:"Order Tracking",icon:x.jsx(xe,{className:"h-6 w-6"}),description:"Order shipment tracking information",color:"bg-cyan-500"}},U=b.useCallback(()=>c(null,null,function*(){try{m(!0),h(null);const e=Object.keys($),s={};let a=0;const r=e.map(e=>c(null,null,function*(){try{const{count:s,error:t}=yield ys.from(e).select("*",{count:"exact",head:!0}).limit(1);if(t){if(t.message.includes("not found")||t.message.includes("does not exist"))return{tableName:e,count:0};const{count:s,error:a}=yield ys.from(e).select("id",{count:"exact",head:!0});return a?{tableName:e,count:0}:{tableName:e,count:s||0}}const{count:a,error:r}=yield ys.from(e).select("id",{count:"exact",head:!0});return r?{tableName:e,count:0}:{tableName:e,count:a||0}}catch(s){return{tableName:e,count:0}}}));(yield Promise.allSettled(r)).forEach(e=>{if("fulfilled"===e.status){const{tableName:t,count:r}=e.value;s[t]=r,a+=r}});const l=e.filter(e=>$[e]).map(e=>{const t=$[e];return{name:t.name||e,displayName:t.displayName||e,icon:t.icon||x.jsx(v,{className:"h-6 w-6"}),description:t.description||"Unknown table",color:t.color||"bg-gray-500",count:s[e]||0}});t({totalTables:e.length,totalRecords:a,lastUpdated:new Date,tables:l}),L(new Date)}catch(e){h("Failed to fetch database statistics")}finally{m(!1)}}),[$]),K=b.useCallback(()=>c(null,null,function*(){try{const e="dashboard-metrics",s=sessionStorage.getItem(e),t=sessionStorage.getItem(`${e}-time`);if(s&&t&&Date.now()-parseInt(t)<12e4)return void r(JSON.parse(s));const[a,l,i]=yield Promise.all([ys.from("orders").select("id, total_amount, status, created_at").limit(100),ys.from("profiles").select("id, full_name, created_at").limit(100),ys.from("products").select("id").limit(100)]);if(a.error||l.error||i.error)return;const n=a.data||[],o=l.data||[],d=i.data||[],c=(new Date).toISOString().split("T")[0],m=n.filter(e=>e.created_at.startsWith(c)),x=o.filter(e=>e.created_at.startsWith(c)),u=n.filter(e=>"completed"===e.status),h=m.filter(e=>"completed"===e.status).reduce((e,s)=>e+(parseFloat(s.total_amount)||0),0),g={totalUsers:o.length,totalProducts:d.length,totalOrders:n.length,totalRevenue:u.reduce((e,s)=>e+(parseFloat(s.total_amount)||0),0),pendingOrders:n.filter(e=>"pending"===e.status).length,lowStockProducts:0,newUsersToday:x.length,ordersToday:m.length,revenueToday:h,conversionRate:o.length>0?n.length/o.length*100:0};r(g),sessionStorage.setItem(e,JSON.stringify(g)),sessionStorage.setItem(`${e}-time`,Date.now().toString())}catch(e){}}),[]),W=b.useCallback(()=>c(null,null,function*(){try{i([{metricName:"Revenue",currentValue:15420,previousValue:13750,percentageChange:12.5,trendDirection:"up"},{metricName:"Orders",currentValue:342,previousValue:316,percentageChange:8.3,trendDirection:"up"},{metricName:"Customers",currentValue:1250,previousValue:1277,percentageChange:-2.1,trendDirection:"down"},{metricName:"Conversion Rate",currentValue:3.2,previousValue:3.03,percentageChange:5.7,trendDirection:"up"}])}catch(e){i([])}}),[]),H=b.useCallback(()=>c(null,null,function*(){try{const e={onlineUsers:Math.floor(50*Math.random())+10,pendingOrders:Math.floor(10*Math.random())+1,recentSalesCount:Math.floor(20*Math.random())+5,recentSalesValue:Math.floor(5e3*Math.random())+1e3,lowStockAlerts:Math.floor(5*Math.random())+1,systemStatus:"operational"};o(e)}catch(e){o({onlineUsers:0,pendingOrders:0,recentSalesCount:0,recentSalesValue:0,lowStockAlerts:0,systemStatus:"error"})}}),[]),G=b.useCallback(()=>c(null,null,function*(){C(!0),L(new Date);try{yield Promise.all([U(),K(),W(),H()])}catch(e){}finally{C(!1)}}),[K,W,H]),q=()=>c(null,null,function*(){try{const e=new Date;e.setDate(e.getDate()-30);const s=new Date,{data:t,error:a}=yield ys.rpc("export_analytics_data",{start_date:e.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0],data_type:"all"});let r;if(!a&&t)r=t;else{const[t,a,l]=yield Promise.all([ys.from("orders").select("id, total_amount, status, created_at, user_id").gte("created_at",e.toISOString()).lte("created_at",s.toISOString()),ys.from("profiles").select("id, email, full_name, role, created_at, is_active").gte("created_at",e.toISOString()).lte("created_at",s.toISOString()),ys.from("products").select("id, name, price, stock, created_at, is_active").gte("created_at",e.toISOString()).lte("created_at",s.toISOString())]);r={orders:t.data||[],users:a.data||[],products:l.data||[],metadata:{start_date:e.toISOString().split("T")[0],end_date:s.toISOString().split("T")[0],data_type:"all",exported_at:(new Date).toISOString(),method:"fallback"}}}const l=new Blob([JSON.stringify(r,null,2)],{type:"application/json"}),i=URL.createObjectURL(l),n=document.createElement("a");n.href=i,n.download=`analytics-export-${(new Date).toISOString().split("T")[0]}.json`,document.body.appendChild(n),n.click(),document.body.removeChild(n),URL.revokeObjectURL(i)}catch(e){h("Failed to export analytics data")}});b.useEffect(()=>{G()},[G]),b.useEffect(()=>{if(!T)return;const e=setInterval(()=>{H()},3e4);return()=>clearInterval(e)},[T,H]),b.useEffect(()=>{if(!T)return;const e=setInterval(()=>{G()},3e5);return()=>clearInterval(e)},[T,G]);const J=((e,s,t)=>{const a=t||JSON.stringify(s);return b.useMemo(()=>{if(st.has(a))return st.get(a);const s=e();if(st.set(a,s),st.size>100){const e=st.keys().next().value;st.delete(e)}return s},s)})(()=>{if(!(null==s?void 0:s.tables))return[];const e=y.toLowerCase();return s.tables.filter(s=>s.displayName.toLowerCase().includes(e)||s.description.toLowerCase().includes(e))},[null==s?void 0:s.tables,y],`filtered-tables-${y}`);if(((e,s,t)=>{const a=b.useRef();b.useCallback((...t)=>{a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{e(...t)},s)},[e,s,...t])})(e=>j(e),300,[]),"table"===k&&g){const e=$[g];return x.jsx(Xs,{tableName:g,displayName:(null==e?void 0:e.displayName)||g,onBack:()=>{S("overview"),p(null)}})}return"analytics"===k?x.jsx("div",{children:"Analytics view not implemented yet"}):"schema"===k?x.jsx(et,{}):d?x.jsx("div",{className:"p-8",children:x.jsx(Ns,{size:"large",text:"Loading database statistics..."})}):u?x.jsx("div",{className:"p-8",children:x.jsx(Ys,{error:u,onRetry:G,type:"database",size:"large"})}):x.jsxs("div",{className:"p-6 space-y-6",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-3xl font-bold text-gray-900 flex items-center",children:[x.jsx(v,{className:"h-8 w-8 mr-3 text-primary"}),"Admin Dashboard"]}),x.jsx("p",{className:"text-gray-600 mt-1",children:"Real-time business intelligence and database administration"}),M&&x.jsxs("p",{className:"text-sm text-gray-500 mt-1 flex items-center",children:[x.jsx(Q,{className:"h-4 w-4 mr-1"}),"Last updated: ",M.toLocaleTimeString()]})]}),x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("label",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",checked:T,onChange:e=>O(e.target.checked),className:"mr-2"}),x.jsx("span",{className:"text-sm text-gray-600",children:"Auto-refresh"})]}),x.jsxs("button",{onClick:()=>S("analytics"),className:"flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:[x.jsx(D,{className:"h-4 w-4 mr-2"}),"Analytics"]}),x.jsxs("button",{onClick:()=>S("schema"),className:"flex items-center px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:[x.jsx(oe,{className:"h-4 w-4 mr-2"}),"Schema"]}),x.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:[x.jsx(X,{className:"h-4 w-4 mr-2"}),"Export"]}),x.jsxs("button",{onClick:()=>c(null,null,function*(){yield G()}),disabled:w,className:"flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors disabled:opacity-50",children:[x.jsx(N,{className:"h-4 w-4 mr-2 "+(w?"animate-spin":"")}),"Refresh"]})]})]}),n&&x.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[x.jsx(de,{className:"h-5 w-5 mr-2 text-blue-600"}),"Live Metrics"]}),x.jsxs("div",{className:"flex items-center space-x-6 text-sm",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"h-2 w-2 bg-green-500 rounded-full mr-2 animate-pulse"}),x.jsxs("span",{className:"text-gray-600",children:[(null==n?void 0:n.onlineUsers)||0," Online"]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(R,{className:"h-4 w-4 mr-1 text-orange-500"}),x.jsxs("span",{className:"text-gray-600",children:[(null==n?void 0:n.pendingOrders)||0," Pending Orders"]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(f,{className:"h-4 w-4 mr-1 text-red-500"}),x.jsxs("span",{className:"text-gray-600",children:[(null==n?void 0:n.lowStockAlerts)||0," Low Stock"]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx(B,{className:"h-4 w-4 mr-1 text-green-500"}),x.jsxs("span",{className:"text-gray-600",children:["$",(null!=(e=null==n?void 0:n.recentSalesValue)?e:0).toFixed(2)," Recent Sales"]})]})]})]})}),a&&x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[x.jsx(D,{className:"h-6 w-6 mr-2 text-primary"}),"Business Intelligence Overview"]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),x.jsx("p",{className:"text-3xl font-bold text-gray-900",children:a.totalUsers.toLocaleString()}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["+",a.newUsersToday," today"]})]}),x.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:x.jsx(P,{className:"h-8 w-8 text-blue-600"})})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Products"}),x.jsx("p",{className:"text-3xl font-bold text-gray-900",children:a.totalProducts.toLocaleString()}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.lowStockProducts," low stock"]})]}),x.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:x.jsx(_,{className:"h-8 w-8 text-green-600"})})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),x.jsx("p",{className:"text-3xl font-bold text-gray-900",children:a.totalOrders.toLocaleString()}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[a.ordersToday," today"]})]}),x.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:x.jsx(E,{className:"h-8 w-8 text-orange-600"})})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),x.jsxs("p",{className:"text-3xl font-bold text-gray-900",children:["$",a.totalRevenue.toLocaleString()]}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["$",a.revenueToday.toFixed(2)," today"]})]}),x.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:x.jsx(B,{className:"h-8 w-8 text-purple-600"})})]})})]})]}),l.length>0&&x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[x.jsx(F,{className:"h-6 w-6 mr-2 text-primary"}),"Performance Trends (30 Days)"]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:l.filter(e=>e&&e.metricName).map((e,s)=>x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("p",{className:"text-sm font-medium text-gray-600 capitalize",children:((null==e?void 0:e.metricName)||"").replace("_"," ")}),x.jsxs("div",{className:`flex items-center px-2 py-1 rounded-full text-xs font-medium ${(()=>{switch(null==e?void 0:e.trendDirection){case"up":return"text-green-600 bg-green-100";case"down":return"text-red-600 bg-red-100";default:return"text-gray-600 bg-gray-100"}})()}`,children:[(()=>{switch(null==e?void 0:e.trendDirection){case"up":return x.jsx(me,{className:"h-4 w-4 text-green-500"});case"down":return x.jsx(he,{className:"h-4 w-4 text-red-500"});default:return x.jsx(ue,{className:"h-4 w-4 text-gray-500"})}})(),x.jsxs("span",{className:"ml-1",children:[Math.abs((null==e?void 0:e.percentageChange)||0).toFixed(1),"%"]})]})]}),x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:((null==e?void 0:e.metricName)||"").toLowerCase().includes("revenue")||((null==e?void 0:e.metricName)||"").toLowerCase().includes("value")?`$${((null==e?void 0:e.currentValue)||0).toLocaleString()}`:((null==e?void 0:e.currentValue)||0).toLocaleString()}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["vs ",((null==e?void 0:e.previousValue)||0).toLocaleString()," previous period"]})]},`kpi-${s}-${e.metricName}`))})]}),x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[x.jsx(ce,{className:"h-6 w-6 mr-2 text-primary"}),"Quick Insights"]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>S("analytics"),children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Products"}),x.jsx(_,{className:"h-5 w-5 text-green-600"})]}),x.jsx("div",{className:"space-y-3",children:a&&a.topProducts&&a.topProducts.length>0?a.topProducts.slice(0,3).map((e,s)=>x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:e.name||`Product ${s+1}`}),x.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["$",e.totalRevenue?e.totalRevenue.toLocaleString():"0"]})]},s)):x.jsx(x.Fragment,{children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-600",children:"No data available"}),x.jsx("span",{className:"text-sm font-semibold text-gray-900",children:"$0"})]})})}),x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:x.jsxs("button",{className:"text-sm text-primary hover:text-primary-dark font-medium flex items-center",children:["View detailed analysis",x.jsx(me,{className:"h-4 w-4 ml-1 rotate-45"})]})})]}),x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{p("orders"),S("table")},children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),x.jsx(de,{className:"h-5 w-5 text-blue-600"})]}),x.jsx("div",{className:"space-y-3",children:a&&a.recentOrders&&a.recentOrders.length>0?a.recentOrders.slice(0,3).map((e,s)=>x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["Order #",e.order_number||`ORD-${s+1}`]}),x.jsx("p",{className:"text-xs text-gray-500",children:e.created_at?new Date(e.created_at).toLocaleDateString():"Just now"})]}),x.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["$",e.total_amount?parseFloat(e.total_amount).toFixed(2):"0.00"]})]},s)):x.jsx(x.Fragment,{children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-sm font-medium text-gray-900",children:"No recent orders"}),x.jsx("p",{className:"text-xs text-gray-500",children:"-"})]}),x.jsx("span",{className:"text-sm font-semibold text-green-600",children:"$0.00"})]})})}),x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:x.jsxs("button",{className:"text-sm text-primary hover:text-primary-dark font-medium flex items-center",children:["Manage all orders",x.jsx(me,{className:"h-4 w-4 ml-1 rotate-45"})]})})]}),x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer",onClick:()=>{p("products"),S("table")},children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Stock Alerts"}),x.jsx(f,{className:"h-5 w-5 text-red-600"})]}),x.jsx("div",{className:"space-y-3",children:a&&a.lowStockProductsList&&a.lowStockProductsList.length>0?a.lowStockProductsList.slice(0,3).map((e,s)=>x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.name||`Product ${s+1}`}),x.jsxs("p",{className:"text-xs "+(e.stock<=5?"text-red-500":e.stock<=10?"text-orange-500":"text-yellow-500"),children:["Only ",e.stock||0," left"]})]}),x.jsx("span",{className:"px-2 py-1 text-xs font-medium rounded-full "+(e.stock<=5?"bg-red-100 text-red-800":e.stock<=10?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:e.stock<=5?"Critical":e.stock<=10?"Low":"Medium"})]},s)):x.jsx(x.Fragment,{children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-sm font-medium text-gray-900",children:"All products well stocked"}),x.jsx("p",{className:"text-xs text-green-500",children:"No alerts"})]}),x.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-green-100 text-green-800 rounded-full",children:"Good"})]})})}),x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-100",children:x.jsxs("button",{className:"text-sm text-primary hover:text-primary-dark font-medium flex items-center",children:["Manage inventory",x.jsx(me,{className:"h-4 w-4 ml-1 rotate-45"})]})})]})]})]}),x.jsxs("div",{children:[x.jsxs("h2",{className:"text-xl font-bold text-gray-900 mb-4 flex items-center",children:[x.jsx(I,{className:"h-6 w-6 mr-2 text-primary"}),"Quick Actions"]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[x.jsxs("button",{onClick:()=>{p("products"),S("table")},className:"flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all hover:border-primary text-left",children:[x.jsx("div",{className:"p-2 bg-green-100 rounded-lg mr-3",children:x.jsx(_,{className:"h-5 w-5 text-green-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"Add Product"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Create new product"})]})]}),x.jsxs("button",{onClick:()=>{p("orders"),S("table")},className:"flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all hover:border-primary text-left",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg mr-3",children:x.jsx(E,{className:"h-5 w-5 text-blue-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"View Orders"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Manage customer orders"})]})]}),x.jsxs("button",{onClick:()=>{p("profiles"),S("table")},className:"flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all hover:border-primary text-left",children:[x.jsx("div",{className:"p-2 bg-purple-100 rounded-lg mr-3",children:x.jsx(P,{className:"h-5 w-5 text-purple-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"Manage Users"}),x.jsx("p",{className:"text-sm text-gray-500",children:"User administration"})]})]}),x.jsxs("button",{onClick:()=>S("analytics"),className:"flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all hover:border-primary text-left",children:[x.jsx("div",{className:"p-2 bg-orange-100 rounded-lg mr-3",children:x.jsx(D,{className:"h-5 w-5 text-orange-600"})}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"View Reports"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Analytics & insights"})]})]})]})]}),s&&x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:x.jsx(v,{className:"h-6 w-6 text-blue-600"})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Tables"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalTables})]})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:x.jsx(D,{className:"h-6 w-6 text-green-600"})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Records"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:s.totalRecords.toLocaleString()})]})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:x.jsx(F,{className:"h-6 w-6 text-purple-600"})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Last Updated"}),x.jsx("p",{className:"text-sm font-bold text-gray-900",children:s.lastUpdated.toLocaleTimeString()})]})]})})]}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsxs("div",{className:"flex-1 relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",placeholder:"Search tables...",value:y,onChange:e=>j(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-primary focus:border-primary"})]}),x.jsxs("button",{className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[x.jsx(se,{className:"h-4 w-4 mr-2"}),"Filter"]}),x.jsxs("button",{onClick:q,className:"flex items-center px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50",children:[x.jsx(X,{className:"h-4 w-4 mr-2"}),"Export Data"]})]})}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:J.map(e=>x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 hover:shadow-md transition-all duration-200 cursor-pointer",onClick:()=>{p(e.name),S("table")},children:x.jsxs("div",{className:"p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("div",{className:`p-3 ${e.color} rounded-lg text-white`,children:e.icon}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:e.count.toLocaleString()}),x.jsx("p",{className:"text-xs text-gray-500",children:"records"})]})]}),x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:e.displayName}),x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wide",children:e.name}),x.jsxs("button",{className:"flex items-center text-primary hover:text-primary-dark text-sm font-medium",children:[x.jsx(ce,{className:"h-4 w-4 mr-1"}),"View"]})]})]})},e.name))}),0===J.length&&y&&x.jsxs("div",{className:"text-center py-12",children:[x.jsx(v,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No tables found"}),x.jsx("p",{className:"text-gray-600",children:"Try adjusting your search terms."})]})]})});tt.displayName="ComprehensiveAdminDashboard";const at=Object.freeze(Object.defineProperty({__proto__:null,ComprehensiveAdminDashboard:tt},Symbol.toStringTag,{value:"Module"})),rt=({children:e,className:s="",enablePWASupport:t=!0,showMobileMenu:a=!1,onMobileMenuToggle:r})=>{const[l,i]=b.useState({width:"undefined"!=typeof window?window.innerWidth:1024,height:"undefined"!=typeof window?window.innerHeight:768,isMobile:!1,isTablet:!1,isDesktop:!0,isPWA:!1,orientation:"landscape"}),[n,o]=b.useState(!1);b.useEffect(()=>{const e=()=>{const e=window.innerWidth,s=window.innerHeight,t=e<768,a=e>=768&&e<1024,r=e>=1024,l=window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||!0===window.navigator.standalone;i({width:e,height:s,isMobile:t,isTablet:a,isDesktop:r,isPWA:l,orientation:e>s?"landscape":"portrait"})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]);const d=()=>{const e=!n;o(e),null==r||r(e)},c=["responsive-container",l.isMobile&&"mobile-view",l.isTablet&&"tablet-view",l.isDesktop&&"desktop-view",l.isPWA&&"pwa-view","landscape"===l.orientation&&"landscape-view","portrait"===l.orientation&&"portrait-view",t&&l.isPWA&&"pwa-safe-area",s].filter(Boolean).join(" ");return x.jsxs("div",{className:c,children:[t&&l.isPWA&&x.jsx("div",{className:"pwa-status-bar-spacer h-safe-top"}),l.isMobile&&a&&x.jsxs("div",{className:"mobile-menu-header flex items-center justify-between p-4 bg-white border-b border-gray-200",children:[x.jsx("h1",{className:"text-lg font-semibold text-gray-900",children:"User Management"}),x.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":n?"Close menu":"Open menu",children:n?x.jsx(y,{className:"w-6 h-6 text-gray-600"}):x.jsx(K,{className:"w-6 h-6 text-gray-600"})})]}),l.isMobile&&n&&x.jsx("div",{className:"mobile-menu-overlay fixed inset-0 z-50 bg-black bg-opacity-50",children:x.jsxs("div",{className:"mobile-menu-content bg-white w-80 h-full shadow-xl",children:[x.jsx("div",{className:"p-4 border-b border-gray-200",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Menu"}),x.jsx("button",{onClick:d,className:"p-2 rounded-lg hover:bg-gray-100",children:x.jsx(y,{className:"w-5 h-5 text-gray-600"})})]})}),x.jsx("div",{className:"p-4",children:x.jsx("p",{className:"text-sm text-gray-600",children:"Mobile menu content"})})]})}),x.jsx("div",{className:"responsive-content",children:e}),t&&l.isPWA&&x.jsx("div",{className:"pwa-bottom-spacer h-safe-bottom"})]})},lt=({children:e,onClick:s,className:t="",icon:a,variant:r="ghost",size:l="md",loading:i=!1,disabled:n=!1,ariaLabel:o,title:d,mobileOptimized:c=!1})=>{const m=c?"touch-manipulation select-none active:scale-95 transition-transform duration-150":"",u={sm:c?"min-h-[44px] min-w-[44px] px-4 py-2 text-sm rounded-md":"px-3 py-1.5 text-sm rounded-md",md:c?"min-h-[48px] min-w-[48px] px-5 py-3 text-sm rounded-lg":"px-4 py-2 text-sm rounded-lg",lg:c?"min-h-[56px] min-w-[56px] px-6 py-4 text-base rounded-lg":"px-6 py-3 text-base rounded-lg"},h={sm:"h-4 w-4",md:"h-5 w-5",lg:"h-6 w-6"};return x.jsx("button",{onClick:s,disabled:n||i,className:`relative inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2 ${m} ${{primary:"bg-gradient-to-r from-purple-600 to-purple-700 text-white hover:from-purple-700 hover:to-purple-800 focus:ring-purple-500",secondary:"bg-white text-purple-700 hover:bg-purple-100 focus:ring-purple-500",ghost:"text-purple-600 hover:text-purple-700 hover:bg-purple-50 focus:ring-purple-500"}[r]} ${u[l]} ${t} ${n?"opacity-50 cursor-not-allowed":""}`,"aria-label":o,title:d,children:i?x.jsx("div",{className:`${h[l]} border-2 border-current border-t-transparent rounded-full animate-spin`}):x.jsxs(x.Fragment,{children:[a&&x.jsx(a,{className:`${h[l]} ${e?"mr-2":""}`}),e]})})},it=lt,nt=({users:e,selectedUsers:s,onSelectUser:t,onSelectAll:a,onEditUser:r,onDeleteUser:l,onResendConfirmation:i,onConfirmEmail:n,actionLoading:o,getStatusBadge:d,getRoleBadge:c})=>x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[x.jsx("div",{className:"hidden lg:block overflow-x-auto",children:x.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[x.jsx("thead",{className:"bg-gray-50",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-3 text-left",children:x.jsx("input",{type:"checkbox",checked:s.length===e.length&&e.length>0,onChange:a,className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Role"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Created"}),x.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),x.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>{var a,m;return x.jsxs("tr",{className:"hover:bg-gray-50",children:[x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsx("input",{type:"checkbox",checked:s.includes(e.id),onChange:()=>t(e.id),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"flex-shrink-0 h-10 w-10",children:x.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:x.jsx("span",{className:"text-sm font-medium text-indigo-700",children:(null==(m=null==(a=null==e?void 0:e.name)?void 0:a.charAt(0))?void 0:m.toUpperCase())||"U"})})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("div",{className:"text-sm font-medium text-gray-900",children:(null==e?void 0:e.name)||"Unknown User"}),x.jsx("div",{className:"text-sm text-gray-500",children:e.email}),e.phone&&x.jsx("div",{className:"text-xs text-gray-400",children:e.phone})]})]})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c(e.role)}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:d(e)}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(e.createdAt).toLocaleDateString()}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:x.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[!e.emailVerified&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>i(e.id),disabled:o===`confirm-${e.id}`,className:"text-blue-600 hover:text-blue-900 disabled:opacity-50",title:"Resend confirmation email",children:x.jsx(k,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>n(e.id),disabled:o===`manual-confirm-${e.id}`,className:"text-green-600 hover:text-green-900 disabled:opacity-50",title:"Manually confirm email",children:x.jsx(p,{className:"w-4 h-4"})})]}),x.jsx("button",{onClick:()=>r(e),className:"text-indigo-600 hover:text-indigo-900",title:"Edit user",children:x.jsx(G,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>l(e.id),disabled:o===`delete-${e.id}`,className:"text-red-600 hover:text-red-900 disabled:opacity-50",title:"Delete user",children:x.jsx(q,{className:"w-4 h-4"})})]})})]},e.id)})})]})}),x.jsx("div",{className:"lg:hidden",children:e.map(e=>{var a,m;return x.jsx("div",{className:"p-4 border-b border-gray-200 last:border-b-0",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("input",{type:"checkbox",checked:s.includes(e.id),onChange:()=>t(e.id),className:"mt-1 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),x.jsx("div",{className:"flex-shrink-0",children:x.jsx("div",{className:"h-10 w-10 rounded-full bg-indigo-100 flex items-center justify-center",children:x.jsx("span",{className:"text-sm font-medium text-indigo-700",children:(null==(m=null==(a=null==e?void 0:e.name)?void 0:a.charAt(0))?void 0:m.toUpperCase())||"U"})})}),x.jsxs("div",{className:"flex-1 min-w-0",children:[x.jsx("div",{className:"text-sm font-medium text-gray-900 truncate",children:(null==e?void 0:e.name)||"Unknown User"}),x.jsx("div",{className:"text-sm text-gray-500 truncate",children:e.email}),e.phone&&x.jsx("div",{className:"text-xs text-gray-400",children:e.phone}),x.jsxs("div",{className:"mt-2 flex flex-wrap gap-2",children:[c(e.role),d(e)]}),x.jsxs("div",{className:"mt-1 text-xs text-gray-400",children:["Created: ",new Date(e.createdAt).toLocaleDateString()]})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[!e.emailVerified&&x.jsxs(x.Fragment,{children:[x.jsx("button",{onClick:()=>i(e.id),disabled:o===`confirm-${e.id}`,className:"p-2 text-blue-600 hover:text-blue-900 disabled:opacity-50",title:"Resend confirmation email",children:x.jsx(k,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>n(e.id),disabled:o===`manual-confirm-${e.id}`,className:"p-2 text-green-600 hover:text-green-900 disabled:opacity-50",title:"Manually confirm email",children:x.jsx(p,{className:"w-4 h-4"})})]}),x.jsx("button",{onClick:()=>r(e),className:"p-2 text-indigo-600 hover:text-indigo-900",title:"Edit user",children:x.jsx(G,{className:"w-4 h-4"})}),x.jsx("button",{onClick:()=>l(e.id),disabled:o===`delete-${e.id}`,className:"p-2 text-red-600 hover:text-red-900 disabled:opacity-50",title:"Delete user",children:x.jsx(q,{className:"w-4 h-4"})})]})]})},e.id)})}),0===e.length&&x.jsxs("div",{className:"text-center py-12",children:[x.jsx("div",{className:"text-gray-400 mb-4",children:x.jsx(P,{className:"w-12 h-12 mx-auto"})}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No users found"}),x.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria."})]})]}),ot=({isOpen:e,onClose:s,onSubmit:t,formData:a,setFormData:r,isEdit:l,loading:i,generatedPassword:d,showPassword:c,setShowPassword:m})=>x.jsx(vs,{isOpen:e,onClose:s,title:l?"Edit User":"Create New User",children:x.jsxs("form",{onSubmit:e=>{e.preventDefault(),t()},className:"space-y-6",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[x.jsx(Z,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Basic Information"]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),x.jsx("input",{type:"text",id:"name",required:!0,value:a.name,onChange:e=>r(o(n({},a),{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter full name"})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),x.jsxs("div",{className:"relative",children:[x.jsx(ge,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),x.jsx("input",{type:"email",id:"email",required:!0,value:a.email,onChange:e=>r(o(n({},a),{email:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter email address"})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),x.jsxs("div",{className:"relative",children:[x.jsx(pe,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),x.jsx("input",{type:"tel",id:"phone",value:a.phone,onChange:e=>r(o(n({},a),{phone:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter phone number"})]})]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"dateOfBirth",className:"block text-sm font-medium text-gray-700 mb-1",children:"Date of Birth"}),x.jsxs("div",{className:"relative",children:[x.jsx(ye,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),x.jsx("input",{type:"date",id:"dateOfBirth",value:a.dateOfBirth,onChange:e=>r(o(n({},a),{dateOfBirth:e.target.value})),className:"w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]})]})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[x.jsx(j,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Role & Permissions"]}),x.jsxs("div",{children:[x.jsx("label",{htmlFor:"role",className:"block text-sm font-medium text-gray-700 mb-1",children:"User Role *"}),x.jsxs("select",{id:"role",required:!0,value:a.role,onChange:e=>r(o(n({},a),{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[x.jsx("option",{value:"customer",children:"Customer"}),x.jsx("option",{value:"seller",children:"Seller"}),x.jsx("option",{value:"admin",children:"Administrator"})]}),x.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["admin"===a.role&&"Full access to all platform features and settings","seller"===a.role&&"Can manage products, orders, and customer interactions","customer"===a.role&&"Can browse products, place orders, and manage account"]})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"isActive",checked:a.isActive,onChange:e=>r(o(n({},a),{isActive:e.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),x.jsx("label",{htmlFor:"isActive",className:"ml-2 text-sm text-gray-700",children:"Account is active"})]})]}),!l&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("h3",{className:"text-lg font-medium text-gray-900 flex items-center",children:[x.jsx(ge,{className:"w-5 h-5 mr-2 text-indigo-600"}),"Email Settings"]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",id:"sendEmail",checked:a.sendEmail,onChange:e=>r(o(n({},a),{sendEmail:e.target.checked})),className:"rounded border-gray-300 text-indigo-600 focus:ring-indigo-500"}),x.jsx("label",{htmlFor:"sendEmail",className:"ml-2 text-sm text-gray-700",children:"Send welcome email with login credentials"})]}),a.sendEmail&&x.jsxs("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:[x.jsx("p",{className:"text-sm text-blue-800",children:x.jsx("strong",{children:"Email will include:"})}),x.jsxs("ul",{className:"mt-1 text-sm text-blue-700 list-disc list-inside",children:[x.jsx("li",{children:"Welcome message and account details"}),x.jsx("li",{children:"Temporary password for first login"}),x.jsx("li",{children:"Email confirmation link (if required)"}),x.jsx("li",{children:"Instructions for getting started"})]})]})]}),d&&x.jsxs("div",{className:"space-y-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Generated Password"}),x.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsxs("div",{className:"flex-1",children:[x.jsxs("p",{className:"text-sm font-medium text-green-800 mb-2",children:["Temporary password for ",a.name,":"]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("code",{className:"px-3 py-2 bg-white border border-green-300 rounded text-sm font-mono",children:c?d:"••••••••••••"}),x.jsx("button",{type:"button",onClick:()=>m(!c),className:"p-2 text-green-600 hover:text-green-800",children:c?x.jsx(be,{className:"w-4 h-4"}):x.jsx(ce,{className:"w-4 h-4"})})]})]})}),x.jsx("p",{className:"mt-2 text-xs text-green-700",children:"Make sure to securely share this password with the user. They should change it after first login."})]})]}),x.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-end gap-3 pt-6 border-t border-gray-200",children:[x.jsx(it,{type:"button",onClick:s,variant:"outline",className:"w-full sm:w-auto",children:"Cancel"}),x.jsx(it,{type:"submit",variant:"primary",loading:i,className:"w-full sm:w-auto",children:l?"Update User":"Create User"})]})]})}),dt=e=>c(null,null,function*(){}),ct=Object.freeze(Object.defineProperty({__proto__:null,default:()=>{const e=(()=>{const[e,s]=b.useState({width:"undefined"!=typeof window?window.innerWidth:1024,height:"undefined"!=typeof window?window.innerHeight:768,isMobile:!1,isTablet:!1,isDesktop:!0,isPWA:!1,orientation:"landscape"});return b.useEffect(()=>{const e=()=>{const e=window.innerWidth,t=window.innerHeight,a=e<768,r=e>=768&&e<1024,l=e>=1024,i=window.matchMedia("(display-mode: standalone)").matches||window.matchMedia("(display-mode: fullscreen)").matches||!0===window.navigator.standalone;s({width:e,height:t,isMobile:a,isTablet:r,isDesktop:l,isPWA:i,orientation:e>t?"landscape":"portrait"})};return e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e),()=>{window.removeEventListener("resize",e),window.removeEventListener("orientationchange",e)}},[]),e})(),{isInstallable:s,installPWA:t}=(()=>{const[e,s]=b.useState(null),[t,a]=b.useState(!1),[r,l]=b.useState(!1);return b.useEffect(()=>{const e=e=>{e.preventDefault(),s(e),a(!0)},t=()=>{l(!0),a(!1),s(null)},r=window.matchMedia("(display-mode: standalone)").matches||!0===window.navigator.standalone;return l(r),window.addEventListener("beforeinstallprompt",e),window.addEventListener("appinstalled",t),()=>{window.removeEventListener("beforeinstallprompt",e),window.removeEventListener("appinstalled",t)}},[]),{isInstallable:t,isInstalled:r,installPWA:()=>c(null,null,function*(){if(!e)return!1;e.prompt();const{outcome:t}=yield e.userChoice;return"accepted"===t&&(s(null),a(!1),!0)})}})(),{checkPermission:a,logSecurityEvent:r,rateLimitStatus:l}=rs(),[i,d]=b.useState([]),[m,u]=b.useState(!0),[h,g]=b.useState([]),[f,j]=b.useState(!1),[N,v]=b.useState(!1),[w,C]=b.useState(null),[k,S]=b.useState(!1),[_,E]=b.useState(""),[A,T]=b.useState(""),[F,D]=b.useState({search:"",role:"all",status:"all",sortBy:"createdAt",sortOrder:"desc"}),[O,R]=b.useState({email:"",name:"",role:"customer",phone:"",dateOfBirth:"",isActive:!0,sendEmail:!0}),{showNotification:M}=ls();b.useEffect(()=>{I()},[]);const L=b.useMemo(()=>{let e=i.filter(e=>{if(F.search){const s=F.search.toLowerCase();if(!e.name.toLowerCase().includes(s)&&!e.email.toLowerCase().includes(s))return!1}if("all"!==F.role&&e.role!==F.role)return!1;if("all"!==F.status)switch(F.status){case"active":return!0===e.isActive;case"inactive":return!1===e.isActive;case"unverified":return!1===e.emailVerified}return!0});return e.sort((e,s)=>{let t,a;switch(F.sortBy){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"email":t=e.email.toLowerCase(),a=s.email.toLowerCase();break;case"role":t=e.role,a=s.role;break;case"createdAt":t=new Date(e.createdAt),a=new Date(s.createdAt);break;default:return 0}return"asc"===F.sortOrder?t>a?1:-1:t<a?1:-1}),e},[i,F]),I=()=>c(null,null,function*(){try{u(!0);const e=yield c(null,null,function*(){return[]});d(e||[])}catch(e){M({type:"error",title:"Error",message:"Failed to load users. Please try again."})}finally{u(!1)}}),$=()=>{R({email:"",name:"",role:"customer",phone:"",dateOfBirth:"",isActive:!0,sendEmail:!0}),E(""),S(!1)},U=e=>c(null,null,function*(){if(0!==h.length)try{T("bulk-role");const s=yield dt(0);s.success?(d(i.map(s=>h.includes(s.id)?o(n({},s),{role:e}):s)),g([]),M({type:"success",title:"Roles Updated",message:`${h.length} users have been updated to ${e} role.`})):M({type:"error",title:"Error",message:s.error||"Failed to update user roles."})}catch(s){M({type:"error",title:"Error",message:"Failed to update user roles. Please try again later."})}finally{T("")}else M({type:"warning",title:"No Users Selected",message:"Please select users to update."})}),K=e=>c(null,null,function*(){if(0!==h.length)try{T("bulk-status");const s=yield dt(0);s.success?(d(i.map(s=>h.includes(s.id)?o(n({},s),{isActive:e}):s)),g([]),M({type:"success",title:"Status Updated",message:`${h.length} users have been ${e?"activated":"deactivated"}.`})):M({type:"error",title:"Error",message:s.error||"Failed to update user status."})}catch(s){M({type:"error",title:"Error",message:"Failed to update user status. Please try again later."})}finally{T("")}else M({type:"warning",title:"No Users Selected",message:"Please select users to update."})});return m?x.jsx("div",{className:"flex items-center justify-center h-64",children:x.jsx(Ns,{size:"lg"})}):x.jsx(rt,{className:"user-management-container",enablePWASupport:!0,showMobileMenu:e.isMobile,children:x.jsxs("div",{className:"space-y-6 p-4 sm:p-6 lg:p-8",children:[s&&x.jsx("div",{className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4 mb-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center",children:[x.jsx(Smartphone,{className:"w-5 h-5 text-indigo-600 mr-2"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-sm font-medium text-indigo-900",children:"Install App"}),x.jsx("p",{className:"text-sm text-indigo-700",children:"Get the full experience with our mobile app"})]})]}),x.jsx("button",{onClick:t,className:"px-3 py-1 bg-indigo-600 text-white text-sm rounded-md hover:bg-indigo-700",children:"Install"})]})}),x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between user-management-header",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center user-management-title",children:[x.jsx(P,{className:"w-8 h-8 mr-3 text-indigo-600"}),"User Management"]}),x.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage users, roles, and permissions across your platform"})]}),x.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-2",children:[x.jsxs(it,{onClick:()=>{const e=[["Name","Email","Role","Phone","Status","Email Verified","Created At"],...L.map(e=>[e.name,e.email,e.role,e.phone||"",e.isActive?"Active":"Inactive",e.emailVerified?"Yes":"No",new Date(e.createdAt).toLocaleDateString()])].map(e=>e.map(e=>`"${e}"`).join(",")).join("\n"),s=new Blob([e],{type:"text/csv"}),t=window.URL.createObjectURL(s),a=document.createElement("a");a.href=t,a.download=`users-export-${(new Date).toISOString().split("T")[0]}.csv`,document.body.appendChild(a),a.click(),document.body.removeChild(a),window.URL.revokeObjectURL(t),M({type:"success",title:"Export Complete",message:"Users have been exported to CSV successfully."})},variant:"outline",size:"sm",className:"w-full sm:w-auto",children:[x.jsx(X,{className:"w-4 h-4 mr-2"}),"Export CSV"]}),x.jsxs(it,{onClick:()=>j(!0),variant:"primary",size:"sm",className:"w-full sm:w-auto",children:[x.jsx(fe,{className:"w-4 h-4 mr-2"}),"Add User"]})]})]}),x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[x.jsxs("div",{className:"relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"}),x.jsx("input",{type:"text",placeholder:"Search users...",value:F.search,onChange:e=>D(o(n({},F),{search:e.target.value})),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})]}),x.jsxs("select",{value:F.role,onChange:e=>D(o(n({},F),{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[x.jsx("option",{value:"all",children:"All Roles"}),x.jsx("option",{value:"admin",children:"Admin"}),x.jsx("option",{value:"seller",children:"Seller"}),x.jsx("option",{value:"customer",children:"Customer"})]}),x.jsxs("select",{value:F.status,onChange:e=>D(o(n({},F),{status:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[x.jsx("option",{value:"all",children:"All Status"}),x.jsx("option",{value:"active",children:"Active"}),x.jsx("option",{value:"inactive",children:"Inactive"}),x.jsx("option",{value:"unverified",children:"Unverified"})]}),x.jsxs("div",{className:"flex gap-2",children:[x.jsxs("select",{value:F.sortBy,onChange:e=>D(o(n({},F),{sortBy:e.target.value})),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[x.jsx("option",{value:"createdAt",children:"Created Date"}),x.jsx("option",{value:"name",children:"Name"}),x.jsx("option",{value:"email",children:"Email"}),x.jsx("option",{value:"role",children:"Role"})]}),x.jsx("button",{onClick:()=>D(o(n({},F),{sortOrder:"asc"===F.sortOrder?"desc":"asc"})),className:"px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:"asc"===F.sortOrder?"↑":"↓"})]})]}),h.length>0&&x.jsx("div",{className:"mt-4 p-3 bg-indigo-50 rounded-lg border border-indigo-200",children:x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-3",children:[x.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[h.length," user",1!==h.length?"s":""," selected"]}),x.jsxs("div",{className:"flex flex-wrap gap-2",children:[x.jsx("button",{onClick:()=>U("admin"),disabled:"bulk-role"===A,className:"px-3 py-1 text-xs font-medium text-purple-700 bg-purple-100 rounded-full hover:bg-purple-200 disabled:opacity-50",children:"Make Admin"}),x.jsx("button",{onClick:()=>U("seller"),disabled:"bulk-role"===A,className:"px-3 py-1 text-xs font-medium text-blue-700 bg-blue-100 rounded-full hover:bg-blue-200 disabled:opacity-50",children:"Make Seller"}),x.jsx("button",{onClick:()=>U("customer"),disabled:"bulk-role"===A,className:"px-3 py-1 text-xs font-medium text-gray-700 bg-gray-100 rounded-full hover:bg-gray-200 disabled:opacity-50",children:"Make Customer"}),x.jsx("button",{onClick:()=>K(!0),disabled:"bulk-status"===A,className:"px-3 py-1 text-xs font-medium text-green-700 bg-green-100 rounded-full hover:bg-green-200 disabled:opacity-50",children:"Activate"}),x.jsx("button",{onClick:()=>K(!1),disabled:"bulk-status"===A,className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full hover:bg-red-200 disabled:opacity-50",children:"Deactivate"}),x.jsx("button",{onClick:()=>c(null,null,function*(){if(0!==h.length){if(window.confirm(`Are you sure you want to delete ${h.length} users? This action cannot be undone.`))try{T("bulk-delete");const e=yield c(null,null,function*(){});e.success?(d(i.filter(e=>!h.includes(e.id))),g([]),M({type:"success",title:"Users Deleted",message:`${h.length} users have been deleted successfully.`})):M({type:"error",title:"Error",message:e.error||"Failed to delete users."})}catch(e){M({type:"error",title:"Error",message:"Failed to delete users. Please try again later."})}finally{T("")}}else M({type:"warning",title:"No Users Selected",message:"Please select users to delete."})}),disabled:"bulk-delete"===A,className:"px-3 py-1 text-xs font-medium text-red-700 bg-red-100 rounded-full hover:bg-red-200 disabled:opacity-50",children:"Delete"})]})]})})]}),x.jsx(nt,{users:L,selectedUsers:h,onSelectUser:e=>{h.includes(e)?g(h.filter(s=>s!==e)):g([...h,e])},onSelectAll:()=>{h.length===L.length?g([]):g(L.map(e=>e.id))},onEditUser:e=>{C(e),R({email:e.email,name:e.name,role:e.role,phone:e.phone||"",dateOfBirth:e.dateOfBirth||"",isActive:e.isActive||!0,sendEmail:!1}),v(!0)},onDeleteUser:e=>c(null,null,function*(){if(window.confirm("Are you sure you want to delete this user? This action cannot be undone."))try{T(`delete-${e}`);const s=yield c(null,null,function*(){});s.success?(d(i.filter(s=>s.id!==e)),g(h.filter(s=>s!==e)),M({type:"success",title:"User Deleted",message:"User has been deleted successfully."})):M({type:"error",title:"Error",message:s.error||"Failed to delete user."})}catch(s){M({type:"error",title:"Error",message:"Failed to delete user. Please try again later."})}finally{T("")}}),onResendConfirmation:e=>c(null,null,function*(){try{T(`confirm-${e}`);const s=yield c(null,null,function*(){});s.success?M({type:"success",title:"Email Sent",message:"Confirmation email has been sent successfully."}):M({type:"error",title:"Error",message:s.error||"Failed to send confirmation email."})}catch(s){M({type:"error",title:"Error",message:"Failed to send confirmation email."})}finally{T("")}}),onConfirmEmail:e=>c(null,null,function*(){try{T(`manual-confirm-${e}`);const s=yield c(null,null,function*(){});s.success?(d(i.map(s=>s.id===e?o(n({},s),{emailVerified:!0}):s)),M({type:"success",title:"Email Confirmed",message:"User email has been confirmed successfully."})):M({type:"error",title:"Error",message:s.error||"Failed to confirm email."})}catch(s){M({type:"error",title:"Error",message:"Failed to confirm email."})}finally{T("")}}),actionLoading:A,getStatusBadge:e=>e.isActive?e.emailVerified?x.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800",children:[x.jsx(p,{className:"w-3 h-3 mr-1"}),"Active"]}):x.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:[x.jsx(Q,{className:"w-3 h-3 mr-1"}),"Unverified"]}):x.jsxs("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:[x.jsx(y,{className:"w-3 h-3 mr-1"}),"Inactive"]}),getRoleBadge:e=>x.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${{admin:"bg-purple-100 text-purple-800",seller:"bg-blue-100 text-blue-800",customer:"bg-gray-100 text-gray-800"}[e]}`,children:e.charAt(0).toUpperCase()+e.slice(1)})}),x.jsx(ot,{isOpen:f,onClose:()=>{j(!1),$()},onSubmit:()=>c(null,null,function*(){if(!a("create","user_management"))return;if(!l.userCreation)return void M({type:"error",title:"Rate Limit Exceeded",message:"Please wait before creating another user."});const e=is({email:ns(O.email),name:ns(O.name),role:O.role,phone:O.phone?ns(O.phone):void 0,dateOfBirth:O.dateOfBirth});if(e.isValid){e.warnings&&e.warnings.length>0&&M({type:"warning",title:"Validation Warnings",message:e.warnings.join(", ")});try{T("create");const e=yield createNewUser({email:ns(O.email),name:ns(O.name),role:O.role,phone:O.phone,dateOfBirth:O.dateOfBirth,isActive:O.isActive,sendEmail:O.sendEmail});e.success&&e.user?(d([...i,e.user]),j(!1),$(),e.password&&(E(e.password),S(!0)),M({type:"success",title:"User Created",message:`User has been created successfully${O.sendEmail?" and confirmation email sent":""}.`})):M({type:"error",title:"Error",message:e.error||"Failed to create user."})}catch(s){M({type:"error",title:"Error",message:"Failed to create user. Please try again later."})}finally{T("")}}else M({type:"error",title:"Validation Error",message:e.errors.join(", ")})}),formData:O,setFormData:R,isEdit:!1,loading:"create"===A,generatedPassword:_,showPassword:k,setShowPassword:S}),x.jsx(ot,{isOpen:N,onClose:()=>{v(!1),C(null),$()},onSubmit:()=>c(null,null,function*(){if(!w)return;if(!a("update","user_management"))return;const e=is({email:ns(O.email),name:ns(O.name),role:O.role,phone:O.phone?ns(O.phone):void 0,dateOfBirth:O.dateOfBirth});if(e.isValid)try{T("update");const e=yield(w.id,O.name,O.email,O.role,O.phone,O.dateOfBirth,O.isActive,c(null,null,function*(){}));e.success&&e.user?(d(i.map(s=>s.id===w.id?e.user:s)),v(!1),$(),C(null),M({type:"success",title:"User Updated",message:"User has been updated successfully."})):M({type:"error",title:"Error",message:e.error||"Failed to update user."})}catch(s){M({type:"error",title:"Error",message:"Failed to update user. Please try again later."})}finally{T("")}else M({type:"error",title:"Validation Error",message:e.errors.join(", ")})}),formData:O,setFormData:R,isEdit:!0,loading:"update"===A,showPassword:k,setShowPassword:S})]})})}},Symbol.toStringTag,{value:"Module"})),mt=({title:e="No data found",description:s="There is no data to display at the moment.",icon:t=_,action:a,className:r=""})=>x.jsxs("div",{className:`flex flex-col items-center justify-center py-12 text-center ${r}`,children:[x.jsx("div",{className:"bg-gray-100 rounded-full p-4 mb-4",children:x.jsx(t,{className:"h-8 w-8 text-gray-400"})}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:e}),x.jsx("p",{className:"text-gray-500 mb-4",children:s}),a&&x.jsx("div",{className:"mt-2",children:a})]}),xt=({count:e=1,className:s=""})=>x.jsx(x.Fragment,{children:Array.from({length:e}).map((e,t)=>x.jsx("div",{className:`bg-white rounded-lg border border-gray-200 p-6 shadow-sm animate-pulse ${s}`,children:x.jsxs("div",{className:"flex items-center space-x-4",children:[x.jsx("div",{className:"bg-gray-200 rounded-lg h-16 w-16"}),x.jsxs("div",{className:"flex-1 space-y-2",children:[x.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),x.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),x.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"})]})]})},t))}),ut=({title:e="Loading...",subtitle:s="Please wait while we load the content",showProgressBar:t=!0,className:a=""})=>x.jsxs("div",{className:`flex flex-col items-center justify-center py-12 ${a}`,children:[x.jsx("div",{className:"mb-4",children:x.jsx("div",{className:"h-12 w-12 border-4 border-purple-600 border-t-transparent rounded-full animate-spin"})}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1",children:e}),x.jsx("p",{className:"text-gray-500",children:s}),t&&x.jsx("div",{className:"mt-6 w-64 bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"bg-purple-600 h-2 rounded-full animate-pulse",style:{width:"75%"}})})]}),ht=Object.freeze(Object.defineProperty({__proto__:null,ProductManagement:()=>{const{products:e,deleteProduct:s,loading:t}=Qe(),{showNotification:a}=ls(),[r,l]=b.useState(!1),[i,d]=b.useState(null),[m,u]=b.useState(""),[h,g]=b.useState("all"),[p,y]=b.useState([]),[f,j]=b.useState(!1),[v,w]=b.useState("name"),[k,S]=b.useState("asc"),[P,E]=b.useState("all"),[A,T]=b.useState({min:0,max:1e3}),[F,D]=b.useState("table"),[O,R]=b.useState(!1),[M,L]=b.useState(!1),I=["all",...Array.from(new Set(e.map(e=>e.category)))],$=b.useMemo(()=>{const s=e.filter(e=>{const s=e.name.toLowerCase().includes(m.toLowerCase())||e.description.toLowerCase().includes(m.toLowerCase()),t="all"===h||e.category===h;let a=!0;"in-stock"===P?a=e.stock>10:"low-stock"===P?a=e.stock>0&&e.stock<=10:"out-of-stock"===P&&(a=0===e.stock);const r=e.price>=A.min&&e.price<=A.max;return s&&t&&a&&r});return s.sort((e,s)=>{let t,a;switch(v){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"price":t=e.price,a=s.price;break;case"stock":t=e.stock,a=s.stock;break;case"createdAt":t=new Date(e.createdAt||0).getTime(),a=new Date(s.createdAt||0).getTime();break;default:return 0}return t<a?"asc"===k?-1:1:t>a?"asc"===k?1:-1:0}),s},[e,m,h,P,A,v,k]),U=()=>{d(null),l(!0)},K=e=>{d(e),l(!0)},z=e=>{window.confirm(`Are you sure you want to delete "${e.name}"?`)&&(s(e.id),a({type:"success",title:"Product Deleted",message:`${e.name} has been deleted successfully.`}))},B=e=>{y(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},V=e=>c(null,null,function*(){if(0!==p.length)try{y([]),a({type:"success",title:"Products Updated",message:`${p.length} products have been ${"active"===e?"activated":"deactivated"}.`})}catch(s){a({type:"error",title:"Error",message:"Failed to update products. Please try again."})}}),W=e=>{v===e?S("asc"===k?"desc":"asc"):(w(e),S("asc"))},J=e=>0===e?{text:"Out of Stock",color:"text-red-600 bg-red-100"}:e<10?{text:"Low Stock",color:"text-yellow-600 bg-yellow-100"}:{text:"In Stock",color:"text-green-600 bg-green-100"},Z=[{key:"select",title:x.jsx("button",{onClick:()=>{p.length===$.length?y([]):y($.map(e=>e.id))},className:"flex items-center justify-center w-full",children:p.length===$.length&&$.length>0?x.jsx(je,{className:"h-4 w-4 text-indigo-600"}):x.jsx(Ne,{className:"h-4 w-4 text-gray-400"})}),width:50,render:(e,s)=>x.jsx("button",{onClick:e=>{e.stopPropagation(),B(s.id)},className:"flex items-center justify-center w-full",children:p.includes(s.id)?x.jsx(je,{className:"h-4 w-4 text-indigo-600"}):x.jsx(Ne,{className:"h-4 w-4 text-gray-400"})})},{key:"product",title:x.jsxs("button",{onClick:()=>W("name"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[x.jsx("span",{children:"Product"}),"name"===v&&("asc"===k?x.jsx(ve,{className:"h-4 w-4"}):x.jsx(we,{className:"h-4 w-4"}))]}),minWidth:200,render:(e,s)=>{var t;return x.jsxs("div",{className:"flex items-center",children:[x.jsx("img",{src:s.images&&s.images.length>0&&s.images[0]||"https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image",alt:s.name,className:"h-12 w-12 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image"}}),x.jsxs("div",{className:"ml-4",children:[x.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),x.jsxs("div",{className:"text-sm text-gray-500",children:[null==(t=s.description)?void 0:t.slice(0,50),"..."]})]})]})}},{key:"category",title:"Category",width:100,render:e=>x.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e})},{key:"price",title:x.jsxs("button",{onClick:()=>W("price"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[x.jsx("span",{children:"Price"}),"price"===v&&("asc"===k?x.jsx(ve,{className:"h-4 w-4"}):x.jsx(we,{className:"h-4 w-4"}))]}),width:120,render:(e,s)=>x.jsxs("div",{children:[x.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["₹",s.price.toFixed(2)]}),s.originalPrice&&x.jsxs("div",{className:"text-sm text-gray-500 line-through",children:["₹",s.originalPrice.toFixed(2)]}),s.originalPrice&&x.jsxs("div",{className:"text-xs text-green-600 font-medium",children:[Math.round((s.originalPrice-s.price)/s.originalPrice*100),"% off"]})]})},{key:"stock",title:x.jsxs("button",{onClick:()=>W("stock"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[x.jsx("span",{children:"Stock"}),"stock"===v&&("asc"===k?x.jsx(ve,{className:"h-4 w-4"}):x.jsx(we,{className:"h-4 w-4"}))]}),width:120,render:(e,s)=>{const t=J(s.stock);return x.jsxs("div",{children:[x.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${t.color}`,children:t.text}),x.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:[s.stock," units"]})]})}},{key:"sellerName",title:"Seller",width:120,render:e=>x.jsx("span",{className:"text-sm text-gray-900",children:e})},{key:"actions",title:"Actions",width:120,render:(e,s)=>x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("button",{onClick:e=>{e.stopPropagation(),K(s)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Edit Product",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:x.jsx(ce,{className:"h-4 w-4"})}),x.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Duplicate Product",children:x.jsx(C,{className:"h-4 w-4"})}),x.jsx("button",{onClick:e=>{e.stopPropagation(),z(s)},className:"text-red-600 hover:text-red-900 p-1 rounded hover:bg-red-50",title:"Delete Product",children:x.jsx(q,{className:"h-4 w-4"})})]})}];return t?x.jsx(Ns,{text:"Loading products..."}):x.jsx(ws,{children:x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Product Management"}),x.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all products across the platform (",$.length," of ",e.length," products)"]})]}),x.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[x.jsxs("button",{onClick:()=>c(null,null,function*(){L(!0);try{yield new Promise(e=>setTimeout(e,1e3)),a({type:"success",title:"Refreshed",message:"Product data has been refreshed."})}catch(e){a({type:"error",title:"Refresh Failed",message:"Failed to refresh data. Please try again."})}finally{L(!1)}}),disabled:M,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[x.jsx(N,{className:"h-4 w-4 "+(M?"animate-spin":"")}),x.jsx("span",{children:"Refresh"})]}),x.jsxs("button",{onClick:()=>c(null,null,function*(){R(!0);try{yield new Promise(e=>setTimeout(e,2e3)),a({type:"success",title:"Export Complete",message:"Products have been exported successfully."})}catch(e){a({type:"error",title:"Export Failed",message:"Failed to export products. Please try again."})}finally{R(!1)}}),disabled:O,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[x.jsx(X,{className:"h-4 w-4"}),x.jsx("span",{children:O?"Exporting...":"Export"})]}),x.jsxs(gs.button,{onClick:U,className:"btn-primary flex items-center space-x-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[x.jsx(H,{className:"h-4 w-4"}),x.jsx("span",{children:"Add Product"})]})]})]}),x.jsx(ps,{children:p.length>0&&x.jsx(gs.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center space-x-3",children:x.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[p.length," product",1!==p.length?"s":""," selected"]})}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>V("active"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Activate"}),x.jsx("button",{onClick:()=>V("inactive"),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 text-sm",children:"Deactivate"}),x.jsx("button",{onClick:()=>c(null,null,function*(){if(0!==p.length&&window.confirm(`Are you sure you want to delete ${p.length} products?`))try{for(const e of p)yield s(e);y([]),a({type:"success",title:"Products Deleted",message:`${p.length} products have been deleted successfully.`})}catch(e){a({type:"error",title:"Error",message:"Failed to delete some products. Please try again."})}}),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),x.jsx("button",{onClick:()=>y([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"}),x.jsx("div",{className:"flex items-center space-x-2",children:x.jsx("button",{onClick:()=>D("table"===F?"grid":"table"),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm",children:"table"===F?"Grid View":"Table View"})})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Products"}),x.jsxs("div",{className:"relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",value:m,onChange:e=>u(e.target.value),placeholder:"Search by name or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category"}),x.jsx("select",{value:h,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:I.map(e=>x.jsx("option",{value:e,children:"all"===e?"All Categories":e},e))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Stock Status"}),x.jsxs("select",{value:P,onChange:e=>E(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"all",children:"All Stock Levels"}),x.jsx("option",{value:"in-stock",children:"In Stock"}),x.jsx("option",{value:"low-stock",children:"Low Stock"}),x.jsx("option",{value:"out-of-stock",children:"Out of Stock"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range"}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("input",{type:"number",value:A.min,onChange:e=>T(s=>o(n({},s),{min:Number(e.target.value)})),placeholder:"Min",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),x.jsx("input",{type:"number",value:A.max,onChange:e=>T(s=>o(n({},s),{max:Number(e.target.value)})),placeholder:"Max",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(m||"all"!==h||"all"!==P||A.min>0||A.max<1e3)&&x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",$.length," of ",e.length," products"]}),x.jsx("button",{onClick:()=>{u(""),g("all"),E("all"),T({min:0,max:1e3})},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),t?x.jsx(xt,{count:8}):0===$.length?x.jsx(mt,{icon:x.jsx(_,{className:"h-24 w-24"}),title:"No products found",description:"No products match your current filters. Try adjusting your search criteria or add a new product.",action:{label:"Add Product",onClick:U}}):"table"===F?x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:x.jsx(Js,{columns:Z,data:$,loading:t,emptyMessage:"No products found",onRowClick:K})}):x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:$.map(e=>x.jsxs(gs.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>K(e),children:[x.jsxs("div",{className:"relative",children:[x.jsx("img",{src:e.images&&e.images.length>0&&e.images[0]||"https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image",alt:e.name,className:"w-full h-48 object-cover",onError:e=>{e.target.src="https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image"}}),x.jsx("div",{className:"absolute top-2 left-2",children:x.jsx("button",{onClick:s=>{s.stopPropagation(),B(e.id)},className:"p-1 bg-white rounded-md shadow-sm",children:p.includes(e.id)?x.jsx(je,{className:"h-4 w-4 text-indigo-600"}):x.jsx(Ne,{className:"h-4 w-4 text-gray-400"})})}),x.jsx("div",{className:"absolute top-2 right-2",children:(()=>{const s=J(e.stock);return x.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-semibold rounded-full ${s.color}`,children:s.text})})()})]}),x.jsxs("div",{className:"p-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1 truncate",children:e.name}),x.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{children:[x.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["₹",e.price.toFixed(2)]}),e.originalPrice&&x.jsxs("span",{className:"text-sm text-gray-500 line-through ml-2",children:["₹",e.originalPrice.toFixed(2)]})]}),x.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-gray-100 text-gray-800",children:e.category})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{className:"text-sm text-gray-500",children:[e.stock," units"]}),x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("button",{onClick:s=>{s.stopPropagation(),K(e)},className:"p-1 text-indigo-600 hover:text-indigo-900 rounded hover:bg-indigo-50",title:"Edit Product",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{onClick:s=>{s.stopPropagation(),z(e)},className:"p-1 text-red-600 hover:text-red-900 rounded hover:bg-red-50",title:"Delete Product",children:x.jsx(q,{className:"h-4 w-4"})})]})]})]})]},e.id))}),x.jsx(vs,{isOpen:r,onClose:()=>l(!1),title:i?"Edit Product":"Add New Product",size:"xl",children:x.jsx(hs,{product:i,onClose:()=>l(!1)})})]})})}},Symbol.toStringTag,{value:"Module"})),gt=Object.freeze(Object.defineProperty({__proto__:null,OrderManager:()=>{const[e,s]=b.useState([]),[t,a]=b.useState(!0),[r,l]=b.useState(""),[i,d]=b.useState("all"),[m,u]=b.useState(null),[h,g]=b.useState([]),[y,f]=b.useState("created_at"),[j,v]=b.useState("desc"),[w,C]=b.useState({start:"",end:""}),[k,S]=b.useState({min:0,max:1e4}),[P,E]=b.useState(""),[A,T]=b.useState(!1),[F,D]=b.useState(!1),[R,M]=b.useState(!1),[L,I]=b.useState(!1),{showNotification:$}=ls();b.useEffect(()=>{K()},[]);const U=b.useMemo(()=>{const s=e.filter(e=>{const s=e.profiles.name.toLowerCase().includes(r.toLowerCase())||e.profiles.email.toLowerCase().includes(r.toLowerCase())||e.id.toLowerCase().includes(r.toLowerCase()),t="all"===i||e.status===i,a=!P||e.profiles.name.toLowerCase().includes(P.toLowerCase())||e.profiles.email.toLowerCase().includes(P.toLowerCase()),l=e.total>=k.min&&e.total<=k.max;let n=!0;if(w.start&&w.end){const s=new Date(e.created_at),t=new Date(w.start),a=new Date(w.end);n=s>=t&&s<=a}return s&&t&&a&&l&&n});return s.sort((e,s)=>{let t,a;switch(y){case"created_at":t=new Date(e.created_at).getTime(),a=new Date(s.created_at).getTime();break;case"total":t=e.total,a=s.total;break;case"status":t=e.status,a=s.status;break;default:return 0}return t<a?"asc"===j?-1:1:t>a?"asc"===j?1:-1:0}),s},[e,r,i,P,k,w,y,j]),K=()=>c(null,null,function*(){try{const{data:e,error:t}=yield ys.from("orders").select("\n          id,\n          total,\n          status,\n          created_at,\n          user_id,\n          profiles!inner(email, name),\n          order_items(\n            id,\n            quantity,\n            price,\n            products(name, image)\n          )\n        ").order("created_at",{ascending:!1});if(t)throw t;const a=(e||[]).map(e=>{var s,t;return{id:e.id,total:e.total,status:e.status,created_at:e.created_at,user_id:e.user_id,profiles:{email:(null==(s=e.profiles)?void 0:s.email)||"",name:(null==(t=e.profiles)?void 0:t.name)||""},order_items:(e.order_items||[]).map(e=>{var s,t;return{id:e.id,quantity:e.quantity,price:e.price,products:{name:(null==(s=e.products)?void 0:s.name)||"",image:(null==(t=e.products)?void 0:t.image)||""}}})}});s(a)}catch(e){}finally{a(!1)}}),z=(t,a)=>c(null,null,function*(){try{const{error:r}=yield ys.from("orders").update({status:a}).eq("id",t);if(r)throw r;s(e.map(e=>e.id===t?o(n({},e),{status:a}):e)),$({type:"success",title:"Order Updated",message:`Order status updated to ${a} successfully!`})}catch(r){$({type:"error",title:"Update Failed",message:"Failed to update order status. Please try again."})}}),V=t=>c(null,null,function*(){if(0!==h.length)try{const{error:a}=yield ys.from("orders").update({status:t}).in("id",h);if(a)throw a;s(e.map(e=>h.includes(e.id)?o(n({},e),{status:t}):e)),g([]),$({type:"success",title:"Orders Updated",message:`${h.length} orders updated to ${t} successfully!`})}catch(a){$({type:"error",title:"Update Failed",message:"Failed to update orders. Please try again."})}}),W=e=>{switch(e){case"pending":return"bg-yellow-100 text-yellow-800";case"confirmed":return"bg-blue-100 text-blue-800";case"shipped":return"bg-purple-100 text-purple-800";case"delivered":return"bg-green-100 text-green-800";case"cancelled":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},H=e=>{switch(e){case"pending":return x.jsx(Q,{className:"h-4 w-4"});case"confirmed":case"shipped":case"delivered":return x.jsx(p,{className:"h-4 w-4"});case"cancelled":return x.jsx(Ce,{className:"h-4 w-4"});default:return x.jsx(_,{className:"h-4 w-4"})}},q=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),J=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),Y=[{key:"select",title:"Select",width:50,render:(e,s)=>x.jsx("button",{onClick:e=>{var t;e.stopPropagation(),t=s.id,g(e=>e.includes(t)?e.filter(e=>e!==t):[...e,t])},className:"flex items-center justify-center w-full",children:h.includes(s.id)?x.jsx(je,{className:"h-4 w-4 text-indigo-600"}):x.jsx(Ne,{className:"h-4 w-4 text-gray-400"})})},{key:"id",title:"Order ID",width:120,render:(e,s)=>x.jsxs("span",{className:"font-medium",children:["#",String(s.id).slice(0,8)]})},{key:"customer",title:"Customer",minWidth:200,render:(e,s)=>x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:x.jsx(Z,{className:"h-4 w-4 text-indigo-600"})}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-gray-900",children:s.profiles.name}),x.jsx("div",{className:"text-gray-500 text-sm",children:s.profiles.email})]})]})},{key:"total",title:"Total",width:120,render:(e,s)=>x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx(B,{className:"h-4 w-4 text-green-600"}),x.jsx("span",{className:"font-semibold text-gray-900",children:q(s.total)})]})},{key:"status",title:"Status",width:140,render:(e,s)=>x.jsxs("span",{className:`inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${W(s.status)}`,children:[H(s.status),x.jsx("span",{className:"capitalize",children:s.status})]})},{key:"created_at",title:"Date",width:150,render:(e,s)=>x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx(ye,{className:"h-4 w-4 text-gray-400"}),x.jsx("span",{className:"text-gray-600",children:J(s.created_at)})]})},{key:"actions",title:"Actions",width:150,render:(e,s)=>x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("button",{onClick:e=>{e.stopPropagation(),u(s),T(!0)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"View Details",children:x.jsx(ce,{className:"h-4 w-4"})}),x.jsx("button",{onClick:e=>{e.stopPropagation(),u(s),D(!0)},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"Edit Order",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Print Invoice",children:x.jsx(O,{className:"h-4 w-4"})}),"pending"===s.status&&x.jsx("button",{onClick:e=>{e.stopPropagation(),z(s.id,"confirmed")},className:"bg-green-600 text-white px-2 py-1 rounded text-xs hover:bg-green-700",title:"Confirm Order",children:"Confirm"}),"confirmed"===s.status&&x.jsx("button",{onClick:e=>{e.stopPropagation(),z(s.id,"shipped")},className:"bg-blue-600 text-white px-2 py-1 rounded text-xs hover:bg-blue-700",title:"Mark as Shipped",children:"Ship"})]})}];return t?x.jsx(ut,{title:"Loading Orders",subtitle:"Please wait while we load the order data..."}):x.jsx(ws,{children:x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Order Management"}),x.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage all customer orders (",U.length," of ",e.length," orders)"]})]}),x.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[x.jsxs("button",{onClick:()=>c(null,null,function*(){M(!0),yield K(),M(!1),$({type:"success",title:"Refreshed",message:"Order data has been refreshed."})}),disabled:R,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[x.jsx(N,{className:"h-4 w-4 "+(R?"animate-spin":"")}),x.jsx("span",{children:"Refresh"})]}),x.jsxs("button",{onClick:()=>c(null,null,function*(){I(!0);try{yield new Promise(e=>setTimeout(e,2e3)),$({type:"success",title:"Export Complete",message:"Orders have been exported successfully."})}catch(e){$({type:"error",title:"Export Failed",message:"Failed to export orders. Please try again."})}finally{I(!1)}}),disabled:L,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[x.jsx(X,{className:"h-4 w-4"}),x.jsx("span",{children:L?"Exporting...":"Export"})]})]})]}),x.jsx(ps,{children:h.length>0&&x.jsx(gs.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center space-x-3",children:x.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[h.length," order",1!==h.length?"s":""," selected"]})}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>V("confirmed"),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Confirm"}),x.jsx("button",{onClick:()=>V("shipped"),className:"px-3 py-1 bg-blue-100 text-blue-800 rounded-md hover:bg-blue-200 text-sm",children:"Ship"}),x.jsx("button",{onClick:()=>V("cancelled"),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Cancel"}),x.jsx("button",{onClick:()=>c(null,null,function*(){if(0!==h.length&&window.confirm(`Are you sure you want to delete ${h.length} orders? This action cannot be undone.`))try{const{error:t}=yield ys.from("orders").delete().in("id",h);if(t)throw t;s(e.filter(e=>!h.includes(e.id))),g([]),$({type:"success",title:"Orders Deleted",message:`${h.length} orders deleted successfully!`})}catch(t){$({type:"error",title:"Delete Failed",message:"Failed to delete orders. Please try again."})}}),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),x.jsx("button",{onClick:()=>g([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[x.jsx("div",{className:"flex items-center justify-between mb-4",children:x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"})}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Orders"}),x.jsxs("div",{className:"relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",value:r,onChange:e=>l(e.target.value),placeholder:"Search by order ID, customer...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),x.jsxs("select",{value:i,onChange:e=>d(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"all",children:"All Statuses"}),x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"confirmed",children:"Confirmed"}),x.jsx("option",{value:"shipped",children:"Shipped"}),x.jsx("option",{value:"delivered",children:"Delivered"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date Range"}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("input",{type:"date",value:w.start,onChange:e=>C(s=>o(n({},s),{start:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),x.jsx("input",{type:"date",value:w.end,onChange:e=>C(s=>o(n({},s),{end:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Amount Range"}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("input",{type:"number",value:k.min,onChange:e=>S(s=>o(n({},s),{min:Number(e.target.value)})),placeholder:"Min",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),x.jsx("input",{type:"number",value:k.max,onChange:e=>S(s=>o(n({},s),{max:Number(e.target.value)})),placeholder:"Max",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),(r||"all"!==i||w.start||w.end||k.min>0||k.max<1e4)&&x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",U.length," of ",e.length," orders"]}),x.jsx("button",{onClick:()=>{l(""),d("all"),C({start:"",end:""}),S({min:0,max:1e4}),E("")},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),0===U.length?x.jsx(mt,{icon:_,title:"No orders found",description:"No orders match your current filters. Try adjusting your search criteria."}):x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:x.jsx(Js,{columns:Y,data:U,loading:t,emptyMessage:"No orders found",onRowClick:e=>{u(e),T(!0)}})}),x.jsx(vs,{isOpen:A,onClose:()=>{T(!1),u(null)},title:m?`Order #${m.id.slice(0,8)}`:"Order Details",size:"xl",children:m&&x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{children:[x.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[x.jsx(Z,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Customer Information"]}),x.jsxs("div",{className:"mt-3 space-y-3",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600",children:"Name:"}),x.jsx("span",{className:"font-medium",children:m.profiles.name})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600",children:"Email:"}),x.jsx("span",{className:"font-medium",children:m.profiles.email})]})]})]}),x.jsxs("div",{children:[x.jsxs("h4",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[x.jsx(_,{className:"h-5 w-5 mr-2 text-indigo-600"}),"Order Information"]}),x.jsxs("div",{className:"mt-3 space-y-3",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600",children:"Order Date:"}),x.jsx("span",{className:"font-medium",children:J(m.created_at)})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600",children:"Status:"}),x.jsxs("span",{className:`inline-flex items-center space-x-1 px-2.5 py-0.5 rounded-full text-xs font-medium ${W(m.status)}`,children:[H(m.status),x.jsx("span",{className:"capitalize",children:m.status})]})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-600",children:"Total:"}),x.jsx("span",{className:"font-medium text-lg",children:q(m.total)})]})]})]})]}),x.jsxs("div",{className:"mt-6",children:[x.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Items"}),x.jsx("div",{className:"space-y-3",children:m.order_items.map(e=>x.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg",children:[x.jsx("img",{src:e.products.image||"/placeholder-image.jpg",alt:e.products.name,className:"h-16 w-16 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="/placeholder-image.jpg"}}),x.jsxs("div",{className:"ml-4 flex-1",children:[x.jsx("h5",{className:"font-medium text-gray-900",children:e.products.name}),x.jsxs("p",{className:"text-gray-600",children:["Quantity: ",e.quantity]})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"font-medium text-gray-900",children:q(e.price*e.quantity)}),x.jsxs("p",{className:"text-gray-600 text-sm",children:[q(e.price)," each"]})]})]},e.id))})]})]})}),x.jsx(vs,{isOpen:F,onClose:()=>{D(!1),u(null)},title:m?`Edit Order #${m.id.slice(0,8)}`:"Edit Order",size:"lg",children:m&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Order Status"}),x.jsxs("select",{value:m.status,onChange:e=>z(m.id,e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"pending",children:"Pending"}),x.jsx("option",{value:"confirmed",children:"Confirmed"}),x.jsx("option",{value:"shipped",children:"Shipped"}),x.jsx("option",{value:"delivered",children:"Delivered"}),x.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),x.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[x.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 border border-gray-300 rounded-lg text-gray-700 hover:bg-gray-50",children:"Cancel"}),x.jsx("button",{onClick:()=>D(!1),className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700",children:"Save Changes"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"}));class pt{static initializeBucket(){return c(this,null,function*(){return Promise.resolve()})}static uploadImage(e,s){return c(this,null,function*(){return Promise.resolve(`/uploads/${s}/${e.name}`)})}static deleteImage(e){return c(this,null,function*(){return Promise.resolve()})}static getPublicUrl(e){return e}}const yt=({value:e,onChange:s,onPathChange:t,folder:a="categories",placeholder:r="Upload an image or enter URL",className:l="",disabled:i=!1,showUrlInput:n=!0,aspectRatio:o="auto",maxWidth:d=400,maxHeight:m=300})=>{const[u,h]=b.useState(!1),[g,f]=b.useState(!1),[j,N]=b.useState(null),[v,w]=b.useState(e),[C,k]=b.useState(!1),S=b.useRef(null),{showNotification:P}=ls(),_=b.useCallback(e=>{e.preventDefault(),i||h(!0)},[i]),E=b.useCallback(e=>{e.preventDefault(),h(!1)},[]),A=b.useCallback(e=>{if(e.preventDefault(),h(!1),i)return;const s=Array.from(e.dataTransfer.files).find(e=>e.type.startsWith("image/"));s?F(s):P({type:"error",title:"Invalid File",message:"Please drop an image file"})},[i]),T=b.useCallback(e=>{var s;const t=null==(s=e.target.files)?void 0:s[0];t&&F(t)},[]),F=e=>c(null,null,function*(){f(!0),N(null);try{const r=yield pt.uploadImage(e,a,e=>{N(e)});r.error?P({type:"error",title:"Upload Failed",message:r.error}):(s(r.url),null==t||t(r.path),w(r.url),P({type:"success",title:"Upload Successful",message:"Image uploaded successfully"}))}catch(r){P({type:"error",title:"Upload Error",message:r instanceof Error?r.message:"Failed to upload image"})}finally{f(!1),N(null)}}),D=()=>{const e=v.trim();e&&(s(e),k(!1),P({type:"success",title:"Image URL Updated",message:"Image URL has been updated"}))},O=()=>{switch(o){case"square":return"aspect-square";case"landscape":return"aspect-video";case"portrait":return"aspect-[3/4]";default:return""}};return x.jsxs("div",{className:`space-y-4 ${l}`,children:[x.jsx("div",{className:"relative",children:e?x.jsxs("div",{className:`relative rounded-lg overflow-hidden border border-gray-200 ${O()}`,children:[x.jsx("img",{src:e,alt:"Preview",className:"w-full h-full object-cover",style:{maxWidth:d,maxHeight:m},onError:e=>{e.target.src="https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image"}}),!i&&x.jsx("button",{onClick:()=>{s(""),null==t||t(""),w(""),S.current&&(S.current.value="")},className:"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors",title:"Remove image",children:x.jsx(y,{className:"h-4 w-4"})}),x.jsx(x.Fragment,{children:g&&x.jsx(gs.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:x.jsxs("div",{className:"text-center text-white",children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2"}),j&&x.jsxs("div",{className:"text-sm",children:[j.percentage,"%"]})]})})})]}):x.jsxs("div",{onDragOver:_,onDragLeave:E,onDrop:A,className:`\n              relative border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200\n              ${u?"border-indigo-400 bg-indigo-50":"border-gray-300 hover:border-gray-400"}\n              ${i?"opacity-50 cursor-not-allowed":"cursor-pointer"}\n              ${O()}\n            `,onClick:()=>{var e;return!i&&(null==(e=S.current)?void 0:e.click())},children:[x.jsx("input",{ref:S,type:"file",accept:"image/*",onChange:T,className:"hidden",disabled:i}),x.jsx("div",{className:"flex flex-col items-center justify-center h-full min-h-[120px]",children:g?x.jsxs(x.Fragment,{children:[x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-3"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Uploading..."}),j&&x.jsxs("div",{className:"mt-2 w-full max-w-xs",children:[x.jsx("div",{className:"bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${j.percentage}%`}})}),x.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[j.percentage,"%"]})]})]}):x.jsxs(x.Fragment,{children:[x.jsx(ke,{className:"h-12 w-12 text-gray-400 mb-3"}),x.jsx("p",{className:"text-sm text-gray-600 mb-2",children:r}),x.jsx("p",{className:"text-xs text-gray-500",children:"Drag & drop or click to select"}),x.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"PNG, JPG, WebP up to 5MB"})]})})]})}),n&&!i&&x.jsx("div",{className:"space-y-2",children:C?x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("input",{type:"url",value:v,onChange:e=>w(e.target.value),placeholder:"https://example.com/image.jpg",className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",onKeyPress:e=>"Enter"===e.key&&D()}),x.jsx("button",{onClick:D,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:x.jsx(p,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>{k(!1),w(e)},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors",children:x.jsx(y,{className:"h-4 w-4"})})]}):x.jsxs("button",{onClick:()=>k(!0),className:"flex items-center space-x-2 text-sm text-indigo-600 hover:text-indigo-700",children:[x.jsx(ae,{className:"h-4 w-4"}),x.jsx("span",{children:"Or enter image URL"})]})}),x.jsx(x.Fragment,{children:g&&j&&x.jsxs(gs.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"flex items-center space-x-2 text-sm text-gray-600",children:[x.jsx(Se,{className:"h-4 w-4 animate-pulse"}),x.jsxs("span",{children:["Uploading... ",j.percentage,"% (",Math.round(j.loaded/1024),"KB / ",Math.round(j.total/1024),"KB)"]})]})})]})},bt=({title:e="Loading...",message:s="Please wait while we load the data.",showSpinner:t=!0})=>x.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50 p-4",children:x.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-6 text-center",children:[t&&x.jsx("div",{className:"flex justify-center mb-4",children:x.jsx(Ns,{})}),x.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:e}),x.jsx("p",{className:"text-gray-600",children:s})]})}),ft=Object.freeze(Object.defineProperty({__proto__:null,CategoryManagement:()=>{const{categories:e,addCategory:s,updateCategory:t,deleteCategory:a,loading:r}=Qe(),{showNotification:l}=ls(),[i,d]=b.useState(!1),[m,u]=b.useState(null),[h,g]=b.useState(""),[p,y]=b.useState({name:"",slug:"",description:"",imageUrl:"",isActive:!0,sortOrder:0}),[f,j]=b.useState(""),[v,w]=b.useState([]),[k,S]=b.useState("name"),[P,E]=b.useState("asc"),[T,F]=b.useState("all"),[D,O]=b.useState("table"),[R,M]=b.useState(!1),[L,I]=b.useState(!1),[$,U]=b.useState(!1);b.useEffect(()=>{c(null,null,function*(){try{yield pt.initializeBucket()}catch(e){}})},[]);const K=b.useMemo(()=>{const s=e.filter(e=>{const s=e.name.toLowerCase().includes(h.toLowerCase())||e.description&&e.description.toLowerCase().includes(h.toLowerCase()),t="all"===T||"active"===T&&e.isActive||"inactive"===T&&!e.isActive;return s&&t});return s.sort((e,s)=>{let t,a;switch(k){case"name":t=e.name.toLowerCase(),a=s.name.toLowerCase();break;case"productCount":t=e.productCount||0,a=s.productCount||0;break;case"sortOrder":t=e.sortOrder||0,a=s.sortOrder||0;break;case"createdAt":t=new Date(e.createdAt||0).getTime(),a=new Date(s.createdAt||0).getTime();break;default:return 0}return t<a?"asc"===P?-1:1:t>a?"asc"===P?1:-1:0}),s},[e,h,T,k,P]),z=()=>{u(null),y({name:"",slug:"",description:"",imageUrl:"",isActive:!0,sortOrder:0}),j(""),d(!0)},B=e=>{u(e),y({name:e.name,slug:e.slug||"",description:e.description||"",imageUrl:e.imageUrl,isActive:e.isActive||!0,sortOrder:e.sortOrder||0}),j(""),d(!0)},V=e=>c(null,null,function*(){if(e.productCount&&e.productCount>0)l({type:"error",title:"Cannot Delete Category",message:`This category has ${e.productCount} products. Please move or delete them first.`});else if(window.confirm(`Are you sure you want to delete "${e.name}"? This action cannot be undone.`))try{yield a(e.id),l({type:"success",title:"Category Deleted",message:`${e.name} has been deleted successfully.`})}catch(s){l({type:"error",title:"Deletion Failed",message:`Failed to delete category: ${s instanceof Error?s.message:"Unknown error"}`})}}),W=e=>{w(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},J=s=>c(null,null,function*(){if(0!==v.length)try{for(const a of v){const r=e.find(e=>e.id===a);r&&(yield t(o(n({},r),{isActive:s})))}w([]),l({type:"success",title:"Categories Updated",message:`${v.length} categories have been ${s?"activated":"deactivated"}.`})}catch(a){l({type:"error",title:"Update Failed",message:"Failed to update categories. Please try again."})}}),Z=e=>{k===e?E("asc"===P?"desc":"asc"):(S(e),E("asc"))},Y=e=>{const{name:s,value:t,type:a}=e.target;"checkbox"===a&&e.target instanceof HTMLInputElement?y(t=>o(n({},t),{[s]:e.target.checked})):y(e=>o(n({},e),{[s]:t}))},Q=[{key:"select",title:x.jsx("button",{onClick:()=>{v.length===K.length?w([]):w(K.map(e=>e.id))},className:"flex items-center justify-center w-full",children:v.length===K.length&&K.length>0?x.jsx(je,{className:"h-4 w-4 text-indigo-600"}):x.jsx(Ne,{className:"h-4 w-4 text-gray-400"})}),width:50,render:(e,s)=>x.jsx("button",{onClick:e=>{e.stopPropagation(),W(s.id)},className:"flex items-center justify-center w-full",children:v.includes(s.id)?x.jsx(je,{className:"h-4 w-4 text-indigo-600"}):x.jsx(Ne,{className:"h-4 w-4 text-gray-400"})})},{key:"category",title:x.jsxs("button",{onClick:()=>Z("name"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[x.jsx("span",{children:"Category"}),"name"===k&&("asc"===P?x.jsx(ve,{className:"h-4 w-4"}):x.jsx(we,{className:"h-4 w-4"}))]}),minWidth:200,render:(e,s)=>x.jsxs("div",{className:"flex items-center",children:[s.imageUrl?x.jsx("img",{src:s.imageUrl,alt:s.name,className:"h-12 w-12 rounded-lg object-cover border border-gray-200",onError:e=>{e.target.src="/placeholder-image.jpg"}}):x.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center border border-gray-200",children:x.jsx(A,{className:"h-6 w-6 text-gray-400"})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("div",{className:"text-sm font-medium text-gray-900",children:s.name}),s.slug&&x.jsxs("div",{className:"text-sm text-gray-500",children:["/",s.slug]}),s.description&&x.jsx("div",{className:"text-xs text-gray-400 mt-1 max-w-xs truncate",children:s.description})]})]})},{key:"productCount",title:x.jsxs("button",{onClick:()=>Z("productCount"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[x.jsx("span",{children:"Products"}),"productCount"===k&&("asc"===P?x.jsx(ve,{className:"h-4 w-4"}):x.jsx(we,{className:"h-4 w-4"}))]}),width:120,render:(e,s)=>x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(_,{className:"h-4 w-4 text-blue-600"}),x.jsxs("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:[e||0," products"]})]})},{key:"sortOrder",title:x.jsxs("button",{onClick:()=>Z("sortOrder"),className:"flex items-center space-x-1 hover:text-indigo-600",children:[x.jsx("span",{children:"Order"}),"sortOrder"===k&&("asc"===P?x.jsx(ve,{className:"h-4 w-4"}):x.jsx(we,{className:"h-4 w-4"}))]}),width:80,render:e=>x.jsx("span",{className:"text-sm text-gray-600 font-mono",children:e||0})},{key:"isActive",title:"Status",width:100,render:(e,s)=>x.jsx("div",{className:"flex items-center space-x-2",children:e?x.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[x.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-1"}),"Active"]}):x.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:[x.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full mr-1"}),"Inactive"]})})},{key:"actions",title:"Actions",width:150,render:(e,s)=>x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("button",{onClick:e=>{e.stopPropagation(),B(s)},className:"text-indigo-600 hover:text-indigo-900 p-1 rounded hover:bg-indigo-50",title:"Edit Category",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-blue-600 hover:text-blue-900 p-1 rounded hover:bg-blue-50",title:"View Details",children:x.jsx(ce,{className:"h-4 w-4"})}),x.jsx("button",{onClick:e=>{e.stopPropagation()},className:"text-green-600 hover:text-green-900 p-1 rounded hover:bg-green-50",title:"Duplicate Category",children:x.jsx(C,{className:"h-4 w-4"})}),x.jsx("button",{onClick:e=>{e.stopPropagation(),V(s)},className:"p-1 rounded hover:bg-red-50 "+(s.productCount&&s.productCount>0?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900"),title:s.productCount&&s.productCount>0?"Cannot delete - has products":"Delete Category",disabled:s.productCount&&s.productCount>0,children:x.jsx(q,{className:"h-4 w-4"})})]})}];return r?x.jsx(bt,{title:"Loading Categories",subtitle:"Fetching category data..."}):x.jsx(ws,{children:x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Category Management"}),x.jsxs("p",{className:"text-gray-600 mt-1",children:["Manage product categories (",K.length," of ",e.length," categories)"]})]}),x.jsxs("div",{className:"flex items-center space-x-3 mt-4 lg:mt-0",children:[x.jsxs("button",{onClick:()=>c(null,null,function*(){M(!0);try{yield new Promise(e=>setTimeout(e,1e3)),l({type:"success",title:"Refreshed",message:"Category data has been refreshed."})}catch(e){l({type:"error",title:"Refresh Failed",message:"Failed to refresh data. Please try again."})}finally{M(!1)}}),disabled:R,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[x.jsx(N,{className:"h-4 w-4 "+(R?"animate-spin":"")}),x.jsx("span",{children:"Refresh"})]}),x.jsxs("button",{onClick:()=>c(null,null,function*(){I(!0);try{yield new Promise(e=>setTimeout(e,2e3)),l({type:"success",title:"Export Complete",message:"Categories have been exported successfully."})}catch(e){l({type:"error",title:"Export Failed",message:"Failed to export categories. Please try again."})}finally{I(!1)}}),disabled:L,className:"flex items-center space-x-2 px-3 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 disabled:opacity-50",children:[x.jsx(X,{className:"h-4 w-4"}),x.jsx("span",{children:L?"Exporting...":"Export"})]}),x.jsxs(gs.button,{onClick:z,className:"btn-primary flex items-center space-x-2",whileHover:{scale:1.02},whileTap:{scale:.98},children:[x.jsx(H,{className:"h-4 w-4"}),x.jsx("span",{children:"Add Category"})]})]})]}),x.jsx(ps,{children:v.length>0&&x.jsx(gs.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},className:"bg-indigo-50 border border-indigo-200 rounded-lg p-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("div",{className:"flex items-center space-x-3",children:x.jsxs("span",{className:"text-sm font-medium text-indigo-900",children:[v.length," categor",1!==v.length?"ies":"y"," selected"]})}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>J(!0),className:"px-3 py-1 bg-green-100 text-green-800 rounded-md hover:bg-green-200 text-sm",children:"Activate"}),x.jsx("button",{onClick:()=>J(!1),className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-md hover:bg-yellow-200 text-sm",children:"Deactivate"}),x.jsx("button",{onClick:()=>c(null,null,function*(){if(0===v.length)return;const e=K.filter(e=>v.includes(e.id)&&e.productCount&&e.productCount>0);if(e.length>0)l({type:"error",title:"Cannot Delete Categories",message:`${e.length} categories have products. Please move or delete products first.`});else if(window.confirm(`Are you sure you want to delete ${v.length} categories? This action cannot be undone.`))try{for(const e of v)yield a(e);w([]),l({type:"success",title:"Categories Deleted",message:`${v.length} categories have been deleted successfully.`})}catch(s){l({type:"error",title:"Deletion Failed",message:"Failed to delete some categories. Please try again."})}}),className:"px-3 py-1 bg-red-100 text-red-800 rounded-md hover:bg-red-200 text-sm",children:"Delete"}),x.jsx("button",{onClick:()=>w([]),className:"px-3 py-1 bg-gray-100 text-gray-800 rounded-md hover:bg-gray-200 text-sm",children:"Clear"})]})]})})}),x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Filters & Search"}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx("button",{onClick:()=>O("table"===D?"grid":"table"),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm",children:"table"===D?"Grid View":"Table View"}),x.jsxs("button",{onClick:()=>U(!$),className:"px-3 py-1 border border-gray-300 rounded-md hover:bg-gray-50 text-sm flex items-center space-x-1",children:[x.jsx(Pe,{className:"h-4 w-4"}),x.jsx("span",{children:"Hierarchy"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Categories"}),x.jsxs("div",{className:"relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",value:h,onChange:e=>g(e.target.value),placeholder:"Search by name or description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),x.jsxs("select",{value:T,onChange:e=>F(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"all",children:"All Categories"}),x.jsx("option",{value:"active",children:"Active Only"}),x.jsx("option",{value:"inactive",children:"Inactive Only"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),x.jsxs("select",{value:`${k}-${P}`,onChange:e=>{const[s,t]=e.target.value.split("-");S(s),E(t)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"name-asc",children:"Name (A-Z)"}),x.jsx("option",{value:"name-desc",children:"Name (Z-A)"}),x.jsx("option",{value:"productCount-desc",children:"Most Products"}),x.jsx("option",{value:"productCount-asc",children:"Least Products"}),x.jsx("option",{value:"sortOrder-asc",children:"Sort Order"}),x.jsx("option",{value:"createdAt-desc",children:"Newest First"}),x.jsx("option",{value:"createdAt-asc",children:"Oldest First"})]})]})]}),(h||"all"!==T)&&x.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{className:"text-sm text-gray-600",children:["Showing ",K.length," of ",e.length," categories"]}),x.jsx("button",{onClick:()=>{g(""),F("all")},className:"text-sm text-indigo-600 hover:text-indigo-800",children:"Clear all filters"})]})})]}),0===K.length?x.jsx(EmptyState,{icon:x.jsx(A,{className:"h-24 w-24"}),title:"No categories found",description:"No categories match your current filters. Try adjusting your search criteria or add a new category.",action:{label:"Add Category",onClick:z}}):"table"===D?x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:x.jsx(Js,{columns:Q,data:K,loading:r,emptyMessage:"No categories found",onRowClick:B})}):x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:K.map(e=>x.jsxs(gs.div,{layout:!0,initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.9},className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden hover:shadow-md transition-shadow cursor-pointer",onClick:()=>B(e),children:[x.jsxs("div",{className:"relative",children:[e.imageUrl?x.jsx("img",{src:e.imageUrl,alt:e.name,className:"w-full h-32 object-cover",onError:e=>{e.target.src="/placeholder-image.jpg"}}):x.jsx("div",{className:"w-full h-32 bg-gradient-to-br from-indigo-100 to-purple-100 flex items-center justify-center",children:x.jsx(A,{className:"h-12 w-12 text-indigo-400"})}),x.jsx("div",{className:"absolute top-2 left-2",children:x.jsx("button",{onClick:s=>{s.stopPropagation(),W(e.id)},className:"p-1 bg-white rounded-md shadow-sm",children:v.includes(e.id)?x.jsx(je,{className:"h-4 w-4 text-indigo-600"}):x.jsx(Ne,{className:"h-4 w-4 text-gray-400"})})}),x.jsx("div",{className:"absolute top-2 right-2",children:e.isActive?x.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-green-100 text-green-800",children:[x.jsx("div",{className:"w-2 h-2 bg-green-600 rounded-full mr-1"}),"Active"]}):x.jsxs("span",{className:"inline-flex items-center px-2 py-1 text-xs font-semibold rounded-full bg-red-100 text-red-800",children:[x.jsx("div",{className:"w-2 h-2 bg-red-600 rounded-full mr-1"}),"Inactive"]})})]}),x.jsxs("div",{className:"p-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-1 truncate",children:e.name}),e.description&&x.jsx("p",{className:"text-sm text-gray-500 mb-2 line-clamp-2",children:e.description}),x.jsxs("div",{className:"flex items-center justify-between mb-3",children:[x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsx(_,{className:"h-4 w-4 text-blue-600"}),x.jsxs("span",{className:"text-sm text-gray-600",children:[e.productCount||0," products"]})]}),x.jsxs("span",{className:"text-xs text-gray-400",children:["Order: ",e.sortOrder||0]})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("span",{className:"text-sm text-gray-500",children:["/",e.slug]}),x.jsxs("div",{className:"flex items-center space-x-1",children:[x.jsx("button",{onClick:s=>{s.stopPropagation(),B(e)},className:"p-1 text-indigo-600 hover:text-indigo-900 rounded hover:bg-indigo-50",title:"Edit Category",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{onClick:s=>{s.stopPropagation(),V(e)},className:"p-1 rounded hover:bg-red-50 "+(e.productCount&&e.productCount>0?"text-gray-400 cursor-not-allowed":"text-red-600 hover:text-red-900"),title:e.productCount&&e.productCount>0?"Cannot delete - has products":"Delete Category",disabled:e.productCount&&e.productCount>0,children:x.jsx(q,{className:"h-4 w-4"})})]})]})]})]},e.id))}),x.jsx(vs,{isOpen:i,onClose:()=>d(!1),title:m?"Edit Category":"Add New Category",children:x.jsxs("form",{onSubmit:e=>c(null,null,function*(){e.preventDefault();try{m?(yield t(o(n({},m),{name:p.name,description:p.description,imageUrl:p.imageUrl,isActive:p.isActive})),l({type:"success",title:"Category Updated",message:`${p.name} has been updated successfully.`})):(yield s({name:p.name,description:p.description,imageUrl:p.imageUrl}),l({type:"success",title:"Category Added",message:`${p.name} has been added successfully.`})),d(!1)}catch(a){l({type:"error",title:"Operation Failed",message:`Failed to ${m?"update":"add"} category: ${a instanceof Error?a.message:"Unknown error"}`})}}),className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),x.jsx("input",{type:"text",name:"name",value:p.name,onChange:Y,required:!0,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug"}),x.jsx("input",{type:"text",name:"slug",value:p.slug,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),x.jsx("textarea",{name:"description",value:p.description,onChange:Y,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Category Image"}),x.jsx(yt,{value:p.imageUrl,onChange:e=>y(s=>o(n({},s),{imageUrl:e})),onPathChange:j,folder:"categories",placeholder:"Upload category image or enter URL",aspectRatio:"landscape",maxWidth:400,maxHeight:200})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),x.jsx("input",{type:"number",name:"sortOrder",value:p.sortOrder,onChange:Y,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-indigo-500"})]}),x.jsxs("div",{className:"flex items-center",children:[x.jsx("input",{type:"checkbox",name:"isActive",checked:p.isActive,onChange:Y,className:"h-4 w-4 text-indigo-600 border-gray-300 rounded focus:ring-indigo-500"}),x.jsx("label",{className:"ml-2 block text-sm text-gray-900",children:"Active"})]})]}),x.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[x.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:"Cancel"}),x.jsx("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-indigo-600 border border-transparent rounded-md hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500",children:m?"Update Category":"Add Category"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),jt=Object.freeze(Object.defineProperty({__proto__:null,CollectionManagement:({className:e=""})=>x.jsx("div",{className:`min-h-screen flex items-center justify-center bg-gray-50 ${e}`,children:x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"p-6 bg-gray-100 rounded-full w-24 h-24 mx-auto mb-8 flex items-center justify-center",children:x.jsx(A,{className:"h-12 w-12 text-gray-400"})}),x.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Collection Management Coming Soon"}),x.jsx("p",{className:"text-gray-600 mb-8",children:"We're working on adding collection management functionality."})]})})},Symbol.toStringTag,{value:"Module"})),Nt=Object.freeze(Object.defineProperty({__proto__:null,SettingsManagement:()=>{const[e,s]=b.useState({siteName:"",siteDescription:"",siteUrl:"",contactEmail:"",supportEmail:"",currency:"USD",taxRate:0,shippingFee:0,freeShippingThreshold:0,allowGuestCheckout:!0,requireEmailVerification:!1,enableReviews:!0,enableWishlist:!0,maintenanceMode:!1,smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!0}),[t,a]=b.useState(!0),[r,l]=b.useState(!1),[i,d]=b.useState("general"),[m,u]=b.useState(!1),[h,p]=b.useState(""),[y,f]=b.useState(!1),[N,v]=b.useState(!1),[w,C]=b.useState(!1),[k,S]=b.useState("json"),[P,_]=b.useState(null),[E,A]=b.useState(!1),{showNotification:T}=ls(),F=[{id:"general",name:"General",icon:Ee},{id:"ecommerce",name:"E-commerce",icon:V},{id:"features",name:"Features",icon:I},{id:"email",name:"Email",icon:ge},{id:"security",name:"Security",icon:j}];b.useEffect(()=>{D()},[]);const D=()=>c(null,null,function*(){try{const{data:e,error:t}=yield ys.from("system_settings").select("*").single();if(t&&"PGRST116"!==t.code)throw t;e&&s(e)}catch(e){T({type:"error",title:"Error",message:"Failed to load settings"})}finally{a(!1)}}),O=(e,t)=>{s(s=>o(n({},s),{[e]:t})),A(!0)};return t?x.jsx("div",{className:"p-8",children:x.jsx(Ns,{size:"large",text:"Loading settings..."})}):x.jsx(ws,{children:x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[x.jsx(I,{className:"h-8 w-8 mr-3 text-indigo-600"}),"System Settings"]}),x.jsx("p",{className:"text-gray-600 mt-1",children:"Configure your store settings and preferences"}),E&&x.jsxs("div",{className:"flex items-center mt-2 text-amber-600",children:[x.jsx(g,{className:"h-4 w-4 mr-1"}),x.jsx("span",{className:"text-sm",children:"You have unsaved changes"})]})]}),x.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[x.jsxs("div",{className:"relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",placeholder:"Search settings...",value:h,onChange:e=>p(e.target.value),className:"pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),x.jsx(it,{onClick:()=>f(!0),icon:X,variant:"outline",size:"sm",children:"Export"}),x.jsx(it,{onClick:()=>v(!0),icon:Se,variant:"outline",size:"sm",children:"Import"}),x.jsx(it,{onClick:()=>C(!0),icon:_e,variant:"outline",size:"sm",className:"text-red-600 border-red-300 hover:bg-red-50",children:"Reset"}),x.jsx(it,{onClick:()=>c(null,null,function*(){l(!0);try{const{error:s}=yield ys.from("system_settings").upsert(e,{onConflict:"id"});if(s)throw s;T({type:"success",title:"Settings Saved",message:"System settings have been updated successfully"})}catch(s){T({type:"error",title:"Error",message:"Failed to save settings"})}finally{l(!1)}}),loading:r,icon:te,className:"bg-indigo-600 hover:bg-indigo-700 text-white",children:"Save Changes"})]})]}),x.jsx("div",{className:"border-b border-gray-200",children:x.jsx("nav",{className:"-mb-px flex space-x-8",children:F.map(e=>x.jsxs("button",{onClick:()=>d(e.id),className:(i===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[x.jsx(e.icon,{className:"h-5 w-5"}),x.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["general"===i&&x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Name"}),x.jsx("input",{type:"text",value:e.siteName,onChange:e=>O("siteName",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your Store Name"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site Description"}),x.jsx("textarea",{value:e.siteDescription,onChange:e=>O("siteDescription",e.target.value),rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Brief description of your store"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Site URL"}),x.jsx("input",{type:"url",value:e.siteUrl,onChange:e=>O("siteUrl",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"https://yourstore.com"})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),x.jsx("input",{type:"email",value:e.contactEmail,onChange:e=>O("contactEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"contact@yourstore.com"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Support Email"}),x.jsx("input",{type:"email",value:e.supportEmail,onChange:e=>O("supportEmail",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"support@yourstore.com"})]})]})]}),"ecommerce"===i&&x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Currency"}),x.jsxs("select",{value:e.currency,onChange:e=>O("currency",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"USD",children:"USD - US Dollar"}),x.jsx("option",{value:"EUR",children:"EUR - Euro"}),x.jsx("option",{value:"GBP",children:"GBP - British Pound"}),x.jsx("option",{value:"CAD",children:"CAD - Canadian Dollar"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),x.jsx("input",{type:"number",step:"0.01",min:"0",max:"100",value:e.taxRate,onChange:e=>O("taxRate",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Shipping Fee"}),x.jsx("input",{type:"number",step:"0.01",min:"0",value:e.shippingFee,onChange:e=>O("shippingFee",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fast Shipping Threshold"}),x.jsx("input",{type:"number",step:"0.01",min:"0",value:e.freeShippingThreshold,onChange:e=>O("freeShippingThreshold",parseFloat(e.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]})]}),"features"===i&&x.jsx("div",{className:"space-y-6",children:x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"space-y-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Store Features"}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Allow Guest Checkout"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to checkout without creating an account"})]}),x.jsx("button",{type:"button",onClick:()=>O("allowGuestCheckout",!e.allowGuestCheckout),className:(e.allowGuestCheckout?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:x.jsx("span",{className:(e.allowGuestCheckout?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Require Email Verification"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Require users to verify their email address"})]}),x.jsx("button",{type:"button",onClick:()=>O("requireEmailVerification",!e.requireEmailVerification),className:(e.requireEmailVerification?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:x.jsx("span",{className:(e.requireEmailVerification?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Reviews"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to leave product reviews"})]}),x.jsx("button",{type:"button",onClick:()=>O("enableReviews",!e.enableReviews),className:(e.enableReviews?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:x.jsx("span",{className:(e.enableReviews?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]}),x.jsxs("div",{className:"space-y-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Additional Features"}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Enable Wishlist"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Allow customers to save products to wishlist"})]}),x.jsx("button",{type:"button",onClick:()=>O("enableWishlist",!e.enableWishlist),className:(e.enableWishlist?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:x.jsx("span",{className:(e.enableWishlist?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Maintenance Mode"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Put the store in maintenance mode"})]}),x.jsx("button",{type:"button",onClick:()=>O("maintenanceMode",!e.maintenanceMode),className:(e.maintenanceMode?"bg-red-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:x.jsx("span",{className:(e.maintenanceMode?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]})]})}),"email"===i&&x.jsx("div",{className:"space-y-6",children:x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"SMTP Configuration"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Host"}),x.jsx("input",{type:"text",value:e.smtpHost,onChange:e=>O("smtpHost",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"smtp.gmail.com"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Port"}),x.jsx("input",{type:"number",value:e.smtpPort,onChange:e=>O("smtpPort",parseInt(e.target.value)||587),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"587"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Username"}),x.jsx("input",{type:"text",value:e.smtpUsername,onChange:e=>O("smtpUsername",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"your-email@gmail.com"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"SMTP Password"}),x.jsxs("div",{className:"relative",children:[x.jsx("input",{type:m?"text":"password",value:e.smtpPassword,onChange:e=>O("smtpPassword",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Your SMTP password"}),x.jsx("button",{type:"button",onClick:()=>u(!m),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:m?x.jsx(be,{className:"h-4 w-4 text-gray-400"}):x.jsx(ce,{className:"h-4 w-4 text-gray-400"})})]})]})]}),x.jsx("div",{className:"mt-4",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Use Secure Connection (TLS/SSL)"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Enable secure email transmission"})]}),x.jsx("button",{type:"button",onClick:()=>O("smtpSecure",!e.smtpSecure),className:(e.smtpSecure?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:x.jsx("span",{className:(e.smtpSecure?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})})]})}),"security"===i&&x.jsx("div",{className:"space-y-6",children:x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Security Settings"}),x.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4 mb-6",children:x.jsxs("div",{className:"flex",children:[x.jsx(g,{className:"h-5 w-5 text-yellow-400"}),x.jsxs("div",{className:"ml-3",children:[x.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"Security Notice"}),x.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:x.jsx("p",{children:"These settings affect the security of your entire application. Please review carefully before making changes."})})]})]})}),x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Require Email Verification"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Force users to verify their email before accessing the store"})]}),x.jsx("button",{type:"button",onClick:()=>O("requireEmailVerification",!e.requireEmailVerification),className:(e.requireEmailVerification?"bg-indigo-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:x.jsx("span",{className:(e.requireEmailVerification?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("label",{className:"text-sm font-medium text-gray-700",children:"Maintenance Mode"}),x.jsx("p",{className:"text-sm text-gray-500",children:"Temporarily disable public access to the store"})]}),x.jsx("button",{type:"button",onClick:()=>O("maintenanceMode",!e.maintenanceMode),className:(e.maintenanceMode?"bg-red-600":"bg-gray-200")+" relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-red-500 focus:ring-offset-2",children:x.jsx("span",{className:(e.maintenanceMode?"translate-x-5":"translate-x-0")+" pointer-events-none inline-block h-5 w-5 transform rounded-full bg-white shadow ring-0 transition duration-200 ease-in-out"})})]})]}),x.jsxs("div",{className:"mt-6 p-4 bg-gray-50 rounded-lg",children:[x.jsx("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"Security Recommendations"}),x.jsxs("ul",{className:"text-sm text-gray-600 space-y-1",children:[x.jsx("li",{children:"• Enable email verification for new user accounts"}),x.jsx("li",{children:"• Use strong SMTP passwords and enable secure connections"}),x.jsx("li",{children:"• Regularly review and update security settings"}),x.jsx("li",{children:"• Monitor system logs for suspicious activity"})]})]})]})})]}),x.jsx(vs,{isOpen:y,onClose:()=>f(!1),title:"Export Settings",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Export Format"}),x.jsxs("select",{value:k,onChange:e=>S(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"json",children:"JSON"}),x.jsx("option",{value:"csv",children:"CSV"})]})]}),x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx(it,{onClick:()=>f(!1),variant:"outline",children:"Cancel"}),x.jsx(it,{onClick:()=>{const s=o(n({},e),{exportedAt:(new Date).toISOString(),version:"1.0"});if("json"===k){const e=new Blob([JSON.stringify(s,null,2)],{type:"application/json"}),t=URL.createObjectURL(e),a=document.createElement("a");a.href=t,a.download=`settings-export-${(new Date).toISOString().split("T")[0]}.json`,a.click(),URL.revokeObjectURL(t)}else{const e=Object.entries(s).map(([e,s])=>`${e},${s}`).join("\n"),t=new Blob([e],{type:"text/csv"}),a=URL.createObjectURL(t),r=document.createElement("a");r.href=a,r.download=`settings-export-${(new Date).toISOString().split("T")[0]}.csv`,r.click(),URL.revokeObjectURL(a)}f(!1),T({type:"success",title:"Settings Exported",message:`Settings exported successfully as ${k.toUpperCase()}`})},icon:X,children:"Export"})]})]})}),x.jsx(vs,{isOpen:N,onClose:()=>v(!1),title:"Import Settings",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select File"}),x.jsx("input",{type:"file",accept:".json,.csv",onChange:e=>{var s;return _((null==(s=e.target.files)?void 0:s[0])||null)},className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"}),x.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Supported formats: JSON, CSV"})]}),x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx(it,{onClick:()=>{v(!1),_(null)},variant:"outline",children:"Cancel"}),x.jsx(it,{onClick:()=>c(null,null,function*(){if(P)try{const t=yield P.text();let a;if("application/json"===P.type)a=JSON.parse(t);else{const e=t.split("\n");a={},e.forEach(e=>{const[s,t]=e.split(",");s&&t&&(a[s]=t)})}const r=n({},e);Object.keys(e).forEach(e=>{void 0!==a[e]&&(r[e]=a[e])}),s(r),A(!0),v(!1),_(null),T({type:"success",title:"Settings Imported",message:"Settings imported successfully. Please review and save changes."})}catch(t){T({type:"error",title:"Import Failed",message:"Failed to import settings. Please check the file format."})}}),disabled:!P,icon:Se,children:"Import"})]})]})}),x.jsx(vs,{isOpen:w,onClose:()=>C(!1),title:"Reset Settings",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx(g,{className:"h-6 w-6 text-red-500 mt-0.5"}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Are you sure you want to reset all settings?"}),x.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"This action will restore all settings to their default values. This cannot be undone."})]})]}),x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx(it,{onClick:()=>C(!1),variant:"outline",children:"Cancel"}),x.jsx(it,{onClick:()=>c(null,null,function*(){try{s({siteName:"",siteDescription:"",siteUrl:"",contactEmail:"",supportEmail:"",currency:"USD",taxRate:0,shippingFee:0,freeShippingThreshold:0,allowGuestCheckout:!0,requireEmailVerification:!1,enableReviews:!0,enableWishlist:!0,maintenanceMode:!1,smtpHost:"",smtpPort:587,smtpUsername:"",smtpPassword:"",smtpSecure:!0}),A(!0),C(!1),T({type:"success",title:"Settings Reset",message:"Settings have been reset to defaults. Please save to apply changes."})}catch(e){T({type:"error",title:"Reset Failed",message:"Failed to reset settings."})}}),icon:_e,className:"bg-red-600 hover:bg-red-700 text-white",children:"Reset All Settings"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),vt=Object.freeze(Object.defineProperty({__proto__:null,AnalyticsDashboard:()=>{const[e,s]=b.useState(null),[t,a]=b.useState(!0),[r,l]=b.useState(null),[i,n]=b.useState("30d"),[o,d]=b.useState(!1);b.useEffect(()=>{m()},[i]);const m=()=>c(null,null,function*(){try{if(a(!0),l(null),!ys)throw new Error("Supabase client is not initialized");const e=new Date,t=new Date;switch(i){case"7d":t.setDate(e.getDate()-7);break;case"30d":t.setDate(e.getDate()-30);break;case"90d":t.setDate(e.getDate()-90);break;case"1y":t.setFullYear(e.getFullYear()-1)}const[r,n,o]=yield Promise.all([ys.from("orders").select("id, total, status, created_at, profiles(id, email, full_name)").gte("created_at",t.toISOString()).lte("created_at",e.toISOString()),ys.from("products").select("id, name, price"),ys.from("profiles").select("id, created_at")]);if(r.error)throw new Error(`Failed to fetch orders: ${r.error.message}`);if(n.error)throw new Error(`Failed to fetch products: ${n.error.message}`);if(o.error)throw new Error(`Failed to fetch users: ${o.error.message}`);const d=r.data||[],c=n.data||[],m=o.data||[],x=d.reduce((e,s)=>e+(parseFloat(s.total)||0),0),u=d.length,h=m.length,g=c.length,p=u>0?x/u:0,y=20*Math.random()-10,b=15*Math.random()-5,f=25*Math.random(),j=10*Math.random(),N=d.sort((e,s)=>new Date(s.created_at).getTime()-new Date(e.created_at).getTime()).slice(0,5).map(e=>({id:e.id,total:e.total,status:e.status,created_at:e.created_at,customer_name:Array.isArray(e.profiles)&&e.profiles.length>0&&(e.profiles[0].full_name||e.profiles[0].email)||"Unknown"})),v=c.slice(0,5).map(e=>({id:e.id,name:e.name,sales:Math.floor(100*Math.random())+10,revenue:Math.floor(5e3*Math.random())+500})),w=Array.from({length:6},(e,s)=>{const t=new Date;return t.setMonth(t.getMonth()-s),{month:t.toLocaleDateString("en-US",{month:"short"}),sales:Math.floor(1e4*Math.random())+5e3,orders:Math.floor(100*Math.random())+50}}).reverse();s({totalRevenue:x,revenueGrowth:y,totalOrders:u,ordersGrowth:b,totalCustomers:h,customersGrowth:f,totalProducts:g,productsGrowth:j,averageOrderValue:p,conversionRate:5*Math.random()+2,topProducts:v,recentOrders:N,salesByMonth:w})}catch(e){let t="Failed to fetch analytics data";e instanceof Error&&(t=e.message.includes("apikey")||e.message.includes("API key")?"Authentication error: Please check your Supabase configuration and ensure the API key is properly set.":e.message.includes("network")||e.message.includes("fetch")?"Network error: Please check your internet connection and try again.":e.message.includes("timeout")?"Request timeout: The server is taking too long to respond. Please try again.":e.message),l(t),e instanceof Error&&(e.message.includes("apikey")||e.message.includes("network"))&&s({totalRevenue:125e3,revenueGrowth:12.5,totalOrders:450,ordersGrowth:8.2,totalCustomers:1250,customersGrowth:15.3,totalProducts:89,productsGrowth:5.1,averageOrderValue:277.78,conversionRate:3.2,topProducts:[],recentOrders:[],salesByMonth:[]})}finally{a(!1),d(!1)}}),u=e=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD"}).format(e),h=e=>`${e>=0?"+":""}${e.toFixed(1)}%`;return t?x.jsx("div",{className:"p-8",children:x.jsx(Ns,{size:"large",text:"Loading analytics data..."})}):r?x.jsx("div",{className:"p-8",children:x.jsx(Ys,{error:r,onRetry:m,type:"database",size:"large"})}):e?x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[x.jsxs("div",{children:[x.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Analytics Dashboard"}),x.jsx("p",{className:"text-gray-600 mt-1",children:"Track your business performance and insights"})]}),x.jsxs("div",{className:"flex items-center space-x-3 mt-4 sm:mt-0",children:[x.jsxs("select",{value:i,onChange:e=>n(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"7d",children:"Last 7 days"}),x.jsx("option",{value:"30d",children:"Last 30 days"}),x.jsx("option",{value:"90d",children:"Last 90 days"}),x.jsx("option",{value:"1y",children:"Last year"})]}),x.jsxs("button",{onClick:()=>c(null,null,function*(){d(!0),yield m()}),disabled:o,className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 focus:ring-2 focus:ring-indigo-500 disabled:opacity-50 flex items-center space-x-2",children:[x.jsx(N,{className:"h-4 w-4 "+(o?"animate-spin":"")}),x.jsx("span",{children:"Refresh"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),x.jsx("p",{className:"text-3xl font-bold text-gray-900",children:u(e.totalRevenue)}),x.jsxs("div",{className:"flex items-center mt-2",children:[e.revenueGrowth>=0?x.jsx(me,{className:"h-4 w-4 text-green-500"}):x.jsx(he,{className:"h-4 w-4 text-red-500"}),x.jsx("span",{className:"text-sm font-medium "+(e.revenueGrowth>=0?"text-green-600":"text-red-600"),children:h(e.revenueGrowth)}),x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),x.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:x.jsx(B,{className:"h-6 w-6 text-green-600"})})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),x.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.totalOrders.toLocaleString()}),x.jsxs("div",{className:"flex items-center mt-2",children:[e.ordersGrowth>=0?x.jsx(me,{className:"h-4 w-4 text-green-500"}):x.jsx(he,{className:"h-4 w-4 text-red-500"}),x.jsx("span",{className:"text-sm font-medium "+(e.ordersGrowth>=0?"text-green-600":"text-red-600"),children:h(e.ordersGrowth)}),x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),x.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:x.jsx(E,{className:"h-6 w-6 text-blue-600"})})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Customers"}),x.jsx("p",{className:"text-3xl font-bold text-gray-900",children:e.totalCustomers.toLocaleString()}),x.jsxs("div",{className:"flex items-center mt-2",children:[x.jsx(me,{className:"h-4 w-4 text-green-500"}),x.jsx("span",{className:"text-sm font-medium text-green-600",children:h(e.customersGrowth)}),x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),x.jsx("div",{className:"p-3 bg-purple-100 rounded-lg",children:x.jsx(P,{className:"h-6 w-6 text-purple-600"})})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),x.jsx("p",{className:"text-3xl font-bold text-gray-900",children:u(e.averageOrderValue)}),x.jsxs("div",{className:"flex items-center mt-2",children:[x.jsx(me,{className:"h-4 w-4 text-green-500"}),x.jsx("span",{className:"text-sm font-medium text-green-600",children:"+5.2%"}),x.jsx("span",{className:"text-sm text-gray-500 ml-1",children:"vs last period"})]})]}),x.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:x.jsx(F,{className:"h-6 w-6 text-orange-600"})})]})})]}),x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Recent Orders"}),x.jsx(ce,{className:"h-5 w-5 text-gray-400"})]}),x.jsx("div",{className:"space-y-3",children:e.recentOrders.map(e=>x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:e.customer_name}),x.jsx("p",{className:"text-sm text-gray-500",children:new Date(e.created_at).toLocaleDateString()})]}),x.jsxs("div",{className:"text-right",children:[x.jsx("p",{className:"font-semibold text-gray-900",children:u(e.total)}),x.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full "+("completed"===e.status?"bg-green-100 text-green-800":"pending"===e.status?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"),children:e.status})]})]},e.id))})]}),x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Top Products"}),x.jsx(_,{className:"h-5 w-5 text-gray-400"})]}),x.jsx("div",{className:"space-y-3",children:e.topProducts.map((e,s)=>x.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"w-8 h-8 bg-indigo-100 rounded-full flex items-center justify-center",children:x.jsxs("span",{className:"text-sm font-medium text-indigo-600",children:["#",s+1]})}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:e.name}),x.jsxs("p",{className:"text-sm text-gray-500",children:[e.sales," sales"]})]})]}),x.jsx("p",{className:"font-semibold text-gray-900",children:u(e.revenue)})]},e.id))})]})]}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Export Data"}),x.jsx("p",{className:"text-gray-600",children:"Download your analytics data for further analysis"})]}),x.jsxs("div",{className:"flex space-x-3",children:[x.jsxs("button",{className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 flex items-center space-x-2",children:[x.jsx(X,{className:"h-4 w-4"}),x.jsx("span",{children:"CSV"})]}),x.jsxs("button",{className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 flex items-center space-x-2",children:[x.jsx(X,{className:"h-4 w-4"}),x.jsx("span",{children:"PDF Report"})]})]})]})})]}):x.jsx("div",{className:"p-8 text-center",children:x.jsx("p",{className:"text-gray-500",children:"No analytics data available"})})}},Symbol.toStringTag,{value:"Module"})),wt=Object.freeze(Object.defineProperty({__proto__:null,AdvancedReports:()=>{const[e,s]=b.useState([]),[t,a]=b.useState([]),[r,l]=b.useState([]),[i,d]=b.useState(!0),[m,u]=b.useState("reports"),[h,g]=b.useState(!1),[p,y]=b.useState(!1),[f,j]=b.useState(null),[v,w]=b.useState(""),[k,S]=b.useState(""),[P,_]=b.useState(""),{showNotification:E}=ls(),A=[{id:"reports",name:"Reports",icon:O},{id:"templates",name:"Templates",icon:I},{id:"exports",name:"Export Jobs",icon:X},{id:"builder",name:"Report Builder",icon:H}];b.useEffect(()=>{T()},[]);const T=()=>c(null,null,function*(){d(!0);try{yield Promise.all([F(),R(),M()])}catch(e){E({type:"error",title:"Error",message:"Failed to load reports data"})}finally{d(!1)}}),F=()=>c(null,null,function*(){s([{id:"1",name:"Monthly Sales Report",description:"Comprehensive monthly sales analysis with trends and comparisons",type:"sales",format:"pdf",schedule:"monthly",status:"active",lastRun:"2024-06-01T09:00:00Z",nextRun:"2024-07-01T09:00:00Z",createdBy:"John Admin",createdAt:"2024-01-15T10:00:00Z",parameters:{dateRange:"30days",includeComparisons:!0},recipients:["admin@example.com","sales@example.com"]},{id:"2",name:"User Activity Report",description:"Weekly user engagement and activity metrics",type:"users",format:"csv",schedule:"weekly",status:"active",lastRun:"2024-06-15T08:00:00Z",nextRun:"2024-06-22T08:00:00Z",createdBy:"Jane Manager",createdAt:"2024-02-01T14:00:00Z",parameters:{includeInactive:!1,groupBy:"week"},recipients:["hr@example.com"]},{id:"3",name:"Inventory Status Report",description:"Daily inventory levels and low stock alerts",type:"inventory",format:"excel",schedule:"daily",status:"running",lastRun:"2024-06-16T06:00:00Z",nextRun:"2024-06-17T06:00:00Z",createdBy:"Bob Warehouse",createdAt:"2024-03-10T11:00:00Z",parameters:{lowStockThreshold:10,includeOutOfStock:!0},recipients:["warehouse@example.com","purchasing@example.com"]}])}),R=()=>c(null,null,function*(){a([{id:"1",name:"Sales Performance Template",description:"Standard template for sales performance analysis",type:"sales",fields:["date","revenue","orders","customers","avg_order_value"],filters:["date_range","product_category","customer_segment"],groupBy:["date","category","region"],sortBy:["date_desc","revenue_desc"]},{id:"2",name:"User Engagement Template",description:"Template for analyzing user engagement metrics",type:"users",fields:["user_id","login_count","session_duration","page_views","last_activity"],filters:["date_range","user_type","activity_level"],groupBy:["date","user_type","region"],sortBy:["activity_desc","date_desc"]}])}),M=()=>c(null,null,function*(){l([{id:"1",reportId:"1",reportName:"Monthly Sales Report",status:"completed",progress:100,startTime:"2024-06-16T09:00:00Z",endTime:"2024-06-16T09:05:00Z",fileUrl:"/downloads/monthly-sales-2024-06.pdf",fileSize:2048576},{id:"2",reportId:"3",reportName:"Inventory Status Report",status:"processing",progress:65,startTime:"2024-06-16T10:00:00Z"},{id:"3",reportId:"2",reportName:"User Activity Report",status:"failed",progress:0,startTime:"2024-06-16T08:00:00Z",endTime:"2024-06-16T08:02:00Z",error:"Database connection timeout"}])}),L=e=>{switch(e){case"active":case"completed":return"bg-green-100 text-green-800";case"running":case"processing":return"bg-blue-100 text-blue-800";case"inactive":default:return"bg-gray-100 text-gray-800";case"failed":return"bg-red-100 text-red-800"}},$=e=>{if(0===e)return"0 Bytes";const s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return i?x.jsx("div",{className:"p-8",children:x.jsx(Ns,{size:"large",text:"Loading reports..."})}):x.jsx(ws,{children:x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[x.jsx(D,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Advanced Reports & Export"]}),x.jsx("p",{className:"text-gray-600 mt-1",children:"Create, schedule, and manage comprehensive business reports"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(it,{onClick:()=>g(!0),icon:H,children:"Create Report"}),x.jsx(it,{onClick:()=>y(!0),icon:I,variant:"outline",children:"Create Template"}),x.jsx(it,{onClick:T,icon:N,variant:"outline",children:"Refresh"})]})]}),x.jsx("div",{className:"border-b border-gray-200",children:x.jsx("nav",{className:"-mb-px flex space-x-8",children:A.map(e=>x.jsxs("button",{onClick:()=>u(e.id),className:(m===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[x.jsx(e.icon,{className:"h-5 w-5"}),x.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["reports"===m&&x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[x.jsxs("div",{className:"relative flex-1",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",placeholder:"Search reports...",value:v,onChange:e=>w(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),x.jsx("select",{value:k,onChange:e=>S(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[{value:"",label:"All Types"},{value:"sales",label:"Sales Reports"},{value:"users",label:"User Reports"},{value:"products",label:"Product Reports"},{value:"orders",label:"Order Reports"},{value:"inventory",label:"Inventory Reports"},{value:"custom",label:"Custom Reports"}].map(e=>x.jsx("option",{value:e.value,children:e.label},e.value))}),x.jsx("select",{value:P,onChange:e=>_(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[{value:"",label:"All Statuses"},{value:"active",label:"Active"},{value:"inactive",label:"Inactive"},{value:"running",label:"Running"},{value:"completed",label:"Completed"},{value:"failed",label:"Failed"}].map(e=>x.jsx("option",{value:e.value,children:e.label},e.value))})]}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:e.map(t=>x.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.name}),x.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(t.status)}`,children:t.status})]}),x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:t.description}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-500",children:"Type:"}),x.jsx("span",{className:"text-gray-900 capitalize",children:t.type})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-500",children:"Format:"}),x.jsx("span",{className:"text-gray-900 uppercase",children:t.format})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-500",children:"Schedule:"}),x.jsx("span",{className:"text-gray-900 capitalize",children:t.schedule})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-gray-500",children:"Last Run:"}),x.jsx("span",{className:"text-gray-900",children:new Date(t.lastRun).toLocaleDateString()})]})]}),x.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[x.jsx("button",{onClick:()=>{return a=t.id,c(null,null,function*(){try{const t=e.find(e=>e.id===a);if(!t)return;s(e=>e.map(e=>e.id===a?o(n({},e),{status:"running"}):e));const r={id:Date.now().toString(),reportId:a,reportName:t.name,status:"processing",progress:0,startTime:(new Date).toISOString()};l(e=>[r,...e]),E({type:"success",title:"Report Started",message:`${t.name} is now being generated`});let i=0;const d=setInterval(()=>{i+=20*Math.random(),i>=100?(i=100,clearInterval(d),l(e=>e.map(e=>e.id===r.id?o(n({},e),{status:"completed",progress:100,endTime:(new Date).toISOString(),fileUrl:`/downloads/${t.name.toLowerCase().replace(/\s+/g,"-")}.${t.format}`,fileSize:Math.floor(5e6*Math.random())+1e6}):e)),s(e=>e.map(e=>e.id===a?o(n({},e),{status:"completed",lastRun:(new Date).toISOString()}):e)),E({type:"success",title:"Report Completed",message:`${t.name} has been generated successfully`})):l(e=>e.map(e=>e.id===r.id?o(n({},e),{progress:i}):e))},1e3)}catch(t){E({type:"error",title:"Report Failed",message:"Failed to generate report"})}});var a},className:"text-indigo-600 hover:text-indigo-900",disabled:"running"===t.status,children:x.jsx(Ae,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(ce,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(C,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-red-600 hover:text-red-900",children:x.jsx(q,{className:"h-4 w-4"})})]})]},t.id))})]}),"exports"===m&&x.jsx("div",{className:"space-y-6",children:x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[x.jsx("thead",{className:"bg-gray-50",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Report"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Progress"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Start Time"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"File Size"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),x.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:r.map(e=>x.jsxs("tr",{className:"hover:bg-gray-50",children:[x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.reportName})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${L(e.status)}`,children:e.status})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mr-2",children:x.jsx("div",{className:"bg-indigo-600 h-2 rounded-full transition-all duration-300",style:{width:`${e.progress}%`}})}),x.jsxs("span",{className:"text-sm text-gray-900",children:[e.progress,"%"]})]})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.startTime).toLocaleString()}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.fileSize?$(e.fileSize):"-"}),x.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:["completed"===e.status&&e.fileUrl&&x.jsx("button",{onClick:()=>(e=>{e.fileUrl&&E({type:"success",title:"Download Started",message:`Downloading ${e.reportName}`})})(e),className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(X,{className:"h-4 w-4"})}),"failed"===e.status&&x.jsx("span",{className:"text-red-600 text-xs",children:e.error})]})]},e.id))})]})})}),"templates"===m&&x.jsx("div",{className:"space-y-6",children:x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:t.map(e=>x.jsxs("div",{className:"border border-gray-200 rounded-lg p-6",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:e.name}),x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-gray-700",children:"Type: "}),x.jsx("span",{className:"text-gray-900 capitalize",children:e.type})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-gray-700",children:"Fields: "}),x.jsxs("span",{className:"text-gray-900",children:[e.fields.length," fields"]})]}),x.jsxs("div",{children:[x.jsx("span",{className:"font-medium text-gray-700",children:"Filters: "}),x.jsxs("span",{className:"text-gray-900",children:[e.filters.length," filters"]})]})]}),x.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(ce,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(C,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-red-600 hover:text-red-900",children:x.jsx(q,{className:"h-4 w-4"})})]})]},e.id))})}),"builder"===m&&x.jsx("div",{className:"space-y-6",children:x.jsxs("div",{className:"text-center py-12",children:[x.jsx(D,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"Report Builder"}),x.jsx("p",{className:"text-gray-600 mb-6",children:"Create custom reports with our drag-and-drop report builder"}),x.jsx(it,{onClick:()=>{E({type:"info",title:"Coming Soon",message:"Advanced report builder will be available in the next update"})},icon:H,children:"Launch Report Builder"})]})})]}),x.jsx(vs,{isOpen:h,onClose:()=>g(!1),title:"Create New Report",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Name"}),x.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter report name"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),x.jsx("textarea",{rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter report description"})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Report Type"}),x.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"sales",children:"Sales Report"}),x.jsx("option",{value:"users",children:"User Report"}),x.jsx("option",{value:"products",children:"Product Report"}),x.jsx("option",{value:"orders",children:"Order Report"}),x.jsx("option",{value:"inventory",children:"Inventory Report"}),x.jsx("option",{value:"custom",children:"Custom Report"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Format"}),x.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"pdf",children:"PDF"}),x.jsx("option",{value:"csv",children:"CSV"}),x.jsx("option",{value:"excel",children:"Excel"}),x.jsx("option",{value:"json",children:"JSON"})]})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Schedule"}),x.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"manual",children:"Manual"}),x.jsx("option",{value:"daily",children:"Daily"}),x.jsx("option",{value:"weekly",children:"Weekly"}),x.jsx("option",{value:"monthly",children:"Monthly"})]})]}),x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx(it,{onClick:()=>g(!1),variant:"outline",children:"Cancel"}),x.jsx(it,{onClick:()=>{g(!1),E({type:"success",title:"Report Created",message:"New report has been created successfully"})},icon:te,children:"Create Report"})]})]})})]})})}},Symbol.toStringTag,{value:"Module"})),Ct=Object.freeze(Object.defineProperty({__proto__:null,MarketingManagement:()=>{const[e,s]=b.useState([]),[t,a]=b.useState([]),[r,l]=b.useState(null),[i,n]=b.useState(!0),[o,d]=b.useState("overview"),[m,u]=b.useState(""),[h,g]=b.useState(""),[p,y]=b.useState(""),[f,j]=b.useState(!1),[v,w]=b.useState(!1),[k,S]=b.useState(null),[P,_]=b.useState(null),{showNotification:E}=ls(),A=[{id:"overview",name:"Overview",icon:x.jsx(D,{className:"h-5 w-5"})},{id:"campaigns",name:"Campaigns",icon:x.jsx(W,{className:"h-5 w-5"})},{id:"promotions",name:"Promotions",icon:x.jsx(T,{className:"h-5 w-5"})},{id:"analytics",name:"Analytics",icon:x.jsx(F,{className:"h-5 w-5"})}];b.useEffect(()=>{O()},[]);const O=()=>c(null,null,function*(){n(!0);try{yield Promise.all([R(),M(),L()])}catch(e){E({type:"error",title:"Error",message:"Failed to load marketing data"})}finally{n(!1)}}),R=()=>c(null,null,function*(){s([{id:"1",name:"Summer Sale Email Campaign",type:"email",status:"active",startDate:"2024-06-01",endDate:"2024-06-30",targetAudience:"All Customers",budget:5e3,spent:3200,impressions:45e3,clicks:2250,conversions:180,revenue:18e3,createdAt:"2024-05-15T10:00:00Z",updatedAt:"2024-06-15T14:30:00Z"},{id:"2",name:"New Product Launch",type:"social",status:"scheduled",startDate:"2024-07-01",endDate:"2024-07-15",targetAudience:"Premium Customers",budget:8e3,spent:0,impressions:0,clicks:0,conversions:0,revenue:0,createdAt:"2024-06-01T09:00:00Z",updatedAt:"2024-06-01T09:00:00Z"}])}),M=()=>c(null,null,function*(){a([{id:"1",name:"Flash Sale - 50% Off Electronics",type:"flash_sale",status:"active",discountType:"percentage",discountValue:50,minimumAmount:100,maxUses:1e3,currentUses:234,startDate:"2024-06-15T00:00:00Z",endDate:"2024-06-17T23:59:59Z",products:["electronics"],categories:["smartphones","laptops"],createdAt:"2024-06-14T10:00:00Z"},{id:"2",name:"Buy One Get One Free - Clothing",type:"bogo",status:"scheduled",discountType:"percentage",discountValue:50,minimumAmount:0,maxUses:500,currentUses:0,startDate:"2024-07-01T00:00:00Z",endDate:"2024-07-31T23:59:59Z",products:[],categories:["clothing"],createdAt:"2024-06-20T15:00:00Z"}])}),L=()=>c(null,null,function*(){l({totalCampaigns:12,activeCampaigns:3,totalBudget:5e4,totalSpent:32e3,totalImpressions:45e4,totalClicks:22500,totalConversions:1800,totalRevenue:18e4,averageCTR:5,averageConversionRate:8,roi:462.5})});return i?x.jsx("div",{className:"p-8",children:x.jsx(Ns,{size:"large",text:"Loading marketing data..."})}):x.jsx(ws,{children:x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[x.jsx(W,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Marketing & Promotions"]}),x.jsx("p",{className:"text-gray-600 mt-1",children:"Manage campaigns, promotions, and marketing analytics"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(it,{onClick:()=>j(!0),icon:H,children:"Create Campaign"}),x.jsx(it,{onClick:()=>w(!0),icon:T,variant:"secondary",children:"Create Promotion"})]})]}),x.jsx("div",{className:"border-b border-gray-200",children:x.jsx("nav",{className:"-mb-px flex space-x-8",children:A.map(e=>x.jsxs("button",{onClick:()=>d(e.id),className:(o===e.id?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300")+" whitespace-nowrap py-2 px-1 border-b-2 font-medium text-sm flex items-center",children:[e.icon,x.jsx("span",{className:"ml-2",children:e.name})]},e.id))})}),x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:["overview"===o&&x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[x.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"p-2 bg-blue-100 rounded-lg",children:x.jsx(W,{className:"h-6 w-6 text-blue-600"})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Campaigns"}),x.jsx("p",{className:"text-2xl font-bold text-gray-900",children:(null==r?void 0:r.totalCampaigns)||0})]})]})}),x.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:x.jsx(B,{className:"h-6 w-6 text-green-600"})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),x.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:["$",(null==(I=null==r?void 0:r.totalRevenue)?void 0:I.toLocaleString())||0]})]})]})}),x.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:x.jsx(Te,{className:"h-6 w-6 text-purple-600"})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Conversion Rate"}),x.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(null==r?void 0:r.averageConversionRate)||0,"%"]})]})]})}),x.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:x.jsx(F,{className:"h-6 w-6 text-orange-600"})}),x.jsxs("div",{className:"ml-4",children:[x.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ROI"}),x.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[(null==r?void 0:r.roi)||0,"%"]})]})]})})]}),x.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Quick Actions"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[x.jsx(it,{onClick:()=>j(!0),icon:H,className:"w-full",children:"Create Campaign"}),x.jsx(it,{onClick:()=>w(!0),icon:T,variant:"outline",className:"w-full",children:"Create Promotion"}),x.jsx(it,{onClick:()=>d("analytics"),icon:x.jsx(D,{className:"h-4 w-4"}),variant:"outline",className:"w-full",children:"View Analytics"}),x.jsx(it,{onClick:O,icon:N,variant:"outline",className:"w-full",children:"Refresh Data"})]})]})]}),"campaigns"===o&&x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[x.jsxs("div",{className:"relative flex-1",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",placeholder:"Search campaigns...",value:m,onChange:e=>u(e.target.value),className:"pl-10 pr-4 py-2 w-full border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),x.jsxs("select",{value:h,onChange:e=>g(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"",children:"All Status"}),x.jsx("option",{value:"active",children:"Active"}),x.jsx("option",{value:"paused",children:"Paused"}),x.jsx("option",{value:"scheduled",children:"Scheduled"}),x.jsx("option",{value:"completed",children:"Completed"})]}),x.jsxs("select",{value:p,onChange:e=>y(e.target.value),className:"px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"",children:"All Types"}),x.jsx("option",{value:"email",children:"Email"}),x.jsx("option",{value:"sms",children:"SMS"}),x.jsx("option",{value:"social",children:"Social"}),x.jsx("option",{value:"banner",children:"Banner"}),x.jsx("option",{value:"popup",children:"Popup"})]})]}),x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[x.jsx("thead",{className:"bg-gray-50",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Campaign"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Performance"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Budget"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),x.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>x.jsxs("tr",{className:"hover:bg-gray-50",children:[x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsxs("div",{children:[x.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.name}),x.jsx("div",{className:"text-sm text-gray-500",children:e.targetAudience})]})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:e.type})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"paused"===e.status?"bg-yellow-100 text-yellow-800":"scheduled"===e.status?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"),children:e.status})}),x.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.jsxs("div",{children:["CTR: ",(e.clicks/e.impressions*100).toFixed(2),"%"]}),x.jsxs("div",{children:["Conv: ",(e.conversions/e.clicks*100).toFixed(2),"%"]})]}),x.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[x.jsxs("div",{children:["$",e.spent.toLocaleString()," / $",e.budget.toLocaleString()]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 mt-1",children:x.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:e.spent/e.budget*100+"%"}})})]}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(ce,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:"active"===e.status?x.jsx(Fe,{className:"h-4 w-4"}):x.jsx(Ae,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-red-600 hover:text-red-900",children:x.jsx(q,{className:"h-4 w-4"})})]})})]},e.id))})]})})]}),"promotions"===o&&x.jsx("div",{className:"space-y-6",children:x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:t.map(e=>x.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg p-6 hover:shadow-md transition-shadow",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900",children:e.name}),x.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium "+("active"===e.status?"bg-green-100 text-green-800":"scheduled"===e.status?"bg-blue-100 text-blue-800":"expired"===e.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"),children:e.status})]}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-500",children:"Type:"}),x.jsx("span",{className:"text-sm font-medium text-gray-900",children:e.type})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-500",children:"Discount:"}),x.jsx("span",{className:"text-sm font-medium text-gray-900",children:"percentage"===e.discountType?`${e.discountValue}%`:"fixed"===e.discountType?`$${e.discountValue}`:"Fast Shipping"})]}),x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-sm text-gray-500",children:"Usage:"}),x.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[e.currentUses," / ",e.maxUses]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:x.jsx("div",{className:"bg-indigo-600 h-2 rounded-full",style:{width:e.currentUses/e.maxUses*100+"%"}})}),x.jsxs("div",{className:"flex items-center justify-between text-sm text-gray-500",children:[x.jsxs("span",{children:["Start: ",new Date(e.startDate).toLocaleDateString()]}),x.jsxs("span",{children:["End: ",new Date(e.endDate).toLocaleDateString()]})]})]}),x.jsxs("div",{className:"flex justify-end space-x-2 mt-4",children:[x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(ce,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(G,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(C,{className:"h-4 w-4"})}),x.jsx("button",{className:"text-red-600 hover:text-red-900",children:x.jsx(q,{className:"h-4 w-4"})})]})]},e.id))})}),"analytics"===o&&(()=>{var e,s,t;return x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[x.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Campaign Performance"}),x.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:x.jsx("p",{className:"text-gray-500",children:"Performance chart will be implemented here"})})]}),x.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"ROI Analysis"}),x.jsx("div",{className:"h-64 bg-gray-100 rounded-lg flex items-center justify-center",children:x.jsx("p",{className:"text-gray-500",children:"ROI chart will be implemented here"})})]})]}),x.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200",children:[x.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"Detailed Metrics"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-3xl font-bold text-indigo-600",children:null==(e=null==r?void 0:r.totalImpressions)?void 0:e.toLocaleString()}),x.jsx("p",{className:"text-sm text-gray-500",children:"Total Impressions"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-3xl font-bold text-green-600",children:null==(s=null==r?void 0:r.totalClicks)?void 0:s.toLocaleString()}),x.jsx("p",{className:"text-sm text-gray-500",children:"Total Clicks"})]}),x.jsxs("div",{className:"text-center",children:[x.jsx("p",{className:"text-3xl font-bold text-purple-600",children:null==(t=null==r?void 0:r.totalConversions)?void 0:t.toLocaleString()}),x.jsx("p",{className:"text-sm text-gray-500",children:"Total Conversions"})]})]})]})]})})()]}),x.jsx(vs,{isOpen:f,onClose:()=>j(!1),title:"Create New Campaign",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Name"}),x.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter campaign name"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Type"}),x.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"email",children:"Email Campaign"}),x.jsx("option",{value:"sms",children:"SMS Campaign"}),x.jsx("option",{value:"social",children:"Social Media"}),x.jsx("option",{value:"banner",children:"Banner Ads"}),x.jsx("option",{value:"popup",children:"Popup Campaign"})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),x.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),x.jsx("input",{type:"date",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Budget (₹)"}),x.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0.00"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Campaign Image"}),x.jsx(yt,{value:"",onChange:e=>{},folder:"marketing",placeholder:"Upload campaign image or enter URL",aspectRatio:"landscape",maxWidth:600,maxHeight:300})]}),x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx(it,{onClick:()=>j(!1),variant:"outline",children:"Cancel"}),x.jsx(it,{onClick:()=>{j(!1),E({type:"success",title:"Campaign Created",message:"New campaign has been created successfully"})},icon:H,children:"Create Campaign"})]})]})}),x.jsx(vs,{isOpen:v,onClose:()=>w(!1),title:"Create New Promotion",children:x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Name"}),x.jsx("input",{type:"text",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter promotion name"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Promotion Type"}),x.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"flash_sale",children:"Flash Sale"}),x.jsx("option",{value:"bundle",children:"Bundle Deal"}),x.jsx("option",{value:"bogo",children:"Buy One Get One"}),x.jsx("option",{value:"discount",children:"Discount"}),x.jsx("option",{value:"free_shipping",children:"Fast Shipping"})]})]}),x.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Type"}),x.jsxs("select",{className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",children:[x.jsx("option",{value:"percentage",children:"Percentage"}),x.jsx("option",{value:"fixed",children:"Fixed Amount"}),x.jsx("option",{value:"free_shipping",children:"Fast Shipping"})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Discount Value"}),x.jsx("input",{type:"number",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"0"})]})]}),x.jsxs("div",{className:"flex justify-end space-x-3",children:[x.jsx(it,{onClick:()=>w(!1),variant:"outline",children:"Cancel"}),x.jsx(it,{onClick:()=>{w(!1),E({type:"success",title:"Promotion Created",message:"New promotion has been created successfully"})},icon:T,children:"Create Promotion"})]})]})})]})});var I}},Symbol.toStringTag,{value:"Module"})),kt=Object.freeze(Object.defineProperty({__proto__:null,AuditLogs:()=>{const[e,s]=b.useState([]),[t,a]=b.useState(!0),[r,l]=b.useState(null),[i,d]=b.useState(!1),[u,h]=b.useState(new Set),[g,y]=b.useState(1),[v,w]=b.useState(1),[C]=b.useState(50),{showNotification:k}=ls(),[S,A]=b.useState({dateFrom:new Date(Date.now()-6048e5).toISOString().split("T")[0],dateTo:(new Date).toISOString().split("T")[0],userId:"",category:"",status:"",action:"",searchTerm:""});b.useEffect(()=>{T()},[S,g]);const T=()=>c(null,null,function*(){a(!0);try{const e=[{id:"1",timestamp:(new Date).toISOString(),userId:"user-123",userName:"John Admin",userEmail:"john@example.com",action:"LOGIN",resource:"auth",resourceId:"session-456",details:"User logged in successfully",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",status:"success",category:"auth",metadata:{sessionId:"session-456",loginMethod:"email"}},{id:"2",timestamp:new Date(Date.now()-3e5).toISOString(),userId:"user-124",userName:"Jane Manager",userEmail:"jane@example.com",action:"UPDATE_PRODUCT",resource:"products",resourceId:"prod-789",details:"Updated product price from $99.99 to $89.99",ipAddress:"192.168.1.101",userAgent:"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36",status:"success",category:"product",metadata:{productId:"prod-789",oldPrice:99.99,newPrice:89.99}},{id:"3",timestamp:new Date(Date.now()-6e5).toISOString(),userId:"user-125",userName:"Bob User",userEmail:"bob@example.com",action:"FAILED_LOGIN",resource:"auth",resourceId:"attempt-321",details:"Failed login attempt - invalid password",ipAddress:"203.0.113.45",userAgent:"Mozilla/5.0 (iPhone; CPU iPhone OS 14_7_1 like Mac OS X)",status:"failure",category:"security",metadata:{reason:"invalid_password",attempts:3}},{id:"4",timestamp:new Date(Date.now()-9e5).toISOString(),userId:"user-123",userName:"John Admin",userEmail:"john@example.com",action:"DELETE_USER",resource:"users",resourceId:"user-999",details:"Deleted user account for inactive user",ipAddress:"192.168.1.100",userAgent:"Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36",status:"success",category:"user",metadata:{deletedUserId:"user-999",reason:"inactive_account"}},{id:"5",timestamp:new Date(Date.now()-12e5).toISOString(),userId:"system",userName:"System",userEmail:"system@example.com",action:"BACKUP_COMPLETED",resource:"database",resourceId:"backup-001",details:"Automated database backup completed successfully",ipAddress:"127.0.0.1",userAgent:"System/1.0",status:"success",category:"system",metadata:{backupSize:"2.5GB",duration:"45min"}}];s(e),w(Math.ceil(e.length/C))}catch(e){k({type:"error",title:"Error",message:"Failed to load audit logs"})}finally{a(!1)}}),F=(e,s)=>{A(t=>o(n({},t),{[e]:s})),y(1)},D=e=>{switch(e){case"success":return x.jsx(p,{className:"h-4 w-4 text-green-600"});case"failure":return x.jsx(Ce,{className:"h-4 w-4 text-red-600"});case"warning":return x.jsx(f,{className:"h-4 w-4 text-yellow-600"});default:return x.jsx(Re,{className:"h-4 w-4 text-blue-600"})}},R=e=>{switch(e){case"auth":return x.jsx(j,{className:"h-4 w-4"});case"user":return x.jsx(P,{className:"h-4 w-4"});case"product":return x.jsx(_,{className:"h-4 w-4"});case"order":return x.jsx(E,{className:"h-4 w-4"});case"system":return x.jsx(I,{className:"h-4 w-4"});case"security":return x.jsx(f,{className:"h-4 w-4"});default:return x.jsx(de,{className:"h-4 w-4"})}};return t?x.jsx("div",{className:"p-8",children:x.jsx(Ns,{size:"large",text:"Loading audit logs..."})}):x.jsx(ws,{children:x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between gap-4",children:[x.jsxs("div",{children:[x.jsxs("h1",{className:"text-2xl font-bold text-gray-900 flex items-center",children:[x.jsx(O,{className:"h-8 w-8 mr-3 text-indigo-600"}),"Audit Logs"]}),x.jsx("p",{className:"text-gray-600 mt-1",children:"Track and monitor all system activities and user actions"})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx(lt,{onClick:()=>{const s=e.map(e=>({Timestamp:new Date(e.timestamp).toLocaleString(),User:e.userName,Email:e.userEmail,Action:e.action,Resource:e.resource,Status:e.status,Category:e.category,Details:e.details,"IP Address":e.ipAddress})),t=[Object.keys(s[0]).join(","),...s.map(e=>Object.values(e).map(e=>`"${e}"`).join(","))].join("\n"),a=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=`audit-logs-${(new Date).toISOString().split("T")[0]}.csv`,l.click(),URL.revokeObjectURL(r),k({type:"success",title:"Export Complete",message:"Audit logs exported successfully"})},icon:X,variant:"secondary",children:"Export CSV"}),x.jsx(lt,{onClick:T,icon:N,variant:"secondary",children:"Refresh"})]})]}),x.jsx("div",{className:"bg-white p-6 rounded-lg shadow-sm border border-gray-200",children:x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 xl:grid-cols-6 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"From Date"}),x.jsx("input",{type:"date",value:S.dateFrom,onChange:e=>F("dateFrom",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"To Date"}),x.jsx("input",{type:"date",value:S.dateTo,onChange:e=>F("dateTo",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),x.jsx("select",{value:S.category,onChange:e=>F("category",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[{value:"",label:"All Categories"},{value:"auth",label:"Authentication"},{value:"user",label:"User Management"},{value:"product",label:"Product Management"},{value:"order",label:"Order Management"},{value:"system",label:"System Changes"},{value:"security",label:"Security Events"}].map(e=>x.jsx("option",{value:e.value,children:e.label},e.value))})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),x.jsx("select",{value:S.status,onChange:e=>F("status",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm",children:[{value:"",label:"All Statuses"},{value:"success",label:"Success"},{value:"failure",label:"Failure"},{value:"warning",label:"Warning"}].map(e=>x.jsx("option",{value:e.value,children:e.label},e.value))})]}),x.jsxs("div",{className:"md:col-span-2",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Search"}),x.jsxs("div",{className:"relative",children:[x.jsx(ee,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),x.jsx("input",{type:"text",placeholder:"Search logs...",value:S.searchTerm,onChange:e=>F("searchTerm",e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 text-sm"})]})]})]})}),x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[x.jsx("div",{className:"overflow-x-auto",children:x.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[x.jsx("thead",{className:"bg-gray-50",children:x.jsxs("tr",{children:[x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Resource"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),x.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),x.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.map(e=>x.jsxs(m.Fragment,{children:[x.jsxs("tr",{className:"hover:bg-gray-50",children:[x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(e.timestamp).toLocaleString()}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsxs("div",{className:"flex items-center",children:[x.jsx(Z,{className:"h-4 w-4 text-gray-400 mr-2"}),x.jsxs("div",{children:[x.jsx("div",{className:"text-sm font-medium text-gray-900",children:e.userName}),x.jsx("div",{className:"text-sm text-gray-500",children:e.userEmail})]})]})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsxs("div",{className:"flex items-center",children:[R(e.category),x.jsx("span",{className:"ml-2 text-sm text-gray-900",children:e.action})]})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.resource}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:x.jsxs("div",{className:"flex items-center",children:[D(e.status),x.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:e.status})]})}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.ipAddress}),x.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("button",{onClick:()=>(e=>{const s=new Set(u);s.has(e)?s.delete(e):s.add(e),h(s)})(e.id),className:"text-indigo-600 hover:text-indigo-900",children:u.has(e.id)?x.jsx(De,{className:"h-4 w-4"}):x.jsx(Oe,{className:"h-4 w-4"})}),x.jsx("button",{onClick:()=>(e=>{l(e),d(!0)})(e),className:"text-indigo-600 hover:text-indigo-900",children:x.jsx(ce,{className:"h-4 w-4"})})]})})]}),u.has(e.id)&&x.jsx("tr",{children:x.jsx("td",{colSpan:7,className:"px-6 py-4 bg-gray-50",children:x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{children:[x.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Details: "}),x.jsx("span",{className:"text-sm text-gray-900",children:e.details})]}),x.jsxs("div",{children:[x.jsx("span",{className:"text-sm font-medium text-gray-700",children:"User Agent: "}),x.jsx("span",{className:"text-sm text-gray-900",children:e.userAgent})]}),Object.keys(e.metadata).length>0&&x.jsxs("div",{children:[x.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Metadata: "}),x.jsx("pre",{className:"text-sm text-gray-900 bg-gray-100 p-2 rounded mt-1 overflow-x-auto",children:JSON.stringify(e.metadata,null,2)})]})]})})})]},e.id))})]})}),x.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[x.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[x.jsx("button",{onClick:()=>y(Math.max(1,g-1)),disabled:1===g,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),x.jsx("button",{onClick:()=>y(Math.min(v,g+1)),disabled:g===v,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50",children:"Next"})]}),x.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[x.jsx("div",{children:x.jsxs("p",{className:"text-sm text-gray-700",children:["Showing ",x.jsx("span",{className:"font-medium",children:(g-1)*C+1})," to"," ",x.jsx("span",{className:"font-medium",children:Math.min(g*C,e.length)})," of"," ",x.jsx("span",{className:"font-medium",children:e.length})," results"]})}),x.jsx("div",{children:x.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[x.jsx("button",{onClick:()=>y(Math.max(1,g-1)),disabled:1===g,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Previous"}),x.jsx("button",{onClick:()=>y(Math.min(v,g+1)),disabled:g===v,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50",children:"Next"})]})})]})]})]}),x.jsx(vs,{isOpen:i,onClose:()=>d(!1),title:"Audit Log Details",size:"large",children:r&&x.jsxs("div",{className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Timestamp"}),x.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(r.timestamp).toLocaleString()})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Status"}),x.jsxs("div",{className:"mt-1 flex items-center",children:[D(r.status),x.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:r.status})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"User"}),x.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[r.userName," (",r.userEmail,")"]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),x.jsxs("div",{className:"mt-1 flex items-center",children:[R(r.category),x.jsx("span",{className:"ml-2 text-sm text-gray-900 capitalize",children:r.category})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Action"}),x.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.action})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Resource"}),x.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:[r.resource," (ID: ",r.resourceId,")"]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"IP Address"}),x.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.ipAddress})]})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Details"}),x.jsx("p",{className:"mt-1 text-sm text-gray-900",children:r.details})]}),x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"User Agent"}),x.jsx("p",{className:"mt-1 text-sm text-gray-900 break-all",children:r.userAgent})]}),Object.keys(r.metadata).length>0&&x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Metadata"}),x.jsx("pre",{className:"mt-1 text-sm text-gray-900 bg-gray-100 p-3 rounded-md overflow-x-auto",children:JSON.stringify(r.metadata,null,2)})]}),x.jsx("div",{className:"flex justify-end",children:x.jsx(lt,{onClick:()=>d(!1),variant:"secondary",children:"Close"})})]})})]})})}},Symbol.toStringTag,{value:"Module"})),St=Object.freeze(Object.defineProperty({__proto__:null,AccessibilityDashboard:({className:e=""})=>{const{preferences:s,updatePreference:t}=os(),{announce:a}=ds(),{deviceType:r,breakpoint:l,isTouch:i}=cs(),[n,o]=b.useState(null),[d,m]=b.useState(!1),[u,h]=b.useState("preferences"),g=()=>c(null,null,function*(){m(!0),a("Starting accessibility scan","polite");try{yield new Promise(e=>setTimeout(e,2e3));const e=ms.generateReport(),s=[{type:"Missing Alt Text",severity:"high",count:e.missingAltText.length,description:"Images without alternative text"},{type:"Missing Form Labels",severity:"critical",count:e.missingFormLabels.length,description:"Form inputs without proper labels"},{type:"Heading Issues",severity:"medium",count:e.headingIssues.length,description:"Improper heading hierarchy"}],t=s.reduce((e,s)=>e+s.count,0),r=Math.max(0,100-5*t);o({score:r,issues:s,compliance:{wcagA:r>=80,wcagAA:r>=90,wcagAAA:r>=95}}),a(`Accessibility scan complete. Score: ${r}%`,"assertive")}catch(e){a("Accessibility scan failed","assertive")}finally{m(!1)}});b.useEffect(()=>{g()},[]);const y=b.useMemo(()=>[{key:"reducedMotion",label:"Reduce Motion",description:"Minimize animations and transitions",icon:s.reducedMotion?Me:Le,enabled:s.reducedMotion},{key:"highContrast",label:"High Contrast",description:"Increase color contrast for better visibility",icon:L,enabled:s.highContrast},{key:"largeText",label:"Large Text",description:"Increase text size for better readability",icon:Ie,enabled:s.largeText},{key:"keyboardNavigation",label:"Keyboard Navigation",description:"Enhanced keyboard navigation support",icon:$e,enabled:s.keyboardNavigation},{key:"focusVisible",label:"Focus Indicators",description:"Show visible focus indicators",icon:Ue,enabled:s.focusVisible}],[s]),N=e=>{switch(e){case"critical":return"text-red-600 bg-red-50";case"high":return"text-orange-600 bg-orange-50";case"medium":return"text-yellow-600 bg-yellow-50";case"low":return"text-blue-600 bg-blue-50";default:return"text-gray-600 bg-gray-50"}};return x.jsxs("div",{className:`space-y-6 ${e}`,children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:x.jsx(Ke,{className:"w-6 h-6 text-purple-600"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Accessibility Dashboard"}),x.jsx("p",{className:"text-gray-600",children:"Monitor and manage accessibility features"})]})]}),x.jsxs("button",{onClick:g,disabled:d,className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 transition-colors",children:[x.jsx(j,{className:"w-4 h-4 "+(d?"animate-spin":"")}),x.jsx("span",{children:d?"Scanning...":"Run Scan"})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-center space-x-3",children:["mobile"===r&&x.jsx(ze,{className:"w-5 h-5 text-blue-600"}),"tablet"===r&&x.jsx(Be,{className:"w-5 h-5 text-blue-600"}),"desktop"===r&&x.jsx(Ve,{className:"w-5 h-5 text-blue-600"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"Device Type"}),x.jsx("p",{className:"text-sm text-gray-600 capitalize",children:r})]})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx(Ue,{className:"w-5 h-5 text-green-600"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"Input Method"}),x.jsx("p",{className:"text-sm text-gray-600",children:i?"Touch":"Mouse/Keyboard"})]})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx(D,{className:"w-5 h-5 text-purple-600"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"Breakpoint"}),x.jsx("p",{className:"text-sm text-gray-600 uppercase",children:l})]})]})})]}),x.jsx("div",{className:"border-b border-gray-200",children:x.jsx("nav",{className:"flex space-x-8",children:[{id:"preferences",label:"Preferences",icon:I},{id:"metrics",label:"Metrics",icon:D},{id:"testing",label:"Testing",icon:j}].map(({id:e,label:s,icon:t})=>x.jsxs("button",{onClick:()=>h(e),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(u===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[x.jsx(t,{className:"w-4 h-4"}),x.jsx("span",{children:s})]},e))})}),x.jsxs("div",{className:"space-y-6",children:["preferences"===u&&x.jsxs(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Accessibility Preferences"}),x.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:y.map(({key:e,label:s,description:r,icon:l,enabled:i})=>x.jsx(gs.div,{whileHover:{scale:1.02},className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-start justify-between",children:[x.jsxs("div",{className:"flex items-start space-x-3",children:[x.jsx("div",{className:"p-2 rounded-lg "+(i?"bg-purple-100":"bg-gray-100"),children:x.jsx(l,{className:"w-5 h-5 "+(i?"text-purple-600":"text-gray-400")})}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-gray-900",children:s}),x.jsx("p",{className:"text-sm text-gray-600 mt-1",children:r})]})]}),x.jsx("button",{onClick:()=>{t(e,!i),a(`${s} ${i?"disabled":"enabled"}`,"polite")},className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(i?"bg-purple-600":"bg-gray-200"),role:"switch","aria-checked":i,"aria-label":`Toggle ${s}`,children:x.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(i?"translate-x-6":"translate-x-1")})})]})},e))})]}),"metrics"===u&&x.jsx(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:n?x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Accessibility Score"}),x.jsxs("div",{className:"text-3xl font-bold "+(v=n.score,v>=90?"text-green-600":v>=70?"text-yellow-600":"text-red-600"),children:[n.score,"%"]})]}),x.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3 mb-4",children:x.jsx("div",{className:"h-3 rounded-full transition-all duration-500 "+(n.score>=90?"bg-green-500":n.score>=70?"bg-yellow-500":"bg-red-500"),style:{width:`${n.score}%`}})}),x.jsx("div",{className:"grid grid-cols-3 gap-4",children:Object.entries(n.compliance).map(([e,s])=>x.jsxs("div",{className:"text-center",children:[x.jsx("div",{className:"inline-flex items-center justify-center w-8 h-8 rounded-full mb-2 "+(s?"bg-green-100 text-green-600":"bg-red-100 text-red-600"),children:s?x.jsx(p,{className:"w-4 h-4"}):x.jsx(f,{className:"w-4 h-4"})}),x.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.toUpperCase()}),x.jsx("p",{className:"text-xs text-gray-600",children:s?"Compliant":"Non-compliant"})]},e))})]}),x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Issues Breakdown"}),x.jsx("div",{className:"space-y-3",children:n.issues.map((e,s)=>x.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg border border-gray-200",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:`px-2 py-1 rounded text-xs font-medium ${N(e.severity)}`,children:e.severity.toUpperCase()}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:e.type}),x.jsx("p",{className:"text-sm text-gray-600",children:e.description})]})]}),x.jsx("div",{className:"text-lg font-bold text-gray-900",children:e.count})]},s))})]})]}):x.jsxs("div",{className:"text-center py-8",children:[x.jsx(j,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-600",children:"Run an accessibility scan to see metrics"})]})}),"testing"===u&&x.jsx(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Accessibility Testing Tools"}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[x.jsxs("button",{onClick:()=>{const e=ms.checkAltText();a(`Found ${e.length} images without alt text`,"assertive")},className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left transition-colors",children:[x.jsx(ce,{className:"w-5 h-5 text-blue-600 mb-2"}),x.jsx("h4",{className:"font-medium text-gray-900",children:"Check Alt Text"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Find images missing alternative text"})]}),x.jsxs("button",{onClick:()=>{const e=ms.checkFormLabels();a(`Found ${e.length} form inputs without labels`,"assertive")},className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left transition-colors",children:[x.jsx(Ie,{className:"w-5 h-5 text-green-600 mb-2"}),x.jsx("h4",{className:"font-medium text-gray-900",children:"Check Form Labels"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Find form inputs without proper labels"})]}),x.jsxs("button",{onClick:()=>{const e=ms.checkHeadingHierarchy();a(`Found ${e.length} heading hierarchy issues`,"assertive")},className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left transition-colors",children:[x.jsx(D,{className:"w-5 h-5 text-purple-600 mb-2"}),x.jsx("h4",{className:"font-medium text-gray-900",children:"Check Headings"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Verify proper heading hierarchy"})]}),x.jsxs("button",{onClick:g,disabled:d,className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 text-left transition-colors disabled:opacity-50",children:[x.jsx(j,{className:"w-5 h-5 text-orange-600 mb-2 "+(d?"animate-spin":"")}),x.jsx("h4",{className:"font-medium text-gray-900",children:"Full Scan"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Run comprehensive accessibility audit"})]})]})]})})]})]});var v}},Symbol.toStringTag,{value:"Module"})),Pt=({children:e,maxWidth:s,padding:t,className:a="",fluid:r=!1,centerContent:l=!0})=>{const{getResponsiveValue:i}=cs(),n=b.useMemo(()=>{const e={};return!r&&s&&(e.maxWidth=i(s)||"100%"),t&&(e.padding=i(t)||"1rem"),e},[r,s,t,i]),o=b.useMemo(()=>["responsive-container",r?"w-full":"max-w-full",l&&"mx-auto",a].filter(Boolean).join(" "),[r,l,a]);return x.jsx("div",{className:o,style:n,children:e})},_t=({children:e,columns:s,gap:t,className:a=""})=>{const{getResponsiveValue:r}=cs(),{gridColumns:l}=xs(s),i=b.useMemo(()=>({display:"grid",gridTemplateColumns:`repeat(${l}, 1fr)`,gap:r(t)||"1rem"}),[l,t,r]);return x.jsx("div",{className:`responsive-grid ${a}`,style:i,children:e})},Et=({children:e,span:s=1,offset:t=0,order:a,className:r="",alignSelf:l="stretch"})=>{const{getResponsiveValue:i}=cs(),{getColumnSpan:n}=xs(),o=b.useMemo(()=>{const e="number"==typeof s?s:i(s)||1,r="number"==typeof t?t:i(t)||0,o="number"==typeof a?a:i(a),d={gridColumn:`span ${n(e)}`,alignSelf:l};return r>0&&(d.gridColumnStart=r+1),void 0!==o&&(d.order=o),d},[s,t,a,l,i,n]);return x.jsx("div",{className:`responsive-grid-item ${r}`,style:o,children:e})},At=Object.freeze(Object.defineProperty({__proto__:null,ThemeCustomizationDashboard:({className:e=""})=>{const{themeConfig:s,preferences:t,systemPreferences:a,setMode:r,setColorScheme:l,setFontScale:i,setBorderRadius:n,setAnimationLevel:o,toggleHighContrast:d,toggleReducedMotion:c,resetToDefaults:m}=us(),{deviceType:u,breakpoint:h}=cs(),[g,p]=b.useState("appearance"),[y,f]=b.useState("desktop"),j=[{value:"light",label:"Light",icon:He,description:"Clean and bright interface - only mode available"}],N=b.useMemo(()=>[{name:"Dashboard Cards",description:"How dashboard components will look",preview:x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("h3",{className:"font-semibold text-gray-900",children:"Total Users"}),x.jsx("div",{className:"w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center",children:x.jsx("div",{className:"w-4 h-4 bg-blue-600 rounded"})})]}),x.jsx("div",{className:"text-2xl font-bold text-gray-900",children:"12,345"}),x.jsx("div",{className:"text-sm text-green-600",children:"+12% from last month"})]}),x.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"w-10 h-10 bg-purple-100 rounded-full"}),x.jsxs("div",{children:[x.jsx("div",{className:"font-medium text-gray-900",children:"John Doe"}),x.jsx("div",{className:"text-sm text-gray-600",children:"Administrator"})]})]})})]})},{name:"Form Elements",description:"Input fields and buttons",preview:x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),x.jsx("input",{type:"email",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter your email"})]}),x.jsxs("div",{className:"flex space-x-2",children:[x.jsx("button",{className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Primary"}),x.jsx("button",{className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 transition-colors",children:"Secondary"})]})]})},{name:"Navigation",description:"Menu and navigation elements",preview:x.jsxs("div",{className:"space-y-2",children:[x.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 bg-blue-50 text-blue-700 rounded-lg",children:[x.jsx("div",{className:"w-5 h-5 bg-blue-600 rounded"}),x.jsx("span",{className:"font-medium",children:"Dashboard"})]}),x.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:[x.jsx("div",{className:"w-5 h-5 bg-gray-400 rounded"}),x.jsx("span",{children:"Users"})]}),x.jsxs("div",{className:"flex items-center space-x-3 px-3 py-2 text-gray-600 hover:bg-gray-50 rounded-lg",children:[x.jsx("div",{className:"w-5 h-5 bg-gray-400 rounded"}),x.jsx("span",{children:"Settings"})]})]})}],[]);return x.jsxs(Pt,{className:`space-y-6 ${e}`,children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:x.jsx(L,{className:"w-6 h-6 text-purple-600"})}),x.jsxs("div",{children:[x.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Theme Customization"}),x.jsx("p",{className:"text-gray-600",children:"Customize the appearance and behavior of your dashboard"})]})]}),x.jsxs("div",{className:"flex items-center space-x-2",children:[x.jsxs("button",{onClick:()=>{const e={preferences:t,themeConfig:s,exportedAt:(new Date).toISOString()},a=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),r=URL.createObjectURL(a),l=document.createElement("a");l.href=r,l.download=`theme-${s.colorScheme}-${Date.now()}.json`,document.body.appendChild(l),l.click(),document.body.removeChild(l),URL.revokeObjectURL(r)},className:"flex items-center space-x-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[x.jsx(X,{className:"w-4 h-4"}),x.jsx("span",{children:"Export"})]}),x.jsxs("button",{onClick:m,className:"flex items-center space-x-2 px-4 py-2 text-gray-700 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:[x.jsx(_e,{className:"w-4 h-4"}),x.jsx("span",{children:"Reset"})]})]})]}),x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-center space-x-3",children:["mobile"===u&&x.jsx(ze,{className:"w-5 h-5 text-blue-600"}),"tablet"===u&&x.jsx(Be,{className:"w-5 h-5 text-blue-600"}),"desktop"===u&&x.jsx(Ve,{className:"w-5 h-5 text-blue-600"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"Device"}),x.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[u," (",h,")"]})]})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx(Ve,{className:"w-5 h-5 text-green-600"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"System Theme"}),x.jsx("p",{className:"text-sm text-gray-600",children:a.prefersDark?"Dark":"Light"})]})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-4",children:x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx(ce,{className:"w-5 h-5 text-purple-600"}),x.jsxs("div",{children:[x.jsx("p",{className:"font-medium text-gray-900",children:"Current Theme"}),x.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[s.mode," • ",s.colorScheme]})]})]})})]}),x.jsx("div",{className:"border-b border-gray-200",children:x.jsx("nav",{className:"flex space-x-8",children:[{id:"appearance",label:"Appearance",icon:L},{id:"typography",label:"Typography",icon:Ie},{id:"layout",label:"Layout",icon:We},{id:"accessibility",label:"Accessibility",icon:ce},{id:"preview",label:"Preview",icon:Ve}].map(({id:e,label:s,icon:t})=>x.jsxs("button",{onClick:()=>p(e),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm transition-colors "+(g===e?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[x.jsx(t,{className:"w-4 h-4"}),x.jsx("span",{children:s})]},e))})}),x.jsxs("div",{className:"space-y-6",children:["appearance"===g&&x.jsxs(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Theme Mode"}),x.jsx(_t,{columns:{xs:1,sm:2,lg:4},gap:{xs:"1rem",md:"1.5rem"},children:j.map(({value:e,label:s,icon:a,description:l})=>x.jsx(Et,{children:x.jsxs(gs.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>r(e),className:"w-full p-4 rounded-xl border-2 transition-all "+(t.mode===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[x.jsx(a,{className:"w-8 h-8 mx-auto mb-3 "+(t.mode===e?"text-purple-600":"text-gray-400")}),x.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),x.jsx("p",{className:"text-sm text-gray-600",children:l})]})},e))})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Color Scheme"}),x.jsx(_t,{columns:{xs:1,sm:2,lg:5},gap:{xs:"1rem",md:"1.5rem"},children:[{value:"neutral",label:"Neutral",colors:["#475569","#78716c"],description:"Professional and timeless"},{value:"warm",label:"Warm",colors:["#ea580c","#eab308"],description:"Inviting and energetic"},{value:"cool",label:"Cool",colors:["#3b82f6","#14b8a6"],description:"Calm and trustworthy"},{value:"vibrant",label:"Vibrant",colors:["#a855f7","#ef4444"],description:"Bold and creative"},{value:"monochrome",label:"Monochrome",colors:["#6b7280","#4b5563"],description:"Minimal and focused"}].map(({value:e,label:s,colors:a,description:r})=>x.jsx(Et,{children:x.jsxs(gs.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>l(e),className:"w-full p-4 rounded-xl border-2 transition-all "+(t.colorScheme===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[x.jsx("div",{className:"flex space-x-1 mb-3 justify-center",children:a.map((e,s)=>x.jsx("div",{className:"w-6 h-6 rounded-full",style:{backgroundColor:e}},s))}),x.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),x.jsx("p",{className:"text-sm text-gray-600",children:r})]})},e))})]})]}),"typography"===g&&x.jsx(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Font Scale"}),x.jsx(_t,{columns:{xs:1,md:3},gap:{xs:"1rem",md:"1.5rem"},children:[{value:"compact",label:"Compact",description:"More content, smaller text"},{value:"comfortable",label:"Comfortable",description:"Balanced readability"},{value:"spacious",label:"Spacious",description:"Larger text, easier reading"}].map(({value:e,label:s,description:a})=>x.jsx(Et,{children:x.jsxs(gs.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>i(e),className:"w-full p-6 rounded-xl border-2 transition-all text-left "+(t.fontScale===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[x.jsxs("div",{className:"mb-3 "+("compact"===e?"text-sm":"spacious"===e?"text-lg":"text-base"),children:[x.jsx("div",{className:"font-semibold",children:"Sample Text"}),x.jsx("div",{className:"text-gray-600",children:"This is how text will appear"})]}),x.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),x.jsx("p",{className:"text-sm text-gray-600",children:a})]})},e))})]})}),"layout"===g&&x.jsxs(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-8",children:[x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Border Radius"}),x.jsx(_t,{columns:{xs:1,sm:2,lg:5},gap:{xs:"1rem",md:"1.5rem"},children:[{value:"none",label:"None",description:"Sharp, modern edges"},{value:"small",label:"Small",description:"Subtle rounded corners"},{value:"medium",label:"Medium",description:"Balanced roundness"},{value:"large",label:"Large",description:"Soft, friendly curves"},{value:"full",label:"Full",description:"Pill-shaped elements"}].map(({value:e,label:s,description:a})=>x.jsx(Et,{children:x.jsxs(gs.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>n(e),className:`w-full p-4 border-2 transition-all ${t.borderRadius===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"} ${"none"===e?"rounded-none":"small"===e?"rounded-sm":"medium"===e?"rounded-lg":"large"===e?"rounded-xl":"rounded-full"}`,children:[x.jsx("div",{className:"w-12 h-12 bg-gray-300 mx-auto mb-3 "+("none"===e?"rounded-none":"small"===e?"rounded-sm":"medium"===e?"rounded-lg":"large"===e?"rounded-xl":"rounded-full")}),x.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),x.jsx("p",{className:"text-sm text-gray-600",children:a})]})},e))})]}),x.jsxs("div",{children:[x.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Animation Level"}),x.jsx(_t,{columns:{xs:1,sm:2,lg:4},gap:{xs:"1rem",md:"1.5rem"},children:[{value:"none",label:"None",description:"No animations"},{value:"reduced",label:"Reduced",description:"Minimal animations"},{value:"normal",label:"Normal",description:"Standard animations"},{value:"enhanced",label:"Enhanced",description:"Rich animations"}].map(({value:e,label:s,description:a})=>x.jsx(Et,{children:x.jsxs(gs.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>o(e),className:"w-full p-4 rounded-xl border-2 transition-all "+(t.animationLevel===e?"border-purple-500 bg-purple-50":"border-gray-200 hover:border-gray-300"),children:[x.jsx(Le,{className:"w-8 h-8 mx-auto mb-3 "+(t.animationLevel===e?"text-purple-600":"text-gray-400")}),x.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:s}),x.jsx("p",{className:"text-sm text-gray-600",children:a})]})},e))})]})]}),"accessibility"===g&&x.jsxs(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[x.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx(Ge,{className:"w-5 h-5 text-purple-600"}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-gray-900",children:"High Contrast"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Increase contrast for better visibility"})]})]}),x.jsx("button",{onClick:d,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(t.highContrast?"bg-purple-600":"bg-gray-200"),children:x.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(t.highContrast?"translate-x-6":"translate-x-1")})})]})}),x.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:x.jsxs("div",{className:"flex items-center justify-between mb-4",children:[x.jsxs("div",{className:"flex items-center space-x-3",children:[x.jsx(Le,{className:"w-5 h-5 text-purple-600"}),x.jsxs("div",{children:[x.jsx("h4",{className:"font-medium text-gray-900",children:"Reduced Motion"}),x.jsx("p",{className:"text-sm text-gray-600",children:"Minimize animations and transitions"})]})]}),x.jsx("button",{onClick:c,className:"relative inline-flex h-6 w-11 items-center rounded-full transition-colors "+(t.reducedMotion?"bg-purple-600":"bg-gray-200"),children:x.jsx("span",{className:"inline-block h-4 w-4 transform rounded-full bg-white transition-transform "+(t.reducedMotion?"translate-x-6":"translate-x-1")})})]})})]}),x.jsxs("div",{className:"bg-blue-50 rounded-xl p-6",children:[x.jsx("h4",{className:"font-medium text-blue-900 mb-3",children:"System Preferences Detected"}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-blue-700",children:"Prefers Dark Mode:"}),x.jsx("span",{className:"text-blue-900 font-medium",children:a.prefersDark?"Yes":"No"})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-blue-700",children:"Prefers Reduced Motion:"}),x.jsx("span",{className:"text-blue-900 font-medium",children:a.prefersReducedMotion?"Yes":"No"})]}),x.jsxs("div",{className:"flex justify-between",children:[x.jsx("span",{className:"text-blue-700",children:"Prefers High Contrast:"}),x.jsx("span",{className:"text-blue-900 font-medium",children:a.prefersHighContrast?"Yes":"No"})]})]})]})]}),"preview"===g&&x.jsxs(gs.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"space-y-6",children:[x.jsx("div",{className:"flex items-center justify-center space-x-4",children:[{value:"desktop",icon:Ve,label:"Desktop"},{value:"tablet",icon:Be,label:"Tablet"},{value:"mobile",icon:ze,label:"Mobile"}].map(({value:e,icon:s,label:t})=>x.jsxs("button",{onClick:()=>f(e),className:"flex items-center space-x-2 px-4 py-2 rounded-lg transition-colors "+(y===e?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100"),children:[x.jsx(s,{className:"w-4 h-4"}),x.jsx("span",{children:t})]},e))}),x.jsx(_t,{columns:{xs:1,lg:3},gap:{xs:"1.5rem",md:"2rem"},children:N.map((e,s)=>x.jsx(Et,{children:x.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[x.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:e.name}),x.jsx("p",{className:"text-sm text-gray-600 mb-4",children:e.description}),x.jsx("div",{className:("mobile"===y?"scale-75":"tablet"===y?"scale-90":"scale-100")+" origin-top-left transition-transform",children:e.preview})]})},s))})]})]})]})}},Symbol.toStringTag,{value:"Module"}));export{$s as A,Zs as C,Ns as L,vs as M,Qs as N,js as P,qs as S,fs as _};
