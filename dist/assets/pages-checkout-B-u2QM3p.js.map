{"version":3,"file":"pages-checkout-B-u2QM3p.js","sources":["../../src/pages/CheckoutPage.tsx"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { CreditCard, MapPin, Package, ArrowLeft, CheckCircle } from 'lucide-react';\r\nimport { useCart } from '../contexts/CartContext';\r\nimport { useAuth } from '../contexts/AuthContext';\r\nimport { useOrders } from '../contexts/OrderContext';\r\nimport { createGuestOrder } from '../lib/supabase';\r\nimport { motion } from 'framer-motion';\r\nimport { useNotification } from '../contexts/NotificationContext';\r\nimport { Link } from 'react-router-dom';\r\nimport {\r\n  SecurityGuarantee,\r\n  PaymentBadges,\r\n  CheckoutTrustSignals,\r\n  TrustBadges\r\n} from '../components/Trust';\r\nimport {\r\n  MobileCheckoutLayout,\r\n  MobilePaymentSelector,\r\n  MobileStepNavigation\r\n} from '../components/Mobile/MobileCheckout';\r\nimport {\r\n  MobileShippingForm,\r\n  MobilePaymentForm,\r\n  MobileOrderSummary\r\n} from '../components/Mobile/MobileCheckoutForms';\r\nimport { useMobileDetection } from '../hooks/useMobileGestures';\r\nimport { RazorpayPayment } from '../components/Payment/RazorpayPayment';\r\nimport { emailService } from '../services/emailService';\r\n\r\nexport const CheckoutPage: React.FC = () => {\r\n  const { items, total, clearCart } = useCart();\r\n  const { user } = useAuth();\r\n  const { createOrder } = useOrders();\r\n  const { showNotification } = useNotification();\r\n  const { isMobile } = useMobileDetection();\r\n  const [step, setStep] = useState(1);\r\n  const [orderComplete, setOrderComplete] = useState(false);\r\n  const [orderId, setOrderId] = useState<string | null>(null);\r\n  const [selectedPaymentMethod, setSelectedPaymentMethod] = useState('razorpay');\r\n  const [showPaymentModal, setShowPaymentModal] = useState(false);\r\n\r\n  const [formData, setFormData] = useState({\r\n    // Shipping Info\r\n    firstName: '',\r\n    lastName: '',\r\n    email: user?.email || '',\r\n    phone: '',\r\n    address: '',\r\n    city: '',\r\n    state: '',\r\n    zipCode: '',\r\n    country: 'India',\r\n\r\n    // Payment Info\r\n    cardNumber: '',\r\n    expiryDate: '',\r\n    cvv: '',\r\n    cardName: '',\r\n\r\n    // Options\r\n    saveInfo: false,\r\n    sameAsBilling: true,\r\n  });\r\n\r\n  // Calculate Indian pricing\r\n  const subtotal = total;\r\n  const gst = Math.round(subtotal * 0.18 * 100) / 100; // 18% GST for perfumes\r\n  const freeShippingThreshold = 2000;\r\n  const shipping = subtotal >= freeShippingThreshold ? 0 :\r\n    (formData.state.toLowerCase().includes('kashmir') ? 50 : 100);\r\n  const finalTotal = subtotal + gst + shipping;\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value, type } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? (e.target as HTMLInputElement).checked : value\r\n    }));\r\n  };\r\n\r\n  const validateStep = (currentStep: number) => {\r\n    if (currentStep === 1) {\r\n      if (!formData.firstName || !formData.lastName || !formData.email || !formData.phone || !formData.address || !formData.city || !formData.state) {\r\n        showNotification({\r\n          type: 'error',\r\n          title: 'Validation Error',\r\n          message: 'Please fill in all required shipping information.'\r\n        });\r\n        return false;\r\n      }\r\n      if (!/^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/.test(formData.email)) {\r\n        showNotification({\r\n          type: 'error',\r\n          title: 'Invalid Email',\r\n          message: 'Please enter a valid email address.'\r\n        });\r\n        return false;\r\n      }\r\n    }\r\n\r\n    if (currentStep === 2) {\r\n      if (!formData.cardNumber || !formData.expiryDate || !formData.cvv || !formData.cardName) {\r\n        showNotification({\r\n          type: 'error',\r\n          title: 'Validation Error',\r\n          message: 'Please fill in all required payment information.'\r\n        });\r\n        return false;\r\n      }\r\n      if (formData.cardNumber.replace(/\\s/g, '').length < 16) {\r\n        showNotification({\r\n          type: 'error',\r\n          title: 'Invalid Card Number',\r\n          message: 'Please enter a valid card number.'\r\n        });\r\n        return false;\r\n      }\r\n      if (!/^\\d{2}\\/\\d{2}$/.test(formData.expiryDate)) {\r\n        showNotification({\r\n          type: 'error',\r\n          title: 'Invalid Expiry Date',\r\n          message: 'Please enter expiry date in MM/YY format.'\r\n        });\r\n        return false;\r\n      }\r\n      if (formData.cvv.length < 3) {\r\n        showNotification({\r\n          type: 'error',\r\n          title: 'Invalid CVV',\r\n          message: 'Please enter a valid CVV.'\r\n        });\r\n        return false;\r\n      }\r\n    }\r\n\r\n    return true;\r\n  };\r\n\r\n  const handleStepChange = (nextStep: number) => {\r\n    if (validateStep(step)) {\r\n      setStep(nextStep);\r\n    }\r\n  };\r\n\r\n  const handlePaymentSuccess = async (paymentId: string) => {\r\n    const shippingAddress = {\r\n      fullName: `${formData.firstName} ${formData.lastName}`,\r\n      streetAddress: formData.address,\r\n      city: formData.city,\r\n      state: formData.state,\r\n      postalCode: formData.zipCode,\r\n      country: formData.country,\r\n      phone: formData.phone,\r\n      // Legacy fields for backward compatibility\r\n      street: formData.address,\r\n      zipCode: formData.zipCode\r\n    };\r\n\r\n    let newOrderId: string | null = null;\r\n\r\n    if (user) {\r\n      // Authenticated user order\r\n      newOrderId = await createOrder(\r\n        items,\r\n        shippingAddress,\r\n        undefined, // billing address\r\n        selectedPaymentMethod === 'cod' ? 'Cash on Delivery' : 'Razorpay'\r\n      );\r\n    } else {\r\n      // Guest user order\r\n      newOrderId = await createGuestOrder({\r\n        items,\r\n        shippingAddress,\r\n        paymentMethod: selectedPaymentMethod === 'cod' ? 'Cash on Delivery' : 'Razorpay',\r\n        guestEmail: formData.email,\r\n        guestName: `${formData.firstName} ${formData.lastName}`,\r\n        paymentId: paymentId\r\n      });\r\n    }\r\n\r\n    if (newOrderId) {\r\n      setOrderId(newOrderId);\r\n      setOrderComplete(true);\r\n      setShowPaymentModal(false);\r\n      clearCart();\r\n\r\n      // Send order confirmation email\r\n      try {\r\n        await emailService.sendOrderConfirmationEmail({\r\n          email: formData.email,\r\n          name: `${formData.firstName} ${formData.lastName}`,\r\n          orderId: newOrderId,\r\n          items: items.map(item => ({\r\n            name: item.product.name,\r\n            quantity: item.quantity,\r\n            price: item.product.price,\r\n            image: item.product.images[0]\r\n          })),\r\n          subtotal: subtotal,\r\n          gst: gst,\r\n          shipping: shipping,\r\n          total: finalTotal,\r\n          shippingAddress: {\r\n            street: formData.address,\r\n            city: formData.city,\r\n            state: formData.state,\r\n            zipCode: formData.zipCode,\r\n            country: formData.country\r\n          },\r\n          paymentMethod: selectedPaymentMethod === 'cod' ? 'Cash on Delivery' : 'Razorpay'\r\n        });\r\n      } catch (emailError) {\r\n        console.error('Failed to send order confirmation email:', emailError);\r\n        // Don't fail the order if email fails\r\n      }\r\n    }\r\n  };\r\n\r\n  const handlePaymentError = (error: string) => {\r\n    showNotification({\r\n      type: 'error',\r\n      title: 'Payment Failed',\r\n      message: error\r\n    });\r\n    setShowPaymentModal(false);\r\n  };\r\n\r\n  const handlePaymentCancel = () => {\r\n    setShowPaymentModal(false);\r\n  };\r\n\r\n  const handlePlaceOrder = async () => {\r\n    if (validateStep(step)) {\r\n      if (selectedPaymentMethod === 'cod') {\r\n        // Handle Cash on Delivery directly\r\n        await handlePaymentSuccess('cod_' + Date.now());\r\n      } else {\r\n        // Show Razorpay payment modal\r\n        setShowPaymentModal(true);\r\n      }\r\n    }\r\n  };\r\n\r\n  // Guest checkout is now supported - no authentication required\r\n\r\n  if (items.length === 0 && !orderComplete) {\r\n    return (\r\n      <div className=\"min-h-screen flex items-center justify-center\">\r\n        <div className=\"text-center\">\r\n          <h2 className=\"text-2xl font-bold text-gray-900 mb-4\">Your Cart is Empty</h2>\r\n          <p className=\"text-gray-600\">Add some items to your cart before checking out.</p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  if (orderComplete) {\r\n    return (\r\n      <div className=\"min-h-screen bg-neutral-50 flex items-center justify-center p-4\">\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.9 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          className=\"max-w-lg mx-auto bg-white rounded-2xl shadow-2xl p-10 text-center border border-neutral-200\"\r\n        >\r\n          <div className=\"w-20 h-20 bg-emerald-100 rounded-full flex items-center justify-center mx-auto mb-8\">\r\n            <CheckCircle className=\"h-10 w-10 text-emerald-600\" />\r\n          </div>\r\n          <h1 className=\"text-3xl font-bold text-neutral-900 mb-4 font-luxury\">Order Confirmed!</h1>\r\n          <p className=\"text-neutral-600 mb-8 leading-relaxed\">\r\n            Thank you for your purchase. Your order <span className=\"font-mono font-medium\">#{orderId?.slice(0, 8)}</span> has been placed successfully and you'll receive a confirmation email shortly.\r\n          </p>\r\n\r\n          {/* Trust indicators */}\r\n          <div className=\"bg-neutral-50 rounded-xl p-6 mb-8\">\r\n            <div className=\"grid grid-cols-3 gap-4 text-center\">\r\n              <div>\r\n                <div className=\"text-2xl font-bold text-emerald-600 mb-1\">âœ“</div>\r\n                <div className=\"text-xs text-neutral-600\">Secure Payment</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"text-2xl font-bold text-blue-600 mb-1\">ðŸ“¦</div>\r\n                <div className=\"text-xs text-neutral-600\">Fast Shipping</div>\r\n              </div>\r\n              <div>\r\n                <div className=\"text-2xl font-bold text-purple-600 mb-1\">ðŸ”„</div>\r\n                <div className=\"text-xs text-neutral-600\">Easy Returns</div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n\r\n          <div className=\"space-y-4\">\r\n            {user ? (\r\n              <>\r\n                <Link to=\"/orders\">\r\n                  <button className=\"w-full btn-primary btn-lg\">\r\n                    Track Your Order\r\n                  </button>\r\n                </Link>\r\n                <Link to=\"/products\">\r\n                  <button className=\"w-full btn-secondary btn-lg\">\r\n                    Continue Shopping\r\n                  </button>\r\n                </Link>\r\n              </>\r\n            ) : (\r\n              <>\r\n                <p className=\"text-sm text-neutral-500 mb-6 bg-blue-50 p-4 rounded-lg border border-blue-200\">\r\n                  A confirmation email has been sent to <span className=\"font-medium\">{formData.email}</span> with your order details.\r\n                </p>\r\n                <Link to=\"/products\">\r\n                  <button className=\"w-full btn-primary btn-lg\">\r\n                    Continue Shopping\r\n                  </button>\r\n                </Link>\r\n                <Link to=\"/auth/login\">\r\n                  <button className=\"w-full btn-secondary btn-lg\">\r\n                    Create an Account\r\n                  </button>\r\n                </Link>\r\n              </>\r\n            )}\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Mobile checkout flow\r\n  if (isMobile) {\r\n    const getStepTitle = () => {\r\n      switch (step) {\r\n        case 1: return 'Shipping Information';\r\n        case 2: return 'Payment Method';\r\n        case 3: return 'Review Order';\r\n        default: return 'Checkout';\r\n      }\r\n    };\r\n\r\n    const canProceed = () => {\r\n      switch (step) {\r\n        case 1:\r\n          return formData.firstName && formData.lastName && formData.email &&\r\n            formData.phone && formData.address && formData.city &&\r\n            formData.state && formData.zipCode;\r\n        case 2:\r\n          if (selectedPaymentMethod === 'card') {\r\n            return formData.cardNumber && formData.expiryDate &&\r\n              formData.cvv && formData.cardName;\r\n          }\r\n          return true;\r\n        case 3:\r\n          return true;\r\n        default:\r\n          return false;\r\n      }\r\n    };\r\n\r\n    const handleMobileStepChange = (nextStep: number) => {\r\n      if (validateStep(step)) {\r\n        setStep(nextStep);\r\n      }\r\n    };\r\n\r\n    const renderMobileStep = () => {\r\n      switch (step) {\r\n        case 1:\r\n          return (\r\n            <MobileShippingForm\r\n              formData={formData}\r\n              onChange={handleInputChange}\r\n            />\r\n          );\r\n        case 2:\r\n          return (\r\n            <div className=\"space-y-6\">\r\n              <MobilePaymentSelector\r\n                selectedMethod={selectedPaymentMethod}\r\n                onMethodChange={setSelectedPaymentMethod}\r\n              />\r\n              <MobilePaymentForm\r\n                formData={formData}\r\n                onChange={handleInputChange}\r\n                selectedPaymentMethod={selectedPaymentMethod}\r\n              />\r\n            </div>\r\n          );\r\n        case 3:\r\n          return (\r\n            <MobileOrderSummary\r\n              items={items}\r\n              subtotal={subtotal}\r\n              shipping={shippingCost}\r\n              tax={tax}\r\n              total={finalTotal}\r\n            />\r\n          );\r\n        default:\r\n          return null;\r\n      }\r\n    };\r\n\r\n    return (\r\n      <>\r\n        <MobileCheckoutLayout\r\n          currentStep={step}\r\n          totalSteps={3}\r\n          onStepChange={handleMobileStepChange}\r\n          onBack={() => step > 1 ? setStep(step - 1) : window.history.back()}\r\n          stepTitle={getStepTitle()}\r\n          canProceed={canProceed()}\r\n        >\r\n          {renderMobileStep()}\r\n        </MobileCheckoutLayout>\r\n\r\n        <MobileStepNavigation\r\n          currentStep={step}\r\n          totalSteps={3}\r\n          onBack={step > 1 ? () => setStep(step - 1) : undefined}\r\n          onNext={step < 3 ? () => handleMobileStepChange(step + 1) : handlePlaceOrder}\r\n          canProceed={canProceed()}\r\n          isLoading={false}\r\n        />\r\n      </>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-gray-50\">\r\n      {/* Header */}\r\n      <div className=\"bg-white shadow-sm border-b\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\">\r\n          <div className=\"flex items-center space-x-4\">\r\n            <Link to=\"/products\" className=\"p-2 hover:bg-gray-100 rounded-lg transition-colors\">\r\n              <ArrowLeft className=\"h-5 w-5\" />\r\n            </Link>\r\n            <div>\r\n              <h1 className=\"text-2xl font-bold text-gray-900\">Checkout</h1>\r\n              <div className=\"flex items-center space-x-4 mt-2\">\r\n                <div className={`flex items-center space-x-2 ${step >= 1 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${step >= 1 ? 'bg-indigo-600 text-white' : 'bg-gray-200'\r\n                    }`}>\r\n                    1\r\n                  </div>\r\n                  <span className=\"text-sm font-medium\">Shipping</span>\r\n                </div>\r\n                <div className=\"w-8 h-px bg-gray-300\"></div>\r\n                <div className={`flex items-center space-x-2 ${step >= 2 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${step >= 2 ? 'bg-indigo-600 text-white' : 'bg-gray-200'\r\n                    }`}>\r\n                    2\r\n                  </div>\r\n                  <span className=\"text-sm font-medium\">Payment</span>\r\n                </div>\r\n                <div className=\"w-8 h-px bg-gray-300\"></div>\r\n                <div className={`flex items-center space-x-2 ${step >= 3 ? 'text-indigo-600' : 'text-gray-400'}`}>\r\n                  <div className={`w-6 h-6 rounded-full flex items-center justify-center text-xs font-medium ${step >= 3 ? 'bg-indigo-600 text-white' : 'bg-gray-200'\r\n                    }`}>\r\n                    3\r\n                  </div>\r\n                  <span className=\"text-sm font-medium\">Review</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\">\r\n        <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\r\n          {/* Main Content */}\r\n          <div className=\"lg:col-span-2\">\r\n            {step === 1 && (\r\n              <motion.div\r\n                initial={{ opacity: 0, x: 20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\"\r\n              >\r\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6 flex items-center\">\r\n                  <MapPin className=\"h-5 w-5 mr-2\" />\r\n                  Shipping Information\r\n                </h2>\r\n\r\n                {!user && (\r\n                  <div className=\"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg\">\r\n                    <div className=\"flex items-center\">\r\n                      <div className=\"flex-shrink-0\">\r\n                        <Package className=\"h-5 w-5 text-blue-600\" />\r\n                      </div>\r\n                      <div className=\"ml-3\">\r\n                        <h3 className=\"text-sm font-medium text-blue-900\">\r\n                          Guest Checkout\r\n                        </h3>\r\n                        <p className=\"text-sm text-blue-700\">\r\n                          You're checking out as a guest. You'll receive order updates via email.\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">First Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"firstName\"\r\n                      value={formData.firstName}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Last Name</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"lastName\"\r\n                      value={formData.lastName}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Email</label>\r\n                    <input\r\n                      type=\"email\"\r\n                      name=\"email\"\r\n                      value={formData.email}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Phone</label>\r\n                    <input\r\n                      type=\"tel\"\r\n                      name=\"phone\"\r\n                      value={formData.phone}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div className=\"md:col-span-2\">\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Address</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"address\"\r\n                      value={formData.address}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">City</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"city\"\r\n                      value={formData.city}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">State</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"state\"\r\n                      value={formData.state}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-8 flex justify-end\">\r\n                  <motion.button\r\n                    onClick={() => handleStepChange(2)}\r\n                    className=\"btn-primary\"\r\n                    whileHover={{ scale: 1.02 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                  >\r\n                    Continue to Payment\r\n                  </motion.button>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n\r\n            {step === 2 && (\r\n              <motion.div\r\n                initial={{ opacity: 0, x: 20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\"\r\n              >\r\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6 flex items-center\">\r\n                  <CreditCard className=\"h-5 w-5 mr-2\" />\r\n                  Payment Information\r\n                </h2>\r\n\r\n                {/* Payment Trust Badges */}\r\n                <div className=\"mb-6\">\r\n                  <PaymentBadges className=\"mb-4\" />\r\n                  <TrustBadges variant=\"compact\" showLabels={false} className=\"justify-center\" />\r\n                </div>\r\n\r\n                <div className=\"space-y-6\">\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Card Number</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"cardNumber\"\r\n                      value={formData.cardNumber}\r\n                      onChange={handleInputChange}\r\n                      placeholder=\"1234 5678 9012 3456\"\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n\r\n                  <div className=\"grid grid-cols-2 gap-4\">\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">Expiry Date</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"expiryDate\"\r\n                        value={formData.expiryDate}\r\n                        onChange={handleInputChange}\r\n                        placeholder=\"MM/YY\"\r\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div>\r\n                      <label className=\"block text-sm font-medium text-gray-700 mb-2\">CVV</label>\r\n                      <input\r\n                        type=\"text\"\r\n                        name=\"cvv\"\r\n                        value={formData.cvv}\r\n                        onChange={handleInputChange}\r\n                        placeholder=\"123\"\r\n                        className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-gray-700 mb-2\">Name on Card</label>\r\n                    <input\r\n                      type=\"text\"\r\n                      name=\"cardName\"\r\n                      value={formData.cardName}\r\n                      onChange={handleInputChange}\r\n                      className=\"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      required\r\n                    />\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"mt-8 flex justify-between\">\r\n                  <motion.button\r\n                    onClick={() => setStep(1)}\r\n                    className=\"btn-secondary\"\r\n                    whileHover={{ scale: 1.02 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                  >\r\n                    Back\r\n                  </motion.button>\r\n                  <motion.button\r\n                    onClick={() => handleStepChange(3)}\r\n                    className=\"btn-primary\"\r\n                    whileHover={{ scale: 1.02 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                  >\r\n                    Review Order\r\n                  </motion.button>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n\r\n            {step === 3 && (\r\n              <motion.div\r\n                initial={{ opacity: 0, x: 20 }}\r\n                animate={{ opacity: 1, x: 0 }}\r\n                className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6\"\r\n              >\r\n                <h2 className=\"text-xl font-semibold text-gray-900 mb-6 flex items-center\">\r\n                  <Package className=\"h-5 w-5 mr-2\" />\r\n                  Review Your Order\r\n                </h2>\r\n\r\n                <div className=\"space-y-4 mb-8\">\r\n                  {items.map((item) => (\r\n                    <div key={item.product.id} className=\"flex items-center space-x-4 p-4 bg-gray-50 rounded-lg\">\r\n                      <img\r\n                        src={item.product.images[0]}\r\n                        alt={item.product.name}\r\n                        className=\"w-16 h-16 object-cover rounded-lg\"\r\n                      />\r\n                      <div className=\"flex-1\">\r\n                        <h3 className=\"font-medium text-gray-900\">{item.product.name}</h3>\r\n                        <p className=\"text-sm text-gray-600\">Quantity: {item.quantity}</p>\r\n                      </div>\r\n                      <div className=\"text-right\">\r\n                        <p className=\"font-semibold text-gray-900\">\r\n                          â‚¹{(item.product.price * item.quantity).toFixed(2)}\r\n                        </p>\r\n                      </div>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n\r\n                {/* Security Guarantee */}\r\n                <SecurityGuarantee className=\"mb-6\" />\r\n\r\n                <div className=\"flex justify-between\">\r\n                  <motion.button\r\n                    onClick={() => setStep(2)}\r\n                    className=\"btn-secondary\"\r\n                    whileHover={{ scale: 1.02 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                  >\r\n                    Back\r\n                  </motion.button>\r\n                  <motion.button\r\n                    onClick={handlePlaceOrder}\r\n                    className=\"btn-primary !bg-green-600 !hover:bg-green-700 !focus:ring-green-600/20\"\r\n                    whileHover={{ scale: 1.02 }}\r\n                    whileTap={{ scale: 0.98 }}\r\n                  >\r\n                    Place Order\r\n                  </motion.button>\r\n                </div>\r\n              </motion.div>\r\n            )}\r\n          </div>\r\n\r\n          {/* Order Summary */}\r\n          <div className=\"lg:col-span-1\">\r\n            <div className=\"bg-white rounded-xl shadow-sm border border-gray-100 p-6 sticky top-28\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Order Summary</h3>\r\n\r\n              <div className=\"space-y-3 mb-6\">\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Subtotal</span>\r\n                  <span className=\"font-medium\">â‚¹{subtotal.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">GST (18%)</span>\r\n                  <span className=\"font-medium\">â‚¹{gst.toFixed(2)}</span>\r\n                </div>\r\n                <div className=\"flex justify-between\">\r\n                  <span className=\"text-gray-600\">Shipping</span>\r\n                  <span className=\"font-medium\">\r\n                    {shipping === 0 ? (\r\n                      <span className=\"text-green-600 font-semibold\">FREE</span>\r\n                    ) : (\r\n                      `â‚¹${shipping.toFixed(2)}`\r\n                    )}\r\n                  </span>\r\n                </div>\r\n                {shipping === 0 && (\r\n                  <div className=\"text-xs text-green-600 text-right\">\r\n                    Free shipping on orders â‰¥ â‚¹2,000\r\n                  </div>\r\n                )}\r\n                <div className=\"border-t border-gray-200 pt-3\">\r\n                  <div className=\"flex justify-between\">\r\n                    <span className=\"text-lg font-semibold text-gray-900\">Total</span>\r\n                    <span className=\"text-lg font-bold text-indigo-600\">â‚¹{finalTotal.toFixed(2)}</span>\r\n                  </div>\r\n                </div>\r\n              </div>\r\n\r\n              {/* Checkout Trust Signals */}\r\n              <CheckoutTrustSignals />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Razorpay Payment Modal */}\r\n      {showPaymentModal && (\r\n        <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4\">\r\n          <div className=\"max-w-md w-full\">\r\n            <RazorpayPayment\r\n              amount={subtotal}\r\n              items={items}\r\n              customerInfo={{\r\n                name: `${formData.firstName} ${formData.lastName}`,\r\n                email: formData.email,\r\n                phone: formData.phone\r\n              }}\r\n              shippingAddress={{\r\n                street: formData.address,\r\n                city: formData.city,\r\n                state: formData.state,\r\n                zipCode: formData.zipCode,\r\n                country: formData.country\r\n              }}\r\n              onSuccess={handlePaymentSuccess}\r\n              onError={handlePaymentError}\r\n              onCancel={handlePaymentCancel}\r\n            />\r\n          </div>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CheckoutPage;\r\n"],"names":["CheckoutPage","items","total","clearCart","useCart","user","useAuth","createOrder","useOrders","showNotification","useNotification","isMobile","useMobileDetection","step","setStep","useState","orderComplete","setOrderComplete","orderId","setOrderId","selectedPaymentMethod","setSelectedPaymentMethod","showPaymentModal","setShowPaymentModal","formData","setFormData","firstName","lastName","email","phone","address","city","state","zipCode","country","cardNumber","expiryDate","cvv","cardName","saveInfo","sameAsBilling","subtotal","gst","Math","round","shipping","toLowerCase","includes","finalTotal","handleInputChange","e","name","value","type","target","prev","checked","validateStep","currentStep","title","message","test","replace","length","handleStepChange","nextStep","handlePaymentSuccess","async","paymentId","shippingAddress","fullName","streetAddress","postalCode","street","newOrderId","createGuestOrder","paymentMethod","guestEmail","guestName","emailService","sendOrderConfirmationEmail","map","item","product","quantity","price","image","images","emailError","handlePlaceOrder","Date","now","className","children","jsxs","jsx","motion","div","initial","opacity","scale","animate","CheckCircle","slice","Fragment","Link","to","getStepTitle","canProceed","handleMobileStepChange","renderMobileStep","MobileShippingForm","onChange","MobilePaymentSelector","selectedMethod","onMethodChange","MobilePaymentForm","MobileOrderSummary","shippingCost","tax","MobileCheckoutLayout","totalSteps","onStepChange","onBack","window","history","back","stepTitle","MobileStepNavigation","onNext","isLoading","ArrowLeft","x","MapPin","Package","required","button","onClick","whileHover","whileTap","CreditCard","PaymentBadges","TrustBadges","variant","showLabels","placeholder","src","alt","toFixed","id","SecurityGuarantee","CheckoutTrustSignals","RazorpayPayment","amount","customerInfo","onSuccess","onError","error","onCancel"],"mappings":"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"}