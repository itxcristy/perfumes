{"version":3,"mappings":"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","names":["schedulerModule","exports","push","heap","node","index","length","a","parentIndex","parent","compare","peek","pop","first","last","halfLength","leftIndex","left","rightIndex","right","b","diff","sortIndex","id","unstable_now","performance","now","localPerformance","localDate","Date","initialTime","taskQueue","timerQueue","taskIdCounter","currentTask","currentPriorityLevel","isPerformingWork","isHostCallbackScheduled","isHostTimeoutScheduled","needsPaint","localSetTimeout","setTimeout","localClearTimeout","clearTimeout","localSetImmediate","setImmediate","advanceTimers","currentTime","timer","callback","startTime","expirationTime","handleTimeout","isMessageLoopRunning","schedulePerformWorkUntilDeadline","firstTimer","requestHostTimeout","taskTimeoutID","frameInterval","shouldYieldToHost","performWorkUntilDeadline","hasMoreWork","previousPriorityLevel","priorityLevel","continuationCallback","MessageChannel","channel","port","port2","port1","onmessage","postMessage","ms","unstable_IdlePriority","unstable_ImmediatePriority","unstable_LowPriority","unstable_NormalPriority","unstable_Profiling","unstable_UserBlockingPriority","unstable_cancelCallback","task","unstable_forceFrameRate","fps","Math","floor","unstable_getCurrentPriorityLevel","unstable_next","eventHandler","unstable_requestPaint","unstable_runWithPriority","unstable_scheduleCallback","options","delay","timeout","unstable_shouldYield","unstable_wrapCallback","parentPriorityLevel","apply","this","arguments","Object","defineProperty","dist","value","parse","str","obj","NullObject","len","dec","decode","eqIdx","indexOf","colonIdx","endIdx","lastIndexOf","keyStartIdx","startIndex","keyEndIdx","endIndex","key","slice","valStartIdx","valEndIdx","serialize","name","val","enc","encode","encodeURIComponent","cookieNameRegExp","test","TypeError","cookieValueRegExp","maxAge","Number","isInteger","domain","domainValueRegExp","path","pathValueRegExp","expires","__toString","call","isDate","isFinite","valueOf","toUTCString","httpOnly","secure","partitioned","priority","toLowerCase","sameSite","prototype","toString","C","create","max","code","charCodeAt","min","decodeURIComponent","e","WebSocket","global","window","self","Error","getNativeWebSocket","supabaseUrl","supabaseAnonKey","errors","startsWith","join","validateEnvironment","async","supabase","rpc","setting_name","new_value","is_local","catch","data","error","from","select","limit","message","includes","initializeDatabase","err","createClient","auth","autoRefreshToken","persistSession","detectSessionInUrl","getProducts","filters","query","eq","categoryId","categorySlug","seller","featured","search","ilike","getProductById","single","getCategories","order","ascending","getProfileForUser","userId","getCartItems","addToCart","productId","variantId","quantity","p_product_id","p_variant_id","p_quantity","updateCartItemQuantity","cartItemId","update","updated_at","toISOString","removeFromCart","delete","clearCart","getWishlistItems","addToWishlist","insert","product_id","user_id","_a","getUser","user","removeFromWishlist","addReview","reviewData","rating","comment","title","created_at","createOrder","orderData","subtotal","items","reduce","sum","item","price","taxAmount","shippingAmount","totalAmount","orderNumber","order_number","tax_amount","shipping_amount","total_amount","status","payment_status","payment_method","paymentMethod","shipping_address","shippingAddress","billing_address","billingAddress","orderItems","map","order_id","unit_price","total_price","itemsError","createGuestOrder","guest_email","guestEmail","guest_name","guestName","paymentId","payment_id","updateOrderStatus","orderId","getOrderById","updateUsersBulk","userIds","updates","in","success","updatedCount","deleteUsersBulk","deletedCount","resendConfirmationEmail","email","resend","type","confirmUserEmail","email_confirmed","getUserAddresses","addAddress","addressData","full_name","fullName","street_address","streetAddress","city","state","postal_code","postalCode","country","phone","is_default","isDefault","updateAddress","deleteAddress","addressId","setDefaultAddress","getOrders","getFeaturedProducts","getProductsBasic","getAllUsers","getUserPreferences","getUserSecuritySettings","getUserPaymentMethods","updateUserPreferences","preferences","upsert","updateUserSecuritySettings","settings","deletePaymentMethod","paymentMethodId","setDefaultPaymentMethod","response","fetch","method","headers","apikey","Authorization","ok","statusText","json","count","handleError","operation","validateRequired","fields","missing","filter","field","validateEmail","createUser","userData","existingUser","createError","p_email","p_full_name","p_role","role","p_phone","p_date_of_birth","dateOfBirth","p_is_active","isActive","profileData","profileError","date_of_birth","is_active","emailVerified","email_verified","createdAt","updatedAt","updateUser","updateData","deleteUser","relatedTables","table","createProduct","productData","slug","replace","description","category_id","seller_id","sellerId","stock","image_url","imageUrl","parseFloat","sellerName","images","tags","reviewCount","reviews","updateProduct","deleteProduct","createCategory","categoryData","productCount","updateCategory","deleteCategory","head","MobileAuthView","isOpen","onClose","initialMode","mode","setMode","useState","showPassword","setShowPassword","showConfirmPassword","setShowConfirmPassword","loading","setLoading","step","setStep","rememberMe","setRememberMe","signIn","signUp","logout","useAuth","formData","setFormData","password","confirmPassword","setErrors","handleInputChange","prev","jsxs","className","children","jsx","onClick","ArrowLeft","X","Mail","charAt","Heart","ShoppingCart","Bell","Settings","Gift","LogOut","onSubmit","preventDefault","newErrors","trim","keys","validateForm","general","Sparkles","Crown","AlertCircle","onChange","target","placeholder","disabled","Lock","EyeOff","Eye","User","Phone","Calendar","checked","htmlFor","Fragment","Loader2","Shield","Fingerprint","Star","EnhancedAuthModal","showNotification","useNotification","address","agreeToTerms","subscribeNewsletter","useEffect","document","body","style","overflow","validatePassword","isValid","getPasswordStrength","validation","strength","label","color","CheckCircle","passwordValidation","errorMessage","required","width","fill","stroke","viewBox","xmlns","strokeLinecap","strokeLinejoin","strokeWidth","d","rows","href","Award","SecurityContext","createContext","SecurityProvider","securityState","setSecurityState","isSecureConnection","hasValidSession","rateLimitStatus","userCreation","emailSending","securityEvents","setSecurityEvents","csrfToken","setCsrfToken","checkSecureConnection","validateSession","generateCSRFToken","securityInterval","setInterval","cleanupOldEvents","clearInterval","isSecure","location","protocol","hostname","token","btoa","random","substr","sessionStorage","setItem","logSecurityEvent","event","contextValue","checkPermission","action","resource","details","reason","timestamp","userRole","resourcePermissions","user_management","read","bulk_operations","email_operations","send_welcome","send_confirmation","resend_confirmation","system_settings","allowedRoles","hasPermission","requiredRoles","validateCSRF","getItem","Provider","useSecurity","context","useContext","addUniqueItem","arr","removeItem","splice","clamp","v","MotionGlobalConfig","isNumericalString","isObject","isZeroValueString","memo","result","noop","any","combineFunctions","pipe","transformers","progress","to","toFromDifference","SubscriptionManager","constructor","subscriptions","add","handler","notify","c","numSubscriptions","i","getSize","clear","secondsToMilliseconds","seconds","millisecondsToSeconds","milliseconds","velocityPerSecond","velocity","frameDuration","calcBezier","t","a1","a2","cubicBezier","mX1","mY1","mX2","mY2","getTForX","aX","x","lowerBound","upperBound","currentX","currentT","abs","binarySubdivide","mirrorEasing","easing","p","reverseEasing","backOut","backIn","backInOut","anticipate","pow","circIn","sin","acos","circOut","circInOut","easeIn","easeOut","easeInOut","isBezierDefinition","Array","isArray","easingLookup","linear","easingDefinitionToFunction","definition","x1","y1","x2","y2","stepsOrder","createRenderBatcher","scheduleNextBatch","allowKeepAlive","runNextFrame","useDefaultElapsed","delta","isProcessing","flagRunNextFrame","steps","acc","thisFrame","Set","nextFrame","flushNextFrame","toKeepAlive","WeakSet","latestFrameData","triggerCallback","has","schedule","keepAlive","immediate","queue","cancel","process","frameData","forEach","createRenderStep","setup","resolveKeyframes","preUpdate","preRender","render","postRender","processBatch","useManualTiming","frame","cancelFrame","frameSteps","requestAnimationFrame","clearTime","time","set","newTime","queueMicrotask","checkStringStartsWith","isCSSVariableName","startsAsVariableToken","isCSSVariableToken","singleCssVariableRegex","split","number","transform","alpha","scale","default","sanitize","round","floatRegex","singleColorRegex","isColorString","testProp","Boolean","isNullish","hasOwnProperty","splitColor","aName","bName","cName","match","rgbUnit","clampRgbUnit","rgba","red","green","blue","alpha$1","hex","r","g","substring","parseInt","createUnitType","unit","endsWith","degrees","percent","px","vh","vw","progressPercentage","hsla","hue","saturation","lightness","getAnimatableNone","parsed","colorRegex","NUMBER_TOKEN","COLOR_TOKEN","complexRegex","analyseComplexValue","originalValue","values","indexes","var","types","parsedValue","parseComplexValue","createTransformer","source","numSections","output","convertNumbersToZero","complex","isNaN","_b","transformer","hueToRgb","q","mixImmediate","mixNumber","mixLinearColor","fromExpo","expo","sqrt","colorTypes","asRGBA","find","model","hslaToRgba","mixColor","fromRGBA","toRGBA","blended","invisibleValues","mixNumber$1","getMixer","mixComplex","mixArray","mixObject","numValues","blendValue","origin","template","originStats","targetStats","mixVisibility","orderedOrigin","pointers","originIndex","originValue","matchOrder","mix","mixer","frameloopDriver","passTimestamp","start","stop","generateLinearEasing","duration","resolution","points","numPoints","maxGeneratorDuration","calcGeneratorDuration","generator","next","done","Infinity","calcGeneratorVelocity","resolveValue","current","prevT","springDefaults","granular","safeMin","findSpring","bounce","mass","envelope","derivative","dampingRatio","undampedFreq","exponentialDecay","calcAngularFreq","exp","f","initialGuess","rootIterations","approximateRoot","stiffness","damping","durationKeys","physicsKeys","isSpringType","some","spring","optionsOrVisualDuration","visualDuration","keyframes","restSpeed","restDelta","isResolvedFromDuration","springOptions","root","PI","derived","getSpringOptions","initialVelocity","initialDelta","undampedAngularFreq","isGranularScale","resolveSpring","angularFreq","cos","dampedAngularFreq","freqForT","sinh","cosh","calculatedDuration","currentVelocity","isBelowVelocityThreshold","isBelowDisplacementThreshold","toTransition","inertia","power","timeConstant","bounceDamping","bounceStiffness","modifyTarget","nearestBoundary","amplitude","ideal","calcDelta","calcLatest","applyFriction","latest","timeReachedBoundary","spring$1","checkCatchBoundary","hasUpdatedFrame","interpolate","input","isClamp","ease","inputLength","isZeroDeltaRange","reverse","mixers","customMixer","mixerFactory","numMixers","easingFunction","createMixers","interpolator","progressInRange","defaultOffset","offset","remaining","offsetProgress","fillOffset","keyframeValues","times","easingFunctions","isEasingArray","absoluteTimes","o","convertOffsetToTimes","mapTimeToKeyframe","applyToOptions","generatorOptions","createGenerator","createGeneratorEasing","isNotNull","getFinalKeyframe","repeat","repeatType","finalKeyframe","speed","resolvedKeyframes","transitionTypeMap","decay","tween","replaceTransitionType","transition","WithPromise","updateFinished","finished","_finished","Promise","resolve","notifyFinished","then","onResolve","onReject","percentToProgress","JSAnimation","super","isStopped","holdTime","playbackSpeed","motionValue","tick","teardown","onStop","initAnimation","play","autoplay","pause","repeatDelay","keyframes$1","generatorFactory","mixKeyframes","mirroredGenerator","resolvedDuration","totalDuration","updateTime","animationTime","sample","onUpdate","timeWithoutDelay","isInDelayPhase","elapsed","frameGenerator","currentIteration","iterationProgress","isAnimationFinished","finish","reject","driver","newSpeed","hasChanged","onPlay","complete","onComplete","onCancel","stopDriver","sampleTime","attachTimeline","timeline","allowFlatten","observe","radToDeg","rad","rotate","angle","atan2","rebaseAngle","matrix2dParsers","y","translateX","translateY","scaleX","scaleY","rotateZ","skewX","atan","skewY","skew","matrix3dParsers","z","translateZ","rotateX","rotateY","defaultTransformValue","parseValueFromTransform","matrix3dMatch","parsers","matrix2dMatch","valueParser","convertTransformToNumber","readTransformValue","instance","getComputedStyle","transformPropOrder","transformProps","isNumOrPxType","transformKeys","nonTranslationalTransformKeys","positionalValues","paddingLeft","paddingRight","height","paddingTop","paddingBottom","top","_bbox","bottom","toResolve","isScheduled","anyNeedsMeasurement","isForced","measureAllKeyframes","resolversToMeasure","resolver","needsMeasurement","elementsToMeasure","element","transformsToRestore","Map","removedTransforms","visualElement","getValue","get","removeNonTranslationalTransform","measureInitialState","restore","measureEndState","suspendedScrollY","scrollTo","readAllKeyframes","readKeyframes","KeyframeResolver","unresolvedKeyframes","isAsync","scheduleResolve","currentValue","valueAsRead","readValue","fillWildcards","setFinalKeyframe","renderEndStyles","isForcedComplete","resume","supportsScrollTimeline","ScrollTimeline","supportsFlags","memoSupports","supportsFlag","memoized","supportsLinearEasing","createElement","animate","opacity","cubicBezierAsString","supportedWaapiEasing","mapEasingToNativeEasing","segmentEasing","startWaapiAnimation","valueName","pseudoElement","keyframeOptions","iterations","direction","isGenerator","NativeAnimation","finishedTime","isPseudoElement","applyGeneratorOptions","animation","onfinish","keyframe","updateMotionValue","isCSSVar","setProperty","setStyle","commitStyles","effect","getComputedTiming","playbackRate","playState","newStartTime","updateTiming","unsupportedEasingFunctions","replaceStringEasing","NativeAnimationExtended","sampleAnimation","setWithVelocity","isAnimatable","acceleratedValues","supportsWaapi","Element","AsyncMotionValueAnimation","_animation","stopTimeline","keyframeResolver","optionsWithDefaults","KeyframeResolver$1","forced","onKeyframesResolved","sync","isHandoff","resolvedAt","originKeyframe","targetKeyframe","isOriginAnimatable","isTargetAnimatable","hasKeyframesChanged","canAnimate","instantAnimations","resolvedOptions","owner","HTMLElement","transformTemplate","getProps","supportsBrowserAnimation","pendingTimeline","_onReject","finally","splitCSSVariableRegex","getVariableValue","depth","fallback","exec","token1","token2","parseCSSVariable","resolved","getPropertyValue","trimmed","getValueTransition","positionalKeys","testValueType","dimensionValueTypes","findDimensionValueType","isNone","maxDefaults","applyDefaultFilter","defaultValue","functionRegex","functions","int","numberValueTypes","borderWidth","borderTopWidth","borderRightWidth","borderBottomWidth","borderLeftWidth","borderRadius","radius","borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius","maxWidth","maxHeight","padding","margin","marginTop","marginRight","marginBottom","marginLeft","backgroundPositionX","backgroundPositionY","scaleZ","distance","perspective","transformPerspective","originX","originY","originZ","zIndex","fillOpacity","strokeOpacity","numOctaves","defaultValueTypes","backgroundColor","outlineColor","borderColor","borderTopColor","borderRightColor","borderBottomColor","borderLeftColor","WebkitFilter","getDefaultValueType","defaultValueType","invalidTemplates","DOMKeyframesResolver","resolveNoneKeyframes","originType","targetType","noneKeyframeIndexes","animatableTemplate","noneIndex","makeNoneKeyframesAnimatable","pageYOffset","measuredOrigin","measureViewportBox","measureKeyframe","jump","finalKeyframeIndex","unsetTransformName","unsetTransformValue","getValueAsType","isHTMLElement","MotionValue","init","canTrackVelocity","events","updateAndNotify","setPrevFrameValue","setCurrent","change","dependents","dependent","dirty","renderRequest","hasAnimated","prevFrameValue","prevUpdatedAt","subscription","on","eventName","unsubscribe","clearListeners","eventManagers","attach","passiveEffect","stopPassiveEffect","endAnimation","addDependent","removeDependent","getPrevious","getVelocity","startAnimation","animationStart","animationComplete","clearAnimation","animationCancel","isAnimating","destroy","microtask","isDragging","isDragActive","setDragLock","axis","setupGesture","elementOrSelector","elements","scope","selectorCache","EventTarget","querySelectorAll","resolveElements","gestureAbortController","AbortController","passive","signal","abort","isValidHover","pointerType","hover","onHoverStart","eventOptions","onPointerEnter","enterEvent","onHoverEnd","onPointerLeave","leaveEvent","removeEventListener","addEventListener","isNodeOrChild","child","parentElement","isPrimaryPointer","button","isPrimary","focusableElements","isPressing","filterEvents","firePointerEvent","dispatchEvent","PointerEvent","bubbles","isValidPressEvent","press","targetOrSelector","onPressStart","targets","cancelEvents","startPress","startEvent","currentTarget","onPressEnd","onPointerEnd","endEvent","onPointerUp","onPointerCancel","upEvent","useGlobalTarget","cancelEvent","focusEvent","handleKeydown","handleKeyup","enableKeyboardPress","tagName","tabIndex","hasAttribute","isSVGElement","isSVGSVGElement","isMotionValue","valueTypes","findValueType","SearchOverlay","setQuery","products","useProducts","suggestions","setSuggestions","filtered","motion","div","initial","exit","stopPropagation","Search","autoFocus","whileHover","whileTap","product","Link","src","alt","toLocaleString","TrendingUp","term","useSwipeGesture","handlers","config","minSwipeDistance","maxSwipeTime","preventDefaultTouchmove","throttleMs","touchStart","setTouchStart","touchEnd","setTouchEnd","registerEventListener","cleanupRegistry","useRef","timers","intervals","eventListeners","observers","abortControllers","isUnmounted","registerSubscription","useCallback","registerTimer","registerInterval","interval","registerObserver","observer","registerAbortController","controller","safeSetTimeout","safeSetInterval","safeFetch","cleanup","registry","disconnect","useMemoryCleanup","gestureRef","onTouchStart","performanceMonitor","startMeasure","touch","targetTouches","clientX","clientY","endMeasure","onTouchMove","func","inThrottle","args","throttle","onTouchEnd","deltaX","deltaY","absDeltaX","absDeltaY","onSwipeLeft","onSwipeRight","_c","onSwipeUp","_d","onSwipeDown","bindGestures","useMobileDetection","isMobile","setIsMobile","orientation","setOrientation","checkMobile","userAgent","navigator","innerWidth","checkOrientation","innerHeight","handleResize","isPortrait","isLandscape","MobileNavigation","onCartClick","itemCount","useCart","wishlistItems","useWishlist","useLocation","navigate","useNavigate","navRef","activeDropdown","setActiveDropdown","navigationItems","icon","Home","Package","hasDropdown","dropdownItems","Tag","pathname","handleEscape","isActiveLink","firstFocusable","querySelector","focus","onKeyDown","ref","avatar","toggleDropdown","itemName","ChevronRight","dropdownItem","PackageIcon","logo$1","OptimizedLogo","React","isLoaded","setIsLoaded","logoSrc","setLogoSrc","logo","Image","decoding","Header","onAuthClick","isMenuOpen","setIsMenuOpen","isUserMenuOpen","setIsUserMenuOpen","isSearchOpen","setIsSearchOpen","isCategoriesOpen","setIsCategoriesOpen","isScrolled","setIsScrolled","categoriesDropdownRef","userMenuRef","handleScroll","scrollPosition","scrollY","handleClickOutside","contains","isHomePage","headerClasses","containerClasses","ChevronDown","Menu","Footer","Facebook","Twitter","Instagram","Youtube","links","section","link","MapPin","CartSidebar","updateQuantity","total","AnimatePresence","ShoppingBag","layout","Minus","Plus","toFixed","CompareTray","clearCompare","useCompare","GitCompare","Layout","isCartOpen","setIsCartOpen","isDashboardPage","DatabaseErrorOverlay","setError","useError","errorObj","isRLSRecursion","detectRLSRecursionError","isRLSIssue","isConnectionIssue","guidance","solution","scriptFile","severity","SeverityIcon","AlertTriangle","Database","RefreshCw","getSeverityIcon","getSeverityColor","reload","ErrorBoundary","Component","props","__publicField","setState","hasError","errorInfo","getDerivedStateFromError","componentDidCatch","shouldIgnore","ignored","stack","onError","handleRetry","ScrollToTop","behavior","sizeClasses","xs","sm","md","lg","xl","textSizeClasses","UniversalLoader","size","text","subText","overlay","onRetry","showIcon","animated","content","animationDelay","animationDuration","iconClass","WifiOff","Loader","getIcon","getLoaderContent","getStatusColor","displayName","PageLoader","stages","completedStages","stage","completed","totalStages","SafeImage","fallbackSrc","onLoad","retryAttempts","currentSrc","setCurrentSrc","setHasError","isLoading","setIsLoading","attempts","setAttempts","imgRef","minHeight","nativeEvent","separator","crossOrigin","aspectRatio","GlobalMediaErrorHandler","handleGlobalMediaError","HomePage","lazy","__vitePreload","import","__VITE_PRELOAD__","ProductsPage","n","P","ProductDetailPage","SearchPage","S","WishlistPage","W","ComparePage","NewArrivalsPage","N","DealsPage","D","CategoriesPage","CollectionsPage","AuthPage","A","NotFoundPage","DashboardPage","module","ProfilePage","CheckoutPage","OrdersPage","O","SettingsPage","PageLoadingFallback","App","handleMediaError","stopImmediatePropagation","initializeAccessibility","initializeAccessibility2","CombinedProvider","Router","SkipLink","Suspense","Routes","Route","createRoot","getElementById","StrictMode","Hero","containerRef","backgroundImage","span","fontFamily","letterSpacing","lineHeight","textShadow","nav","minWidth","boxShadow","Truck","ShieldCheck","CategorySection","categories","limitedCategories","h2","whileInView","viewport","once","category","image","ArrowRight","trustBadges","bgColor","CreditCard","TrustBadges","variant","showLabels","badgeClasses","horizontal","vertical","compact","badge","SecurityGuarantee","PaymentBadges","mockRecentPurchases","customerName","productName","timeAgo","verified","SocialProof","showRecentPurchases","showViewingCount","showCustomerCount","currentPurchaseIndex","setCurrentPurchaseIndex","viewingCount","setViewingCount","newCount","Clock","Users","ReviewSummary","percentage","_","TrendingIndicator","isHot","salesIncrease","StockUrgency","lowStockThreshold","isVeryLow","urgencyLevel","high","medium","trustSignals","RotateCcw","Headphones","TrustSignals","showIcons","itemClasses","grid","ProductTrustSignals","CheckoutTrustSignals","checkoutSignals","MiniTrustIndicators","freeShipping","warranty","returns","indicators","indicator","ProductPageTrustSignals","currentViewers","setCurrentViewers","recentPurchases","setRecentPurchases","updateViewers","updatePurchases","viewerInterval","purchaseInterval","trustFeatures","feature","RecentPurchaseNotification","customerLocation","isVisible","setIsVisible","hideTimer","useAddToCartWithAuth","addItem","showAuthModal","useAuthModal","handleAddToCart","useAddToWishlistWithAuth","handleAddToWishlist","useAddToCompareWithAuth","addToCompare","handleAddToCompare","LoadingSpinner","showProgress","sizes","small","large","spinner","ProgressiveLoading","MobileTouchButton","Icon","ariaLabel","fullWidth","hapticFeedback","baseClasses","minimum","comfortable","optimal","iconSizeClasses","vibrate","primary","secondary","ghost","danger","MobileIconButton","active","variantClasses","MobileProductCard","isInWishlist","isInCompare","showSuccess","currentImageIndex","setCurrentImageIndex","discount","originalPrice","stockStatus","MobileProductCarousel","itemsPerView","showNavigation","autoPlay","autoPlayInterval","currentIndex","setCurrentIndex","carouselRef","maxIndex","goToNext","goToPrevious","itemWidth","ChevronLeft","goToSlide","MobileFeaturedCarousel","MobileCompactCarousel","MobileProductGrid","columns","gridCols","gap","FeaturedProducts","selectedProduct","setSelectedProduct","featuredProducts","featuredLoading","fetchFeaturedProducts","ProductCard","ProductDetails","TrendingSection","trendingProducts","generateAvatarUrl","sarahMitchellAvatar","davidKimAvatar","lisaThompsonAvatar","jamesWilsonAvatar","testimonialsData","quote","TestimonialCard","testimonial","isFeatured","TestimonialCarousel","autoPlayRef","pauseAutoPlay","Testimonials","Quote","RecentlyViewed","maxItems","showClearButton","recommendations","clearRecentlyViewed","getRecentlyViewed","useRecommendations","recentlyViewedProducts","ProductRecommendations","showAddToCart","oudhCollectionBanner","seasonalAttarsBanner","heritageBlendsBanner","brandStoryImage","ErrorFallback","showRetry","getSizeClasses","getErrorIcon","ProductGridError","showSkeleton","NetworkStatus","isOnline","useNetworkStatus","setIsOnline","onLine","handleOnline","handleOffline","Modal","CategoryDisplayCard","cardClasses","textClasses","countClasses","AdminErrorBoundary","isReported","reportingError","maxRetries","retryCount","isRetrying","retryTimeoutId","showDetails","errorContext","errorId","errorType","url","getCurrentUserId","reportError","errorText","clipboard","writeText","componentWillUnmount","classifyError","componentStack","errorBoundary","enableReporting","shouldAutoReport","authUser","JSON","localStorage","getErrorTitle","getErrorMessage","renderMinimalFallback","fallbackComponent","handleGoHome","handleCopyError","Copy","handleReportError","Send","CardSkeleton","AdminLoadingState","BarChart3","getDefaultMessage","EmptyState","ImageUpload","onPathChange","folder","showUrlInput","setIsDragging","isUploading","setIsUploading","uploadProgress","setUploadProgress","urlInput","setUrlInput","showUrlField","setShowUrlField","fileInputRef","handleDragOver","handleDragLeave","handleDrop","imageFile","dataTransfer","files","file","handleFileUpload","handleFileSelect","StorageService","uploadImage","handleUrlSubmit","getAspectRatioClass","onDragOver","onDragLeave","onDrop","click","accept","ImageIcon","onKeyPress","Upload","loaded","ResponsiveTable","onRowClick","emptyMessage","windowWidth","setWindowWidth","visibleColumns","col","responsive","useFixedLayout","tableLayout","column","colSpan","record","whiteSpace","textOverflow","MobileCheckoutLayout","currentStep","totalSteps","onStepChange","onBack","stepTitle","canProceed","MobileFormInput","inputId","MobilePaymentSelector","selectedMethod","onMethodChange","paymentMethods","available","Apple","Smartphone","MobileStepNavigation","onNext","nextLabel","isLastStep","MobileSecurityIndicator","MobileShippingForm","firstName","lastName","zipCode","saveInfo","MobilePaymentForm","selectedPaymentMethod","showCVV","setShowCVV","cardNumber","expiryDate","cvv","cardName","sameAsBilling","MobileOrderSummary","shipping","tax","isExpanded","setIsExpanded","RazorpayPayment","amount","customerInfo","onSuccess","setIsProcessing","setSelectedMethod","gst","Building","Wallet","Banknote","paymentService","isConfigured","paymentData","currency","processPayment","OrderTracking","history","eventStatus","isCompleted","date","AddressForm","useAddresses","street","AddressManagement","addresses","isModalOpen","setIsModalOpen","editingAddress","setEditingAddress","handleAddAddress","handleSetDefault","handleEditAddress","Edit","confirm","handleDeleteAddress","Trash2","ResponsiveContainer","enablePWASupport","showMobileMenu","onMobileMenuToggle","setViewport","isTablet","isDesktop","isPWA","isMobileMenuOpen","setIsMobileMenuOpen","updateViewport","matchMedia","matches","standalone","handleMobileMenuToggle","newState","useViewport","usePWAInstall","deferredPrompt","setDeferredPrompt","isInstallable","setIsInstallable","isInstalled","setIsInstalled","handleBeforeInstallPrompt","handleAppInstalled","installPWA","prompt","outcome","userChoice","EnhancedButton","mobileOptimized","mobileClasses","fluid","centerContent","getResponsiveValue","useResponsiveDesign","containerStyles","useMemo","styles","ResponsiveGrid","gridColumns","useResponsiveGrid","gridStyles","display","gridTemplateColumns","ResponsiveGridItem","alignSelf","getColumnSpan","itemStyles","actualSpan","actualOffset","actualOrder","gridColumn","gridColumnStart"],"ignoreList":[0,1,2,3,4,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134],"sources":["../../node_modules/scheduler/index.js","../../node_modules/scheduler/cjs/scheduler.production.js","../../node_modules/cookie/dist/index.js","../../node_modules/isows/_esm/native.js","../../node_modules/isows/_esm/utils.js","../../src/lib/supabase.ts","../../src/lib/crudOperations.ts","../../src/components/Auth/MobileAuthView.tsx","../../src/components/Auth/EnhancedAuthModal.tsx","../../src/components/Security/SecurityProvider.tsx","../../node_modules/motion-utils/dist/es/array.mjs","../../node_modules/motion-utils/dist/es/clamp.mjs","../../node_modules/motion-utils/dist/es/global-config.mjs","../../node_modules/motion-utils/dist/es/is-numerical-string.mjs","../../node_modules/motion-utils/dist/es/is-object.mjs","../../node_modules/motion-utils/dist/es/is-zero-value-string.mjs","../../node_modules/motion-utils/dist/es/memo.mjs","../../node_modules/motion-utils/dist/es/noop.mjs","../../node_modules/motion-utils/dist/es/pipe.mjs","../../node_modules/motion-utils/dist/es/progress.mjs","../../node_modules/motion-utils/dist/es/subscription-manager.mjs","../../node_modules/motion-utils/dist/es/time-conversion.mjs","../../node_modules/motion-utils/dist/es/velocity-per-second.mjs","../../node_modules/motion-utils/dist/es/easing/cubic-bezier.mjs","../../node_modules/motion-utils/dist/es/easing/modifiers/mirror.mjs","../../node_modules/motion-utils/dist/es/easing/modifiers/reverse.mjs","../../node_modules/motion-utils/dist/es/easing/back.mjs","../../node_modules/motion-utils/dist/es/easing/anticipate.mjs","../../node_modules/motion-utils/dist/es/easing/circ.mjs","../../node_modules/motion-utils/dist/es/easing/ease.mjs","../../node_modules/motion-utils/dist/es/easing/utils/is-bezier-definition.mjs","../../node_modules/motion-utils/dist/es/easing/utils/map.mjs","../../node_modules/motion-dom/dist/es/frameloop/order.mjs","../../node_modules/motion-dom/dist/es/frameloop/batcher.mjs","../../node_modules/motion-dom/dist/es/frameloop/render-step.mjs","../../node_modules/motion-dom/dist/es/frameloop/frame.mjs","../../node_modules/motion-dom/dist/es/frameloop/sync-time.mjs","../../node_modules/motion-dom/dist/es/animation/utils/is-css-variable.mjs","../../node_modules/motion-dom/dist/es/value/types/numbers/index.mjs","../../node_modules/motion-dom/dist/es/value/types/utils/sanitize.mjs","../../node_modules/motion-dom/dist/es/value/types/utils/float-regex.mjs","../../node_modules/motion-dom/dist/es/value/types/utils/single-color-regex.mjs","../../node_modules/motion-dom/dist/es/value/types/color/utils.mjs","../../node_modules/motion-dom/dist/es/value/types/utils/is-nullish.mjs","../../node_modules/motion-dom/dist/es/value/types/color/rgba.mjs","../../node_modules/motion-dom/dist/es/value/types/color/hex.mjs","../../node_modules/motion-dom/dist/es/value/types/numbers/units.mjs","../../node_modules/motion-dom/dist/es/value/types/color/hsla.mjs","../../node_modules/motion-dom/dist/es/value/types/color/index.mjs","../../node_modules/motion-dom/dist/es/value/types/utils/color-regex.mjs","../../node_modules/motion-dom/dist/es/value/types/complex/index.mjs","../../node_modules/motion-dom/dist/es/value/types/color/hsla-to-rgba.mjs","../../node_modules/motion-dom/dist/es/utils/mix/immediate.mjs","../../node_modules/motion-dom/dist/es/utils/mix/number.mjs","../../node_modules/motion-dom/dist/es/utils/mix/color.mjs","../../node_modules/motion-dom/dist/es/utils/mix/visibility.mjs","../../node_modules/motion-dom/dist/es/utils/mix/complex.mjs","../../node_modules/motion-dom/dist/es/utils/mix/index.mjs","../../node_modules/motion-dom/dist/es/animation/drivers/frame.mjs","../../node_modules/motion-dom/dist/es/animation/waapi/utils/linear.mjs","../../node_modules/motion-dom/dist/es/animation/generators/utils/calc-duration.mjs","../../node_modules/motion-dom/dist/es/animation/generators/utils/velocity.mjs","../../node_modules/motion-dom/dist/es/animation/generators/spring/defaults.mjs","../../node_modules/motion-dom/dist/es/animation/generators/spring/find.mjs","../../node_modules/motion-dom/dist/es/animation/generators/spring/index.mjs","../../node_modules/motion-dom/dist/es/animation/generators/inertia.mjs","../../node_modules/motion-dom/dist/es/utils/interpolate.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/offsets/default.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/offsets/fill.mjs","../../node_modules/motion-dom/dist/es/animation/generators/keyframes.mjs","../../node_modules/motion-utils/dist/es/easing/utils/is-easing-array.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/offsets/time.mjs","../../node_modules/motion-dom/dist/es/animation/generators/utils/create-generator-easing.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/get-final.mjs","../../node_modules/motion-dom/dist/es/animation/utils/replace-transition-type.mjs","../../node_modules/motion-dom/dist/es/animation/utils/WithPromise.mjs","../../node_modules/motion-dom/dist/es/animation/JSAnimation.mjs","../../node_modules/motion-dom/dist/es/render/dom/parse-transform.mjs","../../node_modules/motion-dom/dist/es/render/utils/keys-transform.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/utils/unit-conversion.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/KeyframesResolver.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/utils/fill-wildcards.mjs","../../node_modules/motion-dom/dist/es/utils/supports/scroll-timeline.mjs","../../node_modules/motion-dom/dist/es/utils/supports/flags.mjs","../../node_modules/motion-dom/dist/es/utils/supports/memo.mjs","../../node_modules/motion-dom/dist/es/utils/supports/linear-easing.mjs","../../node_modules/motion-dom/dist/es/animation/waapi/easing/cubic-bezier.mjs","../../node_modules/motion-dom/dist/es/animation/waapi/easing/supported.mjs","../../node_modules/motion-dom/dist/es/animation/waapi/easing/map-easing.mjs","../../node_modules/motion-dom/dist/es/animation/waapi/start-waapi-animation.mjs","../../node_modules/motion-dom/dist/es/animation/generators/utils/is-generator.mjs","../../node_modules/motion-dom/dist/es/animation/NativeAnimation.mjs","../../node_modules/motion-dom/dist/es/animation/waapi/utils/apply-generator.mjs","../../node_modules/motion-dom/dist/es/render/dom/style-set.mjs","../../node_modules/motion-dom/dist/es/render/dom/is-css-var.mjs","../../node_modules/motion-dom/dist/es/animation/waapi/utils/unsupported-easing.mjs","../../node_modules/motion-dom/dist/es/animation/NativeAnimationExtended.mjs","../../node_modules/motion-dom/dist/es/animation/utils/is-animatable.mjs","../../node_modules/motion-dom/dist/es/animation/waapi/supports/waapi.mjs","../../node_modules/motion-dom/dist/es/animation/AsyncMotionValueAnimation.mjs","../../node_modules/motion-dom/dist/es/animation/utils/can-animate.mjs","../../node_modules/motion-dom/dist/es/animation/utils/css-variables-conversion.mjs","../../node_modules/motion-dom/dist/es/animation/utils/get-value-transition.mjs","../../node_modules/motion-dom/dist/es/render/utils/keys-position.mjs","../../node_modules/motion-dom/dist/es/value/types/test.mjs","../../node_modules/motion-dom/dist/es/value/types/dimensions.mjs","../../node_modules/motion-dom/dist/es/value/types/auto.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/utils/is-none.mjs","../../node_modules/motion-dom/dist/es/value/types/complex/filter.mjs","../../node_modules/motion-dom/dist/es/value/types/int.mjs","../../node_modules/motion-dom/dist/es/value/types/maps/number.mjs","../../node_modules/motion-dom/dist/es/value/types/maps/transform.mjs","../../node_modules/motion-dom/dist/es/value/types/maps/defaults.mjs","../../node_modules/motion-dom/dist/es/value/types/utils/animatable-none.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/utils/make-none-animatable.mjs","../../node_modules/motion-dom/dist/es/animation/keyframes/DOMKeyframesResolver.mjs","../../node_modules/motion-dom/dist/es/value/types/utils/get-as-type.mjs","../../node_modules/motion-dom/dist/es/utils/is-html-element.mjs","../../node_modules/motion-dom/dist/es/value/index.mjs","../../node_modules/motion-dom/dist/es/frameloop/microtask.mjs","../../node_modules/motion-dom/dist/es/gestures/drag/state/is-active.mjs","../../node_modules/motion-dom/dist/es/gestures/drag/state/set-active.mjs","../../node_modules/motion-dom/dist/es/gestures/utils/setup.mjs","../../node_modules/motion-dom/dist/es/utils/resolve-elements.mjs","../../node_modules/motion-dom/dist/es/gestures/hover.mjs","../../node_modules/motion-dom/dist/es/gestures/utils/is-node-or-child.mjs","../../node_modules/motion-dom/dist/es/gestures/utils/is-primary-pointer.mjs","../../node_modules/motion-dom/dist/es/gestures/press/utils/is-keyboard-accessible.mjs","../../node_modules/motion-dom/dist/es/gestures/press/utils/state.mjs","../../node_modules/motion-dom/dist/es/gestures/press/utils/keyboard.mjs","../../node_modules/motion-dom/dist/es/gestures/press/index.mjs","../../node_modules/motion-dom/dist/es/utils/is-svg-element.mjs","../../node_modules/motion-dom/dist/es/utils/is-svg-svg-element.mjs","../../node_modules/motion-dom/dist/es/value/utils/is-motion-value.mjs","../../node_modules/motion-dom/dist/es/value/types/utils/find.mjs","../../src/components/Layout/SearchOverlay.tsx","../../src/hooks/useMobileGestures.ts","../../src/hooks/useMemoryCleanup.ts","../../src/components/Layout/MobileNavigation.tsx","../../src/assets/images/optimized/logo-optimized.webp","../../src/components/Layout/Header.tsx","../../src/components/Layout/Footer.tsx","../../src/assets/images/logo.png","../../src/components/Cart/CartSidebar.tsx","../../src/components/Layout/CompareTray.tsx","../../src/components/Layout/Layout.tsx","../../src/components/Common/DatabaseErrorOverlay.tsx","../../src/components/Common/ErrorBoundary.tsx","../../src/components/Common/ScrollToTop.tsx","../../src/components/Common/UniversalLoader.tsx","../../src/components/Common/MediaErrorHandler.tsx","../../src/App.tsx","../../src/main.tsx","../../src/assets/images/homepage/hero-background.jpg","../../src/components/Home/Hero.tsx","../../src/components/Home/CategorySection.tsx","../../src/components/Trust/TrustBadges.tsx","../../src/components/Trust/SocialProof.tsx","../../src/components/Trust/TrustSignals.tsx","../../src/components/Trust/ProductPageTrustSignals.tsx","../../src/hooks/useAddToCartWithAuth.ts","../../src/hooks/useAddToWishlistWithAuth.ts","../../src/hooks/useAddToCompareWithAuth.ts","../../src/components/Common/LoadingSpinner.tsx","../../src/components/Mobile/MobileTouchButton.tsx","../../src/components/Mobile/MobileProductCard.tsx","../../src/components/Mobile/MobileProductCarousel.tsx","../../src/components/Home/FeaturedProducts.tsx","../../src/components/Home/TrendingSection.tsx","../../src/components/Home/Testimonials.tsx","../../src/components/Home/RecentlyViewed.tsx","../../src/assets/images/banners/oudh-collection-banner.jpg","../../src/assets/images/banners/seasonal-attars-banner.jpg","../../src/assets/images/banners/heritage-blends-banner.jpg","../../src/assets/images/homepage/brand-story.jpg","../../src/components/Common/ErrorFallback.tsx","../../src/hooks/useNetworkStatus.ts","../../src/components/Common/Modal.tsx","../../src/components/Category/CategoryDisplayCard.tsx","../../src/components/Common/AdminErrorBoundary.tsx","../../src/components/Common/EnhancedLoadingStates.tsx","../../src/components/Common/ImageUpload.tsx","../../src/components/Common/ResponsiveTable.tsx","../../src/components/Mobile/MobileCheckout.tsx","../../src/components/Mobile/MobileCheckoutForms.tsx","../../src/components/Payment/RazorpayPayment.tsx","../../src/components/Order/OrderTracking.tsx","../../src/components/Address/AddressForm.tsx","../../src/components/Address/AddressManagement.tsx","../../src/components/Common/ResponsiveContainer.tsx","../../src/components/Common/EnhancedButton.tsx","../../src/components/Layout/ResponsiveLayout.tsx"],"sourcesContent":["'use strict';\n\nif (process.env.NODE_ENV === 'production') {\n  module.exports = require('./cjs/scheduler.production.js');\n} else {\n  module.exports = require('./cjs/scheduler.development.js');\n}\n","/**\n * @license React\n * scheduler.production.js\n *\n * Copyright (c) Meta Platforms, Inc. and affiliates.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\n\"use strict\";\nfunction push(heap, node) {\n  var index = heap.length;\n  heap.push(node);\n  a: for (; 0 < index; ) {\n    var parentIndex = (index - 1) >>> 1,\n      parent = heap[parentIndex];\n    if (0 < compare(parent, node))\n      (heap[parentIndex] = node), (heap[index] = parent), (index = parentIndex);\n    else break a;\n  }\n}\nfunction peek(heap) {\n  return 0 === heap.length ? null : heap[0];\n}\nfunction pop(heap) {\n  if (0 === heap.length) return null;\n  var first = heap[0],\n    last = heap.pop();\n  if (last !== first) {\n    heap[0] = last;\n    a: for (\n      var index = 0, length = heap.length, halfLength = length >>> 1;\n      index < halfLength;\n\n    ) {\n      var leftIndex = 2 * (index + 1) - 1,\n        left = heap[leftIndex],\n        rightIndex = leftIndex + 1,\n        right = heap[rightIndex];\n      if (0 > compare(left, last))\n        rightIndex < length && 0 > compare(right, left)\n          ? ((heap[index] = right),\n            (heap[rightIndex] = last),\n            (index = rightIndex))\n          : ((heap[index] = left),\n            (heap[leftIndex] = last),\n            (index = leftIndex));\n      else if (rightIndex < length && 0 > compare(right, last))\n        (heap[index] = right), (heap[rightIndex] = last), (index = rightIndex);\n      else break a;\n    }\n  }\n  return first;\n}\nfunction compare(a, b) {\n  var diff = a.sortIndex - b.sortIndex;\n  return 0 !== diff ? diff : a.id - b.id;\n}\nexports.unstable_now = void 0;\nif (\"object\" === typeof performance && \"function\" === typeof performance.now) {\n  var localPerformance = performance;\n  exports.unstable_now = function () {\n    return localPerformance.now();\n  };\n} else {\n  var localDate = Date,\n    initialTime = localDate.now();\n  exports.unstable_now = function () {\n    return localDate.now() - initialTime;\n  };\n}\nvar taskQueue = [],\n  timerQueue = [],\n  taskIdCounter = 1,\n  currentTask = null,\n  currentPriorityLevel = 3,\n  isPerformingWork = !1,\n  isHostCallbackScheduled = !1,\n  isHostTimeoutScheduled = !1,\n  needsPaint = !1,\n  localSetTimeout = \"function\" === typeof setTimeout ? setTimeout : null,\n  localClearTimeout = \"function\" === typeof clearTimeout ? clearTimeout : null,\n  localSetImmediate = \"undefined\" !== typeof setImmediate ? setImmediate : null;\nfunction advanceTimers(currentTime) {\n  for (var timer = peek(timerQueue); null !== timer; ) {\n    if (null === timer.callback) pop(timerQueue);\n    else if (timer.startTime <= currentTime)\n      pop(timerQueue),\n        (timer.sortIndex = timer.expirationTime),\n        push(taskQueue, timer);\n    else break;\n    timer = peek(timerQueue);\n  }\n}\nfunction handleTimeout(currentTime) {\n  isHostTimeoutScheduled = !1;\n  advanceTimers(currentTime);\n  if (!isHostCallbackScheduled)\n    if (null !== peek(taskQueue))\n      (isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline());\n    else {\n      var firstTimer = peek(timerQueue);\n      null !== firstTimer &&\n        requestHostTimeout(handleTimeout, firstTimer.startTime - currentTime);\n    }\n}\nvar isMessageLoopRunning = !1,\n  taskTimeoutID = -1,\n  frameInterval = 5,\n  startTime = -1;\nfunction shouldYieldToHost() {\n  return needsPaint\n    ? !0\n    : exports.unstable_now() - startTime < frameInterval\n      ? !1\n      : !0;\n}\nfunction performWorkUntilDeadline() {\n  needsPaint = !1;\n  if (isMessageLoopRunning) {\n    var currentTime = exports.unstable_now();\n    startTime = currentTime;\n    var hasMoreWork = !0;\n    try {\n      a: {\n        isHostCallbackScheduled = !1;\n        isHostTimeoutScheduled &&\n          ((isHostTimeoutScheduled = !1),\n          localClearTimeout(taskTimeoutID),\n          (taskTimeoutID = -1));\n        isPerformingWork = !0;\n        var previousPriorityLevel = currentPriorityLevel;\n        try {\n          b: {\n            advanceTimers(currentTime);\n            for (\n              currentTask = peek(taskQueue);\n              null !== currentTask &&\n              !(\n                currentTask.expirationTime > currentTime && shouldYieldToHost()\n              );\n\n            ) {\n              var callback = currentTask.callback;\n              if (\"function\" === typeof callback) {\n                currentTask.callback = null;\n                currentPriorityLevel = currentTask.priorityLevel;\n                var continuationCallback = callback(\n                  currentTask.expirationTime <= currentTime\n                );\n                currentTime = exports.unstable_now();\n                if (\"function\" === typeof continuationCallback) {\n                  currentTask.callback = continuationCallback;\n                  advanceTimers(currentTime);\n                  hasMoreWork = !0;\n                  break b;\n                }\n                currentTask === peek(taskQueue) && pop(taskQueue);\n                advanceTimers(currentTime);\n              } else pop(taskQueue);\n              currentTask = peek(taskQueue);\n            }\n            if (null !== currentTask) hasMoreWork = !0;\n            else {\n              var firstTimer = peek(timerQueue);\n              null !== firstTimer &&\n                requestHostTimeout(\n                  handleTimeout,\n                  firstTimer.startTime - currentTime\n                );\n              hasMoreWork = !1;\n            }\n          }\n          break a;\n        } finally {\n          (currentTask = null),\n            (currentPriorityLevel = previousPriorityLevel),\n            (isPerformingWork = !1);\n        }\n        hasMoreWork = void 0;\n      }\n    } finally {\n      hasMoreWork\n        ? schedulePerformWorkUntilDeadline()\n        : (isMessageLoopRunning = !1);\n    }\n  }\n}\nvar schedulePerformWorkUntilDeadline;\nif (\"function\" === typeof localSetImmediate)\n  schedulePerformWorkUntilDeadline = function () {\n    localSetImmediate(performWorkUntilDeadline);\n  };\nelse if (\"undefined\" !== typeof MessageChannel) {\n  var channel = new MessageChannel(),\n    port = channel.port2;\n  channel.port1.onmessage = performWorkUntilDeadline;\n  schedulePerformWorkUntilDeadline = function () {\n    port.postMessage(null);\n  };\n} else\n  schedulePerformWorkUntilDeadline = function () {\n    localSetTimeout(performWorkUntilDeadline, 0);\n  };\nfunction requestHostTimeout(callback, ms) {\n  taskTimeoutID = localSetTimeout(function () {\n    callback(exports.unstable_now());\n  }, ms);\n}\nexports.unstable_IdlePriority = 5;\nexports.unstable_ImmediatePriority = 1;\nexports.unstable_LowPriority = 4;\nexports.unstable_NormalPriority = 3;\nexports.unstable_Profiling = null;\nexports.unstable_UserBlockingPriority = 2;\nexports.unstable_cancelCallback = function (task) {\n  task.callback = null;\n};\nexports.unstable_forceFrameRate = function (fps) {\n  0 > fps || 125 < fps\n    ? console.error(\n        \"forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported\"\n      )\n    : (frameInterval = 0 < fps ? Math.floor(1e3 / fps) : 5);\n};\nexports.unstable_getCurrentPriorityLevel = function () {\n  return currentPriorityLevel;\n};\nexports.unstable_next = function (eventHandler) {\n  switch (currentPriorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n      var priorityLevel = 3;\n      break;\n    default:\n      priorityLevel = currentPriorityLevel;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_requestPaint = function () {\n  needsPaint = !0;\n};\nexports.unstable_runWithPriority = function (priorityLevel, eventHandler) {\n  switch (priorityLevel) {\n    case 1:\n    case 2:\n    case 3:\n    case 4:\n    case 5:\n      break;\n    default:\n      priorityLevel = 3;\n  }\n  var previousPriorityLevel = currentPriorityLevel;\n  currentPriorityLevel = priorityLevel;\n  try {\n    return eventHandler();\n  } finally {\n    currentPriorityLevel = previousPriorityLevel;\n  }\n};\nexports.unstable_scheduleCallback = function (\n  priorityLevel,\n  callback,\n  options\n) {\n  var currentTime = exports.unstable_now();\n  \"object\" === typeof options && null !== options\n    ? ((options = options.delay),\n      (options =\n        \"number\" === typeof options && 0 < options\n          ? currentTime + options\n          : currentTime))\n    : (options = currentTime);\n  switch (priorityLevel) {\n    case 1:\n      var timeout = -1;\n      break;\n    case 2:\n      timeout = 250;\n      break;\n    case 5:\n      timeout = 1073741823;\n      break;\n    case 4:\n      timeout = 1e4;\n      break;\n    default:\n      timeout = 5e3;\n  }\n  timeout = options + timeout;\n  priorityLevel = {\n    id: taskIdCounter++,\n    callback: callback,\n    priorityLevel: priorityLevel,\n    startTime: options,\n    expirationTime: timeout,\n    sortIndex: -1\n  };\n  options > currentTime\n    ? ((priorityLevel.sortIndex = options),\n      push(timerQueue, priorityLevel),\n      null === peek(taskQueue) &&\n        priorityLevel === peek(timerQueue) &&\n        (isHostTimeoutScheduled\n          ? (localClearTimeout(taskTimeoutID), (taskTimeoutID = -1))\n          : (isHostTimeoutScheduled = !0),\n        requestHostTimeout(handleTimeout, options - currentTime)))\n    : ((priorityLevel.sortIndex = timeout),\n      push(taskQueue, priorityLevel),\n      isHostCallbackScheduled ||\n        isPerformingWork ||\n        ((isHostCallbackScheduled = !0),\n        isMessageLoopRunning ||\n          ((isMessageLoopRunning = !0), schedulePerformWorkUntilDeadline())));\n  return priorityLevel;\n};\nexports.unstable_shouldYield = shouldYieldToHost;\nexports.unstable_wrapCallback = function (callback) {\n  var parentPriorityLevel = currentPriorityLevel;\n  return function () {\n    var previousPriorityLevel = currentPriorityLevel;\n    currentPriorityLevel = parentPriorityLevel;\n    try {\n      return callback.apply(this, arguments);\n    } finally {\n      currentPriorityLevel = previousPriorityLevel;\n    }\n  };\n};\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.parse = parse;\nexports.serialize = serialize;\n/**\n * RegExp to match cookie-name in RFC 6265 sec 4.1.1\n * This refers out to the obsoleted definition of token in RFC 2616 sec 2.2\n * which has been replaced by the token definition in RFC 7230 appendix B.\n *\n * cookie-name       = token\n * token             = 1*tchar\n * tchar             = \"!\" / \"#\" / \"$\" / \"%\" / \"&\" / \"'\" /\n *                     \"*\" / \"+\" / \"-\" / \".\" / \"^\" / \"_\" /\n *                     \"`\" / \"|\" / \"~\" / DIGIT / ALPHA\n *\n * Note: Allowing more characters - https://github.com/jshttp/cookie/issues/191\n * Allow same range as cookie value, except `=`, which delimits end of name.\n */\nconst cookieNameRegExp = /^[\\u0021-\\u003A\\u003C\\u003E-\\u007E]+$/;\n/**\n * RegExp to match cookie-value in RFC 6265 sec 4.1.1\n *\n * cookie-value      = *cookie-octet / ( DQUOTE *cookie-octet DQUOTE )\n * cookie-octet      = %x21 / %x23-2B / %x2D-3A / %x3C-5B / %x5D-7E\n *                     ; US-ASCII characters excluding CTLs,\n *                     ; whitespace DQUOTE, comma, semicolon,\n *                     ; and backslash\n *\n * Allowing more characters: https://github.com/jshttp/cookie/issues/191\n * Comma, backslash, and DQUOTE are not part of the parsing algorithm.\n */\nconst cookieValueRegExp = /^[\\u0021-\\u003A\\u003C-\\u007E]*$/;\n/**\n * RegExp to match domain-value in RFC 6265 sec 4.1.1\n *\n * domain-value      = <subdomain>\n *                     ; defined in [RFC1034], Section 3.5, as\n *                     ; enhanced by [RFC1123], Section 2.1\n * <subdomain>       = <label> | <subdomain> \".\" <label>\n * <label>           = <let-dig> [ [ <ldh-str> ] <let-dig> ]\n *                     Labels must be 63 characters or less.\n *                     'let-dig' not 'letter' in the first char, per RFC1123\n * <ldh-str>         = <let-dig-hyp> | <let-dig-hyp> <ldh-str>\n * <let-dig-hyp>     = <let-dig> | \"-\"\n * <let-dig>         = <letter> | <digit>\n * <letter>          = any one of the 52 alphabetic characters A through Z in\n *                     upper case and a through z in lower case\n * <digit>           = any one of the ten digits 0 through 9\n *\n * Keep support for leading dot: https://github.com/jshttp/cookie/issues/173\n *\n * > (Note that a leading %x2E (\".\"), if present, is ignored even though that\n * character is not permitted, but a trailing %x2E (\".\"), if present, will\n * cause the user agent to ignore the attribute.)\n */\nconst domainValueRegExp = /^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i;\n/**\n * RegExp to match path-value in RFC 6265 sec 4.1.1\n *\n * path-value        = <any CHAR except CTLs or \";\">\n * CHAR              = %x01-7F\n *                     ; defined in RFC 5234 appendix B.1\n */\nconst pathValueRegExp = /^[\\u0020-\\u003A\\u003D-\\u007E]*$/;\nconst __toString = Object.prototype.toString;\nconst NullObject = /* @__PURE__ */ (() => {\n    const C = function () { };\n    C.prototype = Object.create(null);\n    return C;\n})();\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n */\nfunction parse(str, options) {\n    const obj = new NullObject();\n    const len = str.length;\n    // RFC 6265 sec 4.1.1, RFC 2616 2.2 defines a cookie name consists of one char minimum, plus '='.\n    if (len < 2)\n        return obj;\n    const dec = options?.decode || decode;\n    let index = 0;\n    do {\n        const eqIdx = str.indexOf(\"=\", index);\n        if (eqIdx === -1)\n            break; // No more cookie pairs.\n        const colonIdx = str.indexOf(\";\", index);\n        const endIdx = colonIdx === -1 ? len : colonIdx;\n        if (eqIdx > endIdx) {\n            // backtrack on prior semicolon\n            index = str.lastIndexOf(\";\", eqIdx - 1) + 1;\n            continue;\n        }\n        const keyStartIdx = startIndex(str, index, eqIdx);\n        const keyEndIdx = endIndex(str, eqIdx, keyStartIdx);\n        const key = str.slice(keyStartIdx, keyEndIdx);\n        // only assign once\n        if (obj[key] === undefined) {\n            let valStartIdx = startIndex(str, eqIdx + 1, endIdx);\n            let valEndIdx = endIndex(str, endIdx, valStartIdx);\n            const value = dec(str.slice(valStartIdx, valEndIdx));\n            obj[key] = value;\n        }\n        index = endIdx + 1;\n    } while (index < len);\n    return obj;\n}\nfunction startIndex(str, index, max) {\n    do {\n        const code = str.charCodeAt(index);\n        if (code !== 0x20 /*   */ && code !== 0x09 /* \\t */)\n            return index;\n    } while (++index < max);\n    return max;\n}\nfunction endIndex(str, index, min) {\n    while (index > min) {\n        const code = str.charCodeAt(--index);\n        if (code !== 0x20 /*   */ && code !== 0x09 /* \\t */)\n            return index + 1;\n    }\n    return min;\n}\n/**\n * Serialize data into a cookie header.\n *\n * Serialize a name value pair into a cookie string suitable for\n * http headers. An optional options object specifies cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n */\nfunction serialize(name, val, options) {\n    const enc = options?.encode || encodeURIComponent;\n    if (!cookieNameRegExp.test(name)) {\n        throw new TypeError(`argument name is invalid: ${name}`);\n    }\n    const value = enc(val);\n    if (!cookieValueRegExp.test(value)) {\n        throw new TypeError(`argument val is invalid: ${val}`);\n    }\n    let str = name + \"=\" + value;\n    if (!options)\n        return str;\n    if (options.maxAge !== undefined) {\n        if (!Number.isInteger(options.maxAge)) {\n            throw new TypeError(`option maxAge is invalid: ${options.maxAge}`);\n        }\n        str += \"; Max-Age=\" + options.maxAge;\n    }\n    if (options.domain) {\n        if (!domainValueRegExp.test(options.domain)) {\n            throw new TypeError(`option domain is invalid: ${options.domain}`);\n        }\n        str += \"; Domain=\" + options.domain;\n    }\n    if (options.path) {\n        if (!pathValueRegExp.test(options.path)) {\n            throw new TypeError(`option path is invalid: ${options.path}`);\n        }\n        str += \"; Path=\" + options.path;\n    }\n    if (options.expires) {\n        if (!isDate(options.expires) ||\n            !Number.isFinite(options.expires.valueOf())) {\n            throw new TypeError(`option expires is invalid: ${options.expires}`);\n        }\n        str += \"; Expires=\" + options.expires.toUTCString();\n    }\n    if (options.httpOnly) {\n        str += \"; HttpOnly\";\n    }\n    if (options.secure) {\n        str += \"; Secure\";\n    }\n    if (options.partitioned) {\n        str += \"; Partitioned\";\n    }\n    if (options.priority) {\n        const priority = typeof options.priority === \"string\"\n            ? options.priority.toLowerCase()\n            : undefined;\n        switch (priority) {\n            case \"low\":\n                str += \"; Priority=Low\";\n                break;\n            case \"medium\":\n                str += \"; Priority=Medium\";\n                break;\n            case \"high\":\n                str += \"; Priority=High\";\n                break;\n            default:\n                throw new TypeError(`option priority is invalid: ${options.priority}`);\n        }\n    }\n    if (options.sameSite) {\n        const sameSite = typeof options.sameSite === \"string\"\n            ? options.sameSite.toLowerCase()\n            : options.sameSite;\n        switch (sameSite) {\n            case true:\n            case \"strict\":\n                str += \"; SameSite=Strict\";\n                break;\n            case \"lax\":\n                str += \"; SameSite=Lax\";\n                break;\n            case \"none\":\n                str += \"; SameSite=None\";\n                break;\n            default:\n                throw new TypeError(`option sameSite is invalid: ${options.sameSite}`);\n        }\n    }\n    return str;\n}\n/**\n * URL-decode string value. Optimized to skip native call when no %.\n */\nfunction decode(str) {\n    if (str.indexOf(\"%\") === -1)\n        return str;\n    try {\n        return decodeURIComponent(str);\n    }\n    catch (e) {\n        return str;\n    }\n}\n/**\n * Determine if value is a Date.\n */\nfunction isDate(val) {\n    return __toString.call(val) === \"[object Date]\";\n}\n//# sourceMappingURL=index.js.map","import { getNativeWebSocket } from \"./utils.js\";\nexport const WebSocket = getNativeWebSocket();\n//# sourceMappingURL=native.js.map","export function getNativeWebSocket() {\n    if (typeof WebSocket !== \"undefined\")\n        return WebSocket;\n    if (typeof global.WebSocket !== \"undefined\")\n        return global.WebSocket;\n    if (typeof window.WebSocket !== \"undefined\")\n        return window.WebSocket;\n    if (typeof self.WebSocket !== \"undefined\")\n        return self.WebSocket;\n    throw new Error(\"`WebSocket` is not supported in this environment\");\n}\n//# sourceMappingURL=utils.js.map","import { createClient } from '@supabase/supabase-js';\nimport { createRetryableAction } from '../utils/errorHandling';\nimport { performanceMonitor } from '../utils/performance';\nimport { validateSellerId, validateAndFixStoredUser } from '../utils/uuidValidation';\nimport {\n  User,\n  Product,\n  Category,\n  CartItem,\n  WishlistItem,\n  Order,\n  Address,\n  ProductVariant,\n  Coupon,\n  DashboardAnalytics\n} from '../types';\n\n// Environment validation with better error messages\nconst supabaseUrl = import.meta.env.VITE_SUPABASE_URL;\nconst supabaseAnonKey = import.meta.env.VITE_SUPABASE_ANON_KEY;\nconst appEnv = import.meta.env.VITE_APP_ENV || 'development';\n\n// Enhanced environment validation with backend fix detection\nfunction validateEnvironment() {\n  const errors: string[] = [];\n  const warnings: string[] = [];\n\n  // Validate required environment variables\n  if (!supabaseUrl) {\n    errors.push('VITE_SUPABASE_URL is missing from environment variables');\n  } else if (!supabaseUrl.startsWith('https://')) {\n    errors.push('VITE_SUPABASE_URL must start with https://');\n  } else if (supabaseUrl.includes('mock.supabase.co') || supabaseUrl.includes('localhost')) {\n    warnings.push('Using mock or localhost URL - ensure this is intentional');\n  }\n\n  if (!supabaseAnonKey) {\n    errors.push('VITE_SUPABASE_ANON_KEY is missing from environment variables');\n  } else if (supabaseAnonKey.length < 50) {\n    warnings.push('Supabase anon key seems unusually short');\n  }\n\n  // Configuration validation logging removed for production\n\n  if (errors.length > 0) {\n    throw new Error(`Supabase configuration errors: ${errors.join(', ')}`);\n  }\n\n  // Configuration validation completed\n}\n\n// Enhanced database initialization with automatic fix application\nasync function initializeDatabase() {\n  try {\n    // Set development mode parameters\n    await supabase.rpc('set_config', {\n      setting_name: 'app.development_mode',\n      new_value: 'true',\n      is_local: false\n    }).catch(() => {\n      // Ignore errors if function doesn't exist\n    });\n\n    // Test basic connectivity\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('count')\n      .limit(1);\n\n    if (error && error.message.includes('infinite recursion')) {\n      throw new Error('DATABASE_NEEDS_FIXING: Please run the COMPREHENSIVE-BACKEND-FIX.sql script in your Supabase SQL Editor.');\n    }\n\n    // Check if we're in direct login mode\n    if (import.meta.env.VITE_DIRECT_LOGIN_ENABLED === 'true') {\n      return;\n    }\n  } catch (error) {\n    if (error instanceof Error && error.message.includes('DATABASE_NEEDS_FIXING')) {\n      throw error;\n    }\n    // In direct login mode, we can ignore database errors\n    if (import.meta.env.VITE_DIRECT_LOGIN_ENABLED === 'true') {\n      return;\n    }\n  }\n}\n\n// Validate environment on load\nvalidateEnvironment();\n\n// Initialize database on load (async)\nif (typeof window !== 'undefined') {\n  setTimeout(() => {\n    initializeDatabase().catch(err => {\n      // Database initialization errors handled silently in production\n    });\n  }, 1000);\n}\n\n// Minimal Supabase client configuration to fix hanging queries\nexport const supabase = createClient(supabaseUrl, supabaseAnonKey, {\n  auth: {\n    autoRefreshToken: true,\n    persistSession: true,\n    detectSessionInUrl: false // Disable to prevent issues\n  }\n});\n\n// Direct REST API function for fetching categories\nexport const testDirectRestAPI = async () => {\n  try {\n    const response = await fetch(`${supabaseUrl}/rest/v1/categories?select=*&eq.is_active.true&order=sort_order.asc`, {\n      method: 'GET',\n      headers: {\n        'apikey': supabaseAnonKey,\n        'Authorization': `Bearer ${supabaseAnonKey}`,\n        'Content-Type': 'application/json'\n      }\n    });\n\n    if (!response.ok) {\n      throw new Error(`HTTP ${response.status}: ${response.statusText}`);\n    }\n\n    const data = await response.json();\n    return { success: true, data, count: data.length };\n  } catch (error) {\n    return { success: false, error: error.message };\n  }\n};\n\n// Connection health monitoring\nlet connectionHealthy = true;\nlet lastHealthCheck = 0;\n\nexport const checkDatabaseConnection = async (): Promise<{ healthy: boolean; latency?: number; error?: string }> => {\n  const now = Date.now();\n\n  // Prevent too frequent health checks (at most once per 30 seconds)\n  if (now - lastHealthCheck < 30000 && connectionHealthy) {\n    return { healthy: connectionHealthy };\n  }\n\n  lastHealthCheck = now;\n\n  try {\n    const startTime = Date.now();\n    const { error } = await supabase\n      .from('profiles')\n      .select('count')\n      .limit(1);\n\n    const latency = Date.now() - startTime;\n\n    if (error) {\n      connectionHealthy = false;\n      return { healthy: false, error: error.message };\n    }\n\n    connectionHealthy = true;\n    return { healthy: true, latency };\n  } catch (error) {\n    connectionHealthy = false;\n    return { \n      healthy: false, \n      error: error instanceof Error ? error.message : 'Unknown connection error' \n    };\n  }\n};\n\n// Utility functions for data transformation\nconst isValidUUID = (value: string): boolean => {\n  return /^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(value);\n};\n\n// Data transformation utilities\nconst productToDB = (product: any) => {\n  return {\n    name: product.name,\n    description: product.description,\n    price: product.price,\n    image_url: product.imageUrl || product.image_url,\n    category_id: product.categoryId || product.category_id,\n    seller_id: product.sellerId || product.seller_id,\n    stock: product.stock,\n    is_active: product.isActive !== undefined ? product.isActive : true,\n    featured: product.featured || false,\n    slug: product.slug,\n    meta_title: product.metaTitle || product.meta_title,\n    meta_description: product.metaDescription || product.meta_description\n  };\n};\n\nconst categoryToDB = (category: any) => {\n  return {\n    name: category.name,\n    slug: category.slug,\n    description: category.description,\n    image_url: category.imageUrl || category.image_url,\n    is_active: category.isActive !== undefined ? category.isActive : true,\n    created_at: category.createdAt?.toISOString() || new Date().toISOString(),\n    updated_at: category.updatedAt?.toISOString() || new Date().toISOString()\n  };\n};\n\n// ===== DATA FETCHING FUNCTIONS (WORKING) =====\n\n// Enhanced product fetching with all details (for when needed)\nexport const getProducts = async (filters?: {\n    categoryId?: string;\n    categorySlug?: string;\n    seller?: string;\n    featured?: boolean;\n    search?: string;\n    limit?: number;\n}) => {\n  try {\n    let query = supabase\n      .from('products')\n      .select(`\n        *,\n        categories!inner(name, slug),\n        product_variants(*)\n      `)\n      .eq('active', true);\n\n    if (filters?.categoryId) {\n      query = query.eq('category_id', filters.categoryId);\n    }\n\n    if (filters?.categorySlug) {\n      query = query.eq('categories.slug', filters.categorySlug);\n    }\n\n    if (filters?.seller) {\n      query = query.eq('seller_id', filters.seller);\n    }\n\n    if (filters?.featured) {\n      query = query.eq('featured', filters.featured);\n    }\n\n    if (filters?.search) {\n      query = query.ilike('name', `%${filters.search}%`);\n    }\n\n    if (filters?.limit) {\n      query = query.limit(filters.limit);\n    }\n\n    const { data, error } = await query;\n\n    if (error) throw error;\n\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching products:', error);\n    return [];\n  }\n};\n\n// Enhanced product fetching with all details (for when needed)\nexport const getProductById = async (id: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('products')\n      .select(`\n        *,\n        categories(name, slug),\n        product_variants(*),\n        reviews(*, profiles(display_name))\n      `)\n      .eq('id', id)\n      .eq('active', true)\n      .single();\n\n    if (error) throw error;\n    return data;\n  } catch (error) {\n    console.error('Error fetching product by ID:', error);\n    return null;\n  }\n};\n\n// Enhanced product fetching with all details (for when needed)\nexport const getProductBySlug = async (slug: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('products')\n      .select(`\n        *,\n        categories(name, slug),\n        product_variants(*),\n        reviews(*, profiles(display_name))\n      `)\n      .eq('slug', slug)\n      .eq('active', true)\n      .single();\n\n    if (error) throw error;\n    return data;\n  } catch (error) {\n    console.error('Error fetching product by slug:', error);\n    return null;\n  }\n};\n\n// Enhanced category fetching with all details (for when needed)\nexport const getCategories = async () => {\n  try {\n    const { data, error } = await supabase\n      .from('categories')\n      .select('*')\n      .order('name', { ascending: true });\n\n    if (error) throw error;\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching categories:', error);\n    return [];\n  }\n};\n\n// Enhanced category fetching with all details (for when needed)\nexport const getCategoryBySlug = async (slug: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('categories')\n      .select('*')\n      .eq('slug', slug)\n      .single();\n\n    if (error) throw error;\n    return data;\n  } catch (error) {\n    console.error('Error fetching category by slug:', error);\n    return null;\n  }\n};\n\n// Enhanced user profile fetching with all details (for when needed)\nexport const getProfileForUser = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('id', userId)\n      .single();\n\n    if (error) throw error;\n    return data;\n  } catch (error) {\n    console.error('Error fetching user profile:', error);\n    return null;\n  }\n};\n\n// Enhanced cart items fetching with all details (for when needed)\nexport const getCartItems = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('cart_items')\n      .select(`\n        *,\n        products(name, price, image_url, slug)\n      `)\n      .eq('user_id', userId);\n\n    if (error) throw error;\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching cart items:', error);\n    return [];\n  }\n};\n\n// Add item to cart\nexport const addToCart = async (productId: string, variantId?: string, quantity: number = 1): Promise<boolean> => {\n  try {\n    const { data, error } = await supabase.rpc('add_to_cart', {\n      p_product_id: productId,\n      p_variant_id: variantId,\n      p_quantity: quantity\n    });\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error adding to cart:', error);\n    return false;\n  }\n};\n\n// Update cart item quantity\nexport const updateCartItemQuantity = async (cartItemId: string, quantity: number): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('cart_items')\n      .update({ quantity, updated_at: new Date().toISOString() })\n      .eq('id', cartItemId);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error updating cart item quantity:', error);\n    return false;\n  }\n};\n\n// Remove item from cart\nexport const removeFromCart = async (cartItemId: string): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('cart_items')\n      .delete()\n      .eq('id', cartItemId);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error removing from cart:', error);\n    return false;\n  }\n};\n\n// Clear entire cart\nexport const clearCart = async (userId: string): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('cart_items')\n      .delete()\n      .eq('user_id', userId);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error clearing cart:', error);\n    return false;\n  }\n};\n\n// ===== WISHLIST FUNCTIONS =====\n\n// Get wishlist items\nexport const getWishlistItems = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('wishlist_items')\n      .select(`\n        *,\n        products(*)\n      `)\n      .eq('user_id', userId);\n\n    if (error) throw error;\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching wishlist items:', error);\n    return [];\n  }\n};\n\n// Add item to wishlist\nexport const addToWishlist = async (productId: string): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('wishlist_items')\n      .insert({\n        product_id: productId,\n        user_id: (await supabase.auth.getUser()).data.user?.id\n      });\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error adding to wishlist:', error);\n    return false;\n  }\n};\n\n// Remove item from wishlist\nexport const removeFromWishlist = async (productId: string): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('wishlist_items')\n      .delete()\n      .eq('product_id', productId)\n      .eq('user_id', (await supabase.auth.getUser()).data.user?.id);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error removing from wishlist:', error);\n    return false;\n  }\n};\n\n// ===== REVIEW FUNCTIONS =====\n\n// Add a review\nexport const addReview = async (reviewData: {\n  productId?: string;\n  product_id?: string;\n  userId?: string;\n  user_id?: string;\n  rating: number;\n  comment?: string;\n  title?: string;\n}): Promise<boolean> => {\n  try {\n    const user = (await supabase.auth.getUser()).data.user;\n    if (!user) throw new Error('User not authenticated');\n\n    const { error } = await supabase\n      .from('reviews')\n      .insert({\n        product_id: reviewData.productId || reviewData.product_id,\n        user_id: user.id,\n        rating: reviewData.rating,\n        comment: reviewData.comment,\n        title: reviewData.title,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      });\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error adding review:', error);\n    return false;\n  }\n};\n\n// ===== ORDER FUNCTIONS =====\n\n// Create order for authenticated user\nexport const createOrder = async (orderData: {\n  items: any[];\n  shippingAddress: any;\n  billingAddress?: any;\n  paymentMethod: string;\n}): Promise<string | null> => {\n  try {\n    const user = (await supabase.auth.getUser()).data.user;\n    if (!user) throw new Error('User not authenticated');\n\n    // Calculate totals\n    const subtotal = orderData.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n    const taxAmount = subtotal * 0.18; // 18% GST for India\n    const shippingAmount = subtotal > 500 ? 0 : 50; // Free shipping over 500\n    const totalAmount = subtotal + taxAmount + shippingAmount;\n\n    // Generate order number\n    const orderNumber = 'ORD' + Date.now().toString();\n\n    const { data, error } = await supabase\n      .from('orders')\n      .insert({\n        order_number: orderNumber,\n        user_id: user.id,\n        subtotal: subtotal,\n        tax_amount: taxAmount,\n        shipping_amount: shippingAmount,\n        total_amount: totalAmount,\n        status: 'pending',\n        payment_status: 'pending',\n        payment_method: orderData.paymentMethod,\n        shipping_address: orderData.shippingAddress,\n        billing_address: orderData.billingAddress || orderData.shippingAddress,\n        created_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    // Insert order items\n    const orderItems = orderData.items.map(item => ({\n      order_id: data.id,\n      product_id: item.product_id || item.id,\n      quantity: item.quantity,\n      unit_price: item.price,\n      total_price: item.price * item.quantity\n    }));\n\n    const { error: itemsError } = await supabase\n      .from('order_items')\n      .insert(orderItems);\n\n    if (itemsError) throw itemsError;\n\n    return data.id;\n  } catch (error) {\n    console.error('Error creating order:', error);\n    return null;\n  }\n};\n\n// Create guest order\nexport const createGuestOrder = async (orderData: {\n  items: any[];\n  shippingAddress: any;\n  paymentMethod: string;\n  guestEmail: string;\n  guestName: string;\n  paymentId?: string;\n}): Promise<string | null> => {\n  try {\n    // Calculate totals\n    const subtotal = orderData.items.reduce((sum, item) => sum + (item.price * item.quantity), 0);\n    const taxAmount = subtotal * 0.18; // 18% GST for India\n    const shippingAmount = subtotal > 500 ? 0 : 50; // Free shipping over 500\n    const totalAmount = subtotal + taxAmount + shippingAmount;\n\n    // Generate order number\n    const orderNumber = 'ORD' + Date.now().toString();\n\n    const { data, error } = await supabase\n      .from('orders')\n      .insert({\n        order_number: orderNumber,\n        guest_email: orderData.guestEmail,\n        guest_name: orderData.guestName,\n        subtotal: subtotal,\n        tax_amount: taxAmount,\n        shipping_amount: shippingAmount,\n        total_amount: totalAmount,\n        status: 'pending',\n        payment_status: orderData.paymentId ? 'paid' : 'pending',\n        payment_method: orderData.paymentMethod,\n        payment_id: orderData.paymentId,\n        shipping_address: orderData.shippingAddress,\n        billing_address: orderData.shippingAddress,\n        created_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    // Insert order items\n    const orderItems = orderData.items.map(item => ({\n      order_id: data.id,\n      product_id: item.product_id || item.id,\n      quantity: item.quantity,\n      unit_price: item.price,\n      total_price: item.price * item.quantity\n    }));\n\n    const { error: itemsError } = await supabase\n      .from('order_items')\n      .insert(orderItems);\n\n    if (itemsError) throw itemsError;\n\n    return data.id;\n  } catch (error) {\n    console.error('Error creating guest order:', error);\n    return null;\n  }\n};\n\n// Update order status\nexport const updateOrderStatus = async (orderId: string, status: string): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('orders')\n      .update({\n        status: status,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', orderId);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error updating order status:', error);\n    return false;\n  }\n};\n\n// Get order by ID\nexport const getOrderById = async (orderId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('orders')\n      .select(`\n        *,\n        order_items(*, products(name, image_url)),\n        profiles(full_name, email)\n      `)\n      .eq('id', orderId)\n      .single();\n\n    if (error) throw error;\n    return data;\n  } catch (error) {\n    console.error('Error fetching order:', error);\n    return null;\n  }\n};\n\n// Update user role\nexport const updateUserRole = async (userId: string, role: 'admin' | 'seller' | 'customer'): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('profiles')\n      .update({\n        role: role,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', userId);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error updating user role:', error);\n    return false;\n  }\n};\n\n// ===== BULK USER OPERATIONS =====\n\n// Bulk update users\nexport const updateUsersBulk = async (userIds: string[], updates: any): Promise<{ success: boolean; updatedCount?: number; error?: string }> => {\n  try {\n    const { data, error } = await supabase\n      .from('profiles')\n      .update({\n        ...updates,\n        updated_at: new Date().toISOString()\n      })\n      .in('id', userIds)\n      .select();\n\n    if (error) throw error;\n\n    return {\n      success: true,\n      updatedCount: data?.length || 0\n    };\n  } catch (error) {\n    console.error('Error bulk updating users:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to update users'\n    };\n  }\n};\n\n// Bulk delete users\nexport const deleteUsersBulk = async (userIds: string[]): Promise<{ success: boolean; deletedCount?: number; error?: string }> => {\n  try {\n    const { data, error } = await supabase\n      .from('profiles')\n      .delete()\n      .in('id', userIds)\n      .select();\n\n    if (error) throw error;\n\n    return {\n      success: true,\n      deletedCount: data?.length || 0\n    };\n  } catch (error) {\n    console.error('Error bulk deleting users:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to delete users'\n    };\n  }\n};\n\n// Resend confirmation email\nexport const resendConfirmationEmail = async (email: string): Promise<{ success: boolean; error?: string }> => {\n  try {\n    const { error } = await supabase.auth.resend({\n      type: 'signup',\n      email: email\n    });\n\n    if (error) throw error;\n\n    return { success: true };\n  } catch (error) {\n    console.error('Error resending confirmation email:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to resend confirmation email'\n    };\n  }\n};\n\n// Confirm user email (admin function)\nexport const confirmUserEmail = async (userId: string): Promise<{ success: boolean; error?: string }> => {\n  try {\n    // This would typically require admin privileges\n    // For now, we'll update the profile to mark email as confirmed\n    const { error } = await supabase\n      .from('profiles')\n      .update({\n        email_confirmed: true,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', userId);\n\n    if (error) throw error;\n\n    return { success: true };\n  } catch (error) {\n    console.error('Error confirming user email:', error);\n    return {\n      success: false,\n      error: error instanceof Error ? error.message : 'Failed to confirm user email'\n    };\n  }\n};\n\n// ===== ADDRESS FUNCTIONS =====\n\n// Get user addresses\nexport const getUserAddresses = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('addresses')\n      .select('*')\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching user addresses:', error);\n    return [];\n  }\n};\n\n// Add address\nexport const addAddress = async (addressData: any): Promise<boolean> => {\n  try {\n    const user = (await supabase.auth.getUser()).data.user;\n    if (!user) throw new Error('User not authenticated');\n\n    const { error } = await supabase\n      .from('addresses')\n      .insert({\n        user_id: user.id,\n        full_name: addressData.fullName,\n        street_address: addressData.streetAddress,\n        city: addressData.city,\n        state: addressData.state,\n        postal_code: addressData.postalCode,\n        country: addressData.country,\n        phone: addressData.phone,\n        type: addressData.type,\n        is_default: addressData.isDefault,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      });\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error adding address:', error);\n    return false;\n  }\n};\n\n// Update address\nexport const updateAddress = async (addressData: any): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('addresses')\n      .update({\n        full_name: addressData.fullName,\n        street_address: addressData.streetAddress,\n        city: addressData.city,\n        state: addressData.state,\n        postal_code: addressData.postalCode,\n        country: addressData.country,\n        phone: addressData.phone,\n        type: addressData.type,\n        is_default: addressData.isDefault,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', addressData.id);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error updating address:', error);\n    return false;\n  }\n};\n\n// Delete address\nexport const deleteAddress = async (addressId: string): Promise<boolean> => {\n  try {\n    const { error } = await supabase\n      .from('addresses')\n      .delete()\n      .eq('id', addressId);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error deleting address:', error);\n    return false;\n  }\n};\n\n// Set default address\nexport const setDefaultAddress = async (addressId: string, type: 'shipping' | 'billing'): Promise<boolean> => {\n  try {\n    const user = (await supabase.auth.getUser()).data.user;\n    if (!user) throw new Error('User not authenticated');\n\n    // First, unset all default addresses of this type for the user\n    await supabase\n      .from('addresses')\n      .update({ is_default: false })\n      .eq('user_id', user.id)\n      .eq('type', type);\n\n    // Then set the selected address as default\n    const { error } = await supabase\n      .from('addresses')\n      .update({ is_default: true })\n      .eq('id', addressId);\n\n    if (error) throw error;\n    return true;\n  } catch (error) {\n    console.error('Error setting default address:', error);\n    return false;\n  }\n};\n\n// Enhanced orders fetching with all details (for when needed)\nexport const getOrders = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('orders')\n      .select(`\n        *,\n        order_items(*, products(name, image_url))\n      `)\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching orders:', error);\n    return [];\n  }\n};\n\n// Duplicate function removed - using the one above\n\n// Enhanced addresses fetching with all details (for when needed)\nexport const getAddresses = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('addresses')\n      .select('*')\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching addresses:', error);\n    return [];\n  }\n};\n\n// Enhanced dashboard analytics fetching with all details (for when needed)\nexport const getDashboardAnalytics = async (userId: string, role: string) => {\n  try {\n    // Different analytics based on user role\n    let data: DashboardAnalytics = {\n      totalRevenue: 0,\n      totalOrders: 0,\n      totalProducts: 0,\n      totalCustomers: 0,\n      recentOrders: [],\n      topProducts: [],\n      salesData: []\n    };\n\n    if (role === 'admin') {\n      // Admin gets all data\n      const [ordersResult, productsResult, customersResult] = await Promise.all([\n        supabase.from('orders').select('total_amount'),\n        supabase.from('products').select('id'),\n        supabase.from('profiles').select('id').eq('role', 'customer')\n      ]);\n\n      data.totalRevenue = ordersResult.data?.reduce((sum, order) => sum + parseFloat(order.total_amount), 0) || 0;\n      data.totalProducts = productsResult.data?.length || 0;\n      data.totalCustomers = customersResult.data?.length || 0;\n    } else if (role === 'seller') {\n      // Seller gets only their data\n      const [ordersResult, productsResult] = await Promise.all([\n        supabase.from('orders').select('total_amount, order_items!inner(products!inner(seller_id))').eq('order_items.products.seller_id', userId),\n        supabase.from('products').select('id').eq('seller_id', userId)\n      ]);\n\n      data.totalRevenue = ordersResult.data?.reduce((sum, order) => sum + parseFloat(order.total_amount), 0) || 0;\n      data.totalProducts = productsResult.data?.length || 0;\n    }\n\n    // Get recent orders\n    const { data: recentOrders } = await supabase\n      .from('orders')\n      .select(`\n        id,\n        total_amount,\n        status,\n        created_at,\n        profiles(display_name)\n      `)\n      .order('created_at', { ascending: false })\n      .limit(5);\n\n    data.recentOrders = recentOrders || [];\n\n    // Get top products\n    const { data: topProducts } = await supabase\n      .from('products')\n      .select('id, name, price, image_url, slug, sales_count')\n      .order('sales_count', { ascending: false })\n      .limit(5);\n\n    data.topProducts = topProducts || [];\n\n    // Get sales data\n    const { data: salesData } = await supabase\n      .from('sales_data_view')\n      .select('*')\n      .order('date', { ascending: true })\n      .limit(30);\n\n    data.salesData = salesData || [];\n\n    return data;\n  } catch (error) {\n    console.error('Error fetching dashboard analytics:', error);\n    return {\n      totalRevenue: 0,\n      totalOrders: 0,\n      totalProducts: 0,\n      totalCustomers: 0,\n      recentOrders: [],\n      topProducts: [],\n      salesData: []\n    };\n  }\n};\n\n// Enhanced featured products fetching with all details (for when needed)\nexport const getFeaturedProducts = async (limit: number = 8) => {\n  try {\n    const { data, error } = await supabase\n      .from('products')\n      .select(`\n        id,\n        name,\n        price,\n        image_url,\n        slug,\n        description,\n        categories(name, slug)\n      `)\n      .eq('featured', true)\n      .eq('active', true)\n      .limit(limit);\n\n    if (error) throw error;\n\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching featured products:', error);\n    return [];\n  }\n};\n\n// Enhanced basic products fetching with all details (for when needed)\nexport const getProductsBasic = async (filters?: {\n    categoryId?: string;\n    categorySlug?: string;\n    seller?: string;\n    featured?: boolean;\n    search?: string;\n    limit?: number;\n}) => {\n  try {\n    let query = supabase\n      .from('products')\n      .select(`\n        id,\n        name,\n        price,\n        image_url,\n        slug,\n        description,\n        stock,\n        featured,\n        categories(name, slug)\n      `)\n      .eq('active', true);\n\n    if (filters?.categoryId) {\n      query = query.eq('category_id', filters.categoryId);\n    }\n\n    if (filters?.categorySlug) {\n      query = query.eq('categories.slug', filters.categorySlug);\n    }\n\n    if (filters?.seller) {\n      query = query.eq('seller_id', filters.seller);\n    }\n\n    if (filters?.featured) {\n      query = query.eq('featured', filters.featured);\n    }\n\n    if (filters?.search) {\n      query = query.ilike('name', `%${filters.search}%`);\n    }\n\n    if (filters?.limit) {\n      query = query.limit(filters.limit);\n    }\n\n    const { data, error } = await query;\n\n    if (error) throw error;\n\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching basic products:', error);\n    return [];\n  }\n};\n\n// Enhanced minimal products fetching with all details (for when needed)\nexport const getProductsMinimal = async (limit?: number) => {\n  try {\n    let query = supabase\n      .from('products')\n      .select(`\n        id,\n        name,\n        price,\n        image_url,\n        slug\n      `)\n      .eq('active', true);\n\n    if (limit) {\n      query = query.limit(limit);\n    }\n\n    const { data, error } = await query;\n\n    if (error) throw error;\n\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching minimal products:', error);\n    return [];\n  }\n};\n\n// Enhanced users fetching with all details (for when needed)\nexport const getAllUsers = async () => {\n  try {\n    const { data, error } = await supabase\n      .from('profiles')\n      .select('*')\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching all users:', error);\n    return [];\n  }\n};\n\n// Enhanced user preferences fetching with all details (for when needed)\nexport const getUserPreferences = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('user_preferences')\n      .select('*')\n      .eq('user_id', userId)\n      .single();\n\n    if (error && error.code !== 'PGRST116') throw error; // Ignore \"not found\" errors\n\n    return data;\n  } catch (error) {\n    console.error('Error fetching user preferences:', error);\n    return null;\n  }\n};\n\n// Enhanced user security settings fetching with all details (for when needed)\nexport const getUserSecuritySettings = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('user_security_settings')\n      .select('*')\n      .eq('user_id', userId)\n      .single();\n\n    if (error && error.code !== 'PGRST116') throw error; // Ignore \"not found\" errors\n\n    return data;\n  } catch (error) {\n    console.error('Error fetching user security settings:', error);\n    return null;\n  }\n};\n\n// Enhanced user payment methods fetching with all details (for when needed)\nexport const getUserPaymentMethods = async (userId: string) => {\n  try {\n    const { data, error } = await supabase\n      .from('user_payment_methods')\n      .select('*')\n      .eq('user_id', userId)\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n\n    return data || [];\n  } catch (error) {\n    console.error('Error fetching user payment methods:', error);\n    return [];\n  }\n};\n\n// Enhanced user preferences updating\nexport const updateUserPreferences = async (userId: string, preferences: any) => {\n  try {\n    const { data, error } = await supabase\n      .from('user_preferences')\n      .upsert({\n        user_id: userId,\n        ...preferences,\n        updated_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return data;\n  } catch (error) {\n    console.error('Error updating user preferences:', error);\n    return null;\n  }\n};\n\n// Enhanced user security settings updating\nexport const updateUserSecuritySettings = async (userId: string, settings: any) => {\n  try {\n    const { data, error } = await supabase\n      .from('user_security_settings')\n      .upsert({\n        user_id: userId,\n        ...settings,\n        updated_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return data;\n  } catch (error) {\n    console.error('Error updating user security settings:', error);\n    return null;\n  }\n};\n\n// Enhanced payment method management\nexport const deletePaymentMethod = async (paymentMethodId: string) => {\n  try {\n    const { error } = await supabase\n      .from('user_payment_methods')\n      .delete()\n      .eq('id', paymentMethodId);\n\n    if (error) throw error;\n\n    return true;\n  } catch (error) {\n    console.error('Error deleting payment method:', error);\n    return false;\n  }\n};\n\nexport const setDefaultPaymentMethod = async (userId: string, paymentMethodId: string) => {\n  try {\n    // First, unset all other payment methods as default\n    await supabase\n      .from('user_payment_methods')\n      .update({ is_default: false })\n      .eq('user_id', userId);\n\n    // Then set the selected one as default\n    const { error } = await supabase\n      .from('user_payment_methods')\n      .update({ is_default: true })\n      .eq('id', paymentMethodId)\n      .eq('user_id', userId);\n\n    if (error) throw error;\n\n    return true;\n  } catch (error) {\n    console.error('Error setting default payment method:', error);\n    return false;\n  }\n};\n\n// ===== PLACEHOLDER FOR NEW CRUD FUNCTIONS =====\n// These will be added in the next step with proper error handling and validation\n","import { supabase } from './supabase';\nimport { User, Product, Category, Order } from '../types';\n\n// ===== NEW CLEAN CRUD FUNCTIONS =====\n// These functions will replace the broken ones with proper error handling and validation\n\n// Error handling utility\nconst handleError = (error: any, operation: string) => {\n  console.error(`CRUD Error in ${operation}:`, error);\n  throw new Error(`${operation} failed: ${error.message || 'Unknown error'}`);\n};\n\n// Validation utilities\nconst validateRequired = (data: any, fields: string[]) => {\n  const missing = fields.filter(field => !data[field]);\n  if (missing.length > 0) {\n    throw new Error(`Required fields missing: ${missing.join(', ')}`);\n  }\n};\n\nconst validateEmail = (email: string) => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  if (!emailRegex.test(email)) {\n    throw new Error('Invalid email format');\n  }\n};\n\n// ===== USER CRUD OPERATIONS =====\n\nexport const createUser = async (userData: {\n  email: string;\n  name: string;\n  role: 'admin' | 'seller' | 'customer';\n  phone?: string;\n  dateOfBirth?: string;\n  isActive?: boolean;\n  password?: string;\n}): Promise<User> => {\n  try {\n    // Validate required fields\n    validateRequired(userData, ['email', 'name', 'role']);\n    validateEmail(userData.email);\n\n    // Check if user already exists\n    const { data: existingUser } = await supabase\n      .from('profiles')\n      .select('id')\n      .eq('email', userData.email)\n      .single();\n\n    if (existingUser) {\n      throw new Error('User with this email already exists');\n    }\n\n    // Use the database function to create user profile\n    const { data: userId, error: createError } = await supabase.rpc('create_user_profile', {\n      p_email: userData.email,\n      p_full_name: userData.name,\n      p_role: userData.role,\n      p_phone: userData.phone || null,\n      p_date_of_birth: userData.dateOfBirth || null,\n      p_is_active: userData.isActive !== undefined ? userData.isActive : true\n    });\n\n    if (createError) {\n      throw new Error(`Failed to create user: ${createError.message}`);\n    }\n\n    // Get the created user profile\n    const { data: profileData, error: profileError } = await supabase\n      .from('profiles')\n      .select('*')\n      .eq('id', userId)\n      .single();\n\n    if (profileError) throw profileError;\n\n    return {\n      id: profileData.id,\n      email: profileData.email,\n      name: profileData.full_name,\n      role: profileData.role,\n      phone: profileData.phone,\n      dateOfBirth: profileData.date_of_birth,\n      isActive: profileData.is_active,\n      emailVerified: profileData.email_verified || true,\n      createdAt: new Date(profileData.created_at),\n      updatedAt: new Date(profileData.updated_at)\n    };\n  } catch (error) {\n    handleError(error, 'Create User');\n    throw error; // Re-throw for caller to handle\n  }\n};\n\n// Helper function to generate secure password\nconst generateSecurePassword = (): string => {\n  const chars = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789!@#$%^&*';\n  let result = '';\n  for (let i = 0; i < 12; i++) {\n    result += chars.charAt(Math.floor(Math.random() * chars.length));\n  }\n  return result;\n};\n\nexport const updateUser = async (userId: string, updates: Partial<User>): Promise<User> => {\n  try {\n    if (!userId) throw new Error('User ID is required');\n\n    // Validate email if provided\n    if (updates.email) {\n      validateEmail(updates.email);\n    }\n\n    const updateData: any = {\n      updated_at: new Date().toISOString()\n    };\n\n    if (updates.name !== undefined) updateData.full_name = updates.name;\n    if (updates.email !== undefined) updateData.email = updates.email;\n    if (updates.role !== undefined) updateData.role = updates.role;\n    if (updates.phone !== undefined) updateData.phone = updates.phone;\n    if (updates.dateOfBirth !== undefined) updateData.date_of_birth = updates.dateOfBirth;\n    if (updates.isActive !== undefined) updateData.is_active = updates.isActive;\n\n    const { data, error } = await supabase\n      .from('profiles')\n      .update(updateData)\n      .eq('id', userId)\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return {\n      id: data.id,\n      email: data.email,\n      name: data.full_name,\n      role: data.role,\n      phone: data.phone,\n      dateOfBirth: data.date_of_birth,\n      isActive: data.is_active,\n      emailVerified: data.email_verified || false,\n      createdAt: new Date(data.created_at),\n      updatedAt: new Date(data.updated_at)\n    };\n  } catch (error) {\n    handleError(error, 'Update User');\n    throw error;\n  }\n};\n\nexport const deleteUser = async (userId: string): Promise<boolean> => {\n  try {\n    if (!userId) throw new Error('User ID is required');\n\n    // First, check if user exists\n    const { data: user } = await supabase\n      .from('profiles')\n      .select('id')\n      .eq('id', userId)\n      .single();\n\n    if (!user) {\n      throw new Error('User not found');\n    }\n\n    // Delete related data first (to maintain referential integrity)\n    const relatedTables = ['addresses', 'cart_items', 'wishlist_items', 'reviews'];\n    \n    for (const table of relatedTables) {\n      await supabase\n        .from(table)\n        .delete()\n        .eq('user_id', userId);\n    }\n\n    // Delete the user profile\n    const { error } = await supabase\n      .from('profiles')\n      .delete()\n      .eq('id', userId);\n\n    if (error) throw error;\n\n    return true;\n  } catch (error) {\n    handleError(error, 'Delete User');\n    throw error;\n  }\n};\n\n// ===== PRODUCT CRUD OPERATIONS =====\n\nexport const createProduct = async (productData: {\n  name: string;\n  description: string;\n  price: number;\n  categoryId: string;\n  sellerId?: string;\n  stock?: number;\n  imageUrl?: string;\n  featured?: boolean;\n}): Promise<Product> => {\n  try {\n    // Validate required fields\n    validateRequired(productData, ['name', 'description', 'price', 'categoryId']);\n\n    if (productData.price <= 0) {\n      throw new Error('Price must be greater than 0');\n    }\n\n    // Generate slug from name\n    const slug = productData.name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/(^-|-$)/g, '');\n\n    const { data, error } = await supabase\n      .from('products')\n      .insert({\n        name: productData.name,\n        description: productData.description,\n        price: productData.price,\n        category_id: productData.categoryId,\n        seller_id: productData.sellerId || null,\n        stock: productData.stock || 0,\n        image_url: productData.imageUrl || null,\n        featured: productData.featured || false,\n        slug: slug,\n        is_active: true,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return {\n      id: data.id,\n      name: data.name,\n      description: data.description,\n      price: parseFloat(data.price),\n      categoryId: data.category_id,\n      sellerId: data.seller_id,\n      sellerName: '', // Will be populated by join if needed\n      stock: data.stock,\n      images: data.image_url ? [data.image_url] : [], // Convert single image to array\n      tags: [], // Default empty array\n      featured: data.featured,\n      slug: data.slug,\n      isActive: data.is_active,\n      rating: 0,\n      reviewCount: 0,\n      reviews: [],\n      createdAt: new Date(data.created_at),\n      updatedAt: new Date(data.updated_at)\n    };\n  } catch (error) {\n    handleError(error, 'Create Product');\n    throw error;\n  }\n};\n\nexport const updateProduct = async (productId: string, updates: Partial<Product>): Promise<Product> => {\n  try {\n    if (!productId) throw new Error('Product ID is required');\n\n    if (updates.price !== undefined && updates.price <= 0) {\n      throw new Error('Price must be greater than 0');\n    }\n\n    const updateData: any = {\n      updated_at: new Date().toISOString()\n    };\n\n    if (updates.name !== undefined) updateData.name = updates.name;\n    if (updates.description !== undefined) updateData.description = updates.description;\n    if (updates.price !== undefined) updateData.price = updates.price;\n    if (updates.categoryId !== undefined) updateData.category_id = updates.categoryId;\n    if (updates.stock !== undefined) updateData.stock = updates.stock;\n    if (updates.imageUrl !== undefined) updateData.image_url = updates.imageUrl;\n    if (updates.featured !== undefined) updateData.featured = updates.featured;\n    if (updates.isActive !== undefined) updateData.is_active = updates.isActive;\n\n    const { data, error } = await supabase\n      .from('products')\n      .update(updateData)\n      .eq('id', productId)\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return {\n      id: data.id,\n      name: data.name,\n      description: data.description,\n      price: parseFloat(data.price),\n      categoryId: data.category_id,\n      sellerId: data.seller_id,\n      sellerName: '', // Will be populated by join if needed\n      stock: data.stock,\n      images: data.image_url ? [data.image_url] : [], // Convert single image to array\n      tags: [], // Default empty array\n      featured: data.featured,\n      slug: data.slug,\n      isActive: data.is_active,\n      rating: 0,\n      reviewCount: 0,\n      reviews: [],\n      createdAt: new Date(data.created_at),\n      updatedAt: new Date(data.updated_at)\n    };\n  } catch (error) {\n    handleError(error, 'Update Product');\n    throw error;\n  }\n};\n\nexport const deleteProduct = async (productId: string): Promise<boolean> => {\n  try {\n    if (!productId) throw new Error('Product ID is required');\n\n    // Soft delete by setting is_active to false\n    const { error } = await supabase\n      .from('products')\n      .update({\n        is_active: false,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', productId);\n\n    if (error) throw error;\n\n    return true;\n  } catch (error) {\n    handleError(error, 'Delete Product');\n    throw error;\n  }\n};\n\n// ===== CATEGORY CRUD OPERATIONS =====\n\nexport const createCategory = async (categoryData: {\n  name: string;\n  description?: string;\n  imageUrl?: string;\n}): Promise<Category> => {\n  try {\n    // Validate required fields\n    validateRequired(categoryData, ['name']);\n\n    // Generate slug from name\n    const slug = categoryData.name\n      .toLowerCase()\n      .replace(/[^a-z0-9]+/g, '-')\n      .replace(/(^-|-$)/g, '');\n\n    const { data, error } = await supabase\n      .from('categories')\n      .insert({\n        name: categoryData.name,\n        slug: slug,\n        description: categoryData.description || null,\n        image_url: categoryData.imageUrl || null,\n        is_active: true,\n        created_at: new Date().toISOString(),\n        updated_at: new Date().toISOString()\n      })\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return {\n      id: data.id,\n      name: data.name,\n      slug: data.slug,\n      description: data.description,\n      imageUrl: data.image_url,\n      isActive: data.is_active,\n      productCount: 0,\n      createdAt: new Date(data.created_at),\n      updatedAt: new Date(data.updated_at)\n    };\n  } catch (error) {\n    handleError(error, 'Create Category');\n    throw error;\n  }\n};\n\nexport const updateCategory = async (categoryId: string, updates: Partial<Category>): Promise<Category> => {\n  try {\n    if (!categoryId) throw new Error('Category ID is required');\n\n    const updateData: any = {\n      updated_at: new Date().toISOString()\n    };\n\n    if (updates.name !== undefined) updateData.name = updates.name;\n    if (updates.description !== undefined) updateData.description = updates.description;\n    if (updates.imageUrl !== undefined) updateData.image_url = updates.imageUrl;\n    if (updates.isActive !== undefined) updateData.is_active = updates.isActive;\n\n    const { data, error } = await supabase\n      .from('categories')\n      .update(updateData)\n      .eq('id', categoryId)\n      .select()\n      .single();\n\n    if (error) throw error;\n\n    return {\n      id: data.id,\n      name: data.name,\n      slug: data.slug,\n      description: data.description,\n      imageUrl: data.image_url,\n      isActive: data.is_active,\n      productCount: 0, // Will be calculated separately if needed\n      createdAt: new Date(data.created_at),\n      updatedAt: new Date(data.updated_at)\n    };\n  } catch (error) {\n    handleError(error, 'Update Category');\n    throw error;\n  }\n};\n\nexport const deleteCategory = async (categoryId: string): Promise<boolean> => {\n  try {\n    if (!categoryId) throw new Error('Category ID is required');\n\n    // Check if category has products\n    const { count } = await supabase\n      .from('products')\n      .select('*', { count: 'exact', head: true })\n      .eq('category_id', categoryId)\n      .eq('is_active', true);\n\n    if (count && count > 0) {\n      throw new Error('Cannot delete category with active products. Please move or delete products first.');\n    }\n\n    // Soft delete by setting is_active to false\n    const { error } = await supabase\n      .from('categories')\n      .update({\n        is_active: false,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', categoryId);\n\n    if (error) throw error;\n\n    return true;\n  } catch (error) {\n    handleError(error, 'Delete Category');\n    throw error;\n  }\n};\n\n// ===== READ/GET OPERATIONS =====\n\nexport const getCategories = async (): Promise<Category[]> => {\n  try {\n    const { data, error } = await supabase\n      .from('categories')\n      .select('*')\n      .eq('is_active', true)\n      .order('sort_order', { ascending: true });\n\n    if (error) throw error;\n\n    return data.map(category => ({\n      id: category.id,\n      name: category.name,\n      slug: category.slug,\n      description: category.description,\n      imageUrl: category.image_url,\n      parentId: category.parent_id,\n      sortOrder: category.sort_order,\n      isActive: category.is_active,\n      createdAt: new Date(category.created_at),\n      updatedAt: new Date(category.updated_at)\n    }));\n  } catch (error) {\n    handleError(error, 'Get Categories');\n    throw error;\n  }\n};\n\nexport const getProducts = async (): Promise<Product[]> => {\n  try {\n    const { data, error } = await supabase\n      .from('products')\n      .select(`\n        *,\n        categories(name, slug)\n      `)\n      .eq('is_active', true)\n      .order('created_at', { ascending: false });\n\n    if (error) throw error;\n\n    return data.map(product => ({\n      id: product.id,\n      name: product.name,\n      description: product.description,\n      price: parseFloat(product.price),\n      categoryId: product.category_id,\n      sellerId: product.seller_id,\n      stock: product.stock,\n      images: product.image_url ? [product.image_url] : [],\n      featured: product.featured,\n      rating: product.rating || 0,\n      reviewCount: product.review_count || 0,\n      createdAt: new Date(product.created_at),\n      reviews: []\n    }));\n  } catch (error) {\n    handleError(error, 'Get Products');\n    throw error;\n  }\n};\n\nexport const getFeaturedProducts = async (limit: number = 8): Promise<Product[]> => {\n  try {\n    const { data, error } = await supabase\n      .from('products')\n      .select(`\n        *,\n        categories(name, slug)\n      `)\n      .eq('is_active', true)\n      .eq('featured', true)\n      .order('created_at', { ascending: false })\n      .limit(limit);\n\n    if (error) throw error;\n\n    return data.map(product => ({\n      id: product.id,\n      name: product.name,\n      description: product.description,\n      price: parseFloat(product.price),\n      categoryId: product.category_id,\n      sellerId: product.seller_id,\n      stock: product.stock,\n      images: product.image_url ? [product.image_url] : [],\n      featured: product.featured,\n      rating: product.rating || 0,\n      reviewCount: product.review_count || 0,\n      createdAt: new Date(product.created_at),\n      reviews: []\n    }));\n  } catch (error) {\n    handleError(error, 'Get Featured Products');\n    throw error;\n  }\n};\n\nexport const getProductById = async (productId: string): Promise<Product | null> => {\n  try {\n    if (!productId) throw new Error('Product ID is required');\n\n    const { data, error } = await supabase\n      .from('products')\n      .select(`\n        *,\n        categories(name, slug)\n      `)\n      .eq('id', productId)\n      .eq('is_active', true)\n      .single();\n\n    if (error) {\n      if (error.code === 'PGRST116') return null; // Not found\n      throw error;\n    }\n\n    return {\n      id: data.id,\n      name: data.name,\n      description: data.description,\n      price: parseFloat(data.price),\n      categoryId: data.category_id,\n      sellerId: data.seller_id,\n      stock: data.stock,\n      images: data.image_url ? [data.image_url] : [],\n      featured: data.featured,\n      rating: data.rating || 0,\n      reviewCount: data.review_count || 0,\n      createdAt: new Date(data.created_at),\n      reviews: []\n    };\n  } catch (error) {\n    handleError(error, 'Get Product By ID');\n    throw error;\n  }\n};\n\nexport const getCategoryById = async (categoryId: string): Promise<Category | null> => {\n  try {\n    if (!categoryId) throw new Error('Category ID is required');\n\n    const { data, error } = await supabase\n      .from('categories')\n      .select('*')\n      .eq('id', categoryId)\n      .eq('is_active', true)\n      .single();\n\n    if (error) {\n      if (error.code === 'PGRST116') return null; // Not found\n      throw error;\n    }\n\n    return {\n      id: data.id,\n      name: data.name,\n      slug: data.slug,\n      description: data.description,\n      imageUrl: data.image_url,\n      parentId: data.parent_id,\n      sortOrder: data.sort_order,\n      isActive: data.is_active,\n      createdAt: new Date(data.created_at),\n      updatedAt: new Date(data.updated_at)\n    };\n  } catch (error) {\n    handleError(error, 'Get Category By ID');\n    throw error;\n  }\n};\n\n// ===== ORDER CRUD OPERATIONS =====\n\nexport const updateOrderStatus = async (orderId: string, status: string): Promise<Order> => {\n  try {\n    if (!orderId) throw new Error('Order ID is required');\n    if (!status) throw new Error('Status is required');\n\n    const validStatuses = ['pending', 'confirmed', 'processing', 'shipped', 'delivered', 'cancelled'];\n    if (!validStatuses.includes(status)) {\n      throw new Error(`Invalid status. Must be one of: ${validStatuses.join(', ')}`);\n    }\n\n    const { data, error } = await supabase\n      .from('orders')\n      .update({\n        status: status,\n        updated_at: new Date().toISOString()\n      })\n      .eq('id', orderId)\n      .select(`\n        *,\n        order_items(*, products(name, image_url)),\n        profiles(full_name, email)\n      `)\n      .single();\n\n    if (error) throw error;\n\n    return {\n      id: data.id,\n      userId: data.user_id,\n      status: data.status,\n      totalAmount: parseFloat(data.total_amount),\n      shippingAddress: data.shipping_address,\n      paymentMethod: data.payment_method,\n      createdAt: new Date(data.created_at),\n      updatedAt: new Date(data.updated_at),\n      items: data.order_items || []\n    };\n  } catch (error) {\n    handleError(error, 'Update Order Status');\n    throw error;\n  }\n};\n","import React, { useState } from 'react';\r\nimport {\r\n  X, Mail, Lock, User, Eye, EyeOff, ArrowLeft,\r\n  Fingerprint, Shield, Star, Gift,\r\n  Heart, ShoppingCart, Bell, Settings, LogOut,\r\n  Sparkles, Crown, AlertCircle, Loader2, Phone, Calendar\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\n\r\ninterface MobileAuthViewProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  initialMode?: 'login' | 'signup' | 'forgot';\r\n}\r\n\r\ntype AuthMode = 'login' | 'signup' | 'forgot' | 'verify' | 'profile';\r\n\r\ninterface FormData {\r\n  email: string;\r\n  password: string;\r\n  confirmPassword: string;\r\n  fullName: string;\r\n  phone: string;\r\n  dateOfBirth: string;\r\n}\r\n\r\nexport const MobileAuthView: React.FC<MobileAuthViewProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  initialMode = 'login'\r\n}) => {\r\n  const [mode, setMode] = useState<AuthMode>(initialMode);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [step, setStep] = useState(1);\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n\r\n  const { user, signIn, signUp, logout } = useAuth();\r\n\r\n  const [formData, setFormData] = useState<FormData>({\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    fullName: '',\r\n    phone: '',\r\n    dateOfBirth: '',\r\n  });\r\n\r\n  const [errors, setErrors] = useState<Record<string, string>>({});\r\n\r\n  const validateEmail = (email: string): boolean => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n  };\r\n\r\n  const validatePassword = (password: string): boolean => {\r\n    // Simple validation for mobile - at least 8 characters\r\n    return password.length >= 8;\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: Record<string, string> = {};\r\n\r\n    if (!formData.email) {\r\n      newErrors.email = 'Email is required';\r\n    } else if (!validateEmail(formData.email)) {\r\n      newErrors.email = 'Please enter a valid email';\r\n    }\r\n\r\n    if (!formData.password) {\r\n      newErrors.password = 'Password is required';\r\n    } else if (!validatePassword(formData.password)) {\r\n      newErrors.password = 'Password must be at least 8 characters';\r\n    }\r\n\r\n    if (mode === 'signup' && step === 1) {\r\n      if (formData.password !== formData.confirmPassword) {\r\n        newErrors.confirmPassword = 'Passwords do not match';\r\n      }\r\n    }\r\n\r\n    if (mode === 'signup' && step === 2 && !formData.fullName.trim()) {\r\n      newErrors.fullName = 'Full name is required';\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  const handleInputChange = (field: keyof FormData, value: string) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    if (errors[field]) {\r\n      setErrors(prev => ({ ...prev, [field]: '' }));\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) return;\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (mode === 'login') {\r\n        await signIn(formData.email, formData.password);\r\n        onClose();\r\n      } else if (mode === 'signup') {\r\n        if (step === 1) {\r\n          setStep(2);\r\n        } else {\r\n          await signUp(formData.email, formData.password, {\r\n            fullName: formData.fullName,\r\n            phone: formData.phone,\r\n            dateOfBirth: formData.dateOfBirth,\r\n          });\r\n          setMode('verify');\r\n        }\r\n      }\r\n    } catch (error) {\r\n      console.error('Auth error:', error);\r\n      setErrors({ general: 'Authentication failed. Please try again.' });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-50 md:hidden\">\r\n      {/* Background overlay */}\r\n      <div \r\n        className=\"absolute inset-0 bg-black bg-opacity-50\"\r\n        onClick={onClose}\r\n      />\r\n      \r\n      {/* Mobile auth panel */}\r\n      <div className=\"absolute inset-0 bg-white flex flex-col\">\r\n        {/* Header */}\r\n        <div className=\"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            {mode !== 'login' && mode !== 'profile' && (\r\n              <button\r\n                onClick={() => {\r\n                  if (mode === 'signup' && step === 2) {\r\n                    setStep(1);\r\n                  } else if (mode === 'profile') {\r\n                    setMode('login');\r\n                  } else {\r\n                    setMode('login');\r\n                  }\r\n                }}\r\n                className=\"p-2 rounded-full hover:bg-white hover:bg-opacity-20\"\r\n              >\r\n                <ArrowLeft className=\"h-6 w-6\" />\r\n              </button>\r\n            )}\r\n            \r\n            <div className=\"flex-1 text-center\">\r\n              <h2 className=\"text-xl font-bold\">\r\n                {mode === 'login' && 'Welcome to S.Essences'}\r\n                {mode === 'signup' && (step === 1 ? 'Create Account' : 'Complete Profile')}\r\n                {mode === 'forgot' && 'Reset Password'}\r\n                {mode === 'verify' && 'Verify Email'}\r\n                {mode === 'profile' && 'My Account'}\r\n              </h2>\r\n            </div>\r\n            \r\n            <button\r\n              onClick={onClose}\r\n              className=\"p-2 rounded-full hover:bg-white hover:bg-opacity-20\"\r\n            >\r\n              <X className=\"h-6 w-6\" />\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Content */}\r\n        <div className=\"flex-1 overflow-y-auto p-4\">\r\n          {mode === 'verify' ? (\r\n            <div className=\"text-center space-y-6 py-8\">\r\n              <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto\">\r\n                <Mail className=\"h-10 w-10 text-green-600\" />\r\n              </div>\r\n              <div>\r\n                <h3 className=\"text-lg font-semibold text-gray-900\">Verification Email Sent</h3>\r\n                <p className=\"text-gray-600 mt-2\">\r\n                  We've sent a verification link to <strong>{formData.email}</strong>\r\n                </p>\r\n                <p className=\"text-sm text-gray-500 mt-2\">\r\n                  Didn't receive the email? Check your spam folder or{' '}\r\n                  <button className=\"text-indigo-600 hover:text-indigo-700 font-medium\">\r\n                    resend verification email\r\n                  </button>\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={() => setMode('login')}\r\n                className=\"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors font-medium\"\r\n              >\r\n                Back to Login\r\n              </button>\r\n            </div>\r\n          ) : mode === 'profile' && user ? (\r\n            <div className=\"space-y-6\">\r\n              {/* User Profile Header */}\r\n              <div className=\"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-6 text-center\">\r\n                <div className=\"w-20 h-20 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                  <span className=\"text-2xl font-bold text-white\">{user.name.charAt(0)}</span>\r\n                </div>\r\n                <h3 className=\"text-xl font-bold text-gray-900\">{user.name}</h3>\r\n                <p className=\"text-gray-600\">{user.email}</p>\r\n                <span className=\"inline-block mt-2 px-3 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full capitalize\">\r\n                  {user.role}\r\n                </span>\r\n              </div>\r\n\r\n              {/* Quick Actions */}\r\n              <div className=\"grid grid-cols-3 gap-4\">\r\n                <button className=\"flex flex-col items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100\">\r\n                  <Heart className=\"h-6 w-6 text-red-500 mb-2\" />\r\n                  <span className=\"text-xs text-gray-700\">Wishlist</span>\r\n                </button>\r\n                <button className=\"flex flex-col items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100\">\r\n                  <ShoppingCart className=\"h-6 w-6 text-green-500 mb-2\" />\r\n                  <span className=\"text-xs text-gray-700\">Cart</span>\r\n                </button>\r\n                <button className=\"flex flex-col items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100\">\r\n                  <Bell className=\"h-6 w-6 text-blue-500 mb-2\" />\r\n                  <span className=\"text-xs text-gray-700\">Notifications</span>\r\n                </button>\r\n              </div>\r\n\r\n              {/* Account Options */}\r\n              <div className=\"space-y-3\">\r\n                <button className=\"w-full flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100\">\r\n                  <Settings className=\"h-5 w-5 text-gray-500 mr-3\" />\r\n                  <span className=\"text-gray-700\">Account Settings</span>\r\n                </button>\r\n                <button className=\"w-full flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100\">\r\n                  <Gift className=\"h-5 w-5 text-gray-500 mr-3\" />\r\n                  <span className=\"text-gray-700\">My Orders</span>\r\n                </button>\r\n                <button \r\n                  onClick={logout}\r\n                  className=\"w-full flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100 text-red-600\"\r\n                >\r\n                  <LogOut className=\"h-5 w-5 mr-3\" />\r\n                  <span>Sign Out</span>\r\n                </button>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <form onSubmit={handleSubmit} className=\"space-y-5\">\r\n              {/* Branding Section */}\r\n              {(mode === 'login' || (mode === 'signup' && step === 1)) && (\r\n                <div className=\"text-center mb-2\">\r\n                  <div className=\"inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-full px-4 py-2 mb-3\">\r\n                    <Sparkles className=\"h-4 w-4 text-purple-600\" />\r\n                    <span className=\"text-xs font-semibold text-purple-800\">Premium Attar Collection</span>\r\n                    <Crown className=\"h-4 w-4 text-amber-500\" />\r\n                  </div>\r\n                  <p className=\"text-sm text-gray-600 mb-4\">\r\n                    {mode === 'login' \r\n                      ? 'Sign in to discover premium attars' \r\n                      : 'Join our community of fragrance lovers'}\r\n                  </p>\r\n                </div>\r\n              )}\r\n\r\n              {/* General Error Message */}\r\n              {errors.general && (\r\n                <div className=\"bg-red-50 text-red-700 p-3 rounded-lg text-sm flex items-center\">\r\n                  <AlertCircle className=\"h-4 w-4 mr-2 flex-shrink-0\" />\r\n                  {errors.general}\r\n                </div>\r\n              )}\r\n\r\n              {/* Email Field */}\r\n              {(mode === 'login' || mode === 'forgot' || (mode === 'signup' && step === 1)) && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Email Address\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                    <input\r\n                      type=\"email\"\r\n                      value={formData.email}\r\n                      onChange={(e) => handleInputChange('email', e.target.value)}\r\n                      className={`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\r\n                        errors.email ? 'border-red-300' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter your email\"\r\n                      disabled={loading}\r\n                    />\r\n                  </div>\r\n                  {errors.email && (\r\n                    <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                      <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                      {errors.email}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Password Field */}\r\n              {(mode === 'login' || mode === 'reset' || (mode === 'signup' && step === 1)) && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Password\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                    <input\r\n                      type={showPassword ? 'text' : 'password'}\r\n                      value={formData.password}\r\n                      onChange={(e) => handleInputChange('password', e.target.value)}\r\n                      className={`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\r\n                        errors.password ? 'border-red-300' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter your password\"\r\n                      disabled={loading}\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowPassword(!showPassword)}\r\n                      className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                    >\r\n                      {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                    </button>\r\n                  </div>\r\n                  {errors.password && (\r\n                    <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                      <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                      {errors.password}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Confirm Password Field (Signup Step 1) */}\r\n              {mode === 'signup' && step === 1 && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Confirm Password\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                    <input\r\n                      type={showConfirmPassword ? 'text' : 'password'}\r\n                      value={formData.confirmPassword}\r\n                      onChange={(e) => handleInputChange('confirmPassword', e.target.value)}\r\n                      className={`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\r\n                        errors.confirmPassword ? 'border-red-300' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Confirm your password\"\r\n                      disabled={loading}\r\n                    />\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                      className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600\"\r\n                    >\r\n                      {showConfirmPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                    </button>\r\n                  </div>\r\n                  {errors.confirmPassword && (\r\n                    <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                      <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                      {errors.confirmPassword}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Full Name Field (Signup Step 2) */}\r\n              {mode === 'signup' && step === 2 && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Full Name\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                    <input\r\n                      type=\"text\"\r\n                      value={formData.fullName}\r\n                      onChange={(e) => handleInputChange('fullName', e.target.value)}\r\n                      className={`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${\r\n                        errors.fullName ? 'border-red-300' : 'border-gray-300'\r\n                      }`}\r\n                      placeholder=\"Enter your full name\"\r\n                      disabled={loading}\r\n                    />\r\n                  </div>\r\n                  {errors.fullName && (\r\n                    <p className=\"mt-1 text-sm text-red-600 flex items-center\">\r\n                      <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                      {errors.fullName}\r\n                    </p>\r\n                  )}\r\n                </div>\r\n              )}\r\n\r\n              {/* Phone Field (Signup Step 2) */}\r\n              {mode === 'signup' && step === 2 && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Phone Number\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <Phone className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                    <input\r\n                      type=\"tel\"\r\n                      value={formData.phone}\r\n                      onChange={(e) => handleInputChange('phone', e.target.value)}\r\n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      placeholder=\"Enter your phone number\"\r\n                      disabled={loading}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Date of Birth Field (Signup Step 2) */}\r\n              {mode === 'signup' && step === 2 && (\r\n                <div>\r\n                  <label className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n                    Date of Birth\r\n                  </label>\r\n                  <div className=\"relative\">\r\n                    <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400\" />\r\n                    <input\r\n                      type=\"date\"\r\n                      value={formData.dateOfBirth}\r\n                      onChange={(e) => handleInputChange('dateOfBirth', e.target.value)}\r\n                      className=\"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                      disabled={loading}\r\n                    />\r\n                  </div>\r\n                </div>\r\n              )}\r\n\r\n              {/* Remember Me (Login) */}\r\n              {mode === 'login' && (\r\n                <div className=\"flex items-center justify-between\">\r\n                  <div className=\"flex items-center\">\r\n                    <input\r\n                      id=\"remember-me-mobile\"\r\n                      name=\"remember-me-mobile\"\r\n                      type=\"checkbox\"\r\n                      checked={rememberMe}\r\n                      onChange={(e) => setRememberMe(e.target.checked)}\r\n                      className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\r\n                      disabled={loading}\r\n                    />\r\n                    <label htmlFor=\"remember-me-mobile\" className=\"ml-2 block text-sm text-gray-700\">\r\n                      Remember me\r\n                    </label>\r\n                  </div>\r\n\r\n                  <button\r\n                    type=\"button\"\r\n                    onClick={() => setMode('forgot')}\r\n                    className=\"text-sm font-medium text-indigo-600 hover:text-indigo-500\"\r\n                    disabled={loading}\r\n                  >\r\n                    Forgot?\r\n                  </button>\r\n                </div>\r\n              )}\r\n\r\n              {/* Submit Button */}\r\n              <div>\r\n                <button\r\n                  type=\"submit\"\r\n                  disabled={loading}\r\n                  className=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                >\r\n                  {loading ? (\r\n                    <>\r\n                      <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                      Processing...\r\n                    </>\r\n                  ) : mode === 'login' ? (\r\n                    'Sign In'\r\n                  ) : mode === 'signup' && step === 1 ? (\r\n                    'Continue'\r\n                  ) : mode === 'signup' && step === 2 ? (\r\n                    'Create Account'\r\n                  ) : mode === 'forgot' ? (\r\n                    'Send Reset Link'\r\n                  ) : (\r\n                    'Submit'\r\n                  )}\r\n                </button>\r\n              </div>\r\n\r\n              {/* Mode Toggle */}\r\n              <div className=\"text-center text-sm text-gray-600\">\r\n                {mode === 'login' ? (\r\n                  <p>\r\n                    Don't have an account?{' '}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setMode('signup')}\r\n                      className=\"font-medium text-indigo-600 hover:text-indigo-500\"\r\n                      disabled={loading}\r\n                    >\r\n                      Sign up\r\n                    </button>\r\n                  </p>\r\n                ) : mode === 'signup' ? (\r\n                  <p>\r\n                    Already have an account?{' '}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setMode('login')}\r\n                      className=\"font-medium text-indigo-600 hover:text-indigo-500\"\r\n                      disabled={loading}\r\n                    >\r\n                      Sign in\r\n                    </button>\r\n                  </p>\r\n                ) : mode === 'forgot' ? (\r\n                  <p>\r\n                    Remember your password?{' '}\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setMode('login')}\r\n                      className=\"font-medium text-indigo-600 hover:text-indigo-500\"\r\n                      disabled={loading}\r\n                    >\r\n                      Sign in\r\n                    </button>\r\n                  </p>\r\n                ) : null}\r\n              </div>\r\n\r\n              {/* Trust Indicators */}\r\n              {(mode === 'login' || (mode === 'signup' && step === 1)) && (\r\n                <div className=\"pt-4 border-t border-gray-200\">\r\n                  <div className=\"flex items-center justify-center space-x-4 text-xs text-gray-500\">\r\n                    <div className=\"flex items-center\">\r\n                      <Shield className=\"h-4 w-4 mr-1 text-green-500\" />\r\n                      <span>Secure</span>\r\n                    </div>\r\n                    <div className=\"flex items-center\">\r\n                      <Fingerprint className=\"h-4 w-4 mr-1 text-blue-500\" />\r\n                      <span>Private</span>\r\n                    </div>\r\n                    <div className=\"flex items-center\">\r\n                      <Star className=\"h-4 w-4 mr-1 text-purple-500\" />\r\n                      <span>Trusted</span>\r\n                    </div>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </form>\r\n          )}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\r\nimport {\r\n  X, Eye, EyeOff, Mail, Lock, User, Phone, Calendar,\r\n  ArrowLeft, CheckCircle, AlertCircle, Loader2,\r\n  Shield, Fingerprint, Award, Sparkles, Crown\r\n} from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\n\r\ninterface EnhancedAuthModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  initialMode?: 'login' | 'signup' | 'forgot';\r\n}\r\n\r\ntype AuthMode = 'login' | 'signup' | 'forgot' | 'verify' | 'reset';\r\n\r\ninterface FormData {\r\n  email: string;\r\n  password: string;\r\n  confirmPassword: string;\r\n  fullName: string;\r\n  phone: string;\r\n  dateOfBirth: string;\r\n  address: string;\r\n  agreeToTerms: boolean;\r\n  subscribeNewsletter: boolean;\r\n}\r\n\r\ninterface FormErrors {\r\n  [key: string]: string;\r\n}\r\n\r\nexport const EnhancedAuthModal: React.FC<EnhancedAuthModalProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  initialMode = 'login'\r\n}) => {\r\n  const [mode, setMode] = useState<AuthMode>(initialMode);\r\n  const [showPassword, setShowPassword] = useState(false);\r\n  const [showConfirmPassword, setShowConfirmPassword] = useState(false);\r\n  const [loading, setLoading] = useState(false);\r\n  const [step, setStep] = useState(1);\r\n  const [rememberMe, setRememberMe] = useState(false);\r\n\r\n  const { signIn, signUp } = useAuth();\r\n  const { showNotification } = useNotification();\r\n\r\n  const [formData, setFormData] = useState<FormData>({\r\n    email: '',\r\n    password: '',\r\n    confirmPassword: '',\r\n    fullName: '',\r\n    phone: '',\r\n    dateOfBirth: '',\r\n    address: '',\r\n    agreeToTerms: false,\r\n    subscribeNewsletter: true\r\n  });\r\n\r\n  const [errors, setErrors] = useState<FormErrors>({});\r\n\r\n  useEffect(() => {\r\n    if (isOpen) {\r\n      setMode(initialMode);\r\n      setStep(1);\r\n      setFormData({\r\n        email: '',\r\n        password: '',\r\n        confirmPassword: '',\r\n        fullName: '',\r\n        phone: '',\r\n        dateOfBirth: '',\r\n        address: '',\r\n        agreeToTerms: false,\r\n        subscribeNewsletter: true\r\n      });\r\n      setErrors({});\r\n      // Prevent background scrolling when modal opens\r\n      document.body.style.overflow = 'hidden';\r\n    } else {\r\n      // Restore background scrolling when modal closes\r\n      document.body.style.overflow = 'unset';\r\n    }\r\n    \r\n    return () => {\r\n      // Cleanup: Restore background scrolling when component unmounts\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [isOpen, initialMode]);\r\n\r\n  const validateEmail = (email: string): boolean => {\r\n    const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\r\n    return emailRegex.test(email);\r\n  };\r\n\r\n  const validatePassword = (password: string): { isValid: boolean; errors: string[] } => {\r\n    const errors: string[] = [];\r\n    if (password.length < 8) errors.push('At least 8 characters');\r\n    if (!/[A-Z]/.test(password)) errors.push('One uppercase letter');\r\n    if (!/[a-z]/.test(password)) errors.push('One lowercase letter');\r\n    if (!/\\d/.test(password)) errors.push('One number');\r\n    if (!/[!@#$%^&*(),.?\":{}|<>]/.test(password)) errors.push('One special character');\r\n\r\n    return { isValid: errors.length === 0, errors };\r\n  };\r\n\r\n  const validateForm = (): boolean => {\r\n    const newErrors: FormErrors = {};\r\n\r\n    // Email validation\r\n    if (!formData.email) {\r\n      newErrors.email = 'Email is required';\r\n    } else if (!validateEmail(formData.email)) {\r\n      newErrors.email = 'Please enter a valid email address';\r\n    }\r\n\r\n    // Password validation\r\n    if (!formData.password) {\r\n      newErrors.password = 'Password is required';\r\n    } else if (mode === 'signup') {\r\n      // Only apply strict validation for signup, not login\r\n      const passwordValidation = validatePassword(formData.password);\r\n      if (!passwordValidation.isValid) {\r\n        newErrors.password = passwordValidation.errors.join(', ');\r\n      }\r\n    }\r\n    // For login, just check if password exists (no complexity requirements)\r\n\r\n    // Signup specific validations\r\n    if (mode === 'signup') {\r\n      // Step 1 validations (email and password already checked above)\r\n      if (step === 1) {\r\n        if (formData.password !== formData.confirmPassword) {\r\n          newErrors.confirmPassword = 'Passwords do not match';\r\n        }\r\n      }\r\n\r\n      // Step 2 validations\r\n      if (step === 2) {\r\n        if (!formData.fullName.trim()) {\r\n          newErrors.fullName = 'Full name is required';\r\n        }\r\n\r\n        if (!formData.agreeToTerms) {\r\n          newErrors.agreeToTerms = 'You must agree to the terms and conditions';\r\n        }\r\n\r\n        if (formData.phone && !/^\\+?[\\d\\s-()]+$/.test(formData.phone)) {\r\n          newErrors.phone = 'Please enter a valid phone number';\r\n        }\r\n\r\n        if (!formData.address.trim()) {\r\n          newErrors.address = 'Address is required';\r\n        }\r\n      }\r\n    }\r\n\r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n\r\n  // Clear error when user starts typing\r\n  const handleInputChange = (field: keyof FormData, value: string | boolean) => {\r\n    setFormData(prev => ({ ...prev, [field]: value }));\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[field]) {\r\n      setErrors(prev => {\r\n        const newErrors = { ...prev };\r\n        delete newErrors[field];\r\n        return newErrors;\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n\r\n    if (!validateForm()) return;\r\n\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (mode === 'login') {\r\n        await signIn(formData.email, formData.password);\r\n        showNotification({\r\n          type: 'success',\r\n          title: 'Welcome back!',\r\n          message: 'Successfully logged in.'\r\n        });\r\n        onClose();\r\n      } else if (mode === 'signup') {\r\n        if (step === 1) {\r\n          setStep(2);\r\n        } else {\r\n          await signUp(formData.email, formData.password, {\r\n            fullName: formData.fullName,\r\n            phone: formData.phone,\r\n            dateOfBirth: formData.dateOfBirth,\r\n            address: formData.address,\r\n            subscribeNewsletter: formData.subscribeNewsletter\r\n          });\r\n          setMode('verify');\r\n          showNotification({\r\n            type: 'success',\r\n            title: 'Account created!',\r\n            message: 'Please check your email to verify your account.'\r\n          });\r\n        }\r\n      } else if (mode === 'forgot') {\r\n        // Handle forgot password\r\n        showNotification({\r\n          type: 'success',\r\n          title: 'Password reset link sent!',\r\n          message: 'Check your email for instructions.'\r\n        });\r\n        setMode('login');\r\n      }\r\n    } catch (error: unknown) {\r\n      const errorMessage = error instanceof Error ? error.message : 'An error occurred. Please try again.';\r\n      showNotification({\r\n        type: 'error',\r\n        title: 'Authentication Error',\r\n        message: errorMessage\r\n      });\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const getPasswordStrength = (password: string): { strength: number; label: string; color: string } => {\r\n    const validation = validatePassword(password);\r\n    const strength = Math.max(0, 5 - validation.errors.length);\r\n\r\n    if (strength === 0) return { strength: 0, label: 'Very Weak', color: 'bg-red-500' };\r\n    if (strength <= 2) return { strength: strength * 20, label: 'Weak', color: 'bg-orange-500' };\r\n    if (strength <= 3) return { strength: strength * 20, label: 'Fair', color: 'bg-yellow-500' };\r\n    if (strength <= 4) return { strength: strength * 20, label: 'Good', color: 'bg-blue-500' };\r\n    return { strength: 100, label: 'Strong', color: 'bg-green-500' };\r\n  };\r\n\r\n  if (!isOpen) return null;\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-blur-sm overflow-hidden\">\r\n      <div className=\"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden border border-neutral-200 relative flex flex-col\">\r\n          {/* Branding Header */}\r\n          <div className=\"relative bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 flex-shrink-0\">\r\n            <button\r\n              onClick={onClose}\r\n              className=\"absolute top-4 right-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors duration-200\"\r\n              aria-label=\"Close\"\r\n            >\r\n              <X className=\"h-5 w-5\" />\r\n            </button>\r\n\r\n            {mode !== 'login' && mode !== 'verify' && (\r\n              <button\r\n                onClick={() => {\r\n                  if (mode === 'signup' && step === 2) {\r\n                    setStep(1);\r\n                  } else {\r\n                    setMode('login');\r\n                  }\r\n                }}\r\n                className=\"absolute top-4 left-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors\"\r\n                aria-label=\"Back\"\r\n              >\r\n                <ArrowLeft className=\"h-5 w-5\" />\r\n              </button>\r\n            )}\r\n\r\n            <div className=\"text-center mt-6\">\r\n              <div className=\"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n                {mode === 'verify' ? (\r\n                  <CheckCircle className=\"h-8 w-8\" />\r\n                ) : mode === 'forgot' || mode === 'reset' ? (\r\n                  <Shield className=\"h-8 w-8\" />\r\n                ) : (\r\n                  <User className=\"h-8 w-8\" />\r\n                )}\r\n              </div>\r\n              <h2 className=\"text-2xl font-bold\">\r\n                {mode === 'login' && 'Welcome to S.Essences'}\r\n                {mode === 'signup' && (step === 1 ? 'Create Account' : 'Complete Profile')}\r\n                {mode === 'forgot' && 'Reset Password'}\r\n                {mode === 'verify' && 'Check Your Email'}\r\n                {mode === 'reset' && 'New Password'}\r\n              </h2>\r\n              <p className=\"text-indigo-100 mt-2\">\r\n                {mode === 'login' && 'Sign in to discover premium attars'}\r\n                {mode === 'signup' && (step === 1 ? 'Join our community of fragrance lovers' : 'Tell us about yourself')}\r\n                {mode === 'forgot' && 'Enter your email to reset your password'}\r\n                {mode === 'verify' && 'We sent a verification link to your email'}\r\n                {mode === 'reset' && 'Enter your new password'}\r\n              </p>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Content */}\r\n          <div className=\"p-6 overflow-y-auto flex-grow\">\r\n            {mode === 'verify' ? (\r\n              <div className=\"text-center space-y-4\">\r\n                <div className=\"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto\">\r\n                  <Mail className=\"h-10 w-10 text-green-600\" />\r\n                </div>\r\n                <div>\r\n                  <h3 className=\"text-lg font-semibold text-gray-900\">Verification Email Sent</h3>\r\n                  <p className=\"text-gray-600 mt-2\">\r\n                    We've sent a verification link to <strong>{formData.email}</strong>\r\n                  </p>\r\n                  <p className=\"text-sm text-gray-500 mt-2\">\r\n                    Didn't receive the email? Check your spam folder or{' '}\r\n                    <button className=\"text-indigo-600 hover:text-indigo-700 font-medium\">\r\n                      resend verification email\r\n                    </button>\r\n                  </p>\r\n                </div>\r\n                <button\r\n                  onClick={() => setMode('login')}\r\n                  className=\"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors font-medium\"\r\n                >\r\n                  Back to Login\r\n                </button>\r\n              </div>\r\n            ) : (\r\n              <form onSubmit={handleSubmit} className=\"space-y-4\">\r\n                {/* Branding Section */}\r\n                {(mode === 'login' || (mode === 'signup' && step === 1)) && (\r\n                  <div className=\"text-center mb-6\">\r\n                    <div className=\"inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-full px-4 py-2 mb-4\">\r\n                      <Sparkles className=\"h-5 w-5 text-purple-600\" />\r\n                      <span className=\"text-sm font-semibold text-purple-800\">Premium Attar Collection</span>\r\n                      <Crown className=\"h-5 w-5 text-amber-500\" />\r\n                    </div>\r\n                    <p className=\"text-sm text-gray-600\">\r\n                      Experience the finest natural perfumes from around the world\r\n                    </p>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Email Field */}\r\n                {(mode === 'login' || mode === 'forgot' || (mode === 'signup' && step === 1)) && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-text-primary mb-3\">\r\n                      Email Address\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                      <Mail className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-text-tertiary\" />\r\n                      <input\r\n                        type=\"email\"\r\n                        value={formData.email}\r\n                        onChange={(e) => handleInputChange('email', e.target.value)}\r\n                        className={`input-field-luxury pl-10 ${\r\n                          errors.email ? 'border-state-error focus:border-state-error focus:ring-state-error/20' : ''\r\n                        }`}\r\n                        placeholder=\"Enter your email\"\r\n                        disabled={loading}\r\n                        required\r\n                      />\r\n                    </div>\r\n                    {errors.email && (\r\n                      <p className=\"mt-2 text-sm text-state-error flex items-center\">\r\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                        {errors.email}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Password Field */}\r\n                {(mode === 'login' || mode === 'reset' || (mode === 'signup' && step === 1)) && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-neutral-700 mb-3\">\r\n                      Password\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                      <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400\" />\r\n                      <input\r\n                        type={showPassword ? 'text' : 'password'}\r\n                        value={formData.password}\r\n                        onChange={(e) => handleInputChange('password', e.target.value)}\r\n                        className={`form-input pl-10 pr-12 ${\r\n                          errors.password ? 'form-input-error' : ''\r\n                        }`}\r\n                        placeholder=\"Enter your password\"\r\n                        disabled={loading}\r\n                        required\r\n                      />\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setShowPassword(!showPassword)}\r\n                        className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200\"\r\n                        aria-label={showPassword ? \"Hide password\" : \"Show password\"}\r\n                      >\r\n                        {showPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                      </button>\r\n                    </div>\r\n                    {errors.password && (\r\n                      <p className=\"mt-2 text-sm text-state-error flex items-center\">\r\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                        {errors.password}\r\n                      </p>\r\n                    )}\r\n                    \r\n                    {/* Password Strength Indicator for Signup */}\r\n                    {mode === 'signup' && step === 1 && formData.password && (\r\n                      <div className=\"mt-3\">\r\n                        <div className=\"flex justify-between text-xs text-gray-500 mb-1\">\r\n                          <span>Password Strength</span>\r\n                          <span className=\"font-medium\">{getPasswordStrength(formData.password).label}</span>\r\n                        </div>\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                          <div \r\n                            className={`h-2 rounded-full ${getPasswordStrength(formData.password).color} transition-all duration-300`}\r\n                            style={{ width: `${getPasswordStrength(formData.password).strength}%` }}\r\n                          ></div>\r\n                        </div>\r\n                        <p className=\"text-xs text-gray-500 mt-1\">\r\n                          Use 8+ characters with a mix of letters, numbers & symbols\r\n                        </p>\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Confirm Password Field (Signup Step 1) */}\r\n                {mode === 'signup' && step === 1 && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-neutral-700 mb-3\">\r\n                      Confirm Password\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                      <Lock className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400\" />\r\n                      <input\r\n                        type={showConfirmPassword ? 'text' : 'password'}\r\n                        value={formData.confirmPassword}\r\n                        onChange={(e) => handleInputChange('confirmPassword', e.target.value)}\r\n                        className={`form-input pl-10 pr-12 ${\r\n                          errors.confirmPassword ? 'form-input-error' : ''\r\n                        }`}\r\n                        placeholder=\"Confirm your password\"\r\n                        disabled={loading}\r\n                        required\r\n                      />\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setShowConfirmPassword(!showConfirmPassword)}\r\n                        className=\"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200\"\r\n                        aria-label={showConfirmPassword ? \"Hide password\" : \"Show password\"}\r\n                      >\r\n                        {showConfirmPassword ? <EyeOff className=\"h-5 w-5\" /> : <Eye className=\"h-5 w-5\" />}\r\n                      </button>\r\n                    </div>\r\n                    {errors.confirmPassword && (\r\n                      <p className=\"mt-2 text-sm text-state-error flex items-center\">\r\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                        {errors.confirmPassword}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Full Name Field (Signup Step 2) */}\r\n                {mode === 'signup' && step === 2 && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-neutral-700 mb-3\">\r\n                      Full Name\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                      <User className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400\" />\r\n                      <input\r\n                        type=\"text\"\r\n                        value={formData.fullName}\r\n                        onChange={(e) => handleInputChange('fullName', e.target.value)}\r\n                        className={`form-input pl-10 ${\r\n                          errors.fullName ? 'form-input-error' : ''\r\n                        }`}\r\n                        placeholder=\"Enter your full name\"\r\n                        disabled={loading}\r\n                        required\r\n                      />\r\n                    </div>\r\n                    {errors.fullName && (\r\n                      <p className=\"mt-2 text-sm text-state-error flex items-center\">\r\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                        {errors.fullName}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Phone Field (Signup Step 2) */}\r\n                {mode === 'signup' && step === 2 && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-neutral-700 mb-3\">\r\n                      Phone Number\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                      <Phone className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400\" />\r\n                      <input\r\n                        type=\"tel\"\r\n                        value={formData.phone}\r\n                        onChange={(e) => handleInputChange('phone', e.target.value)}\r\n                        className={`form-input pl-10 ${\r\n                          errors.phone ? 'form-input-error' : ''\r\n                        }`}\r\n                        placeholder=\"Enter your phone number\"\r\n                        disabled={loading}\r\n                        required\r\n                      />\r\n                    </div>\r\n                    {errors.phone && (\r\n                      <p className=\"mt-2 text-sm text-state-error flex items-center\">\r\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                        {errors.phone}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Date of Birth Field (Signup Step 2) */}\r\n                {mode === 'signup' && step === 2 && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-neutral-700 mb-3\">\r\n                      Date of Birth\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                      <Calendar className=\"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400\" />\r\n                      <input\r\n                        type=\"date\"\r\n                        value={formData.dateOfBirth}\r\n                        onChange={(e) => handleInputChange('dateOfBirth', e.target.value)}\r\n                        className=\"form-input pl-10\"\r\n                        disabled={loading}\r\n                        required\r\n                      />\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Address Field (Signup Step 2) - Updated Field */}\r\n                {mode === 'signup' && step === 2 && (\r\n                  <div>\r\n                    <label className=\"block text-sm font-medium text-neutral-700 mb-3\">\r\n                      Address\r\n                    </label>\r\n                    <div className=\"relative\">\r\n                      <svg className=\"absolute left-3 top-3 h-5 w-5 text-neutral-400\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z\"></path>\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M15 11a3 3 0 11-6 0 3 3 0 016 0z\"></path>\r\n                      </svg>\r\n                      <textarea\r\n                        value={formData.address}\r\n                        onChange={(e) => handleInputChange('address', e.target.value)}\r\n                        className=\"form-input pl-10\"\r\n                        placeholder=\"Enter your full address\"\r\n                        disabled={loading}\r\n                        rows={3}\r\n                        required\r\n                      />\r\n                    </div>\r\n                    {errors.address && (\r\n                      <p className=\"mt-2 text-sm text-state-error flex items-center\">\r\n                        <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                        {errors.address}\r\n                      </p>\r\n                    )}\r\n                  </div>\r\n                )}\r\n\r\n                {/* Remember Me (Login) */}\r\n                {mode === 'login' && (\r\n                  <div className=\"flex items-center justify-between\">\r\n                    <div className=\"flex items-center\">\r\n                      <input\r\n                        id=\"remember-me\"\r\n                        name=\"remember-me\"\r\n                        type=\"checkbox\"\r\n                        checked={rememberMe}\r\n                        onChange={(e) => setRememberMe(e.target.checked)}\r\n                        className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\r\n                        disabled={loading}\r\n                      />\r\n                      <label htmlFor=\"remember-me\" className=\"ml-2 block text-sm text-gray-700\">\r\n                        Remember me\r\n                      </label>\r\n                    </div>\r\n\r\n                    <button\r\n                      type=\"button\"\r\n                      onClick={() => setMode('forgot')}\r\n                      className=\"text-sm font-medium text-indigo-600 hover:text-indigo-500\"\r\n                      disabled={loading}\r\n                    >\r\n                      Forgot password?\r\n                    </button>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Newsletter Subscription (Signup Step 2) */}\r\n                {mode === 'signup' && step === 2 && (\r\n                  <div className=\"flex items-start\">\r\n                    <div className=\"flex items-center h-5\">\r\n                      <input\r\n                        id=\"subscribe-newsletter\"\r\n                        name=\"subscribe-newsletter\"\r\n                        type=\"checkbox\"\r\n                        checked={formData.subscribeNewsletter}\r\n                        onChange={(e) => handleInputChange('subscribeNewsletter', e.target.checked)}\r\n                        className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\r\n                        disabled={loading}\r\n                      />\r\n                    </div>\r\n                    <div className=\"ml-3 text-sm\">\r\n                      <label htmlFor=\"subscribe-newsletter\" className=\"font-medium text-gray-700\">\r\n                        Subscribe to our newsletter\r\n                      </label>\r\n                      <p className=\"text-gray-500\">Get updates on new arrivals and special offers</p>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Terms Agreement (Signup Step 2) */}\r\n                {mode === 'signup' && step === 2 && (\r\n                  <div className=\"flex items-start\">\r\n                    <div className=\"flex items-center h-5\">\r\n                      <input\r\n                        id=\"terms-agreement\"\r\n                        name=\"terms-agreement\"\r\n                        type=\"checkbox\"\r\n                        checked={formData.agreeToTerms}\r\n                        onChange={(e) => handleInputChange('agreeToTerms', e.target.checked)}\r\n                        className={`h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded ${\r\n                          errors.agreeToTerms ? 'border-state-error' : ''\r\n                        }`}\r\n                        disabled={loading}\r\n                        required\r\n                      />\r\n                    </div>\r\n                    <div className=\"ml-3 text-sm\">\r\n                      <label htmlFor=\"terms-agreement\" className=\"font-medium text-gray-700\">\r\n                        I agree to the <a href=\"#\" className=\"text-indigo-600 hover:text-indigo-500\">Terms and Conditions</a>\r\n                      </label>\r\n                      {errors.agreeToTerms && (\r\n                        <p className=\"mt-1 text-sm text-state-error flex items-center\">\r\n                          <AlertCircle className=\"h-4 w-4 mr-1\" />\r\n                          {errors.agreeToTerms}\r\n                        </p>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Submit Button */}\r\n                <div>\r\n                  <button\r\n                    type=\"submit\"\r\n                    disabled={loading}\r\n                    className=\"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200\"\r\n                  >\r\n                    {loading ? (\r\n                      <>\r\n                        <Loader2 className=\"mr-2 h-4 w-4 animate-spin\" />\r\n                        Processing...\r\n                      </>\r\n                    ) : mode === 'login' ? (\r\n                      'Sign In'\r\n                    ) : mode === 'signup' && step === 1 ? (\r\n                      'Continue'\r\n                    ) : mode === 'signup' && step === 2 ? (\r\n                      'Create Account'\r\n                    ) : mode === 'forgot' ? (\r\n                      'Send Reset Link'\r\n                    ) : (\r\n                      'Submit'\r\n                    )}\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Mode Toggle */}\r\n                <div className=\"text-center text-sm text-gray-600\">\r\n                  {mode === 'login' ? (\r\n                    <p>\r\n                      Don't have an account?{' '}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setMode('signup')}\r\n                        className=\"font-medium text-indigo-600 hover:text-indigo-500\"\r\n                        disabled={loading}\r\n                      >\r\n                        Sign up\r\n                      </button>\r\n                    </p>\r\n                  ) : mode === 'signup' ? (\r\n                    <p>\r\n                      Already have an account?{' '}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setMode('login')}\r\n                        className=\"font-medium text-indigo-600 hover:text-indigo-500\"\r\n                        disabled={loading}\r\n                      >\r\n                        Sign in\r\n                      </button>\r\n                    </p>\r\n                  ) : mode === 'forgot' ? (\r\n                    <p>\r\n                      Remember your password?{' '}\r\n                      <button\r\n                        type=\"button\"\r\n                        onClick={() => setMode('login')}\r\n                        className=\"font-medium text-indigo-600 hover:text-indigo-500\"\r\n                        disabled={loading}\r\n                      >\r\n                        Sign in\r\n                      </button>\r\n                    </p>\r\n                  ) : null}\r\n                </div>\r\n\r\n                {/* Trust Indicators */}\r\n                {(mode === 'login' || (mode === 'signup' && step === 1)) && (\r\n                  <div className=\"pt-4 border-t border-gray-200\">\r\n                    <div className=\"flex items-center justify-center space-x-4 text-xs text-gray-500\">\r\n                      <div className=\"flex items-center\">\r\n                        <Shield className=\"h-4 w-4 mr-1 text-green-500\" />\r\n                        <span>Secure</span>\r\n                      </div>\r\n                      <div className=\"flex items-center\">\r\n                        <Fingerprint className=\"h-4 w-4 mr-1 text-blue-500\" />\r\n                        <span>Private</span>\r\n                      </div>\r\n                      <div className=\"flex items-center\">\r\n                        <Award className=\"h-4 w-4 mr-1 text-purple-500\" />\r\n                        <span>Trusted</span>\r\n                      </div>\r\n                    </div>\r\n                  </div>\r\n                )}\r\n              </form>\r\n            )}\r\n          </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};","import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';\nimport { useAuth } from '../../contexts/AuthContext';\nimport { useNotification } from '../../contexts/NotificationContext';\n\ninterface SecurityContextType {\n  isSecureConnection: boolean;\n  hasValidSession: boolean;\n  rateLimitStatus: {\n    userCreation: boolean;\n    emailSending: boolean;\n  };\n  checkPermission: (action: string, resource?: string) => boolean;\n  logSecurityEvent: (event: SecurityEvent) => void;\n  validateCSRF: (token: string) => boolean;\n}\n\ninterface SecurityEvent {\n  type: 'permission_denied' | 'rate_limit_exceeded' | 'invalid_input' | 'suspicious_activity';\n  action: string;\n  resource?: string;\n  details?: any;\n  timestamp: Date;\n}\n\ninterface SecurityProviderProps {\n  children: ReactNode;\n}\n\nconst SecurityContext = createContext<SecurityContextType | undefined>(undefined);\n\nexport const SecurityProvider: React.FC<SecurityProviderProps> = ({ children }) => {\n  const { user } = useAuth();\n  const { showNotification } = useNotification();\n\n  const [securityState, setSecurityState] = useState({\n    isSecureConnection: false,\n    hasValidSession: false,\n    rateLimitStatus: {\n      userCreation: true,\n      emailSending: true\n    }\n  });\n\n  const [securityEvents, setSecurityEvents] = useState<SecurityEvent[]>([]);\n  const [csrfToken, setCsrfToken] = useState<string>('');\n\n  // Initialize security checks\n  useEffect(() => {\n    checkSecureConnection();\n    validateSession();\n    generateCSRFToken();\n\n    // Set up periodic security checks\n    const securityInterval = setInterval(() => {\n      validateSession();\n      cleanupOldEvents();\n    }, 60000); // Check every minute\n\n    return () => clearInterval(securityInterval);\n  }, []);\n\n  // Check if connection is secure (HTTPS)\n  const checkSecureConnection = () => {\n    const isSecure = window.location.protocol === 'https:' ||\n      window.location.hostname === 'localhost' ||\n      window.location.hostname === '127.0.0.1';\n\n    setSecurityState(prev => ({ ...prev, isSecureConnection: isSecure }));\n\n    if (!isSecure && import.meta.env.MODE === 'production') {\n      showNotification({\n        type: 'warning',\n        title: 'Insecure Connection',\n        message: 'Please use HTTPS for secure data transmission.'\n      });\n    }\n  };\n\n  // Validate user session\n  const validateSession = () => {\n    const hasValidSession = !!user && !!user.id;\n    setSecurityState(prev => ({ ...prev, hasValidSession }));\n  };\n\n  // Generate CSRF token\n  const generateCSRFToken = () => {\n    const token = btoa(Math.random().toString()).substr(10, 32);\n    setCsrfToken(token);\n\n    // Store in session storage for validation\n    sessionStorage.setItem('csrf_token', token);\n  };\n\n  // Validate CSRF token\n  const validateCSRF = (token: string): boolean => {\n    const storedToken = sessionStorage.getItem('csrf_token');\n    return token === storedToken && token === csrfToken;\n  };\n\n  // Permission checking based on user role\n  const checkPermission = (action: string, resource?: string): boolean => {\n    if (!user) {\n      logSecurityEvent({\n        type: 'permission_denied',\n        action,\n        resource,\n        details: { reason: 'No authenticated user' },\n        timestamp: new Date()\n      });\n      return false;\n    }\n\n    const userRole = user.role;\n\n    // Define permission matrix\n    const permissions: { [key: string]: { [key: string]: string[] } } = {\n      user_management: {\n        create: ['admin'],\n        read: ['admin', 'seller'],\n        update: ['admin'],\n        delete: ['admin'],\n        bulk_operations: ['admin']\n      },\n      email_operations: {\n        send_welcome: ['admin'],\n        send_confirmation: ['admin'],\n        resend_confirmation: ['admin']\n      },\n      system_settings: {\n        read: ['admin'],\n        update: ['admin']\n      }\n    };\n\n    const resourcePermissions = permissions[resource || 'user_management'];\n    if (!resourcePermissions) {\n      return false;\n    }\n\n    const allowedRoles = resourcePermissions[action];\n    if (!allowedRoles) {\n      return false;\n    }\n\n    const hasPermission = allowedRoles.includes(userRole);\n\n    if (!hasPermission) {\n      logSecurityEvent({\n        type: 'permission_denied',\n        action,\n        resource,\n        details: { userRole, requiredRoles: allowedRoles },\n        timestamp: new Date()\n      });\n    }\n\n    return hasPermission;\n  };\n\n  // Log security events\n  const logSecurityEvent = (event: SecurityEvent) => {\n    setSecurityEvents(prev => [...prev, event]);\n\n    // Show user notification for critical events\n    if (event.type === 'permission_denied' || event.type === 'suspicious_activity') {\n      showNotification({\n        type: 'error',\n        title: 'Access Denied',\n        message: 'You do not have permission to perform this action.'\n      });\n    }\n  };\n\n  // Clean up old security events (keep last 100)\n  const cleanupOldEvents = () => {\n    setSecurityEvents(prev => prev.slice(-100));\n  };\n\n  // Rate limiting checks\n  const checkRateLimit = (operation: 'userCreation' | 'emailSending'): boolean => {\n    const now = Date.now();\n    const key = `${operation}_${user?.id}`;\n    const stored = localStorage.getItem(key);\n\n    if (!stored) {\n      localStorage.setItem(key, JSON.stringify({ count: 1, resetTime: now + 60000 }));\n      return true;\n    }\n\n    const data = JSON.parse(stored);\n\n    // Reset if time window has passed\n    if (now > data.resetTime) {\n      localStorage.setItem(key, JSON.stringify({ count: 1, resetTime: now + 60000 }));\n      return true;\n    }\n\n    // Check limits\n    const limits = {\n      userCreation: 5, // 5 users per minute\n      emailSending: 3  // 3 emails per minute\n    };\n\n    if (data.count >= limits[operation]) {\n      logSecurityEvent({\n        type: 'rate_limit_exceeded',\n        action: operation,\n        details: { count: data.count, limit: limits[operation] },\n        timestamp: new Date()\n      });\n\n      setSecurityState(prev => ({\n        ...prev,\n        rateLimitStatus: {\n          ...prev.rateLimitStatus,\n          [operation]: false\n        }\n      }));\n\n      return false;\n    }\n\n    // Increment counter\n    localStorage.setItem(key, JSON.stringify({\n      count: data.count + 1,\n      resetTime: data.resetTime\n    }));\n\n    return true;\n  };\n\n  // Input sanitization\n  const sanitizeInput = (input: string): string => {\n    if (!input) return '';\n\n    return input\n      .replace(/[<>]/g, '') // Remove angle brackets\n      .replace(/javascript:/gi, '') // Remove javascript: protocol\n      .replace(/on\\w+=/gi, '') // Remove event handlers\n      .replace(/['\"]/g, '') // Remove quotes\n      .trim();\n  };\n\n  // Detect suspicious patterns\n  const detectSuspiciousActivity = (input: string): boolean => {\n    const suspiciousPatterns = [\n      /<script/i,\n      /javascript:/i,\n      /on\\w+=/i,\n      /eval\\(/i,\n      /document\\./i,\n      /window\\./i,\n      /alert\\(/i,\n      /confirm\\(/i,\n      /prompt\\(/i\n    ];\n\n    for (const pattern of suspiciousPatterns) {\n      if (pattern.test(input)) {\n        logSecurityEvent({\n          type: 'suspicious_activity',\n          action: 'input_validation',\n          details: { input: input.substring(0, 100), pattern: pattern.toString() },\n          timestamp: new Date()\n        });\n        return true;\n      }\n    }\n\n    return false;\n  };\n\n  const contextValue: SecurityContextType = {\n    isSecureConnection: securityState.isSecureConnection,\n    hasValidSession: securityState.hasValidSession,\n    rateLimitStatus: securityState.rateLimitStatus,\n    checkPermission,\n    logSecurityEvent,\n    validateCSRF\n  };\n\n  return (\n    <SecurityContext.Provider value={contextValue}>\n      {children}\n    </SecurityContext.Provider>\n  );\n};\n\nexport const useSecurity = (): SecurityContextType => {\n  const context = useContext(SecurityContext);\n  if (!context) {\n    throw new Error('useSecurity must be used within a SecurityProvider');\n  }\n  return context;\n};\n\n// Security HOC for protecting components\nexport const withSecurity = <P extends object>(\n  Component: React.ComponentType<P>,\n  requiredPermission: string,\n  resource?: string\n) => {\n  return (props: P) => {\n    const { checkPermission } = useSecurity();\n\n    if (!checkPermission(requiredPermission, resource)) {\n      return (\n        <div className=\"flex items-center justify-center h-64\">\n          <div className=\"text-center\">\n            <div className=\"text-6xl mb-4\"></div>\n            <h2 className=\"text-xl font-semibold text-gray-900 mb-2\">Access Denied</h2>\n            <p className=\"text-gray-600\">You don't have permission to access this resource.</p>\n          </div>\n        </div>\n      );\n    }\n\n    return <Component {...props} />;\n  };\n};\n","function addUniqueItem(arr, item) {\n    if (arr.indexOf(item) === -1)\n        arr.push(item);\n}\nfunction removeItem(arr, item) {\n    const index = arr.indexOf(item);\n    if (index > -1)\n        arr.splice(index, 1);\n}\n// Adapted from array-move\nfunction moveItem([...arr], fromIndex, toIndex) {\n    const startIndex = fromIndex < 0 ? arr.length + fromIndex : fromIndex;\n    if (startIndex >= 0 && startIndex < arr.length) {\n        const endIndex = toIndex < 0 ? arr.length + toIndex : toIndex;\n        const [item] = arr.splice(fromIndex, 1);\n        arr.splice(endIndex, 0, item);\n    }\n    return arr;\n}\n\nexport { addUniqueItem, moveItem, removeItem };\n","const clamp = (min, max, v) => {\n    if (v > max)\n        return max;\n    if (v < min)\n        return min;\n    return v;\n};\n\nexport { clamp };\n","const MotionGlobalConfig = {};\n\nexport { MotionGlobalConfig };\n","/**\n * Check if value is a numerical string, ie a string that is purely a number eg \"100\" or \"-100.1\"\n */\nconst isNumericalString = (v) => /^-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)$/u.test(v);\n\nexport { isNumericalString };\n","function isObject(value) {\n    return typeof value === \"object\" && value !== null;\n}\n\nexport { isObject };\n","/**\n * Check if the value is a zero value string like \"0px\" or \"0%\"\n */\nconst isZeroValueString = (v) => /^0[^.\\s]+$/u.test(v);\n\nexport { isZeroValueString };\n","/*#__NO_SIDE_EFFECTS__*/\nfunction memo(callback) {\n    let result;\n    return () => {\n        if (result === undefined)\n            result = callback();\n        return result;\n    };\n}\n\nexport { memo };\n","/*#__NO_SIDE_EFFECTS__*/\nconst noop = (any) => any;\n\nexport { noop };\n","/**\n * Pipe\n * Compose other transformers to run linearily\n * pipe(min(20), max(40))\n * @param  {...functions} transformers\n * @return {function}\n */\nconst combineFunctions = (a, b) => (v) => b(a(v));\nconst pipe = (...transformers) => transformers.reduce(combineFunctions);\n\nexport { pipe };\n","/*\n  Progress within given range\n\n  Given a lower limit and an upper limit, we return the progress\n  (expressed as a number 0-1) represented by the given value, and\n  limit that progress to within 0-1.\n\n  @param [number]: Lower limit\n  @param [number]: Upper limit\n  @param [number]: Value to find progress within given range\n  @return [number]: Progress of value within range as expressed 0-1\n*/\n/*#__NO_SIDE_EFFECTS__*/\nconst progress = (from, to, value) => {\n    const toFromDifference = to - from;\n    return toFromDifference === 0 ? 1 : (value - from) / toFromDifference;\n};\n\nexport { progress };\n","import { addUniqueItem, removeItem } from './array.mjs';\n\nclass SubscriptionManager {\n    constructor() {\n        this.subscriptions = [];\n    }\n    add(handler) {\n        addUniqueItem(this.subscriptions, handler);\n        return () => removeItem(this.subscriptions, handler);\n    }\n    notify(a, b, c) {\n        const numSubscriptions = this.subscriptions.length;\n        if (!numSubscriptions)\n            return;\n        if (numSubscriptions === 1) {\n            /**\n             * If there's only a single handler we can just call it without invoking a loop.\n             */\n            this.subscriptions[0](a, b, c);\n        }\n        else {\n            for (let i = 0; i < numSubscriptions; i++) {\n                /**\n                 * Check whether the handler exists before firing as it's possible\n                 * the subscriptions were modified during this loop running.\n                 */\n                const handler = this.subscriptions[i];\n                handler && handler(a, b, c);\n            }\n        }\n    }\n    getSize() {\n        return this.subscriptions.length;\n    }\n    clear() {\n        this.subscriptions.length = 0;\n    }\n}\n\nexport { SubscriptionManager };\n","/**\n * Converts seconds to milliseconds\n *\n * @param seconds - Time in seconds.\n * @return milliseconds - Converted time in milliseconds.\n */\n/*#__NO_SIDE_EFFECTS__*/\nconst secondsToMilliseconds = (seconds) => seconds * 1000;\n/*#__NO_SIDE_EFFECTS__*/\nconst millisecondsToSeconds = (milliseconds) => milliseconds / 1000;\n\nexport { millisecondsToSeconds, secondsToMilliseconds };\n","/*\n  Convert velocity into velocity per second\n\n  @param [number]: Unit per frame\n  @param [number]: Frame duration in ms\n*/\nfunction velocityPerSecond(velocity, frameDuration) {\n    return frameDuration ? velocity * (1000 / frameDuration) : 0;\n}\n\nexport { velocityPerSecond };\n","import { noop } from '../noop.mjs';\n\n/*\n  Bezier function generator\n  This has been modified from Gatan Renaudeau's BezierEasing\n  https://github.com/gre/bezier-easing/blob/master/src/index.js\n  https://github.com/gre/bezier-easing/blob/master/LICENSE\n  \n  I've removed the newtonRaphsonIterate algo because in benchmarking it\n  wasn't noticeably faster than binarySubdivision, indeed removing it\n  usually improved times, depending on the curve.\n  I also removed the lookup table, as for the added bundle size and loop we're\n  only cutting ~4 or so subdivision iterations. I bumped the max iterations up\n  to 12 to compensate and this still tended to be faster for no perceivable\n  loss in accuracy.\n  Usage\n    const easeOut = cubicBezier(.17,.67,.83,.67);\n    const x = easeOut(0.5); // returns 0.627...\n*/\n// Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\nconst calcBezier = (t, a1, a2) => (((1.0 - 3.0 * a2 + 3.0 * a1) * t + (3.0 * a2 - 6.0 * a1)) * t + 3.0 * a1) *\n    t;\nconst subdivisionPrecision = 0.0000001;\nconst subdivisionMaxIterations = 12;\nfunction binarySubdivide(x, lowerBound, upperBound, mX1, mX2) {\n    let currentX;\n    let currentT;\n    let i = 0;\n    do {\n        currentT = lowerBound + (upperBound - lowerBound) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - x;\n        if (currentX > 0.0) {\n            upperBound = currentT;\n        }\n        else {\n            lowerBound = currentT;\n        }\n    } while (Math.abs(currentX) > subdivisionPrecision &&\n        ++i < subdivisionMaxIterations);\n    return currentT;\n}\nfunction cubicBezier(mX1, mY1, mX2, mY2) {\n    // If this is a linear gradient, return linear easing\n    if (mX1 === mY1 && mX2 === mY2)\n        return noop;\n    const getTForX = (aX) => binarySubdivide(aX, 0, 1, mX1, mX2);\n    // If animation is at start/end, return t without easing\n    return (t) => t === 0 || t === 1 ? t : calcBezier(getTForX(t), mY1, mY2);\n}\n\nexport { cubicBezier };\n","// Accepts an easing function and returns a new one that outputs mirrored values for\n// the second half of the animation. Turns easeIn into easeInOut.\nconst mirrorEasing = (easing) => (p) => p <= 0.5 ? easing(2 * p) / 2 : (2 - easing(2 * (1 - p))) / 2;\n\nexport { mirrorEasing };\n","// Accepts an easing function and returns a new one that outputs reversed values.\n// Turns easeIn into easeOut.\nconst reverseEasing = (easing) => (p) => 1 - easing(1 - p);\n\nexport { reverseEasing };\n","import { cubicBezier } from './cubic-bezier.mjs';\nimport { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst backOut = /*@__PURE__*/ cubicBezier(0.33, 1.53, 0.69, 0.99);\nconst backIn = /*@__PURE__*/ reverseEasing(backOut);\nconst backInOut = /*@__PURE__*/ mirrorEasing(backIn);\n\nexport { backIn, backInOut, backOut };\n","import { backIn } from './back.mjs';\n\nconst anticipate = (p) => (p *= 2) < 1 ? 0.5 * backIn(p) : 0.5 * (2 - Math.pow(2, -10 * (p - 1)));\n\nexport { anticipate };\n","import { mirrorEasing } from './modifiers/mirror.mjs';\nimport { reverseEasing } from './modifiers/reverse.mjs';\n\nconst circIn = (p) => 1 - Math.sin(Math.acos(p));\nconst circOut = reverseEasing(circIn);\nconst circInOut = mirrorEasing(circIn);\n\nexport { circIn, circInOut, circOut };\n","import { cubicBezier } from './cubic-bezier.mjs';\n\nconst easeIn = /*@__PURE__*/ cubicBezier(0.42, 0, 1, 1);\nconst easeOut = /*@__PURE__*/ cubicBezier(0, 0, 0.58, 1);\nconst easeInOut = /*@__PURE__*/ cubicBezier(0.42, 0, 0.58, 1);\n\nexport { easeIn, easeInOut, easeOut };\n","const isBezierDefinition = (easing) => Array.isArray(easing) && typeof easing[0] === \"number\";\n\nexport { isBezierDefinition };\n","import { invariant } from '../../errors.mjs';\nimport { noop } from '../../noop.mjs';\nimport { anticipate } from '../anticipate.mjs';\nimport { backIn, backInOut, backOut } from '../back.mjs';\nimport { circIn, circInOut, circOut } from '../circ.mjs';\nimport { cubicBezier } from '../cubic-bezier.mjs';\nimport { easeIn, easeInOut, easeOut } from '../ease.mjs';\nimport { isBezierDefinition } from './is-bezier-definition.mjs';\n\nconst easingLookup = {\n    linear: noop,\n    easeIn,\n    easeInOut,\n    easeOut,\n    circIn,\n    circInOut,\n    circOut,\n    backIn,\n    backInOut,\n    backOut,\n    anticipate,\n};\nconst isValidEasing = (easing) => {\n    return typeof easing === \"string\";\n};\nconst easingDefinitionToFunction = (definition) => {\n    if (isBezierDefinition(definition)) {\n        // If cubic bezier definition, create bezier curve\n        invariant(definition.length === 4, `Cubic bezier arrays must contain four numerical values.`, \"cubic-bezier-length\");\n        const [x1, y1, x2, y2] = definition;\n        return cubicBezier(x1, y1, x2, y2);\n    }\n    else if (isValidEasing(definition)) {\n        // Else lookup from table\n        invariant(easingLookup[definition] !== undefined, `Invalid easing type '${definition}'`, \"invalid-easing-type\");\n        return easingLookup[definition];\n    }\n    return definition;\n};\n\nexport { easingDefinitionToFunction };\n","const stepsOrder = [\n    \"setup\", // Compute\n    \"read\", // Read\n    \"resolveKeyframes\", // Write/Read/Write/Read\n    \"preUpdate\", // Compute\n    \"update\", // Compute\n    \"preRender\", // Compute\n    \"render\", // Write\n    \"postRender\", // Compute\n];\n\nexport { stepsOrder };\n","import { MotionGlobalConfig } from 'motion-utils';\nimport { stepsOrder } from './order.mjs';\nimport { createRenderStep } from './render-step.mjs';\n\nconst maxElapsed = 40;\nfunction createRenderBatcher(scheduleNextBatch, allowKeepAlive) {\n    let runNextFrame = false;\n    let useDefaultElapsed = true;\n    const state = {\n        delta: 0.0,\n        timestamp: 0.0,\n        isProcessing: false,\n    };\n    const flagRunNextFrame = () => (runNextFrame = true);\n    const steps = stepsOrder.reduce((acc, key) => {\n        acc[key] = createRenderStep(flagRunNextFrame, allowKeepAlive ? key : undefined);\n        return acc;\n    }, {});\n    const { setup, read, resolveKeyframes, preUpdate, update, preRender, render, postRender, } = steps;\n    const processBatch = () => {\n        const timestamp = MotionGlobalConfig.useManualTiming\n            ? state.timestamp\n            : performance.now();\n        runNextFrame = false;\n        if (!MotionGlobalConfig.useManualTiming) {\n            state.delta = useDefaultElapsed\n                ? 1000 / 60\n                : Math.max(Math.min(timestamp - state.timestamp, maxElapsed), 1);\n        }\n        state.timestamp = timestamp;\n        state.isProcessing = true;\n        // Unrolled render loop for better per-frame performance\n        setup.process(state);\n        read.process(state);\n        resolveKeyframes.process(state);\n        preUpdate.process(state);\n        update.process(state);\n        preRender.process(state);\n        render.process(state);\n        postRender.process(state);\n        state.isProcessing = false;\n        if (runNextFrame && allowKeepAlive) {\n            useDefaultElapsed = false;\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const wake = () => {\n        runNextFrame = true;\n        useDefaultElapsed = true;\n        if (!state.isProcessing) {\n            scheduleNextBatch(processBatch);\n        }\n    };\n    const schedule = stepsOrder.reduce((acc, key) => {\n        const step = steps[key];\n        acc[key] = (process, keepAlive = false, immediate = false) => {\n            if (!runNextFrame)\n                wake();\n            return step.schedule(process, keepAlive, immediate);\n        };\n        return acc;\n    }, {});\n    const cancel = (process) => {\n        for (let i = 0; i < stepsOrder.length; i++) {\n            steps[stepsOrder[i]].cancel(process);\n        }\n    };\n    return { schedule, cancel, state, steps };\n}\n\nexport { createRenderBatcher };\n","import { statsBuffer } from '../stats/buffer.mjs';\n\nfunction createRenderStep(runNextFrame, stepName) {\n    /**\n     * We create and reuse two queues, one to queue jobs for the current frame\n     * and one for the next. We reuse to avoid triggering GC after x frames.\n     */\n    let thisFrame = new Set();\n    let nextFrame = new Set();\n    /**\n     * Track whether we're currently processing jobs in this step. This way\n     * we can decide whether to schedule new jobs for this frame or next.\n     */\n    let isProcessing = false;\n    let flushNextFrame = false;\n    /**\n     * A set of processes which were marked keepAlive when scheduled.\n     */\n    const toKeepAlive = new WeakSet();\n    let latestFrameData = {\n        delta: 0.0,\n        timestamp: 0.0,\n        isProcessing: false,\n    };\n    let numCalls = 0;\n    function triggerCallback(callback) {\n        if (toKeepAlive.has(callback)) {\n            step.schedule(callback);\n            runNextFrame();\n        }\n        numCalls++;\n        callback(latestFrameData);\n    }\n    const step = {\n        /**\n         * Schedule a process to run on the next frame.\n         */\n        schedule: (callback, keepAlive = false, immediate = false) => {\n            const addToCurrentFrame = immediate && isProcessing;\n            const queue = addToCurrentFrame ? thisFrame : nextFrame;\n            if (keepAlive)\n                toKeepAlive.add(callback);\n            if (!queue.has(callback))\n                queue.add(callback);\n            return callback;\n        },\n        /**\n         * Cancel the provided callback from running on the next frame.\n         */\n        cancel: (callback) => {\n            nextFrame.delete(callback);\n            toKeepAlive.delete(callback);\n        },\n        /**\n         * Execute all schedule callbacks.\n         */\n        process: (frameData) => {\n            latestFrameData = frameData;\n            /**\n             * If we're already processing we've probably been triggered by a flushSync\n             * inside an existing process. Instead of executing, mark flushNextFrame\n             * as true and ensure we flush the following frame at the end of this one.\n             */\n            if (isProcessing) {\n                flushNextFrame = true;\n                return;\n            }\n            isProcessing = true;\n            [thisFrame, nextFrame] = [nextFrame, thisFrame];\n            // Execute this frame\n            thisFrame.forEach(triggerCallback);\n            /**\n             * If we're recording stats then\n             */\n            if (stepName && statsBuffer.value) {\n                statsBuffer.value.frameloop[stepName].push(numCalls);\n            }\n            numCalls = 0;\n            // Clear the frame so no callbacks remain. This is to avoid\n            // memory leaks should this render step not run for a while.\n            thisFrame.clear();\n            isProcessing = false;\n            if (flushNextFrame) {\n                flushNextFrame = false;\n                step.process(frameData);\n            }\n        },\n    };\n    return step;\n}\n\nexport { createRenderStep };\n","import { noop } from 'motion-utils';\nimport { createRenderBatcher } from './batcher.mjs';\n\nconst { schedule: frame, cancel: cancelFrame, state: frameData, steps: frameSteps, } = /* @__PURE__ */ createRenderBatcher(typeof requestAnimationFrame !== \"undefined\" ? requestAnimationFrame : noop, true);\n\nexport { cancelFrame, frame, frameData, frameSteps };\n","import { MotionGlobalConfig } from 'motion-utils';\nimport { frameData } from './frame.mjs';\n\nlet now;\nfunction clearTime() {\n    now = undefined;\n}\n/**\n * An eventloop-synchronous alternative to performance.now().\n *\n * Ensures that time measurements remain consistent within a synchronous context.\n * Usually calling performance.now() twice within the same synchronous context\n * will return different values which isn't useful for animations when we're usually\n * trying to sync animations to the same frame.\n */\nconst time = {\n    now: () => {\n        if (now === undefined) {\n            time.set(frameData.isProcessing || MotionGlobalConfig.useManualTiming\n                ? frameData.timestamp\n                : performance.now());\n        }\n        return now;\n    },\n    set: (newTime) => {\n        now = newTime;\n        queueMicrotask(clearTime);\n    },\n};\n\nexport { time };\n","const checkStringStartsWith = (token) => (key) => typeof key === \"string\" && key.startsWith(token);\nconst isCSSVariableName = \n/*@__PURE__*/ checkStringStartsWith(\"--\");\nconst startsAsVariableToken = \n/*@__PURE__*/ checkStringStartsWith(\"var(--\");\nconst isCSSVariableToken = (value) => {\n    const startsWithToken = startsAsVariableToken(value);\n    if (!startsWithToken)\n        return false;\n    // Ensure any comments are stripped from the value as this can harm performance of the regex.\n    return singleCssVariableRegex.test(value.split(\"/*\")[0].trim());\n};\nconst singleCssVariableRegex = /var\\(--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)$/iu;\n\nexport { isCSSVariableName, isCSSVariableToken };\n","import { clamp } from 'motion-utils';\n\nconst number = {\n    test: (v) => typeof v === \"number\",\n    parse: parseFloat,\n    transform: (v) => v,\n};\nconst alpha = {\n    ...number,\n    transform: (v) => clamp(0, 1, v),\n};\nconst scale = {\n    ...number,\n    default: 1,\n};\n\nexport { alpha, number, scale };\n","// If this number is a decimal, make it just five decimal places\n// to avoid exponents\nconst sanitize = (v) => Math.round(v * 100000) / 100000;\n\nexport { sanitize };\n","const floatRegex = /-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/gu;\n\nexport { floatRegex };\n","const singleColorRegex = /^(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))$/iu;\n\nexport { singleColorRegex };\n","import { floatRegex } from '../utils/float-regex.mjs';\nimport { isNullish } from '../utils/is-nullish.mjs';\nimport { singleColorRegex } from '../utils/single-color-regex.mjs';\n\n/**\n * Returns true if the provided string is a color, ie rgba(0,0,0,0) or #000,\n * but false if a number or multiple colors\n */\nconst isColorString = (type, testProp) => (v) => {\n    return Boolean((typeof v === \"string\" &&\n        singleColorRegex.test(v) &&\n        v.startsWith(type)) ||\n        (testProp &&\n            !isNullish(v) &&\n            Object.prototype.hasOwnProperty.call(v, testProp)));\n};\nconst splitColor = (aName, bName, cName) => (v) => {\n    if (typeof v !== \"string\")\n        return v;\n    const [a, b, c, alpha] = v.match(floatRegex);\n    return {\n        [aName]: parseFloat(a),\n        [bName]: parseFloat(b),\n        [cName]: parseFloat(c),\n        alpha: alpha !== undefined ? parseFloat(alpha) : 1,\n    };\n};\n\nexport { isColorString, splitColor };\n","function isNullish(v) {\n    return v == null;\n}\n\nexport { isNullish };\n","import { clamp } from 'motion-utils';\nimport { number, alpha } from '../numbers/index.mjs';\nimport { sanitize } from '../utils/sanitize.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst clampRgbUnit = (v) => clamp(0, 255, v);\nconst rgbUnit = {\n    ...number,\n    transform: (v) => Math.round(clampRgbUnit(v)),\n};\nconst rgba = {\n    test: /*@__PURE__*/ isColorString(\"rgb\", \"red\"),\n    parse: /*@__PURE__*/ splitColor(\"red\", \"green\", \"blue\"),\n    transform: ({ red, green, blue, alpha: alpha$1 = 1 }) => \"rgba(\" +\n        rgbUnit.transform(red) +\n        \", \" +\n        rgbUnit.transform(green) +\n        \", \" +\n        rgbUnit.transform(blue) +\n        \", \" +\n        sanitize(alpha.transform(alpha$1)) +\n        \")\",\n};\n\nexport { rgbUnit, rgba };\n","import { rgba } from './rgba.mjs';\nimport { isColorString } from './utils.mjs';\n\nfunction parseHex(v) {\n    let r = \"\";\n    let g = \"\";\n    let b = \"\";\n    let a = \"\";\n    // If we have 6 characters, ie #FF0000\n    if (v.length > 5) {\n        r = v.substring(1, 3);\n        g = v.substring(3, 5);\n        b = v.substring(5, 7);\n        a = v.substring(7, 9);\n        // Or we have 3 characters, ie #F00\n    }\n    else {\n        r = v.substring(1, 2);\n        g = v.substring(2, 3);\n        b = v.substring(3, 4);\n        a = v.substring(4, 5);\n        r += r;\n        g += g;\n        b += b;\n        a += a;\n    }\n    return {\n        red: parseInt(r, 16),\n        green: parseInt(g, 16),\n        blue: parseInt(b, 16),\n        alpha: a ? parseInt(a, 16) / 255 : 1,\n    };\n}\nconst hex = {\n    test: /*@__PURE__*/ isColorString(\"#\"),\n    parse: parseHex,\n    transform: rgba.transform,\n};\n\nexport { hex };\n","/*#__NO_SIDE_EFFECTS__*/\nconst createUnitType = (unit) => ({\n    test: (v) => typeof v === \"string\" && v.endsWith(unit) && v.split(\" \").length === 1,\n    parse: parseFloat,\n    transform: (v) => `${v}${unit}`,\n});\nconst degrees = /*@__PURE__*/ createUnitType(\"deg\");\nconst percent = /*@__PURE__*/ createUnitType(\"%\");\nconst px = /*@__PURE__*/ createUnitType(\"px\");\nconst vh = /*@__PURE__*/ createUnitType(\"vh\");\nconst vw = /*@__PURE__*/ createUnitType(\"vw\");\nconst progressPercentage = /*@__PURE__*/ (() => ({\n    ...percent,\n    parse: (v) => percent.parse(v) / 100,\n    transform: (v) => percent.transform(v * 100),\n}))();\n\nexport { degrees, percent, progressPercentage, px, vh, vw };\n","import { alpha } from '../numbers/index.mjs';\nimport { percent } from '../numbers/units.mjs';\nimport { sanitize } from '../utils/sanitize.mjs';\nimport { isColorString, splitColor } from './utils.mjs';\n\nconst hsla = {\n    test: /*@__PURE__*/ isColorString(\"hsl\", \"hue\"),\n    parse: /*@__PURE__*/ splitColor(\"hue\", \"saturation\", \"lightness\"),\n    transform: ({ hue, saturation, lightness, alpha: alpha$1 = 1 }) => {\n        return (\"hsla(\" +\n            Math.round(hue) +\n            \", \" +\n            percent.transform(sanitize(saturation)) +\n            \", \" +\n            percent.transform(sanitize(lightness)) +\n            \", \" +\n            sanitize(alpha.transform(alpha$1)) +\n            \")\");\n    },\n};\n\nexport { hsla };\n","import { hex } from './hex.mjs';\nimport { hsla } from './hsla.mjs';\nimport { rgba } from './rgba.mjs';\n\nconst color = {\n    test: (v) => rgba.test(v) || hex.test(v) || hsla.test(v),\n    parse: (v) => {\n        if (rgba.test(v)) {\n            return rgba.parse(v);\n        }\n        else if (hsla.test(v)) {\n            return hsla.parse(v);\n        }\n        else {\n            return hex.parse(v);\n        }\n    },\n    transform: (v) => {\n        return typeof v === \"string\"\n            ? v\n            : v.hasOwnProperty(\"red\")\n                ? rgba.transform(v)\n                : hsla.transform(v);\n    },\n    getAnimatableNone: (v) => {\n        const parsed = color.parse(v);\n        parsed.alpha = 0;\n        return color.transform(parsed);\n    },\n};\n\nexport { color };\n","const colorRegex = /(?:#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\))/giu;\n\nexport { colorRegex };\n","import { color } from '../color/index.mjs';\nimport { colorRegex } from '../utils/color-regex.mjs';\nimport { floatRegex } from '../utils/float-regex.mjs';\nimport { sanitize } from '../utils/sanitize.mjs';\n\nfunction test(v) {\n    return (isNaN(v) &&\n        typeof v === \"string\" &&\n        (v.match(floatRegex)?.length || 0) +\n            (v.match(colorRegex)?.length || 0) >\n            0);\n}\nconst NUMBER_TOKEN = \"number\";\nconst COLOR_TOKEN = \"color\";\nconst VAR_TOKEN = \"var\";\nconst VAR_FUNCTION_TOKEN = \"var(\";\nconst SPLIT_TOKEN = \"${}\";\n// this regex consists of the `singleCssVariableRegex|rgbHSLValueRegex|digitRegex`\nconst complexRegex = /var\\s*\\(\\s*--(?:[\\w-]+\\s*|[\\w-]+\\s*,(?:\\s*[^)(\\s]|\\s*\\((?:[^)(]|\\([^)(]*\\))*\\))+\\s*)\\)|#[\\da-f]{3,8}|(?:rgb|hsl)a?\\((?:-?[\\d.]+%?[,\\s]+){2}-?[\\d.]+%?\\s*(?:[,/]\\s*)?(?:\\b\\d+(?:\\.\\d+)?|\\.\\d+)?%?\\)|-?(?:\\d+(?:\\.\\d+)?|\\.\\d+)/giu;\nfunction analyseComplexValue(value) {\n    const originalValue = value.toString();\n    const values = [];\n    const indexes = {\n        color: [],\n        number: [],\n        var: [],\n    };\n    const types = [];\n    let i = 0;\n    const tokenised = originalValue.replace(complexRegex, (parsedValue) => {\n        if (color.test(parsedValue)) {\n            indexes.color.push(i);\n            types.push(COLOR_TOKEN);\n            values.push(color.parse(parsedValue));\n        }\n        else if (parsedValue.startsWith(VAR_FUNCTION_TOKEN)) {\n            indexes.var.push(i);\n            types.push(VAR_TOKEN);\n            values.push(parsedValue);\n        }\n        else {\n            indexes.number.push(i);\n            types.push(NUMBER_TOKEN);\n            values.push(parseFloat(parsedValue));\n        }\n        ++i;\n        return SPLIT_TOKEN;\n    });\n    const split = tokenised.split(SPLIT_TOKEN);\n    return { values, split, indexes, types };\n}\nfunction parseComplexValue(v) {\n    return analyseComplexValue(v).values;\n}\nfunction createTransformer(source) {\n    const { split, types } = analyseComplexValue(source);\n    const numSections = split.length;\n    return (v) => {\n        let output = \"\";\n        for (let i = 0; i < numSections; i++) {\n            output += split[i];\n            if (v[i] !== undefined) {\n                const type = types[i];\n                if (type === NUMBER_TOKEN) {\n                    output += sanitize(v[i]);\n                }\n                else if (type === COLOR_TOKEN) {\n                    output += color.transform(v[i]);\n                }\n                else {\n                    output += v[i];\n                }\n            }\n        }\n        return output;\n    };\n}\nconst convertNumbersToZero = (v) => typeof v === \"number\" ? 0 : color.test(v) ? color.getAnimatableNone(v) : v;\nfunction getAnimatableNone(v) {\n    const parsed = parseComplexValue(v);\n    const transformer = createTransformer(v);\n    return transformer(parsed.map(convertNumbersToZero));\n}\nconst complex = {\n    test,\n    parse: parseComplexValue,\n    createTransformer,\n    getAnimatableNone,\n};\n\nexport { analyseComplexValue, complex };\n","// Adapted from https://gist.github.com/mjackson/5311256\nfunction hueToRgb(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hslaToRgba({ hue, saturation, lightness, alpha }) {\n    hue /= 360;\n    saturation /= 100;\n    lightness /= 100;\n    let red = 0;\n    let green = 0;\n    let blue = 0;\n    if (!saturation) {\n        red = green = blue = lightness;\n    }\n    else {\n        const q = lightness < 0.5\n            ? lightness * (1 + saturation)\n            : lightness + saturation - lightness * saturation;\n        const p = 2 * lightness - q;\n        red = hueToRgb(p, q, hue + 1 / 3);\n        green = hueToRgb(p, q, hue);\n        blue = hueToRgb(p, q, hue - 1 / 3);\n    }\n    return {\n        red: Math.round(red * 255),\n        green: Math.round(green * 255),\n        blue: Math.round(blue * 255),\n        alpha,\n    };\n}\n\nexport { hslaToRgba };\n","function mixImmediate(a, b) {\n    return (p) => (p > 0 ? b : a);\n}\n\nexport { mixImmediate };\n","/*\n  Value in range from progress\n\n  Given a lower limit and an upper limit, we return the value within\n  that range as expressed by progress (usually a number from 0 to 1)\n\n  So progress = 0.5 would change\n\n  from -------- to\n\n  to\n\n  from ---- to\n\n  E.g. from = 10, to = 20, progress = 0.5 => 15\n\n  @param [number]: Lower limit of range\n  @param [number]: Upper limit of range\n  @param [number]: The progress between lower and upper limits expressed 0-1\n  @return [number]: Value as calculated from progress within range (not limited within range)\n*/\nconst mixNumber = (from, to, progress) => {\n    return from + (to - from) * progress;\n};\n\nexport { mixNumber };\n","import { warning } from 'motion-utils';\nimport { hex } from '../../value/types/color/hex.mjs';\nimport { hsla } from '../../value/types/color/hsla.mjs';\nimport { hslaToRgba } from '../../value/types/color/hsla-to-rgba.mjs';\nimport { rgba } from '../../value/types/color/rgba.mjs';\nimport { mixImmediate } from './immediate.mjs';\nimport { mixNumber } from './number.mjs';\n\n// Linear color space blending\n// Explained https://www.youtube.com/watch?v=LKnqECcg6Gw\n// Demonstrated http://codepen.io/osublake/pen/xGVVaN\nconst mixLinearColor = (from, to, v) => {\n    const fromExpo = from * from;\n    const expo = v * (to * to - fromExpo) + fromExpo;\n    return expo < 0 ? 0 : Math.sqrt(expo);\n};\nconst colorTypes = [hex, rgba, hsla];\nconst getColorType = (v) => colorTypes.find((type) => type.test(v));\nfunction asRGBA(color) {\n    const type = getColorType(color);\n    warning(Boolean(type), `'${color}' is not an animatable color. Use the equivalent color code instead.`, \"color-not-animatable\");\n    if (!Boolean(type))\n        return false;\n    let model = type.parse(color);\n    if (type === hsla) {\n        // TODO Remove this cast - needed since Motion's stricter typing\n        model = hslaToRgba(model);\n    }\n    return model;\n}\nconst mixColor = (from, to) => {\n    const fromRGBA = asRGBA(from);\n    const toRGBA = asRGBA(to);\n    if (!fromRGBA || !toRGBA) {\n        return mixImmediate(from, to);\n    }\n    const blended = { ...fromRGBA };\n    return (v) => {\n        blended.red = mixLinearColor(fromRGBA.red, toRGBA.red, v);\n        blended.green = mixLinearColor(fromRGBA.green, toRGBA.green, v);\n        blended.blue = mixLinearColor(fromRGBA.blue, toRGBA.blue, v);\n        blended.alpha = mixNumber(fromRGBA.alpha, toRGBA.alpha, v);\n        return rgba.transform(blended);\n    };\n};\n\nexport { mixColor, mixLinearColor };\n","const invisibleValues = new Set([\"none\", \"hidden\"]);\n/**\n * Returns a function that, when provided a progress value between 0 and 1,\n * will return the \"none\" or \"hidden\" string only when the progress is that of\n * the origin or target.\n */\nfunction mixVisibility(origin, target) {\n    if (invisibleValues.has(origin)) {\n        return (p) => (p <= 0 ? origin : target);\n    }\n    else {\n        return (p) => (p >= 1 ? target : origin);\n    }\n}\n\nexport { invisibleValues, mixVisibility };\n","import { pipe, warning } from 'motion-utils';\nimport { isCSSVariableToken } from '../../animation/utils/is-css-variable.mjs';\nimport { color } from '../../value/types/color/index.mjs';\nimport { complex, analyseComplexValue } from '../../value/types/complex/index.mjs';\nimport { mixColor } from './color.mjs';\nimport { mixImmediate } from './immediate.mjs';\nimport { mixNumber as mixNumber$1 } from './number.mjs';\nimport { invisibleValues, mixVisibility } from './visibility.mjs';\n\nfunction mixNumber(a, b) {\n    return (p) => mixNumber$1(a, b, p);\n}\nfunction getMixer(a) {\n    if (typeof a === \"number\") {\n        return mixNumber;\n    }\n    else if (typeof a === \"string\") {\n        return isCSSVariableToken(a)\n            ? mixImmediate\n            : color.test(a)\n                ? mixColor\n                : mixComplex;\n    }\n    else if (Array.isArray(a)) {\n        return mixArray;\n    }\n    else if (typeof a === \"object\") {\n        return color.test(a) ? mixColor : mixObject;\n    }\n    return mixImmediate;\n}\nfunction mixArray(a, b) {\n    const output = [...a];\n    const numValues = output.length;\n    const blendValue = a.map((v, i) => getMixer(v)(v, b[i]));\n    return (p) => {\n        for (let i = 0; i < numValues; i++) {\n            output[i] = blendValue[i](p);\n        }\n        return output;\n    };\n}\nfunction mixObject(a, b) {\n    const output = { ...a, ...b };\n    const blendValue = {};\n    for (const key in output) {\n        if (a[key] !== undefined && b[key] !== undefined) {\n            blendValue[key] = getMixer(a[key])(a[key], b[key]);\n        }\n    }\n    return (v) => {\n        for (const key in blendValue) {\n            output[key] = blendValue[key](v);\n        }\n        return output;\n    };\n}\nfunction matchOrder(origin, target) {\n    const orderedOrigin = [];\n    const pointers = { color: 0, var: 0, number: 0 };\n    for (let i = 0; i < target.values.length; i++) {\n        const type = target.types[i];\n        const originIndex = origin.indexes[type][pointers[type]];\n        const originValue = origin.values[originIndex] ?? 0;\n        orderedOrigin[i] = originValue;\n        pointers[type]++;\n    }\n    return orderedOrigin;\n}\nconst mixComplex = (origin, target) => {\n    const template = complex.createTransformer(target);\n    const originStats = analyseComplexValue(origin);\n    const targetStats = analyseComplexValue(target);\n    const canInterpolate = originStats.indexes.var.length === targetStats.indexes.var.length &&\n        originStats.indexes.color.length === targetStats.indexes.color.length &&\n        originStats.indexes.number.length >= targetStats.indexes.number.length;\n    if (canInterpolate) {\n        if ((invisibleValues.has(origin) &&\n            !targetStats.values.length) ||\n            (invisibleValues.has(target) &&\n                !originStats.values.length)) {\n            return mixVisibility(origin, target);\n        }\n        return pipe(mixArray(matchOrder(originStats, targetStats), targetStats.values), template);\n    }\n    else {\n        warning(true, `Complex values '${origin}' and '${target}' too different to mix. Ensure all colors are of the same type, and that each contains the same quantity of number and color values. Falling back to instant transition.`, \"complex-values-different\");\n        return mixImmediate(origin, target);\n    }\n};\n\nexport { getMixer, mixArray, mixComplex, mixObject };\n","import { getMixer } from './complex.mjs';\nimport { mixNumber } from './number.mjs';\n\nfunction mix(from, to, p) {\n    if (typeof from === \"number\" &&\n        typeof to === \"number\" &&\n        typeof p === \"number\") {\n        return mixNumber(from, to, p);\n    }\n    const mixer = getMixer(from);\n    return mixer(from, to);\n}\n\nexport { mix };\n","import { time } from '../../frameloop/sync-time.mjs';\nimport { frame, cancelFrame, frameData } from '../../frameloop/frame.mjs';\n\nconst frameloopDriver = (update) => {\n    const passTimestamp = ({ timestamp }) => update(timestamp);\n    return {\n        start: (keepAlive = true) => frame.update(passTimestamp, keepAlive),\n        stop: () => cancelFrame(passTimestamp),\n        /**\n         * If we're processing this frame we can use the\n         * framelocked timestamp to keep things in sync.\n         */\n        now: () => (frameData.isProcessing ? frameData.timestamp : time.now()),\n    };\n};\n\nexport { frameloopDriver };\n","const generateLinearEasing = (easing, duration, // as milliseconds\nresolution = 10 // as milliseconds\n) => {\n    let points = \"\";\n    const numPoints = Math.max(Math.round(duration / resolution), 2);\n    for (let i = 0; i < numPoints; i++) {\n        points += Math.round(easing(i / (numPoints - 1)) * 10000) / 10000 + \", \";\n    }\n    return `linear(${points.substring(0, points.length - 2)})`;\n};\n\nexport { generateLinearEasing };\n","/**\n * Implement a practical max duration for keyframe generation\n * to prevent infinite loops\n */\nconst maxGeneratorDuration = 20000;\nfunction calcGeneratorDuration(generator) {\n    let duration = 0;\n    const timeStep = 50;\n    let state = generator.next(duration);\n    while (!state.done && duration < maxGeneratorDuration) {\n        duration += timeStep;\n        state = generator.next(duration);\n    }\n    return duration >= maxGeneratorDuration ? Infinity : duration;\n}\n\nexport { calcGeneratorDuration, maxGeneratorDuration };\n","import { velocityPerSecond } from 'motion-utils';\n\nconst velocitySampleDuration = 5; // ms\nfunction calcGeneratorVelocity(resolveValue, t, current) {\n    const prevT = Math.max(t - velocitySampleDuration, 0);\n    return velocityPerSecond(current - resolveValue(prevT), t - prevT);\n}\n\nexport { calcGeneratorVelocity };\n","const springDefaults = {\n    // Default spring physics\n    stiffness: 100,\n    damping: 10,\n    mass: 1.0,\n    velocity: 0.0,\n    // Default duration/bounce-based options\n    duration: 800, // in ms\n    bounce: 0.3,\n    visualDuration: 0.3, // in seconds\n    // Rest thresholds\n    restSpeed: {\n        granular: 0.01,\n        default: 2,\n    },\n    restDelta: {\n        granular: 0.005,\n        default: 0.5,\n    },\n    // Limits\n    minDuration: 0.01, // in seconds\n    maxDuration: 10.0, // in seconds\n    minDamping: 0.05,\n    maxDamping: 1,\n};\n\nexport { springDefaults };\n","import { warning, secondsToMilliseconds, clamp, millisecondsToSeconds } from 'motion-utils';\nimport { springDefaults } from './defaults.mjs';\n\nconst safeMin = 0.001;\nfunction findSpring({ duration = springDefaults.duration, bounce = springDefaults.bounce, velocity = springDefaults.velocity, mass = springDefaults.mass, }) {\n    let envelope;\n    let derivative;\n    warning(duration <= secondsToMilliseconds(springDefaults.maxDuration), \"Spring duration must be 10 seconds or less\", \"spring-duration-limit\");\n    let dampingRatio = 1 - bounce;\n    /**\n     * Restrict dampingRatio and duration to within acceptable ranges.\n     */\n    dampingRatio = clamp(springDefaults.minDamping, springDefaults.maxDamping, dampingRatio);\n    duration = clamp(springDefaults.minDuration, springDefaults.maxDuration, millisecondsToSeconds(duration));\n    if (dampingRatio < 1) {\n        /**\n         * Underdamped spring\n         */\n        envelope = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const a = exponentialDecay - velocity;\n            const b = calcAngularFreq(undampedFreq, dampingRatio);\n            const c = Math.exp(-delta);\n            return safeMin - (a / b) * c;\n        };\n        derivative = (undampedFreq) => {\n            const exponentialDecay = undampedFreq * dampingRatio;\n            const delta = exponentialDecay * duration;\n            const d = delta * velocity + velocity;\n            const e = Math.pow(dampingRatio, 2) * Math.pow(undampedFreq, 2) * duration;\n            const f = Math.exp(-delta);\n            const g = calcAngularFreq(Math.pow(undampedFreq, 2), dampingRatio);\n            const factor = -envelope(undampedFreq) + safeMin > 0 ? -1 : 1;\n            return (factor * ((d - e) * f)) / g;\n        };\n    }\n    else {\n        /**\n         * Critically-damped spring\n         */\n        envelope = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (undampedFreq - velocity) * duration + 1;\n            return -safeMin + a * b;\n        };\n        derivative = (undampedFreq) => {\n            const a = Math.exp(-undampedFreq * duration);\n            const b = (velocity - undampedFreq) * (duration * duration);\n            return a * b;\n        };\n    }\n    const initialGuess = 5 / duration;\n    const undampedFreq = approximateRoot(envelope, derivative, initialGuess);\n    duration = secondsToMilliseconds(duration);\n    if (isNaN(undampedFreq)) {\n        return {\n            stiffness: springDefaults.stiffness,\n            damping: springDefaults.damping,\n            duration,\n        };\n    }\n    else {\n        const stiffness = Math.pow(undampedFreq, 2) * mass;\n        return {\n            stiffness,\n            damping: dampingRatio * 2 * Math.sqrt(mass * stiffness),\n            duration,\n        };\n    }\n}\nconst rootIterations = 12;\nfunction approximateRoot(envelope, derivative, initialGuess) {\n    let result = initialGuess;\n    for (let i = 1; i < rootIterations; i++) {\n        result = result - envelope(result) / derivative(result);\n    }\n    return result;\n}\nfunction calcAngularFreq(undampedFreq, dampingRatio) {\n    return undampedFreq * Math.sqrt(1 - dampingRatio * dampingRatio);\n}\n\nexport { calcAngularFreq, findSpring };\n","import { millisecondsToSeconds, secondsToMilliseconds, clamp } from 'motion-utils';\nimport { generateLinearEasing } from '../../waapi/utils/linear.mjs';\nimport { calcGeneratorDuration, maxGeneratorDuration } from '../utils/calc-duration.mjs';\nimport { createGeneratorEasing } from '../utils/create-generator-easing.mjs';\nimport { calcGeneratorVelocity } from '../utils/velocity.mjs';\nimport { springDefaults } from './defaults.mjs';\nimport { findSpring, calcAngularFreq } from './find.mjs';\n\nconst durationKeys = [\"duration\", \"bounce\"];\nconst physicsKeys = [\"stiffness\", \"damping\", \"mass\"];\nfunction isSpringType(options, keys) {\n    return keys.some((key) => options[key] !== undefined);\n}\nfunction getSpringOptions(options) {\n    let springOptions = {\n        velocity: springDefaults.velocity,\n        stiffness: springDefaults.stiffness,\n        damping: springDefaults.damping,\n        mass: springDefaults.mass,\n        isResolvedFromDuration: false,\n        ...options,\n    };\n    // stiffness/damping/mass overrides duration/bounce\n    if (!isSpringType(options, physicsKeys) &&\n        isSpringType(options, durationKeys)) {\n        if (options.visualDuration) {\n            const visualDuration = options.visualDuration;\n            const root = (2 * Math.PI) / (visualDuration * 1.2);\n            const stiffness = root * root;\n            const damping = 2 *\n                clamp(0.05, 1, 1 - (options.bounce || 0)) *\n                Math.sqrt(stiffness);\n            springOptions = {\n                ...springOptions,\n                mass: springDefaults.mass,\n                stiffness,\n                damping,\n            };\n        }\n        else {\n            const derived = findSpring(options);\n            springOptions = {\n                ...springOptions,\n                ...derived,\n                mass: springDefaults.mass,\n            };\n            springOptions.isResolvedFromDuration = true;\n        }\n    }\n    return springOptions;\n}\nfunction spring(optionsOrVisualDuration = springDefaults.visualDuration, bounce = springDefaults.bounce) {\n    const options = typeof optionsOrVisualDuration !== \"object\"\n        ? {\n            visualDuration: optionsOrVisualDuration,\n            keyframes: [0, 1],\n            bounce,\n        }\n        : optionsOrVisualDuration;\n    let { restSpeed, restDelta } = options;\n    const origin = options.keyframes[0];\n    const target = options.keyframes[options.keyframes.length - 1];\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = { done: false, value: origin };\n    const { stiffness, damping, mass, duration, velocity, isResolvedFromDuration, } = getSpringOptions({\n        ...options,\n        velocity: -millisecondsToSeconds(options.velocity || 0),\n    });\n    const initialVelocity = velocity || 0.0;\n    const dampingRatio = damping / (2 * Math.sqrt(stiffness * mass));\n    const initialDelta = target - origin;\n    const undampedAngularFreq = millisecondsToSeconds(Math.sqrt(stiffness / mass));\n    /**\n     * If we're working on a granular scale, use smaller defaults for determining\n     * when the spring is finished.\n     *\n     * These defaults have been selected emprically based on what strikes a good\n     * ratio between feeling good and finishing as soon as changes are imperceptible.\n     */\n    const isGranularScale = Math.abs(initialDelta) < 5;\n    restSpeed || (restSpeed = isGranularScale\n        ? springDefaults.restSpeed.granular\n        : springDefaults.restSpeed.default);\n    restDelta || (restDelta = isGranularScale\n        ? springDefaults.restDelta.granular\n        : springDefaults.restDelta.default);\n    let resolveSpring;\n    if (dampingRatio < 1) {\n        const angularFreq = calcAngularFreq(undampedAngularFreq, dampingRatio);\n        // Underdamped spring\n        resolveSpring = (t) => {\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n            return (target -\n                envelope *\n                    (((initialVelocity +\n                        dampingRatio * undampedAngularFreq * initialDelta) /\n                        angularFreq) *\n                        Math.sin(angularFreq * t) +\n                        initialDelta * Math.cos(angularFreq * t)));\n        };\n    }\n    else if (dampingRatio === 1) {\n        // Critically damped spring\n        resolveSpring = (t) => target -\n            Math.exp(-undampedAngularFreq * t) *\n                (initialDelta +\n                    (initialVelocity + undampedAngularFreq * initialDelta) * t);\n    }\n    else {\n        // Overdamped spring\n        const dampedAngularFreq = undampedAngularFreq * Math.sqrt(dampingRatio * dampingRatio - 1);\n        resolveSpring = (t) => {\n            const envelope = Math.exp(-dampingRatio * undampedAngularFreq * t);\n            // When performing sinh or cosh values can hit Infinity so we cap them here\n            const freqForT = Math.min(dampedAngularFreq * t, 300);\n            return (target -\n                (envelope *\n                    ((initialVelocity +\n                        dampingRatio * undampedAngularFreq * initialDelta) *\n                        Math.sinh(freqForT) +\n                        dampedAngularFreq *\n                            initialDelta *\n                            Math.cosh(freqForT))) /\n                    dampedAngularFreq);\n        };\n    }\n    const generator = {\n        calculatedDuration: isResolvedFromDuration ? duration || null : null,\n        next: (t) => {\n            const current = resolveSpring(t);\n            if (!isResolvedFromDuration) {\n                let currentVelocity = t === 0 ? initialVelocity : 0.0;\n                /**\n                 * We only need to calculate velocity for under-damped springs\n                 * as over- and critically-damped springs can't overshoot, so\n                 * checking only for displacement is enough.\n                 */\n                if (dampingRatio < 1) {\n                    currentVelocity =\n                        t === 0\n                            ? secondsToMilliseconds(initialVelocity)\n                            : calcGeneratorVelocity(resolveSpring, t, current);\n                }\n                const isBelowVelocityThreshold = Math.abs(currentVelocity) <= restSpeed;\n                const isBelowDisplacementThreshold = Math.abs(target - current) <= restDelta;\n                state.done =\n                    isBelowVelocityThreshold && isBelowDisplacementThreshold;\n            }\n            else {\n                state.done = t >= duration;\n            }\n            state.value = state.done ? target : current;\n            return state;\n        },\n        toString: () => {\n            const calculatedDuration = Math.min(calcGeneratorDuration(generator), maxGeneratorDuration);\n            const easing = generateLinearEasing((progress) => generator.next(calculatedDuration * progress).value, calculatedDuration, 30);\n            return calculatedDuration + \"ms \" + easing;\n        },\n        toTransition: () => { },\n    };\n    return generator;\n}\nspring.applyToOptions = (options) => {\n    const generatorOptions = createGeneratorEasing(options, 100, spring);\n    options.ease = generatorOptions.ease;\n    options.duration = secondsToMilliseconds(generatorOptions.duration);\n    options.type = \"keyframes\";\n    return options;\n};\n\nexport { spring };\n","import { spring } from './spring/index.mjs';\nimport { calcGeneratorVelocity } from './utils/velocity.mjs';\n\nfunction inertia({ keyframes, velocity = 0.0, power = 0.8, timeConstant = 325, bounceDamping = 10, bounceStiffness = 500, modifyTarget, min, max, restDelta = 0.5, restSpeed, }) {\n    const origin = keyframes[0];\n    const state = {\n        done: false,\n        value: origin,\n    };\n    const isOutOfBounds = (v) => (min !== undefined && v < min) || (max !== undefined && v > max);\n    const nearestBoundary = (v) => {\n        if (min === undefined)\n            return max;\n        if (max === undefined)\n            return min;\n        return Math.abs(min - v) < Math.abs(max - v) ? min : max;\n    };\n    let amplitude = power * velocity;\n    const ideal = origin + amplitude;\n    const target = modifyTarget === undefined ? ideal : modifyTarget(ideal);\n    /**\n     * If the target has changed we need to re-calculate the amplitude, otherwise\n     * the animation will start from the wrong position.\n     */\n    if (target !== ideal)\n        amplitude = target - origin;\n    const calcDelta = (t) => -amplitude * Math.exp(-t / timeConstant);\n    const calcLatest = (t) => target + calcDelta(t);\n    const applyFriction = (t) => {\n        const delta = calcDelta(t);\n        const latest = calcLatest(t);\n        state.done = Math.abs(delta) <= restDelta;\n        state.value = state.done ? target : latest;\n    };\n    /**\n     * Ideally this would resolve for t in a stateless way, we could\n     * do that by always precalculating the animation but as we know\n     * this will be done anyway we can assume that spring will\n     * be discovered during that.\n     */\n    let timeReachedBoundary;\n    let spring$1;\n    const checkCatchBoundary = (t) => {\n        if (!isOutOfBounds(state.value))\n            return;\n        timeReachedBoundary = t;\n        spring$1 = spring({\n            keyframes: [state.value, nearestBoundary(state.value)],\n            velocity: calcGeneratorVelocity(calcLatest, t, state.value), // TODO: This should be passing * 1000\n            damping: bounceDamping,\n            stiffness: bounceStiffness,\n            restDelta,\n            restSpeed,\n        });\n    };\n    checkCatchBoundary(0);\n    return {\n        calculatedDuration: null,\n        next: (t) => {\n            /**\n             * We need to resolve the friction to figure out if we need a\n             * spring but we don't want to do this twice per frame. So here\n             * we flag if we updated for this frame and later if we did\n             * we can skip doing it again.\n             */\n            let hasUpdatedFrame = false;\n            if (!spring$1 && timeReachedBoundary === undefined) {\n                hasUpdatedFrame = true;\n                applyFriction(t);\n                checkCatchBoundary(t);\n            }\n            /**\n             * If we have a spring and the provided t is beyond the moment the friction\n             * animation crossed the min/max boundary, use the spring.\n             */\n            if (timeReachedBoundary !== undefined && t >= timeReachedBoundary) {\n                return spring$1.next(t - timeReachedBoundary);\n            }\n            else {\n                !hasUpdatedFrame && applyFriction(t);\n                return state;\n            }\n        },\n    };\n}\n\nexport { inertia };\n","import { invariant, clamp, MotionGlobalConfig, noop, pipe, progress } from 'motion-utils';\nimport { mix } from './mix/index.mjs';\n\nfunction createMixers(output, ease, customMixer) {\n    const mixers = [];\n    const mixerFactory = customMixer || MotionGlobalConfig.mix || mix;\n    const numMixers = output.length - 1;\n    for (let i = 0; i < numMixers; i++) {\n        let mixer = mixerFactory(output[i], output[i + 1]);\n        if (ease) {\n            const easingFunction = Array.isArray(ease) ? ease[i] || noop : ease;\n            mixer = pipe(easingFunction, mixer);\n        }\n        mixers.push(mixer);\n    }\n    return mixers;\n}\n/**\n * Create a function that maps from a numerical input array to a generic output array.\n *\n * Accepts:\n *   - Numbers\n *   - Colors (hex, hsl, hsla, rgb, rgba)\n *   - Complex (combinations of one or more numbers or strings)\n *\n * ```jsx\n * const mixColor = interpolate([0, 1], ['#fff', '#000'])\n *\n * mixColor(0.5) // 'rgba(128, 128, 128, 1)'\n * ```\n *\n * TODO Revisit this approach once we've moved to data models for values,\n * probably not needed to pregenerate mixer functions.\n *\n * @public\n */\nfunction interpolate(input, output, { clamp: isClamp = true, ease, mixer } = {}) {\n    const inputLength = input.length;\n    invariant(inputLength === output.length, \"Both input and output ranges must be the same length\", \"range-length\");\n    /**\n     * If we're only provided a single input, we can just make a function\n     * that returns the output.\n     */\n    if (inputLength === 1)\n        return () => output[0];\n    if (inputLength === 2 && output[0] === output[1])\n        return () => output[1];\n    const isZeroDeltaRange = input[0] === input[1];\n    // If input runs highest -> lowest, reverse both arrays\n    if (input[0] > input[inputLength - 1]) {\n        input = [...input].reverse();\n        output = [...output].reverse();\n    }\n    const mixers = createMixers(output, ease, mixer);\n    const numMixers = mixers.length;\n    const interpolator = (v) => {\n        if (isZeroDeltaRange && v < input[0])\n            return output[0];\n        let i = 0;\n        if (numMixers > 1) {\n            for (; i < input.length - 2; i++) {\n                if (v < input[i + 1])\n                    break;\n            }\n        }\n        const progressInRange = progress(input[i], input[i + 1], v);\n        return mixers[i](progressInRange);\n    };\n    return isClamp\n        ? (v) => interpolator(clamp(input[0], input[inputLength - 1], v))\n        : interpolator;\n}\n\nexport { interpolate };\n","import { fillOffset } from './fill.mjs';\n\nfunction defaultOffset(arr) {\n    const offset = [0];\n    fillOffset(offset, arr.length - 1);\n    return offset;\n}\n\nexport { defaultOffset };\n","import { progress } from 'motion-utils';\nimport { mixNumber } from '../../../utils/mix/number.mjs';\n\nfunction fillOffset(offset, remaining) {\n    const min = offset[offset.length - 1];\n    for (let i = 1; i <= remaining; i++) {\n        const offsetProgress = progress(0, remaining, i);\n        offset.push(mixNumber(min, 1, offsetProgress));\n    }\n}\n\nexport { fillOffset };\n","import { easeInOut, isEasingArray, easingDefinitionToFunction } from 'motion-utils';\nimport { interpolate } from '../../utils/interpolate.mjs';\nimport { defaultOffset } from '../keyframes/offsets/default.mjs';\nimport { convertOffsetToTimes } from '../keyframes/offsets/time.mjs';\n\nfunction defaultEasing(values, easing) {\n    return values.map(() => easing || easeInOut).splice(0, values.length - 1);\n}\nfunction keyframes({ duration = 300, keyframes: keyframeValues, times, ease = \"easeInOut\", }) {\n    /**\n     * Easing functions can be externally defined as strings. Here we convert them\n     * into actual functions.\n     */\n    const easingFunctions = isEasingArray(ease)\n        ? ease.map(easingDefinitionToFunction)\n        : easingDefinitionToFunction(ease);\n    /**\n     * This is the Iterator-spec return value. We ensure it's mutable rather than using a generator\n     * to reduce GC during animation.\n     */\n    const state = {\n        done: false,\n        value: keyframeValues[0],\n    };\n    /**\n     * Create a times array based on the provided 0-1 offsets\n     */\n    const absoluteTimes = convertOffsetToTimes(\n    // Only use the provided offsets if they're the correct length\n    // TODO Maybe we should warn here if there's a length mismatch\n    times && times.length === keyframeValues.length\n        ? times\n        : defaultOffset(keyframeValues), duration);\n    const mapTimeToKeyframe = interpolate(absoluteTimes, keyframeValues, {\n        ease: Array.isArray(easingFunctions)\n            ? easingFunctions\n            : defaultEasing(keyframeValues, easingFunctions),\n    });\n    return {\n        calculatedDuration: duration,\n        next: (t) => {\n            state.value = mapTimeToKeyframe(t);\n            state.done = t >= duration;\n            return state;\n        },\n    };\n}\n\nexport { defaultEasing, keyframes };\n","const isEasingArray = (ease) => {\n    return Array.isArray(ease) && typeof ease[0] !== \"number\";\n};\n\nexport { isEasingArray };\n","function convertOffsetToTimes(offset, duration) {\n    return offset.map((o) => o * duration);\n}\n\nexport { convertOffsetToTimes };\n","import { millisecondsToSeconds } from 'motion-utils';\nimport { calcGeneratorDuration, maxGeneratorDuration } from './calc-duration.mjs';\n\n/**\n * Create a progress => progress easing function from a generator.\n */\nfunction createGeneratorEasing(options, scale = 100, createGenerator) {\n    const generator = createGenerator({ ...options, keyframes: [0, scale] });\n    const duration = Math.min(calcGeneratorDuration(generator), maxGeneratorDuration);\n    return {\n        type: \"keyframes\",\n        ease: (progress) => {\n            return generator.next(duration * progress).value / scale;\n        },\n        duration: millisecondsToSeconds(duration),\n    };\n}\n\nexport { createGeneratorEasing };\n","const isNotNull = (value) => value !== null;\nfunction getFinalKeyframe(keyframes, { repeat, repeatType = \"loop\" }, finalKeyframe, speed = 1) {\n    const resolvedKeyframes = keyframes.filter(isNotNull);\n    const useFirstKeyframe = speed < 0 || (repeat && repeatType !== \"loop\" && repeat % 2 === 1);\n    const index = useFirstKeyframe ? 0 : resolvedKeyframes.length - 1;\n    return !index || finalKeyframe === undefined\n        ? resolvedKeyframes[index]\n        : finalKeyframe;\n}\n\nexport { getFinalKeyframe };\n","import { inertia } from '../generators/inertia.mjs';\nimport { keyframes } from '../generators/keyframes.mjs';\nimport { spring } from '../generators/spring/index.mjs';\n\nconst transitionTypeMap = {\n    decay: inertia,\n    inertia,\n    tween: keyframes,\n    keyframes: keyframes,\n    spring,\n};\nfunction replaceTransitionType(transition) {\n    if (typeof transition.type === \"string\") {\n        transition.type = transitionTypeMap[transition.type];\n    }\n}\n\nexport { replaceTransitionType };\n","class WithPromise {\n    constructor() {\n        this.updateFinished();\n    }\n    get finished() {\n        return this._finished;\n    }\n    updateFinished() {\n        this._finished = new Promise((resolve) => {\n            this.resolve = resolve;\n        });\n    }\n    notifyFinished() {\n        this.resolve();\n    }\n    /**\n     * Allows the animation to be awaited.\n     *\n     * @deprecated Use `finished` instead.\n     */\n    then(onResolve, onReject) {\n        return this.finished.then(onResolve, onReject);\n    }\n}\n\nexport { WithPromise };\n","import { invariant, pipe, clamp, millisecondsToSeconds, secondsToMilliseconds } from 'motion-utils';\nimport { time } from '../frameloop/sync-time.mjs';\nimport { activeAnimations } from '../stats/animation-count.mjs';\nimport { mix } from '../utils/mix/index.mjs';\nimport { frameloopDriver } from './drivers/frame.mjs';\nimport { inertia } from './generators/inertia.mjs';\nimport { keyframes } from './generators/keyframes.mjs';\nimport { calcGeneratorDuration } from './generators/utils/calc-duration.mjs';\nimport { getFinalKeyframe } from './keyframes/get-final.mjs';\nimport { replaceTransitionType } from './utils/replace-transition-type.mjs';\nimport { WithPromise } from './utils/WithPromise.mjs';\n\nconst percentToProgress = (percent) => percent / 100;\nclass JSAnimation extends WithPromise {\n    constructor(options) {\n        super();\n        this.state = \"idle\";\n        this.startTime = null;\n        this.isStopped = false;\n        /**\n         * The current time of the animation.\n         */\n        this.currentTime = 0;\n        /**\n         * The time at which the animation was paused.\n         */\n        this.holdTime = null;\n        /**\n         * Playback speed as a factor. 0 would be stopped, -1 reverse and 2 double speed.\n         */\n        this.playbackSpeed = 1;\n        /**\n         * This method is bound to the instance to fix a pattern where\n         * animation.stop is returned as a reference from a useEffect.\n         */\n        this.stop = () => {\n            const { motionValue } = this.options;\n            if (motionValue && motionValue.updatedAt !== time.now()) {\n                this.tick(time.now());\n            }\n            this.isStopped = true;\n            if (this.state === \"idle\")\n                return;\n            this.teardown();\n            this.options.onStop?.();\n        };\n        activeAnimations.mainThread++;\n        this.options = options;\n        this.initAnimation();\n        this.play();\n        if (options.autoplay === false)\n            this.pause();\n    }\n    initAnimation() {\n        const { options } = this;\n        replaceTransitionType(options);\n        const { type = keyframes, repeat = 0, repeatDelay = 0, repeatType, velocity = 0, } = options;\n        let { keyframes: keyframes$1 } = options;\n        const generatorFactory = type || keyframes;\n        if (process.env.NODE_ENV !== \"production\" &&\n            generatorFactory !== keyframes) {\n            invariant(keyframes$1.length <= 2, `Only two keyframes currently supported with spring and inertia animations. Trying to animate ${keyframes$1}`, \"spring-two-frames\");\n        }\n        if (generatorFactory !== keyframes &&\n            typeof keyframes$1[0] !== \"number\") {\n            this.mixKeyframes = pipe(percentToProgress, mix(keyframes$1[0], keyframes$1[1]));\n            keyframes$1 = [0, 100];\n        }\n        const generator = generatorFactory({ ...options, keyframes: keyframes$1 });\n        /**\n         * If we have a mirror repeat type we need to create a second generator that outputs the\n         * mirrored (not reversed) animation and later ping pong between the two generators.\n         */\n        if (repeatType === \"mirror\") {\n            this.mirroredGenerator = generatorFactory({\n                ...options,\n                keyframes: [...keyframes$1].reverse(),\n                velocity: -velocity,\n            });\n        }\n        /**\n         * If duration is undefined and we have repeat options,\n         * we need to calculate a duration from the generator.\n         *\n         * We set it to the generator itself to cache the duration.\n         * Any timeline resolver will need to have already precalculated\n         * the duration by this step.\n         */\n        if (generator.calculatedDuration === null) {\n            generator.calculatedDuration = calcGeneratorDuration(generator);\n        }\n        const { calculatedDuration } = generator;\n        this.calculatedDuration = calculatedDuration;\n        this.resolvedDuration = calculatedDuration + repeatDelay;\n        this.totalDuration = this.resolvedDuration * (repeat + 1) - repeatDelay;\n        this.generator = generator;\n    }\n    updateTime(timestamp) {\n        const animationTime = Math.round(timestamp - this.startTime) * this.playbackSpeed;\n        // Update currentTime\n        if (this.holdTime !== null) {\n            this.currentTime = this.holdTime;\n        }\n        else {\n            // Rounding the time because floating point arithmetic is not always accurate, e.g. 3000.367 - 1000.367 =\n            // 2000.0000000000002. This is a problem when we are comparing the currentTime with the duration, for\n            // example.\n            this.currentTime = animationTime;\n        }\n    }\n    tick(timestamp, sample = false) {\n        const { generator, totalDuration, mixKeyframes, mirroredGenerator, resolvedDuration, calculatedDuration, } = this;\n        if (this.startTime === null)\n            return generator.next(0);\n        const { delay = 0, keyframes, repeat, repeatType, repeatDelay, type, onUpdate, finalKeyframe, } = this.options;\n        /**\n         * requestAnimationFrame timestamps can come through as lower than\n         * the startTime as set by performance.now(). Here we prevent this,\n         * though in the future it could be possible to make setting startTime\n         * a pending operation that gets resolved here.\n         */\n        if (this.speed > 0) {\n            this.startTime = Math.min(this.startTime, timestamp);\n        }\n        else if (this.speed < 0) {\n            this.startTime = Math.min(timestamp - totalDuration / this.speed, this.startTime);\n        }\n        if (sample) {\n            this.currentTime = timestamp;\n        }\n        else {\n            this.updateTime(timestamp);\n        }\n        // Rebase on delay\n        const timeWithoutDelay = this.currentTime - delay * (this.playbackSpeed >= 0 ? 1 : -1);\n        const isInDelayPhase = this.playbackSpeed >= 0\n            ? timeWithoutDelay < 0\n            : timeWithoutDelay > totalDuration;\n        this.currentTime = Math.max(timeWithoutDelay, 0);\n        // If this animation has finished, set the current time  to the total duration.\n        if (this.state === \"finished\" && this.holdTime === null) {\n            this.currentTime = totalDuration;\n        }\n        let elapsed = this.currentTime;\n        let frameGenerator = generator;\n        if (repeat) {\n            /**\n             * Get the current progress (0-1) of the animation. If t is >\n             * than duration we'll get values like 2.5 (midway through the\n             * third iteration)\n             */\n            const progress = Math.min(this.currentTime, totalDuration) / resolvedDuration;\n            /**\n             * Get the current iteration (0 indexed). For instance the floor of\n             * 2.5 is 2.\n             */\n            let currentIteration = Math.floor(progress);\n            /**\n             * Get the current progress of the iteration by taking the remainder\n             * so 2.5 is 0.5 through iteration 2\n             */\n            let iterationProgress = progress % 1.0;\n            /**\n             * If iteration progress is 1 we count that as the end\n             * of the previous iteration.\n             */\n            if (!iterationProgress && progress >= 1) {\n                iterationProgress = 1;\n            }\n            iterationProgress === 1 && currentIteration--;\n            currentIteration = Math.min(currentIteration, repeat + 1);\n            /**\n             * Reverse progress if we're not running in \"normal\" direction\n             */\n            const isOddIteration = Boolean(currentIteration % 2);\n            if (isOddIteration) {\n                if (repeatType === \"reverse\") {\n                    iterationProgress = 1 - iterationProgress;\n                    if (repeatDelay) {\n                        iterationProgress -= repeatDelay / resolvedDuration;\n                    }\n                }\n                else if (repeatType === \"mirror\") {\n                    frameGenerator = mirroredGenerator;\n                }\n            }\n            elapsed = clamp(0, 1, iterationProgress) * resolvedDuration;\n        }\n        /**\n         * If we're in negative time, set state as the initial keyframe.\n         * This prevents delay: x, duration: 0 animations from finishing\n         * instantly.\n         */\n        const state = isInDelayPhase\n            ? { done: false, value: keyframes[0] }\n            : frameGenerator.next(elapsed);\n        if (mixKeyframes) {\n            state.value = mixKeyframes(state.value);\n        }\n        let { done } = state;\n        if (!isInDelayPhase && calculatedDuration !== null) {\n            done =\n                this.playbackSpeed >= 0\n                    ? this.currentTime >= totalDuration\n                    : this.currentTime <= 0;\n        }\n        const isAnimationFinished = this.holdTime === null &&\n            (this.state === \"finished\" || (this.state === \"running\" && done));\n        // TODO: The exception for inertia could be cleaner here\n        if (isAnimationFinished && type !== inertia) {\n            state.value = getFinalKeyframe(keyframes, this.options, finalKeyframe, this.speed);\n        }\n        if (onUpdate) {\n            onUpdate(state.value);\n        }\n        if (isAnimationFinished) {\n            this.finish();\n        }\n        return state;\n    }\n    /**\n     * Allows the returned animation to be awaited or promise-chained. Currently\n     * resolves when the animation finishes at all but in a future update could/should\n     * reject if its cancels.\n     */\n    then(resolve, reject) {\n        return this.finished.then(resolve, reject);\n    }\n    get duration() {\n        return millisecondsToSeconds(this.calculatedDuration);\n    }\n    get time() {\n        return millisecondsToSeconds(this.currentTime);\n    }\n    set time(newTime) {\n        newTime = secondsToMilliseconds(newTime);\n        this.currentTime = newTime;\n        if (this.startTime === null ||\n            this.holdTime !== null ||\n            this.playbackSpeed === 0) {\n            this.holdTime = newTime;\n        }\n        else if (this.driver) {\n            this.startTime = this.driver.now() - newTime / this.playbackSpeed;\n        }\n        this.driver?.start(false);\n    }\n    get speed() {\n        return this.playbackSpeed;\n    }\n    set speed(newSpeed) {\n        this.updateTime(time.now());\n        const hasChanged = this.playbackSpeed !== newSpeed;\n        this.playbackSpeed = newSpeed;\n        if (hasChanged) {\n            this.time = millisecondsToSeconds(this.currentTime);\n        }\n    }\n    play() {\n        if (this.isStopped)\n            return;\n        const { driver = frameloopDriver, startTime } = this.options;\n        if (!this.driver) {\n            this.driver = driver((timestamp) => this.tick(timestamp));\n        }\n        this.options.onPlay?.();\n        const now = this.driver.now();\n        if (this.state === \"finished\") {\n            this.updateFinished();\n            this.startTime = now;\n        }\n        else if (this.holdTime !== null) {\n            this.startTime = now - this.holdTime;\n        }\n        else if (!this.startTime) {\n            this.startTime = startTime ?? now;\n        }\n        if (this.state === \"finished\" && this.speed < 0) {\n            this.startTime += this.calculatedDuration;\n        }\n        this.holdTime = null;\n        /**\n         * Set playState to running only after we've used it in\n         * the previous logic.\n         */\n        this.state = \"running\";\n        this.driver.start();\n    }\n    pause() {\n        this.state = \"paused\";\n        this.updateTime(time.now());\n        this.holdTime = this.currentTime;\n    }\n    complete() {\n        if (this.state !== \"running\") {\n            this.play();\n        }\n        this.state = \"finished\";\n        this.holdTime = null;\n    }\n    finish() {\n        this.notifyFinished();\n        this.teardown();\n        this.state = \"finished\";\n        this.options.onComplete?.();\n    }\n    cancel() {\n        this.holdTime = null;\n        this.startTime = 0;\n        this.tick(0);\n        this.teardown();\n        this.options.onCancel?.();\n    }\n    teardown() {\n        this.state = \"idle\";\n        this.stopDriver();\n        this.startTime = this.holdTime = null;\n        activeAnimations.mainThread--;\n    }\n    stopDriver() {\n        if (!this.driver)\n            return;\n        this.driver.stop();\n        this.driver = undefined;\n    }\n    sample(sampleTime) {\n        this.startTime = 0;\n        return this.tick(sampleTime, true);\n    }\n    attachTimeline(timeline) {\n        if (this.options.allowFlatten) {\n            this.options.type = \"keyframes\";\n            this.options.ease = \"linear\";\n            this.initAnimation();\n        }\n        this.driver?.stop();\n        return timeline.observe(this);\n    }\n}\n// Legacy function support\nfunction animateValue(options) {\n    return new JSAnimation(options);\n}\n\nexport { JSAnimation, animateValue };\n","const radToDeg = (rad) => (rad * 180) / Math.PI;\nconst rotate = (v) => {\n    const angle = radToDeg(Math.atan2(v[1], v[0]));\n    return rebaseAngle(angle);\n};\nconst matrix2dParsers = {\n    x: 4,\n    y: 5,\n    translateX: 4,\n    translateY: 5,\n    scaleX: 0,\n    scaleY: 3,\n    scale: (v) => (Math.abs(v[0]) + Math.abs(v[3])) / 2,\n    rotate,\n    rotateZ: rotate,\n    skewX: (v) => radToDeg(Math.atan(v[1])),\n    skewY: (v) => radToDeg(Math.atan(v[2])),\n    skew: (v) => (Math.abs(v[1]) + Math.abs(v[2])) / 2,\n};\nconst rebaseAngle = (angle) => {\n    angle = angle % 360;\n    if (angle < 0)\n        angle += 360;\n    return angle;\n};\nconst rotateZ = rotate;\nconst scaleX = (v) => Math.sqrt(v[0] * v[0] + v[1] * v[1]);\nconst scaleY = (v) => Math.sqrt(v[4] * v[4] + v[5] * v[5]);\nconst matrix3dParsers = {\n    x: 12,\n    y: 13,\n    z: 14,\n    translateX: 12,\n    translateY: 13,\n    translateZ: 14,\n    scaleX,\n    scaleY,\n    scale: (v) => (scaleX(v) + scaleY(v)) / 2,\n    rotateX: (v) => rebaseAngle(radToDeg(Math.atan2(v[6], v[5]))),\n    rotateY: (v) => rebaseAngle(radToDeg(Math.atan2(-v[2], v[0]))),\n    rotateZ,\n    rotate: rotateZ,\n    skewX: (v) => radToDeg(Math.atan(v[4])),\n    skewY: (v) => radToDeg(Math.atan(v[1])),\n    skew: (v) => (Math.abs(v[1]) + Math.abs(v[4])) / 2,\n};\nfunction defaultTransformValue(name) {\n    return name.includes(\"scale\") ? 1 : 0;\n}\nfunction parseValueFromTransform(transform, name) {\n    if (!transform || transform === \"none\") {\n        return defaultTransformValue(name);\n    }\n    const matrix3dMatch = transform.match(/^matrix3d\\(([-\\d.e\\s,]+)\\)$/u);\n    let parsers;\n    let match;\n    if (matrix3dMatch) {\n        parsers = matrix3dParsers;\n        match = matrix3dMatch;\n    }\n    else {\n        const matrix2dMatch = transform.match(/^matrix\\(([-\\d.e\\s,]+)\\)$/u);\n        parsers = matrix2dParsers;\n        match = matrix2dMatch;\n    }\n    if (!match) {\n        return defaultTransformValue(name);\n    }\n    const valueParser = parsers[name];\n    const values = match[1].split(\",\").map(convertTransformToNumber);\n    return typeof valueParser === \"function\"\n        ? valueParser(values)\n        : values[valueParser];\n}\nconst readTransformValue = (instance, name) => {\n    const { transform = \"none\" } = getComputedStyle(instance);\n    return parseValueFromTransform(transform, name);\n};\nfunction convertTransformToNumber(value) {\n    return parseFloat(value.trim());\n}\n\nexport { defaultTransformValue, parseValueFromTransform, readTransformValue };\n","/**\n * Generate a list of every possible transform key.\n */\nconst transformPropOrder = [\n    \"transformPerspective\",\n    \"x\",\n    \"y\",\n    \"z\",\n    \"translateX\",\n    \"translateY\",\n    \"translateZ\",\n    \"scale\",\n    \"scaleX\",\n    \"scaleY\",\n    \"rotate\",\n    \"rotateX\",\n    \"rotateY\",\n    \"rotateZ\",\n    \"skew\",\n    \"skewX\",\n    \"skewY\",\n];\n/**\n * A quick lookup for transform props.\n */\nconst transformProps = /*@__PURE__*/ (() => new Set(transformPropOrder))();\n\nexport { transformPropOrder, transformProps };\n","import { parseValueFromTransform } from '../../../render/dom/parse-transform.mjs';\nimport { transformPropOrder } from '../../../render/utils/keys-transform.mjs';\nimport { number } from '../../../value/types/numbers/index.mjs';\nimport { px } from '../../../value/types/numbers/units.mjs';\n\nconst isNumOrPxType = (v) => v === number || v === px;\nconst transformKeys = new Set([\"x\", \"y\", \"z\"]);\nconst nonTranslationalTransformKeys = transformPropOrder.filter((key) => !transformKeys.has(key));\nfunction removeNonTranslationalTransform(visualElement) {\n    const removedTransforms = [];\n    nonTranslationalTransformKeys.forEach((key) => {\n        const value = visualElement.getValue(key);\n        if (value !== undefined) {\n            removedTransforms.push([key, value.get()]);\n            value.set(key.startsWith(\"scale\") ? 1 : 0);\n        }\n    });\n    return removedTransforms;\n}\nconst positionalValues = {\n    // Dimensions\n    width: ({ x }, { paddingLeft = \"0\", paddingRight = \"0\" }) => x.max - x.min - parseFloat(paddingLeft) - parseFloat(paddingRight),\n    height: ({ y }, { paddingTop = \"0\", paddingBottom = \"0\" }) => y.max - y.min - parseFloat(paddingTop) - parseFloat(paddingBottom),\n    top: (_bbox, { top }) => parseFloat(top),\n    left: (_bbox, { left }) => parseFloat(left),\n    bottom: ({ y }, { top }) => parseFloat(top) + (y.max - y.min),\n    right: ({ x }, { left }) => parseFloat(left) + (x.max - x.min),\n    // Transform\n    x: (_bbox, { transform }) => parseValueFromTransform(transform, \"x\"),\n    y: (_bbox, { transform }) => parseValueFromTransform(transform, \"y\"),\n};\n// Alias translate longform names\npositionalValues.translateX = positionalValues.x;\npositionalValues.translateY = positionalValues.y;\n\nexport { isNumOrPxType, positionalValues, removeNonTranslationalTransform };\n","import { fillWildcards } from './utils/fill-wildcards.mjs';\nimport { removeNonTranslationalTransform } from './utils/unit-conversion.mjs';\nimport { frame } from '../../frameloop/frame.mjs';\n\nconst toResolve = new Set();\nlet isScheduled = false;\nlet anyNeedsMeasurement = false;\nlet isForced = false;\nfunction measureAllKeyframes() {\n    if (anyNeedsMeasurement) {\n        const resolversToMeasure = Array.from(toResolve).filter((resolver) => resolver.needsMeasurement);\n        const elementsToMeasure = new Set(resolversToMeasure.map((resolver) => resolver.element));\n        const transformsToRestore = new Map();\n        /**\n         * Write pass\n         * If we're measuring elements we want to remove bounding box-changing transforms.\n         */\n        elementsToMeasure.forEach((element) => {\n            const removedTransforms = removeNonTranslationalTransform(element);\n            if (!removedTransforms.length)\n                return;\n            transformsToRestore.set(element, removedTransforms);\n            element.render();\n        });\n        // Read\n        resolversToMeasure.forEach((resolver) => resolver.measureInitialState());\n        // Write\n        elementsToMeasure.forEach((element) => {\n            element.render();\n            const restore = transformsToRestore.get(element);\n            if (restore) {\n                restore.forEach(([key, value]) => {\n                    element.getValue(key)?.set(value);\n                });\n            }\n        });\n        // Read\n        resolversToMeasure.forEach((resolver) => resolver.measureEndState());\n        // Write\n        resolversToMeasure.forEach((resolver) => {\n            if (resolver.suspendedScrollY !== undefined) {\n                window.scrollTo(0, resolver.suspendedScrollY);\n            }\n        });\n    }\n    anyNeedsMeasurement = false;\n    isScheduled = false;\n    toResolve.forEach((resolver) => resolver.complete(isForced));\n    toResolve.clear();\n}\nfunction readAllKeyframes() {\n    toResolve.forEach((resolver) => {\n        resolver.readKeyframes();\n        if (resolver.needsMeasurement) {\n            anyNeedsMeasurement = true;\n        }\n    });\n}\nfunction flushKeyframeResolvers() {\n    isForced = true;\n    readAllKeyframes();\n    measureAllKeyframes();\n    isForced = false;\n}\nclass KeyframeResolver {\n    constructor(unresolvedKeyframes, onComplete, name, motionValue, element, isAsync = false) {\n        this.state = \"pending\";\n        /**\n         * Track whether this resolver is async. If it is, it'll be added to the\n         * resolver queue and flushed in the next frame. Resolvers that aren't going\n         * to trigger read/write thrashing don't need to be async.\n         */\n        this.isAsync = false;\n        /**\n         * Track whether this resolver needs to perform a measurement\n         * to resolve its keyframes.\n         */\n        this.needsMeasurement = false;\n        this.unresolvedKeyframes = [...unresolvedKeyframes];\n        this.onComplete = onComplete;\n        this.name = name;\n        this.motionValue = motionValue;\n        this.element = element;\n        this.isAsync = isAsync;\n    }\n    scheduleResolve() {\n        this.state = \"scheduled\";\n        if (this.isAsync) {\n            toResolve.add(this);\n            if (!isScheduled) {\n                isScheduled = true;\n                frame.read(readAllKeyframes);\n                frame.resolveKeyframes(measureAllKeyframes);\n            }\n        }\n        else {\n            this.readKeyframes();\n            this.complete();\n        }\n    }\n    readKeyframes() {\n        const { unresolvedKeyframes, name, element, motionValue } = this;\n        // If initial keyframe is null we need to read it from the DOM\n        if (unresolvedKeyframes[0] === null) {\n            const currentValue = motionValue?.get();\n            // TODO: This doesn't work if the final keyframe is a wildcard\n            const finalKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];\n            if (currentValue !== undefined) {\n                unresolvedKeyframes[0] = currentValue;\n            }\n            else if (element && name) {\n                const valueAsRead = element.readValue(name, finalKeyframe);\n                if (valueAsRead !== undefined && valueAsRead !== null) {\n                    unresolvedKeyframes[0] = valueAsRead;\n                }\n            }\n            if (unresolvedKeyframes[0] === undefined) {\n                unresolvedKeyframes[0] = finalKeyframe;\n            }\n            if (motionValue && currentValue === undefined) {\n                motionValue.set(unresolvedKeyframes[0]);\n            }\n        }\n        fillWildcards(unresolvedKeyframes);\n    }\n    setFinalKeyframe() { }\n    measureInitialState() { }\n    renderEndStyles() { }\n    measureEndState() { }\n    complete(isForcedComplete = false) {\n        this.state = \"complete\";\n        this.onComplete(this.unresolvedKeyframes, this.finalKeyframe, isForcedComplete);\n        toResolve.delete(this);\n    }\n    cancel() {\n        if (this.state === \"scheduled\") {\n            toResolve.delete(this);\n            this.state = \"pending\";\n        }\n    }\n    resume() {\n        if (this.state === \"pending\")\n            this.scheduleResolve();\n    }\n}\n\nexport { KeyframeResolver, flushKeyframeResolvers };\n","function fillWildcards(keyframes) {\n    for (let i = 1; i < keyframes.length; i++) {\n        keyframes[i] ?? (keyframes[i] = keyframes[i - 1]);\n    }\n}\n\nexport { fillWildcards };\n","import { memo } from 'motion-utils';\n\nconst supportsScrollTimeline = /* @__PURE__ */ memo(() => window.ScrollTimeline !== undefined);\n\nexport { supportsScrollTimeline };\n","/**\n * Add the ability for test suites to manually set support flags\n * to better test more environments.\n */\nconst supportsFlags = {};\n\nexport { supportsFlags };\n","import { memo } from 'motion-utils';\nimport { supportsFlags } from './flags.mjs';\n\nfunction memoSupports(callback, supportsFlag) {\n    const memoized = memo(callback);\n    return () => supportsFlags[supportsFlag] ?? memoized();\n}\n\nexport { memoSupports };\n","import { memoSupports } from './memo.mjs';\n\nconst supportsLinearEasing = /*@__PURE__*/ memoSupports(() => {\n    try {\n        document\n            .createElement(\"div\")\n            .animate({ opacity: 0 }, { easing: \"linear(0, 1)\" });\n    }\n    catch (e) {\n        return false;\n    }\n    return true;\n}, \"linearEasing\");\n\nexport { supportsLinearEasing };\n","const cubicBezierAsString = ([a, b, c, d]) => `cubic-bezier(${a}, ${b}, ${c}, ${d})`;\n\nexport { cubicBezierAsString };\n","import { cubicBezierAsString } from './cubic-bezier.mjs';\n\nconst supportedWaapiEasing = {\n    linear: \"linear\",\n    ease: \"ease\",\n    easeIn: \"ease-in\",\n    easeOut: \"ease-out\",\n    easeInOut: \"ease-in-out\",\n    circIn: /*@__PURE__*/ cubicBezierAsString([0, 0.65, 0.55, 1]),\n    circOut: /*@__PURE__*/ cubicBezierAsString([0.55, 0, 1, 0.45]),\n    backIn: /*@__PURE__*/ cubicBezierAsString([0.31, 0.01, 0.66, -0.59]),\n    backOut: /*@__PURE__*/ cubicBezierAsString([0.33, 1.53, 0.69, 0.99]),\n};\n\nexport { supportedWaapiEasing };\n","import { isBezierDefinition } from 'motion-utils';\nimport { supportsLinearEasing } from '../../../utils/supports/linear-easing.mjs';\nimport { generateLinearEasing } from '../utils/linear.mjs';\nimport { cubicBezierAsString } from './cubic-bezier.mjs';\nimport { supportedWaapiEasing } from './supported.mjs';\n\nfunction mapEasingToNativeEasing(easing, duration) {\n    if (!easing) {\n        return undefined;\n    }\n    else if (typeof easing === \"function\") {\n        return supportsLinearEasing()\n            ? generateLinearEasing(easing, duration)\n            : \"ease-out\";\n    }\n    else if (isBezierDefinition(easing)) {\n        return cubicBezierAsString(easing);\n    }\n    else if (Array.isArray(easing)) {\n        return easing.map((segmentEasing) => mapEasingToNativeEasing(segmentEasing, duration) ||\n            supportedWaapiEasing.easeOut);\n    }\n    else {\n        return supportedWaapiEasing[easing];\n    }\n}\n\nexport { mapEasingToNativeEasing };\n","import { activeAnimations } from '../../stats/animation-count.mjs';\nimport { statsBuffer } from '../../stats/buffer.mjs';\nimport { mapEasingToNativeEasing } from './easing/map-easing.mjs';\n\nfunction startWaapiAnimation(element, valueName, keyframes, { delay = 0, duration = 300, repeat = 0, repeatType = \"loop\", ease = \"easeOut\", times, } = {}, pseudoElement = undefined) {\n    const keyframeOptions = {\n        [valueName]: keyframes,\n    };\n    if (times)\n        keyframeOptions.offset = times;\n    const easing = mapEasingToNativeEasing(ease, duration);\n    /**\n     * If this is an easing array, apply to keyframes, not animation as a whole\n     */\n    if (Array.isArray(easing))\n        keyframeOptions.easing = easing;\n    if (statsBuffer.value) {\n        activeAnimations.waapi++;\n    }\n    const options = {\n        delay,\n        duration,\n        easing: !Array.isArray(easing) ? easing : \"linear\",\n        fill: \"both\",\n        iterations: repeat + 1,\n        direction: repeatType === \"reverse\" ? \"alternate\" : \"normal\",\n    };\n    if (pseudoElement)\n        options.pseudoElement = pseudoElement;\n    const animation = element.animate(keyframeOptions, options);\n    if (statsBuffer.value) {\n        animation.finished.finally(() => {\n            activeAnimations.waapi--;\n        });\n    }\n    return animation;\n}\n\nexport { startWaapiAnimation };\n","function isGenerator(type) {\n    return typeof type === \"function\" && \"applyToOptions\" in type;\n}\n\nexport { isGenerator };\n","import { invariant, millisecondsToSeconds, secondsToMilliseconds, noop } from 'motion-utils';\nimport { setStyle } from '../render/dom/style-set.mjs';\nimport { supportsScrollTimeline } from '../utils/supports/scroll-timeline.mjs';\nimport { getFinalKeyframe } from './keyframes/get-final.mjs';\nimport { WithPromise } from './utils/WithPromise.mjs';\nimport { startWaapiAnimation } from './waapi/start-waapi-animation.mjs';\nimport { applyGeneratorOptions } from './waapi/utils/apply-generator.mjs';\n\n/**\n * NativeAnimation implements AnimationPlaybackControls for the browser's Web Animations API.\n */\nclass NativeAnimation extends WithPromise {\n    constructor(options) {\n        super();\n        this.finishedTime = null;\n        this.isStopped = false;\n        if (!options)\n            return;\n        const { element, name, keyframes, pseudoElement, allowFlatten = false, finalKeyframe, onComplete, } = options;\n        this.isPseudoElement = Boolean(pseudoElement);\n        this.allowFlatten = allowFlatten;\n        this.options = options;\n        invariant(typeof options.type !== \"string\", `Mini animate() doesn't support \"type\" as a string.`, \"mini-spring\");\n        const transition = applyGeneratorOptions(options);\n        this.animation = startWaapiAnimation(element, name, keyframes, transition, pseudoElement);\n        if (transition.autoplay === false) {\n            this.animation.pause();\n        }\n        this.animation.onfinish = () => {\n            this.finishedTime = this.time;\n            if (!pseudoElement) {\n                const keyframe = getFinalKeyframe(keyframes, this.options, finalKeyframe, this.speed);\n                if (this.updateMotionValue) {\n                    this.updateMotionValue(keyframe);\n                }\n                else {\n                    /**\n                     * If we can, we want to commit the final style as set by the user,\n                     * rather than the computed keyframe value supplied by the animation.\n                     */\n                    setStyle(element, name, keyframe);\n                }\n                this.animation.cancel();\n            }\n            onComplete?.();\n            this.notifyFinished();\n        };\n    }\n    play() {\n        if (this.isStopped)\n            return;\n        this.animation.play();\n        if (this.state === \"finished\") {\n            this.updateFinished();\n        }\n    }\n    pause() {\n        this.animation.pause();\n    }\n    complete() {\n        this.animation.finish?.();\n    }\n    cancel() {\n        try {\n            this.animation.cancel();\n        }\n        catch (e) { }\n    }\n    stop() {\n        if (this.isStopped)\n            return;\n        this.isStopped = true;\n        const { state } = this;\n        if (state === \"idle\" || state === \"finished\") {\n            return;\n        }\n        if (this.updateMotionValue) {\n            this.updateMotionValue();\n        }\n        else {\n            this.commitStyles();\n        }\n        if (!this.isPseudoElement)\n            this.cancel();\n    }\n    /**\n     * WAAPI doesn't natively have any interruption capabilities.\n     *\n     * In this method, we commit styles back to the DOM before cancelling\n     * the animation.\n     *\n     * This is designed to be overridden by NativeAnimationExtended, which\n     * will create a renderless JS animation and sample it twice to calculate\n     * its current value, \"previous\" value, and therefore allow\n     * Motion to also correctly calculate velocity for any subsequent animation\n     * while deferring the commit until the next animation frame.\n     */\n    commitStyles() {\n        if (!this.isPseudoElement) {\n            this.animation.commitStyles?.();\n        }\n    }\n    get duration() {\n        const duration = this.animation.effect?.getComputedTiming?.().duration || 0;\n        return millisecondsToSeconds(Number(duration));\n    }\n    get time() {\n        return millisecondsToSeconds(Number(this.animation.currentTime) || 0);\n    }\n    set time(newTime) {\n        this.finishedTime = null;\n        this.animation.currentTime = secondsToMilliseconds(newTime);\n    }\n    /**\n     * The playback speed of the animation.\n     * 1 = normal speed, 2 = double speed, 0.5 = half speed.\n     */\n    get speed() {\n        return this.animation.playbackRate;\n    }\n    set speed(newSpeed) {\n        // Allow backwards playback after finishing\n        if (newSpeed < 0)\n            this.finishedTime = null;\n        this.animation.playbackRate = newSpeed;\n    }\n    get state() {\n        return this.finishedTime !== null\n            ? \"finished\"\n            : this.animation.playState;\n    }\n    get startTime() {\n        return Number(this.animation.startTime);\n    }\n    set startTime(newStartTime) {\n        this.animation.startTime = newStartTime;\n    }\n    /**\n     * Attaches a timeline to the animation, for instance the `ScrollTimeline`.\n     */\n    attachTimeline({ timeline, observe }) {\n        if (this.allowFlatten) {\n            this.animation.effect?.updateTiming({ easing: \"linear\" });\n        }\n        this.animation.onfinish = null;\n        if (timeline && supportsScrollTimeline()) {\n            this.animation.timeline = timeline;\n            return noop;\n        }\n        else {\n            return observe(this);\n        }\n    }\n}\n\nexport { NativeAnimation };\n","import { supportsLinearEasing } from '../../../utils/supports/linear-easing.mjs';\nimport { isGenerator } from '../../generators/utils/is-generator.mjs';\n\nfunction applyGeneratorOptions({ type, ...options }) {\n    if (isGenerator(type) && supportsLinearEasing()) {\n        return type.applyToOptions(options);\n    }\n    else {\n        options.duration ?? (options.duration = 300);\n        options.ease ?? (options.ease = \"easeOut\");\n    }\n    return options;\n}\n\nexport { applyGeneratorOptions };\n","import { isCSSVar } from './is-css-var.mjs';\n\nfunction setStyle(element, name, value) {\n    isCSSVar(name)\n        ? element.style.setProperty(name, value)\n        : (element.style[name] = value);\n}\n\nexport { setStyle };\n","const isCSSVar = (name) => name.startsWith(\"--\");\n\nexport { isCSSVar };\n","import { anticipate, backInOut, circInOut } from 'motion-utils';\n\nconst unsupportedEasingFunctions = {\n    anticipate,\n    backInOut,\n    circInOut,\n};\nfunction isUnsupportedEase(key) {\n    return key in unsupportedEasingFunctions;\n}\nfunction replaceStringEasing(transition) {\n    if (typeof transition.ease === \"string\" &&\n        isUnsupportedEase(transition.ease)) {\n        transition.ease = unsupportedEasingFunctions[transition.ease];\n    }\n}\n\nexport { replaceStringEasing };\n","import { secondsToMilliseconds } from 'motion-utils';\nimport { JSAnimation } from './JSAnimation.mjs';\nimport { NativeAnimation } from './NativeAnimation.mjs';\nimport { replaceTransitionType } from './utils/replace-transition-type.mjs';\nimport { replaceStringEasing } from './waapi/utils/unsupported-easing.mjs';\n\n/**\n * 10ms is chosen here as it strikes a balance between smooth\n * results (more than one keyframe per frame at 60fps) and\n * keyframe quantity.\n */\nconst sampleDelta = 10; //ms\nclass NativeAnimationExtended extends NativeAnimation {\n    constructor(options) {\n        /**\n         * The base NativeAnimation function only supports a subset\n         * of Motion easings, and WAAPI also only supports some\n         * easing functions via string/cubic-bezier definitions.\n         *\n         * This function replaces those unsupported easing functions\n         * with a JS easing function. This will later get compiled\n         * to a linear() easing function.\n         */\n        replaceStringEasing(options);\n        /**\n         * Ensure we replace the transition type with a generator function\n         * before passing to WAAPI.\n         *\n         * TODO: Does this have a better home? It could be shared with\n         * JSAnimation.\n         */\n        replaceTransitionType(options);\n        super(options);\n        if (options.startTime) {\n            this.startTime = options.startTime;\n        }\n        this.options = options;\n    }\n    /**\n     * WAAPI doesn't natively have any interruption capabilities.\n     *\n     * Rather than read commited styles back out of the DOM, we can\n     * create a renderless JS animation and sample it twice to calculate\n     * its current value, \"previous\" value, and therefore allow\n     * Motion to calculate velocity for any subsequent animation.\n     */\n    updateMotionValue(value) {\n        const { motionValue, onUpdate, onComplete, element, ...options } = this.options;\n        if (!motionValue)\n            return;\n        if (value !== undefined) {\n            motionValue.set(value);\n            return;\n        }\n        const sampleAnimation = new JSAnimation({\n            ...options,\n            autoplay: false,\n        });\n        const sampleTime = secondsToMilliseconds(this.finishedTime ?? this.time);\n        motionValue.setWithVelocity(sampleAnimation.sample(sampleTime - sampleDelta).value, sampleAnimation.sample(sampleTime).value, sampleDelta);\n        sampleAnimation.stop();\n    }\n}\n\nexport { NativeAnimationExtended };\n","import { complex } from '../../value/types/complex/index.mjs';\n\n/**\n * Check if a value is animatable. Examples:\n *\n * : 100, \"100px\", \"#fff\"\n * : \"block\", \"url(2.jpg)\"\n * @param value\n *\n * @internal\n */\nconst isAnimatable = (value, name) => {\n    // If the list of keys that might be non-animatable grows, replace with Set\n    if (name === \"zIndex\")\n        return false;\n    // If it's a number or a keyframes array, we can animate it. We might at some point\n    // need to do a deep isAnimatable check of keyframes, or let Popmotion handle this,\n    // but for now lets leave it like this for performance reasons\n    if (typeof value === \"number\" || Array.isArray(value))\n        return true;\n    if (typeof value === \"string\" && // It's animatable if we have a string\n        (complex.test(value) || value === \"0\") && // And it contains numbers and/or colors\n        !value.startsWith(\"url(\") // Unless it starts with \"url(\"\n    ) {\n        return true;\n    }\n    return false;\n};\n\nexport { isAnimatable };\n","import { memo } from 'motion-utils';\n\n/**\n * A list of values that can be hardware-accelerated.\n */\nconst acceleratedValues = new Set([\n    \"opacity\",\n    \"clipPath\",\n    \"filter\",\n    \"transform\",\n    // TODO: Could be re-enabled now we have support for linear() easing\n    // \"background-color\"\n]);\nconst supportsWaapi = /*@__PURE__*/ memo(() => Object.hasOwnProperty.call(Element.prototype, \"animate\"));\nfunction supportsBrowserAnimation(options) {\n    const { motionValue, name, repeatDelay, repeatType, damping, type } = options;\n    const subject = motionValue?.owner?.current;\n    /**\n     * We use this check instead of isHTMLElement() because we explicitly\n     * **don't** want elements in different timing contexts (i.e. popups)\n     * to be accelerated, as it's not possible to sync these animations\n     * properly with those driven from the main window frameloop.\n     */\n    if (!(subject instanceof HTMLElement)) {\n        return false;\n    }\n    const { onUpdate, transformTemplate } = motionValue.owner.getProps();\n    return (supportsWaapi() &&\n        name &&\n        acceleratedValues.has(name) &&\n        (name !== \"transform\" || !transformTemplate) &&\n        /**\n         * If we're outputting values to onUpdate then we can't use WAAPI as there's\n         * no way to read the value from WAAPI every frame.\n         */\n        !onUpdate &&\n        !repeatDelay &&\n        repeatType !== \"mirror\" &&\n        damping !== 0 &&\n        type !== \"inertia\");\n}\n\nexport { supportsBrowserAnimation };\n","import { MotionGlobalConfig, noop } from 'motion-utils';\nimport { time } from '../frameloop/sync-time.mjs';\nimport { JSAnimation } from './JSAnimation.mjs';\nimport { getFinalKeyframe } from './keyframes/get-final.mjs';\nimport { KeyframeResolver, flushKeyframeResolvers } from './keyframes/KeyframesResolver.mjs';\nimport { NativeAnimationExtended } from './NativeAnimationExtended.mjs';\nimport { canAnimate } from './utils/can-animate.mjs';\nimport { WithPromise } from './utils/WithPromise.mjs';\nimport { supportsBrowserAnimation } from './waapi/supports/waapi.mjs';\n\n/**\n * Maximum time allowed between an animation being created and it being\n * resolved for us to use the latter as the start time.\n *\n * This is to ensure that while we prefer to \"start\" an animation as soon\n * as it's triggered, we also want to avoid a visual jump if there's a big delay\n * between these two moments.\n */\nconst MAX_RESOLVE_DELAY = 40;\nclass AsyncMotionValueAnimation extends WithPromise {\n    constructor({ autoplay = true, delay = 0, type = \"keyframes\", repeat = 0, repeatDelay = 0, repeatType = \"loop\", keyframes, name, motionValue, element, ...options }) {\n        super();\n        /**\n         * Bound to support return animation.stop pattern\n         */\n        this.stop = () => {\n            if (this._animation) {\n                this._animation.stop();\n                this.stopTimeline?.();\n            }\n            this.keyframeResolver?.cancel();\n        };\n        this.createdAt = time.now();\n        const optionsWithDefaults = {\n            autoplay,\n            delay,\n            type,\n            repeat,\n            repeatDelay,\n            repeatType,\n            name,\n            motionValue,\n            element,\n            ...options,\n        };\n        const KeyframeResolver$1 = element?.KeyframeResolver || KeyframeResolver;\n        this.keyframeResolver = new KeyframeResolver$1(keyframes, (resolvedKeyframes, finalKeyframe, forced) => this.onKeyframesResolved(resolvedKeyframes, finalKeyframe, optionsWithDefaults, !forced), name, motionValue, element);\n        this.keyframeResolver?.scheduleResolve();\n    }\n    onKeyframesResolved(keyframes, finalKeyframe, options, sync) {\n        this.keyframeResolver = undefined;\n        const { name, type, velocity, delay, isHandoff, onUpdate } = options;\n        this.resolvedAt = time.now();\n        /**\n         * If we can't animate this value with the resolved keyframes\n         * then we should complete it immediately.\n         */\n        if (!canAnimate(keyframes, name, type, velocity)) {\n            if (MotionGlobalConfig.instantAnimations || !delay) {\n                onUpdate?.(getFinalKeyframe(keyframes, options, finalKeyframe));\n            }\n            keyframes[0] = keyframes[keyframes.length - 1];\n            options.duration = 0;\n            options.repeat = 0;\n        }\n        /**\n         * Resolve startTime for the animation.\n         *\n         * This method uses the createdAt and resolvedAt to calculate the\n         * animation startTime. *Ideally*, we would use the createdAt time as t=0\n         * as the following frame would then be the first frame of the animation in\n         * progress, which would feel snappier.\n         *\n         * However, if there's a delay (main thread work) between the creation of\n         * the animation and the first commited frame, we prefer to use resolvedAt\n         * to avoid a sudden jump into the animation.\n         */\n        const startTime = sync\n            ? !this.resolvedAt\n                ? this.createdAt\n                : this.resolvedAt - this.createdAt > MAX_RESOLVE_DELAY\n                    ? this.resolvedAt\n                    : this.createdAt\n            : undefined;\n        const resolvedOptions = {\n            startTime,\n            finalKeyframe,\n            ...options,\n            keyframes,\n        };\n        /**\n         * Animate via WAAPI if possible. If this is a handoff animation, the optimised animation will be running via\n         * WAAPI. Therefore, this animation must be JS to ensure it runs \"under\" the\n         * optimised animation.\n         */\n        const animation = !isHandoff && supportsBrowserAnimation(resolvedOptions)\n            ? new NativeAnimationExtended({\n                ...resolvedOptions,\n                element: resolvedOptions.motionValue.owner.current,\n            })\n            : new JSAnimation(resolvedOptions);\n        animation.finished.then(() => this.notifyFinished()).catch(noop);\n        if (this.pendingTimeline) {\n            this.stopTimeline = animation.attachTimeline(this.pendingTimeline);\n            this.pendingTimeline = undefined;\n        }\n        this._animation = animation;\n    }\n    get finished() {\n        if (!this._animation) {\n            return this._finished;\n        }\n        else {\n            return this.animation.finished;\n        }\n    }\n    then(onResolve, _onReject) {\n        return this.finished.finally(onResolve).then(() => { });\n    }\n    get animation() {\n        if (!this._animation) {\n            this.keyframeResolver?.resume();\n            flushKeyframeResolvers();\n        }\n        return this._animation;\n    }\n    get duration() {\n        return this.animation.duration;\n    }\n    get time() {\n        return this.animation.time;\n    }\n    set time(newTime) {\n        this.animation.time = newTime;\n    }\n    get speed() {\n        return this.animation.speed;\n    }\n    get state() {\n        return this.animation.state;\n    }\n    set speed(newSpeed) {\n        this.animation.speed = newSpeed;\n    }\n    get startTime() {\n        return this.animation.startTime;\n    }\n    attachTimeline(timeline) {\n        if (this._animation) {\n            this.stopTimeline = this.animation.attachTimeline(timeline);\n        }\n        else {\n            this.pendingTimeline = timeline;\n        }\n        return () => this.stop();\n    }\n    play() {\n        this.animation.play();\n    }\n    pause() {\n        this.animation.pause();\n    }\n    complete() {\n        this.animation.complete();\n    }\n    cancel() {\n        if (this._animation) {\n            this.animation.cancel();\n        }\n        this.keyframeResolver?.cancel();\n    }\n}\n\nexport { AsyncMotionValueAnimation };\n","import { warning } from 'motion-utils';\nimport { isGenerator } from '../generators/utils/is-generator.mjs';\nimport { isAnimatable } from './is-animatable.mjs';\n\nfunction hasKeyframesChanged(keyframes) {\n    const current = keyframes[0];\n    if (keyframes.length === 1)\n        return true;\n    for (let i = 0; i < keyframes.length; i++) {\n        if (keyframes[i] !== current)\n            return true;\n    }\n}\nfunction canAnimate(keyframes, name, type, velocity) {\n    /**\n     * Check if we're able to animate between the start and end keyframes,\n     * and throw a warning if we're attempting to animate between one that's\n     * animatable and another that isn't.\n     */\n    const originKeyframe = keyframes[0];\n    if (originKeyframe === null)\n        return false;\n    /**\n     * These aren't traditionally animatable but we do support them.\n     * In future we could look into making this more generic or replacing\n     * this function with mix() === mixImmediate\n     */\n    if (name === \"display\" || name === \"visibility\")\n        return true;\n    const targetKeyframe = keyframes[keyframes.length - 1];\n    const isOriginAnimatable = isAnimatable(originKeyframe, name);\n    const isTargetAnimatable = isAnimatable(targetKeyframe, name);\n    warning(isOriginAnimatable === isTargetAnimatable, `You are trying to animate ${name} from \"${originKeyframe}\" to \"${targetKeyframe}\". \"${isOriginAnimatable ? targetKeyframe : originKeyframe}\" is not an animatable value.`, \"value-not-animatable\");\n    // Always skip if any of these are true\n    if (!isOriginAnimatable || !isTargetAnimatable) {\n        return false;\n    }\n    return (hasKeyframesChanged(keyframes) ||\n        ((type === \"spring\" || isGenerator(type)) && velocity));\n}\n\nexport { canAnimate };\n","import { invariant, isNumericalString } from 'motion-utils';\nimport { isCSSVariableToken } from './is-css-variable.mjs';\n\n/**\n * Parse Framer's special CSS variable format into a CSS token and a fallback.\n *\n * ```\n * `var(--foo, #fff)` => [`--foo`, '#fff']\n * ```\n *\n * @param current\n */\nconst splitCSSVariableRegex = \n// eslint-disable-next-line redos-detector/no-unsafe-regex -- false positive, as it can match a lot of words\n/^var\\(--(?:([\\w-]+)|([\\w-]+), ?([a-zA-Z\\d ()%#.,-]+))\\)/u;\nfunction parseCSSVariable(current) {\n    const match = splitCSSVariableRegex.exec(current);\n    if (!match)\n        return [,];\n    const [, token1, token2, fallback] = match;\n    return [`--${token1 ?? token2}`, fallback];\n}\nconst maxDepth = 4;\nfunction getVariableValue(current, element, depth = 1) {\n    invariant(depth <= maxDepth, `Max CSS variable fallback depth detected in property \"${current}\". This may indicate a circular fallback dependency.`, \"max-css-var-depth\");\n    const [token, fallback] = parseCSSVariable(current);\n    // No CSS variable detected\n    if (!token)\n        return;\n    // Attempt to read this CSS variable off the element\n    const resolved = window.getComputedStyle(element).getPropertyValue(token);\n    if (resolved) {\n        const trimmed = resolved.trim();\n        return isNumericalString(trimmed) ? parseFloat(trimmed) : trimmed;\n    }\n    return isCSSVariableToken(fallback)\n        ? getVariableValue(fallback, element, depth + 1)\n        : fallback;\n}\n\nexport { getVariableValue, parseCSSVariable };\n","function getValueTransition(transition, key) {\n    return (transition?.[key] ??\n        transition?.[\"default\"] ??\n        transition);\n}\n\nexport { getValueTransition };\n","import { transformPropOrder } from './keys-transform.mjs';\n\nconst positionalKeys = new Set([\n    \"width\",\n    \"height\",\n    \"top\",\n    \"left\",\n    \"right\",\n    \"bottom\",\n    ...transformPropOrder,\n]);\n\nexport { positionalKeys };\n","/**\n * Tests a provided value against a ValueType\n */\nconst testValueType = (v) => (type) => type.test(v);\n\nexport { testValueType };\n","import { auto } from './auto.mjs';\nimport { number } from './numbers/index.mjs';\nimport { px, percent, degrees, vw, vh } from './numbers/units.mjs';\nimport { testValueType } from './test.mjs';\n\n/**\n * A list of value types commonly used for dimensions\n */\nconst dimensionValueTypes = [number, px, percent, degrees, vw, vh, auto];\n/**\n * Tests a dimensional value against the list of dimension ValueTypes\n */\nconst findDimensionValueType = (v) => dimensionValueTypes.find(testValueType(v));\n\nexport { dimensionValueTypes, findDimensionValueType };\n","/**\n * ValueType for \"auto\"\n */\nconst auto = {\n    test: (v) => v === \"auto\",\n    parse: (v) => v,\n};\n\nexport { auto };\n","import { isZeroValueString } from 'motion-utils';\n\nfunction isNone(value) {\n    if (typeof value === \"number\") {\n        return value === 0;\n    }\n    else if (value !== null) {\n        return value === \"none\" || value === \"0\" || isZeroValueString(value);\n    }\n    else {\n        return true;\n    }\n}\n\nexport { isNone };\n","import { complex } from './index.mjs';\nimport { floatRegex } from '../utils/float-regex.mjs';\n\n/**\n * Properties that should default to 1 or 100%\n */\nconst maxDefaults = new Set([\"brightness\", \"contrast\", \"saturate\", \"opacity\"]);\nfunction applyDefaultFilter(v) {\n    const [name, value] = v.slice(0, -1).split(\"(\");\n    if (name === \"drop-shadow\")\n        return v;\n    const [number] = value.match(floatRegex) || [];\n    if (!number)\n        return v;\n    const unit = value.replace(number, \"\");\n    let defaultValue = maxDefaults.has(name) ? 1 : 0;\n    if (number !== value)\n        defaultValue *= 100;\n    return name + \"(\" + defaultValue + unit + \")\";\n}\nconst functionRegex = /\\b([a-z-]*)\\(.*?\\)/gu;\nconst filter = {\n    ...complex,\n    getAnimatableNone: (v) => {\n        const functions = v.match(functionRegex);\n        return functions ? functions.map(applyDefaultFilter).join(\" \") : v;\n    },\n};\n\nexport { filter };\n","import { number } from './numbers/index.mjs';\n\nconst int = {\n    ...number,\n    transform: Math.round,\n};\n\nexport { int };\n","import { int } from '../int.mjs';\nimport { alpha } from '../numbers/index.mjs';\nimport { px } from '../numbers/units.mjs';\nimport { transformValueTypes } from './transform.mjs';\n\nconst numberValueTypes = {\n    // Border props\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    // Positioning props\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    // Spacing props\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    // Misc\n    backgroundPositionX: px,\n    backgroundPositionY: px,\n    ...transformValueTypes,\n    zIndex: int,\n    // SVG\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int,\n};\n\nexport { numberValueTypes };\n","import { scale, alpha } from '../numbers/index.mjs';\nimport { degrees, px, progressPercentage } from '../numbers/units.mjs';\n\nconst transformValueTypes = {\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    transformPerspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n};\n\nexport { transformValueTypes };\n","import { color } from '../color/index.mjs';\nimport { filter } from '../complex/filter.mjs';\nimport { numberValueTypes } from './number.mjs';\n\n/**\n * A map of default value types for common values\n */\nconst defaultValueTypes = {\n    ...numberValueTypes,\n    // Color props\n    color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    // Border props\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    filter,\n    WebkitFilter: filter,\n};\n/**\n * Gets the default ValueType for the provided value key\n */\nconst getDefaultValueType = (key) => defaultValueTypes[key];\n\nexport { defaultValueTypes, getDefaultValueType };\n","import { complex } from '../complex/index.mjs';\nimport { filter } from '../complex/filter.mjs';\nimport { getDefaultValueType } from '../maps/defaults.mjs';\n\nfunction getAnimatableNone(key, value) {\n    let defaultValueType = getDefaultValueType(key);\n    if (defaultValueType !== filter)\n        defaultValueType = complex;\n    // If value is not recognised as animatable, ie \"none\", create an animatable version origin based on the target\n    return defaultValueType.getAnimatableNone\n        ? defaultValueType.getAnimatableNone(value)\n        : undefined;\n}\n\nexport { getAnimatableNone };\n","import { analyseComplexValue } from '../../../value/types/complex/index.mjs';\nimport { getAnimatableNone } from '../../../value/types/utils/animatable-none.mjs';\n\n/**\n * If we encounter keyframes like \"none\" or \"0\" and we also have keyframes like\n * \"#fff\" or \"200px 200px\" we want to find a keyframe to serve as a template for\n * the \"none\" keyframes. In this case \"#fff\" or \"200px 200px\" - then these get turned into\n * zero equivalents, i.e. \"#fff0\" or \"0px 0px\".\n */\nconst invalidTemplates = new Set([\"auto\", \"none\", \"0\"]);\nfunction makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name) {\n    let i = 0;\n    let animatableTemplate = undefined;\n    while (i < unresolvedKeyframes.length && !animatableTemplate) {\n        const keyframe = unresolvedKeyframes[i];\n        if (typeof keyframe === \"string\" &&\n            !invalidTemplates.has(keyframe) &&\n            analyseComplexValue(keyframe).values.length) {\n            animatableTemplate = unresolvedKeyframes[i];\n        }\n        i++;\n    }\n    if (animatableTemplate && name) {\n        for (const noneIndex of noneKeyframeIndexes) {\n            unresolvedKeyframes[noneIndex] = getAnimatableNone(name, animatableTemplate);\n        }\n    }\n}\n\nexport { makeNoneKeyframesAnimatable };\n","import { positionalKeys } from '../../render/utils/keys-position.mjs';\nimport { findDimensionValueType } from '../../value/types/dimensions.mjs';\nimport { getVariableValue } from '../utils/css-variables-conversion.mjs';\nimport { isCSSVariableToken } from '../utils/is-css-variable.mjs';\nimport { KeyframeResolver } from './KeyframesResolver.mjs';\nimport { isNone } from './utils/is-none.mjs';\nimport { makeNoneKeyframesAnimatable } from './utils/make-none-animatable.mjs';\nimport { isNumOrPxType, positionalValues } from './utils/unit-conversion.mjs';\n\nclass DOMKeyframesResolver extends KeyframeResolver {\n    constructor(unresolvedKeyframes, onComplete, name, motionValue, element) {\n        super(unresolvedKeyframes, onComplete, name, motionValue, element, true);\n    }\n    readKeyframes() {\n        const { unresolvedKeyframes, element, name } = this;\n        if (!element || !element.current)\n            return;\n        super.readKeyframes();\n        /**\n         * If any keyframe is a CSS variable, we need to find its value by sampling the element\n         */\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\n            let keyframe = unresolvedKeyframes[i];\n            if (typeof keyframe === \"string\") {\n                keyframe = keyframe.trim();\n                if (isCSSVariableToken(keyframe)) {\n                    const resolved = getVariableValue(keyframe, element.current);\n                    if (resolved !== undefined) {\n                        unresolvedKeyframes[i] = resolved;\n                    }\n                    if (i === unresolvedKeyframes.length - 1) {\n                        this.finalKeyframe = keyframe;\n                    }\n                }\n            }\n        }\n        /**\n         * Resolve \"none\" values. We do this potentially twice - once before and once after measuring keyframes.\n         * This could be seen as inefficient but it's a trade-off to avoid measurements in more situations, which\n         * have a far bigger performance impact.\n         */\n        this.resolveNoneKeyframes();\n        /**\n         * Check to see if unit type has changed. If so schedule jobs that will\n         * temporarily set styles to the destination keyframes.\n         * Skip if we have more than two keyframes or this isn't a positional value.\n         * TODO: We can throw if there are multiple keyframes and the value type changes.\n         */\n        if (!positionalKeys.has(name) || unresolvedKeyframes.length !== 2) {\n            return;\n        }\n        const [origin, target] = unresolvedKeyframes;\n        const originType = findDimensionValueType(origin);\n        const targetType = findDimensionValueType(target);\n        /**\n         * Either we don't recognise these value types or we can animate between them.\n         */\n        if (originType === targetType)\n            return;\n        /**\n         * If both values are numbers or pixels, we can animate between them by\n         * converting them to numbers.\n         */\n        if (isNumOrPxType(originType) && isNumOrPxType(targetType)) {\n            for (let i = 0; i < unresolvedKeyframes.length; i++) {\n                const value = unresolvedKeyframes[i];\n                if (typeof value === \"string\") {\n                    unresolvedKeyframes[i] = parseFloat(value);\n                }\n            }\n        }\n        else if (positionalValues[name]) {\n            /**\n             * Else, the only way to resolve this is by measuring the element.\n             */\n            this.needsMeasurement = true;\n        }\n    }\n    resolveNoneKeyframes() {\n        const { unresolvedKeyframes, name } = this;\n        const noneKeyframeIndexes = [];\n        for (let i = 0; i < unresolvedKeyframes.length; i++) {\n            if (unresolvedKeyframes[i] === null ||\n                isNone(unresolvedKeyframes[i])) {\n                noneKeyframeIndexes.push(i);\n            }\n        }\n        if (noneKeyframeIndexes.length) {\n            makeNoneKeyframesAnimatable(unresolvedKeyframes, noneKeyframeIndexes, name);\n        }\n    }\n    measureInitialState() {\n        const { element, unresolvedKeyframes, name } = this;\n        if (!element || !element.current)\n            return;\n        if (name === \"height\") {\n            this.suspendedScrollY = window.pageYOffset;\n        }\n        this.measuredOrigin = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));\n        unresolvedKeyframes[0] = this.measuredOrigin;\n        // Set final key frame to measure after next render\n        const measureKeyframe = unresolvedKeyframes[unresolvedKeyframes.length - 1];\n        if (measureKeyframe !== undefined) {\n            element.getValue(name, measureKeyframe).jump(measureKeyframe, false);\n        }\n    }\n    measureEndState() {\n        const { element, name, unresolvedKeyframes } = this;\n        if (!element || !element.current)\n            return;\n        const value = element.getValue(name);\n        value && value.jump(this.measuredOrigin, false);\n        const finalKeyframeIndex = unresolvedKeyframes.length - 1;\n        const finalKeyframe = unresolvedKeyframes[finalKeyframeIndex];\n        unresolvedKeyframes[finalKeyframeIndex] = positionalValues[name](element.measureViewportBox(), window.getComputedStyle(element.current));\n        if (finalKeyframe !== null && this.finalKeyframe === undefined) {\n            this.finalKeyframe = finalKeyframe;\n        }\n        // If we removed transform values, reapply them before the next render\n        if (this.removedTransforms?.length) {\n            this.removedTransforms.forEach(([unsetTransformName, unsetTransformValue]) => {\n                element\n                    .getValue(unsetTransformName)\n                    .set(unsetTransformValue);\n            });\n        }\n        this.resolveNoneKeyframes();\n    }\n}\n\nexport { DOMKeyframesResolver };\n","/**\n * Provided a value and a ValueType, returns the value as that value type.\n */\nconst getValueAsType = (value, type) => {\n    return type && typeof value === \"number\"\n        ? type.transform(value)\n        : value;\n};\n\nexport { getValueAsType };\n","import { isObject } from 'motion-utils';\n\n/**\n * Checks if an element is an HTML element in a way\n * that works across iframes\n */\nfunction isHTMLElement(element) {\n    return isObject(element) && \"offsetHeight\" in element;\n}\n\nexport { isHTMLElement };\n","import { warnOnce, SubscriptionManager, velocityPerSecond } from 'motion-utils';\nimport { time } from '../frameloop/sync-time.mjs';\nimport { frame } from '../frameloop/frame.mjs';\n\n/**\n * Maximum time between the value of two frames, beyond which we\n * assume the velocity has since been 0.\n */\nconst MAX_VELOCITY_DELTA = 30;\nconst isFloat = (value) => {\n    return !isNaN(parseFloat(value));\n};\nconst collectMotionValues = {\n    current: undefined,\n};\n/**\n * `MotionValue` is used to track the state and velocity of motion values.\n *\n * @public\n */\nclass MotionValue {\n    /**\n     * @param init - The initiating value\n     * @param config - Optional configuration options\n     *\n     * -  `transformer`: A function to transform incoming values with.\n     */\n    constructor(init, options = {}) {\n        /**\n         * Tracks whether this value can output a velocity. Currently this is only true\n         * if the value is numerical, but we might be able to widen the scope here and support\n         * other value types.\n         *\n         * @internal\n         */\n        this.canTrackVelocity = null;\n        /**\n         * An object containing a SubscriptionManager for each active event.\n         */\n        this.events = {};\n        this.updateAndNotify = (v, render = true) => {\n            const currentTime = time.now();\n            /**\n             * If we're updating the value during another frame or eventloop\n             * than the previous frame, then the we set the previous frame value\n             * to current.\n             */\n            if (this.updatedAt !== currentTime) {\n                this.setPrevFrameValue();\n            }\n            this.prev = this.current;\n            this.setCurrent(v);\n            // Update update subscribers\n            if (this.current !== this.prev) {\n                this.events.change?.notify(this.current);\n                if (this.dependents) {\n                    for (const dependent of this.dependents) {\n                        dependent.dirty();\n                    }\n                }\n            }\n            // Update render subscribers\n            if (render) {\n                this.events.renderRequest?.notify(this.current);\n            }\n        };\n        this.hasAnimated = false;\n        this.setCurrent(init);\n        this.owner = options.owner;\n    }\n    setCurrent(current) {\n        this.current = current;\n        this.updatedAt = time.now();\n        if (this.canTrackVelocity === null && current !== undefined) {\n            this.canTrackVelocity = isFloat(this.current);\n        }\n    }\n    setPrevFrameValue(prevFrameValue = this.current) {\n        this.prevFrameValue = prevFrameValue;\n        this.prevUpdatedAt = this.updatedAt;\n    }\n    /**\n     * Adds a function that will be notified when the `MotionValue` is updated.\n     *\n     * It returns a function that, when called, will cancel the subscription.\n     *\n     * When calling `onChange` inside a React component, it should be wrapped with the\n     * `useEffect` hook. As it returns an unsubscribe function, this should be returned\n     * from the `useEffect` function to ensure you don't add duplicate subscribers..\n     *\n     * ```jsx\n     * export const MyComponent = () => {\n     *   const x = useMotionValue(0)\n     *   const y = useMotionValue(0)\n     *   const opacity = useMotionValue(1)\n     *\n     *   useEffect(() => {\n     *     function updateOpacity() {\n     *       const maxXY = Math.max(x.get(), y.get())\n     *       const newOpacity = transform(maxXY, [0, 100], [1, 0])\n     *       opacity.set(newOpacity)\n     *     }\n     *\n     *     const unsubscribeX = x.on(\"change\", updateOpacity)\n     *     const unsubscribeY = y.on(\"change\", updateOpacity)\n     *\n     *     return () => {\n     *       unsubscribeX()\n     *       unsubscribeY()\n     *     }\n     *   }, [])\n     *\n     *   return <motion.div style={{ x }} />\n     * }\n     * ```\n     *\n     * @param subscriber - A function that receives the latest value.\n     * @returns A function that, when called, will cancel this subscription.\n     *\n     * @deprecated\n     */\n    onChange(subscription) {\n        if (process.env.NODE_ENV !== \"production\") {\n            warnOnce(false, `value.onChange(callback) is deprecated. Switch to value.on(\"change\", callback).`);\n        }\n        return this.on(\"change\", subscription);\n    }\n    on(eventName, callback) {\n        if (!this.events[eventName]) {\n            this.events[eventName] = new SubscriptionManager();\n        }\n        const unsubscribe = this.events[eventName].add(callback);\n        if (eventName === \"change\") {\n            return () => {\n                unsubscribe();\n                /**\n                 * If we have no more change listeners by the start\n                 * of the next frame, stop active animations.\n                 */\n                frame.read(() => {\n                    if (!this.events.change.getSize()) {\n                        this.stop();\n                    }\n                });\n            };\n        }\n        return unsubscribe;\n    }\n    clearListeners() {\n        for (const eventManagers in this.events) {\n            this.events[eventManagers].clear();\n        }\n    }\n    /**\n     * Attaches a passive effect to the `MotionValue`.\n     */\n    attach(passiveEffect, stopPassiveEffect) {\n        this.passiveEffect = passiveEffect;\n        this.stopPassiveEffect = stopPassiveEffect;\n    }\n    /**\n     * Sets the state of the `MotionValue`.\n     *\n     * @remarks\n     *\n     * ```jsx\n     * const x = useMotionValue(0)\n     * x.set(10)\n     * ```\n     *\n     * @param latest - Latest value to set.\n     * @param render - Whether to notify render subscribers. Defaults to `true`\n     *\n     * @public\n     */\n    set(v, render = true) {\n        if (!render || !this.passiveEffect) {\n            this.updateAndNotify(v, render);\n        }\n        else {\n            this.passiveEffect(v, this.updateAndNotify);\n        }\n    }\n    setWithVelocity(prev, current, delta) {\n        this.set(current);\n        this.prev = undefined;\n        this.prevFrameValue = prev;\n        this.prevUpdatedAt = this.updatedAt - delta;\n    }\n    /**\n     * Set the state of the `MotionValue`, stopping any active animations,\n     * effects, and resets velocity to `0`.\n     */\n    jump(v, endAnimation = true) {\n        this.updateAndNotify(v);\n        this.prev = v;\n        this.prevUpdatedAt = this.prevFrameValue = undefined;\n        endAnimation && this.stop();\n        if (this.stopPassiveEffect)\n            this.stopPassiveEffect();\n    }\n    dirty() {\n        this.events.change?.notify(this.current);\n    }\n    addDependent(dependent) {\n        if (!this.dependents) {\n            this.dependents = new Set();\n        }\n        this.dependents.add(dependent);\n    }\n    removeDependent(dependent) {\n        if (this.dependents) {\n            this.dependents.delete(dependent);\n        }\n    }\n    /**\n     * Returns the latest state of `MotionValue`\n     *\n     * @returns - The latest state of `MotionValue`\n     *\n     * @public\n     */\n    get() {\n        if (collectMotionValues.current) {\n            collectMotionValues.current.push(this);\n        }\n        return this.current;\n    }\n    /**\n     * @public\n     */\n    getPrevious() {\n        return this.prev;\n    }\n    /**\n     * Returns the latest velocity of `MotionValue`\n     *\n     * @returns - The latest velocity of `MotionValue`. Returns `0` if the state is non-numerical.\n     *\n     * @public\n     */\n    getVelocity() {\n        const currentTime = time.now();\n        if (!this.canTrackVelocity ||\n            this.prevFrameValue === undefined ||\n            currentTime - this.updatedAt > MAX_VELOCITY_DELTA) {\n            return 0;\n        }\n        const delta = Math.min(this.updatedAt - this.prevUpdatedAt, MAX_VELOCITY_DELTA);\n        // Casts because of parseFloat's poor typing\n        return velocityPerSecond(parseFloat(this.current) -\n            parseFloat(this.prevFrameValue), delta);\n    }\n    /**\n     * Registers a new animation to control this `MotionValue`. Only one\n     * animation can drive a `MotionValue` at one time.\n     *\n     * ```jsx\n     * value.start()\n     * ```\n     *\n     * @param animation - A function that starts the provided animation\n     */\n    start(startAnimation) {\n        this.stop();\n        return new Promise((resolve) => {\n            this.hasAnimated = true;\n            this.animation = startAnimation(resolve);\n            if (this.events.animationStart) {\n                this.events.animationStart.notify();\n            }\n        }).then(() => {\n            if (this.events.animationComplete) {\n                this.events.animationComplete.notify();\n            }\n            this.clearAnimation();\n        });\n    }\n    /**\n     * Stop the currently active animation.\n     *\n     * @public\n     */\n    stop() {\n        if (this.animation) {\n            this.animation.stop();\n            if (this.events.animationCancel) {\n                this.events.animationCancel.notify();\n            }\n        }\n        this.clearAnimation();\n    }\n    /**\n     * Returns `true` if this value is currently animating.\n     *\n     * @public\n     */\n    isAnimating() {\n        return !!this.animation;\n    }\n    clearAnimation() {\n        delete this.animation;\n    }\n    /**\n     * Destroy and clean up subscribers to this `MotionValue`.\n     *\n     * The `MotionValue` hooks like `useMotionValue` and `useTransform` automatically\n     * handle the lifecycle of the returned `MotionValue`, so this method is only necessary if you've manually\n     * created a `MotionValue` via the `motionValue` function.\n     *\n     * @public\n     */\n    destroy() {\n        this.dependents?.clear();\n        this.events.destroy?.notify();\n        this.clearListeners();\n        this.stop();\n        if (this.stopPassiveEffect) {\n            this.stopPassiveEffect();\n        }\n    }\n}\nfunction motionValue(init, options) {\n    return new MotionValue(init, options);\n}\n\nexport { MotionValue, collectMotionValues, motionValue };\n","import { createRenderBatcher } from './batcher.mjs';\n\nconst { schedule: microtask, cancel: cancelMicrotask } = \n/* @__PURE__ */ createRenderBatcher(queueMicrotask, false);\n\nexport { cancelMicrotask, microtask };\n","const isDragging = {\n    x: false,\n    y: false,\n};\nfunction isDragActive() {\n    return isDragging.x || isDragging.y;\n}\n\nexport { isDragActive, isDragging };\n","import { isDragging } from './is-active.mjs';\n\nfunction setDragLock(axis) {\n    if (axis === \"x\" || axis === \"y\") {\n        if (isDragging[axis]) {\n            return null;\n        }\n        else {\n            isDragging[axis] = true;\n            return () => {\n                isDragging[axis] = false;\n            };\n        }\n    }\n    else {\n        if (isDragging.x || isDragging.y) {\n            return null;\n        }\n        else {\n            isDragging.x = isDragging.y = true;\n            return () => {\n                isDragging.x = isDragging.y = false;\n            };\n        }\n    }\n}\n\nexport { setDragLock };\n","import { resolveElements } from '../../utils/resolve-elements.mjs';\n\nfunction setupGesture(elementOrSelector, options) {\n    const elements = resolveElements(elementOrSelector);\n    const gestureAbortController = new AbortController();\n    const eventOptions = {\n        passive: true,\n        ...options,\n        signal: gestureAbortController.signal,\n    };\n    const cancel = () => gestureAbortController.abort();\n    return [elements, eventOptions, cancel];\n}\n\nexport { setupGesture };\n","function resolveElements(elementOrSelector, scope, selectorCache) {\n    if (elementOrSelector instanceof EventTarget) {\n        return [elementOrSelector];\n    }\n    else if (typeof elementOrSelector === \"string\") {\n        let root = document;\n        if (scope) {\n            root = scope.current;\n        }\n        const elements = selectorCache?.[elementOrSelector] ??\n            root.querySelectorAll(elementOrSelector);\n        return elements ? Array.from(elements) : [];\n    }\n    return Array.from(elementOrSelector);\n}\n\nexport { resolveElements };\n","import { isDragActive } from './drag/state/is-active.mjs';\nimport { setupGesture } from './utils/setup.mjs';\n\nfunction isValidHover(event) {\n    return !(event.pointerType === \"touch\" || isDragActive());\n}\n/**\n * Create a hover gesture. hover() is different to .addEventListener(\"pointerenter\")\n * in that it has an easier syntax, filters out polyfilled touch events, interoperates\n * with drag gestures, and automatically removes the \"pointerennd\" event listener when the hover ends.\n *\n * @public\n */\nfunction hover(elementOrSelector, onHoverStart, options = {}) {\n    const [elements, eventOptions, cancel] = setupGesture(elementOrSelector, options);\n    const onPointerEnter = (enterEvent) => {\n        if (!isValidHover(enterEvent))\n            return;\n        const { target } = enterEvent;\n        const onHoverEnd = onHoverStart(target, enterEvent);\n        if (typeof onHoverEnd !== \"function\" || !target)\n            return;\n        const onPointerLeave = (leaveEvent) => {\n            if (!isValidHover(leaveEvent))\n                return;\n            onHoverEnd(leaveEvent);\n            target.removeEventListener(\"pointerleave\", onPointerLeave);\n        };\n        target.addEventListener(\"pointerleave\", onPointerLeave, eventOptions);\n    };\n    elements.forEach((element) => {\n        element.addEventListener(\"pointerenter\", onPointerEnter, eventOptions);\n    });\n    return cancel;\n}\n\nexport { hover };\n","/**\n * Recursively traverse up the tree to check whether the provided child node\n * is the parent or a descendant of it.\n *\n * @param parent - Element to find\n * @param child - Element to test against parent\n */\nconst isNodeOrChild = (parent, child) => {\n    if (!child) {\n        return false;\n    }\n    else if (parent === child) {\n        return true;\n    }\n    else {\n        return isNodeOrChild(parent, child.parentElement);\n    }\n};\n\nexport { isNodeOrChild };\n","const isPrimaryPointer = (event) => {\n    if (event.pointerType === \"mouse\") {\n        return typeof event.button !== \"number\" || event.button <= 0;\n    }\n    else {\n        /**\n         * isPrimary is true for all mice buttons, whereas every touch point\n         * is regarded as its own input. So subsequent concurrent touch points\n         * will be false.\n         *\n         * Specifically match against false here as incomplete versions of\n         * PointerEvents in very old browser might have it set as undefined.\n         */\n        return event.isPrimary !== false;\n    }\n};\n\nexport { isPrimaryPointer };\n","const focusableElements = new Set([\n    \"BUTTON\",\n    \"INPUT\",\n    \"SELECT\",\n    \"TEXTAREA\",\n    \"A\",\n]);\nfunction isElementKeyboardAccessible(element) {\n    return (focusableElements.has(element.tagName) ||\n        element.tabIndex !== -1);\n}\n\nexport { isElementKeyboardAccessible };\n","const isPressing = new WeakSet();\n\nexport { isPressing };\n","import { isPressing } from './state.mjs';\n\n/**\n * Filter out events that are not \"Enter\" keys.\n */\nfunction filterEvents(callback) {\n    return (event) => {\n        if (event.key !== \"Enter\")\n            return;\n        callback(event);\n    };\n}\nfunction firePointerEvent(target, type) {\n    target.dispatchEvent(new PointerEvent(\"pointer\" + type, { isPrimary: true, bubbles: true }));\n}\nconst enableKeyboardPress = (focusEvent, eventOptions) => {\n    const element = focusEvent.currentTarget;\n    if (!element)\n        return;\n    const handleKeydown = filterEvents(() => {\n        if (isPressing.has(element))\n            return;\n        firePointerEvent(element, \"down\");\n        const handleKeyup = filterEvents(() => {\n            firePointerEvent(element, \"up\");\n        });\n        const handleBlur = () => firePointerEvent(element, \"cancel\");\n        element.addEventListener(\"keyup\", handleKeyup, eventOptions);\n        element.addEventListener(\"blur\", handleBlur, eventOptions);\n    });\n    element.addEventListener(\"keydown\", handleKeydown, eventOptions);\n    /**\n     * Add an event listener that fires on blur to remove the keydown events.\n     */\n    element.addEventListener(\"blur\", () => element.removeEventListener(\"keydown\", handleKeydown), eventOptions);\n};\n\nexport { enableKeyboardPress };\n","import { isHTMLElement } from '../../utils/is-html-element.mjs';\nimport { isDragActive } from '../drag/state/is-active.mjs';\nimport { isNodeOrChild } from '../utils/is-node-or-child.mjs';\nimport { isPrimaryPointer } from '../utils/is-primary-pointer.mjs';\nimport { setupGesture } from '../utils/setup.mjs';\nimport { isElementKeyboardAccessible } from './utils/is-keyboard-accessible.mjs';\nimport { enableKeyboardPress } from './utils/keyboard.mjs';\nimport { isPressing } from './utils/state.mjs';\n\n/**\n * Filter out events that are not primary pointer events, or are triggering\n * while a Motion gesture is active.\n */\nfunction isValidPressEvent(event) {\n    return isPrimaryPointer(event) && !isDragActive();\n}\n/**\n * Create a press gesture.\n *\n * Press is different to `\"pointerdown\"`, `\"pointerup\"` in that it\n * automatically filters out secondary pointer events like right\n * click and multitouch.\n *\n * It also adds accessibility support for keyboards, where\n * an element with a press gesture will receive focus and\n *  trigger on Enter `\"keydown\"` and `\"keyup\"` events.\n *\n * This is different to a browser's `\"click\"` event, which does\n * respond to keyboards but only for the `\"click\"` itself, rather\n * than the press start and end/cancel. The element also needs\n * to be focusable for this to work, whereas a press gesture will\n * make an element focusable by default.\n *\n * @public\n */\nfunction press(targetOrSelector, onPressStart, options = {}) {\n    const [targets, eventOptions, cancelEvents] = setupGesture(targetOrSelector, options);\n    const startPress = (startEvent) => {\n        const target = startEvent.currentTarget;\n        if (!isValidPressEvent(startEvent))\n            return;\n        isPressing.add(target);\n        const onPressEnd = onPressStart(target, startEvent);\n        const onPointerEnd = (endEvent, success) => {\n            window.removeEventListener(\"pointerup\", onPointerUp);\n            window.removeEventListener(\"pointercancel\", onPointerCancel);\n            if (isPressing.has(target)) {\n                isPressing.delete(target);\n            }\n            if (!isValidPressEvent(endEvent)) {\n                return;\n            }\n            if (typeof onPressEnd === \"function\") {\n                onPressEnd(endEvent, { success });\n            }\n        };\n        const onPointerUp = (upEvent) => {\n            onPointerEnd(upEvent, target === window ||\n                target === document ||\n                options.useGlobalTarget ||\n                isNodeOrChild(target, upEvent.target));\n        };\n        const onPointerCancel = (cancelEvent) => {\n            onPointerEnd(cancelEvent, false);\n        };\n        window.addEventListener(\"pointerup\", onPointerUp, eventOptions);\n        window.addEventListener(\"pointercancel\", onPointerCancel, eventOptions);\n    };\n    targets.forEach((target) => {\n        const pointerDownTarget = options.useGlobalTarget ? window : target;\n        pointerDownTarget.addEventListener(\"pointerdown\", startPress, eventOptions);\n        if (isHTMLElement(target)) {\n            target.addEventListener(\"focus\", (event) => enableKeyboardPress(event, eventOptions));\n            if (!isElementKeyboardAccessible(target) &&\n                !target.hasAttribute(\"tabindex\")) {\n                target.tabIndex = 0;\n            }\n        }\n    });\n    return cancelEvents;\n}\n\nexport { press };\n","import { isObject } from 'motion-utils';\n\n/**\n * Checks if an element is an SVG element in a way\n * that works across iframes\n */\nfunction isSVGElement(element) {\n    return isObject(element) && \"ownerSVGElement\" in element;\n}\n\nexport { isSVGElement };\n","import { isSVGElement } from './is-svg-element.mjs';\n\n/**\n * Checks if an element is specifically an SVGSVGElement (the root SVG element)\n * in a way that works across iframes\n */\nfunction isSVGSVGElement(element) {\n    return isSVGElement(element) && element.tagName === \"svg\";\n}\n\nexport { isSVGSVGElement };\n","const isMotionValue = (value) => Boolean(value && value.getVelocity);\n\nexport { isMotionValue };\n","import { color } from '../color/index.mjs';\nimport { complex } from '../complex/index.mjs';\nimport { dimensionValueTypes } from '../dimensions.mjs';\nimport { testValueType } from '../test.mjs';\n\n/**\n * A list of all ValueTypes\n */\nconst valueTypes = [...dimensionValueTypes, color, complex];\n/**\n * Tests a value against the list of ValueTypes\n */\nconst findValueType = (v) => valueTypes.find(testValueType(v));\n\nexport { findValueType };\n","import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Search, X, TrendingUp } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { useProducts } from '../../contexts/ProductContext';\r\n\r\nimport { Product } from '../../types';\r\n\r\ninterface SearchOverlayProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const SearchOverlay: React.FC<SearchOverlayProps> = ({ isOpen, onClose }) => {\r\n  const [query, setQuery] = useState('');\r\n  const { products } = useProducts();\r\n\r\n  const [suggestions, setSuggestions] = useState<Product[]>([]);\r\n\r\n  useEffect(() => {\r\n    if (query.length > 1) {\r\n      const filtered = products\r\n        .filter(p => p.name.toLowerCase().includes(query.toLowerCase()))\r\n        .slice(0, 5);\r\n      setSuggestions(filtered);\r\n    } else {\r\n      setSuggestions([]);\r\n    }\r\n  }, [query, products]);\r\n\r\n  const trendingSearches = ['Wireless Headphones', 'Smart Watch', 'Running Shoes', 'Organic Coffee'];\r\n\r\n  return (\r\n    <>\r\n      {isOpen && (\r\n        <motion.div\r\n          initial={{ opacity: 0 }}\r\n          animate={{ opacity: 1 }}\r\n          exit={{ opacity: 0 }}\r\n          className=\"fixed inset-0 z-[100] bg-black/70 backdrop-blur-xl\"\r\n          onClick={onClose}\r\n        >\r\n          <div className=\"max-w-3xl mx-auto mt-24 px-6\" onClick={(e) => e.stopPropagation()}>\r\n            <motion.div\r\n              initial={{ y: -30, opacity: 0, scale: 0.95 }}\r\n              animate={{ y: 0, opacity: 1, scale: 1 }}\r\n              exit={{ y: -30, opacity: 0, scale: 0.95 }}\r\n              transition={{ duration: 0.3, ease: \"easeOut\" }}\r\n            >\r\n              <div className=\"relative\">\r\n                <Search className=\"absolute left-6 top-1/2 -translate-y-1/2 h-6 w-6 text-neutral-400\" />\r\n                <input\r\n                  type=\"text\"\r\n                  value={query}\r\n                  onChange={(e) => setQuery(e.target.value)}\r\n                  placeholder=\"Search for luxury products...\"\r\n                  className=\"w-full pl-16 pr-6 py-6 text-lg rounded-3xl shadow-2xl border-2 border-neutral-200/50 bg-white/95 backdrop-blur-xl focus:border-neutral-400 focus:ring-4 focus:ring-neutral-200/30 transition-all duration-300 font-medium tracking-wide placeholder:text-neutral-400\"\r\n                  autoFocus\r\n                />\r\n                {/* Luxury close button */}\r\n                <motion.button\r\n                  onClick={onClose}\r\n                  className=\"absolute right-4 top-1/2 -translate-y-1/2 p-2 rounded-full text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 transition-all duration-200\"\r\n                  whileHover={{ scale: 1.1 }}\r\n                  whileTap={{ scale: 0.9 }}\r\n                >\r\n                  <X className=\"h-5 w-5\" />\r\n                </motion.button>\r\n              </div>\r\n            </motion.div>\r\n\r\n            <motion.div\r\n              initial={{ y: 50, opacity: 0 }}\r\n              animate={{ y: 0, opacity: 1 }}\r\n              exit={{ y: 50, opacity: 0 }}\r\n              transition={{ delay: 0.1 }}\r\n              className=\"mt-6 card-luxury p-6 shadow-2xl\"\r\n            >\r\n              {suggestions.length > 0 ? (\r\n                <div className=\"space-y-3\">\r\n                  <h3 className=\"text-sm font-semibold px-2 text-neutral-600 uppercase tracking-wide\">Product Suggestions</h3>\r\n                  {suggestions.map(product => (\r\n                    <Link\r\n                      key={product.id}\r\n                      to={`/products/${product.id}`}\r\n                      onClick={onClose}\r\n                      className=\"flex items-center space-x-4 p-4 rounded-xl transition-all duration-200 hover:bg-neutral-50 hover:shadow-md luxury-hover-lift\"\r\n                    >\r\n                      <img src={(product.images && product.images.length > 0 ? product.images[0] : '') || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4='} alt={product.name} className=\"w-14 h-14 object-cover rounded-lg shadow-sm\" />\r\n                      <div className=\"flex-1\">\r\n                        <p className=\"font-semibold text-neutral-900\">{product.name}</p>\r\n                        <p className=\"text-lg font-bold text-neutral-700\">{product.price.toLocaleString('en-IN')}</p>\r\n                      </div>\r\n                    </Link>\r\n                  ))}\r\n                </div>\r\n              ) : (\r\n                <div className=\"space-y-6\">\r\n                  <h3 className=\"text-sm font-semibold flex items-center text-neutral-600 uppercase tracking-wide\">\r\n                    <TrendingUp className=\"h-4 w-4 mr-2\" />Trending Searches\r\n                  </h3>\r\n                  <div className=\"flex flex-wrap gap-3\">\r\n                    {trendingSearches.map(term => (\r\n                      <button\r\n                        key={term}\r\n                        onClick={() => setQuery(term)}\r\n                        className=\"px-5 py-3 rounded-full transition-all duration-200 bg-neutral-100 text-neutral-700 hover:bg-neutral-900 hover:text-white font-medium shadow-sm hover:shadow-md\"\r\n                      >\r\n                        {term}\r\n                      </button>\r\n                    ))}\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </motion.div>\r\n          </div>\r\n\r\n          <button\r\n            onClick={onClose}\r\n            className=\"absolute top-6 right-6 p-2 rounded-full transition-colors text-gray-300 hover:text-white hover:bg-black/20\"\r\n          >\r\n            <X className=\"h-8 w-8\" />\r\n          </button>\r\n        </motion.div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import { useState, useCallback, useRef, useEffect } from 'react';\r\nimport { useMemoryCleanup } from './useMemoryCleanup';\r\nimport { performanceMonitor } from '../utils/performance';\r\n\r\n// Touch gesture configuration\r\ninterface SwipeConfig {\r\n  minSwipeDistance?: number;\r\n  maxSwipeTime?: number;\r\n  preventDefaultTouchmove?: boolean;\r\n  throttleMs?: number;\r\n}\r\n\r\ninterface SwipeHandlers {\r\n  onSwipeLeft?: () => void;\r\n  onSwipeRight?: () => void;\r\n  onSwipeUp?: () => void;\r\n  onSwipeDown?: () => void;\r\n}\r\n\r\ninterface TouchPosition {\r\n  x: number;\r\n  y: number;\r\n  time: number;\r\n}\r\n\r\n// Performance-optimized throttle for touch events\r\nconst throttle = <T extends (...args: any[]) => void>(\r\n  func: T,\r\n  limit: number\r\n): T => {\r\n  let inThrottle: boolean;\r\n  return ((...args: any[]) => {\r\n    if (!inThrottle) {\r\n      func.apply(this, args);\r\n      inThrottle = true;\r\n      setTimeout(() => inThrottle = false, limit);\r\n    }\r\n  }) as T;\r\n};\r\n\r\n// Hook for swipe gesture detection with performance optimizations\r\nexport const useSwipeGesture = (\r\n  handlers: SwipeHandlers,\r\n  config: SwipeConfig = {}\r\n) => {\r\n  const {\r\n    minSwipeDistance = 50,\r\n    maxSwipeTime = 300,\r\n    preventDefaultTouchmove = true,\r\n    throttleMs = 16, // ~60fps\r\n  } = config;\r\n\r\n  const [touchStart, setTouchStart] = useState<TouchPosition | null>(null);\r\n  const [touchEnd, setTouchEnd] = useState<TouchPosition | null>(null);\r\n  const { registerEventListener } = useMemoryCleanup();\r\n  const gestureRef = useRef<HTMLElement | null>(null);\r\n\r\n  const onTouchStart = useCallback((e: React.TouchEvent) => {\r\n    performanceMonitor.startMeasure('touch-gesture-start');\r\n    const touch = e.targetTouches[0];\r\n    setTouchEnd(null);\r\n    setTouchStart({\r\n      x: touch.clientX,\r\n      y: touch.clientY,\r\n      time: performance.now(),\r\n    });\r\n    performanceMonitor.endMeasure('touch-gesture-start');\r\n  }, []);\r\n\r\n  const onTouchMove = useCallback(throttle((e: React.TouchEvent) => {\r\n    if (preventDefaultTouchmove) {\r\n      e.preventDefault();\r\n    }\r\n    const touch = e.targetTouches[0];\r\n    setTouchEnd({\r\n      x: touch.clientX,\r\n      y: touch.clientY,\r\n      time: performance.now(),\r\n    });\r\n  }, throttleMs), [preventDefaultTouchmove, throttleMs]);\r\n\r\n  const onTouchEnd = useCallback(() => {\r\n    performanceMonitor.startMeasure('touch-gesture-end');\r\n    \r\n    if (!touchStart || !touchEnd) {\r\n      performanceMonitor.endMeasure('touch-gesture-end', false);\r\n      return;\r\n    }\r\n\r\n    const deltaX = touchStart.x - touchEnd.x;\r\n    const deltaY = touchStart.y - touchEnd.y;\r\n    const deltaTime = touchEnd.time - touchStart.time;\r\n\r\n    // Check if swipe was fast enough\r\n    if (deltaTime > maxSwipeTime) {\r\n      performanceMonitor.endMeasure('touch-gesture-end', false);\r\n      return;\r\n    }\r\n\r\n    const absDeltaX = Math.abs(deltaX);\r\n    const absDeltaY = Math.abs(deltaY);\r\n\r\n    // Determine swipe direction\r\n    if (absDeltaX > absDeltaY) {\r\n      // Horizontal swipe\r\n      if (absDeltaX > minSwipeDistance) {\r\n        if (deltaX > 0) {\r\n          handlers.onSwipeLeft?.();\r\n        } else {\r\n          handlers.onSwipeRight?.();\r\n        }\r\n      }\r\n    } else {\r\n      // Vertical swipe\r\n      if (absDeltaY > minSwipeDistance) {\r\n        if (deltaY > 0) {\r\n          handlers.onSwipeUp?.();\r\n        } else {\r\n          handlers.onSwipeDown?.();\r\n        }\r\n      }\r\n    }\r\n    \r\n    performanceMonitor.endMeasure('touch-gesture-end');\r\n  }, [touchStart, touchEnd, minSwipeDistance, maxSwipeTime, handlers]);\r\n\r\n  // Enhanced touch event handling with passive listeners for better performance\r\n  const bindGestures = useCallback((element: HTMLElement | null) => {\r\n    if (gestureRef.current) {\r\n      // Cleanup previous listeners\r\n      gestureRef.current = null;\r\n    }\r\n    \r\n    if (element) {\r\n      gestureRef.current = element;\r\n      \r\n      // Use passive listeners for better performance\r\n      registerEventListener(element, 'touchstart', onTouchStart as any, { passive: true });\r\n      registerEventListener(element, 'touchmove', onTouchMove as any, { passive: !preventDefaultTouchmove });\r\n      registerEventListener(element, 'touchend', onTouchEnd as any, { passive: true });\r\n    }\r\n  }, [onTouchStart, onTouchMove, onTouchEnd, preventDefaultTouchmove, registerEventListener]);\r\n\r\n  return {\r\n    onTouchStart,\r\n    onTouchMove,\r\n    onTouchEnd,\r\n    bindGestures,\r\n  };\r\n};\r\n\r\n// Hook for long press detection with haptic feedback\r\ninterface LongPressConfig {\r\n  threshold?: number;\r\n  onStart?: () => void;\r\n  onFinish?: () => void;\r\n  onCancel?: () => void;\r\n  enableHaptics?: boolean;\r\n}\r\n\r\nexport const useLongPress = (\r\n  onLongPress: () => void,\r\n  config: LongPressConfig = {}\r\n) => {\r\n  const { threshold = 500, onStart, onFinish, onCancel, enableHaptics = true } = config;\r\n  const isLongPressActive = useRef(false);\r\n  const isPressed = useRef(false);\r\n  const timerId = useRef<NodeJS.Timeout>();\r\n  const { safeSetTimeout } = useMemoryCleanup();\r\n\r\n  const triggerHapticFeedback = useCallback(() => {\r\n    if (enableHaptics && 'vibrate' in navigator) {\r\n      navigator.vibrate(50); // Short vibration\r\n    }\r\n  }, [enableHaptics]);\r\n\r\n  const start = useCallback((e: React.TouchEvent | React.MouseEvent) => {\r\n    if (isPressed.current) return;\r\n    \r\n    e.preventDefault(); // Prevent default to avoid context menus\r\n    isPressed.current = true;\r\n    onStart?.();\r\n\r\n    timerId.current = safeSetTimeout(() => {\r\n      if (isPressed.current) {\r\n        isLongPressActive.current = true;\r\n        triggerHapticFeedback();\r\n        onLongPress();\r\n        onFinish?.();\r\n      }\r\n    }, threshold);\r\n  }, [onLongPress, threshold, onStart, onFinish, triggerHapticFeedback, safeSetTimeout]);\r\n\r\n  const clear = useCallback((shouldTriggerOnCancel = true) => {\r\n    if (timerId.current) {\r\n      clearTimeout(timerId.current);\r\n    }\r\n    \r\n    if (shouldTriggerOnCancel && isPressed.current && !isLongPressActive.current) {\r\n      onCancel?.();\r\n    }\r\n    \r\n    isLongPressActive.current = false;\r\n    isPressed.current = false;\r\n  }, [onCancel]);\r\n\r\n  return {\r\n    onMouseDown: start,\r\n    onMouseUp: () => clear(true),\r\n    onMouseLeave: () => clear(false),\r\n    onTouchStart: start,\r\n    onTouchEnd: () => clear(true),\r\n    onContextMenu: (e: React.MouseEvent) => e.preventDefault(), // Prevent context menu\r\n  };\r\n};\r\n\r\n// Hook for pinch-to-zoom detection with performance optimizations\r\ninterface PinchConfig {\r\n  onPinchStart?: (scale: number) => void;\r\n  onPinchMove?: (scale: number) => void;\r\n  onPinchEnd?: (scale: number) => void;\r\n  minScale?: number;\r\n  maxScale?: number;\r\n  throttleMs?: number;\r\n}\r\n\r\nexport const usePinchZoom = (config: PinchConfig = {}) => {\r\n  const {\r\n    minScale = 0.5,\r\n    maxScale = 3,\r\n    throttleMs = 16,\r\n    ...callbacks\r\n  } = config;\r\n  \r\n  const [initialDistance, setInitialDistance] = useState<number | null>(null);\r\n  const [currentScale, setCurrentScale] = useState(1);\r\n  const { registerEventListener } = useMemoryCleanup();\r\n\r\n  const getDistance = useCallback((touches: TouchList) => {\r\n    const touch1 = touches[0];\r\n    const touch2 = touches[1];\r\n    return Math.sqrt(\r\n      Math.pow(touch2.clientX - touch1.clientX, 2) +\r\n      Math.pow(touch2.clientY - touch1.clientY, 2)\r\n    );\r\n  }, []);\r\n\r\n  const onTouchStart = useCallback((e: React.TouchEvent) => {\r\n    if (e.touches.length === 2) {\r\n      performanceMonitor.startMeasure('pinch-gesture');\r\n      const distance = getDistance(e.touches);\r\n      setInitialDistance(distance);\r\n      callbacks.onPinchStart?.(1);\r\n    }\r\n  }, [callbacks, getDistance]);\r\n\r\n  const onTouchMove = useCallback(throttle((e: React.TouchEvent) => {\r\n    if (e.touches.length === 2 && initialDistance) {\r\n      e.preventDefault();\r\n      const distance = getDistance(e.touches);\r\n      let scale = distance / initialDistance;\r\n      \r\n      // Clamp scale to min/max values\r\n      scale = Math.max(minScale, Math.min(maxScale, scale));\r\n      \r\n      setCurrentScale(scale);\r\n      callbacks.onPinchMove?.(scale);\r\n    }\r\n  }, throttleMs), [initialDistance, callbacks, getDistance, minScale, maxScale, throttleMs]);\r\n\r\n  const onTouchEnd = useCallback(() => {\r\n    if (initialDistance) {\r\n      performanceMonitor.endMeasure('pinch-gesture');\r\n      callbacks.onPinchEnd?.(currentScale);\r\n      setInitialDistance(null);\r\n      setCurrentScale(1);\r\n    }\r\n  }, [initialDistance, currentScale, callbacks]);\r\n\r\n  const bindPinchGestures = useCallback((element: HTMLElement | null) => {\r\n    if (element) {\r\n      registerEventListener(element, 'touchstart', onTouchStart as any, { passive: true });\r\n      registerEventListener(element, 'touchmove', onTouchMove as any, { passive: false });\r\n      registerEventListener(element, 'touchend', onTouchEnd as any, { passive: true });\r\n    }\r\n  }, [onTouchStart, onTouchMove, onTouchEnd, registerEventListener]);\r\n\r\n  return {\r\n    onTouchStart,\r\n    onTouchMove,\r\n    onTouchEnd,\r\n    bindPinchGestures,\r\n    currentScale,\r\n  };\r\n};\r\n\r\n// Hook for detecting mobile device and orientation\r\nexport const useMobileDetection = () => {\r\n  const [isMobile, setIsMobile] = useState(false);\r\n  const [orientation, setOrientation] = useState<'portrait' | 'landscape'>('portrait');\r\n\r\n  const checkMobile = useCallback(() => {\r\n    const userAgent = navigator.userAgent;\r\n    const mobileRegex = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i;\r\n    setIsMobile(mobileRegex.test(userAgent) || window.innerWidth <= 768);\r\n  }, []);\r\n\r\n  const checkOrientation = useCallback(() => {\r\n    setOrientation(window.innerHeight > window.innerWidth ? 'portrait' : 'landscape');\r\n  }, []);\r\n\r\n  // Check on mount and window resize\r\n  useEffect(() => {\r\n    checkMobile();\r\n    checkOrientation();\r\n\r\n    const handleResize = () => {\r\n      checkMobile();\r\n      checkOrientation();\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    window.addEventListener('orientationchange', checkOrientation);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n      window.removeEventListener('orientationchange', checkOrientation);\r\n    };\r\n  }, [checkMobile, checkOrientation]);\r\n\r\n  return {\r\n    isMobile,\r\n    orientation,\r\n    isPortrait: orientation === 'portrait',\r\n    isLandscape: orientation === 'landscape',\r\n  };\r\n};\r\n\r\n// Hook for mobile-specific viewport handling\r\nexport const useMobileViewport = () => {\r\n  const [viewportHeight, setViewportHeight] = useState(window.innerHeight);\r\n  const [isKeyboardOpen, setIsKeyboardOpen] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const initialHeight = window.innerHeight;\r\n\r\n    const handleResize = () => {\r\n      const currentHeight = window.innerHeight;\r\n      setViewportHeight(currentHeight);\r\n\r\n      // Detect virtual keyboard (significant height reduction on mobile)\r\n      const heightDifference = initialHeight - currentHeight;\r\n      setIsKeyboardOpen(heightDifference > 150);\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n\r\n    return () => {\r\n      window.removeEventListener('resize', handleResize);\r\n    };\r\n  }, []);\r\n\r\n  return {\r\n    viewportHeight,\r\n    isKeyboardOpen,\r\n  };\r\n};\r\n","import React, { useEffect, useRef, useCallback } from 'react';\r\n\r\ninterface CleanupRegistry {\r\n  subscriptions: Array<() => void>;\r\n  timers: Array<NodeJS.Timeout>;\r\n  intervals: Array<NodeJS.Timeout>;\r\n  eventListeners: Array<{\r\n    element: Element | Window | Document;\r\n    event: string;\r\n    handler: EventListener;\r\n    options?: boolean | AddEventListenerOptions;\r\n  }>;\r\n  observers: Array<IntersectionObserver | MutationObserver | ResizeObserver>;\r\n  abortControllers: Array<AbortController>;\r\n}\r\n\r\n/**\r\n * Custom hook for managing component cleanup and preventing memory leaks\r\n * Automatically cleans up subscriptions, timers, event listeners, and observers\r\n */\r\nexport const useMemoryCleanup = () => {\r\n  const cleanupRegistry = useRef<CleanupRegistry>({\r\n    subscriptions: [],\r\n    timers: [],\r\n    intervals: [],\r\n    eventListeners: [],\r\n    observers: [],\r\n    abortControllers: []\r\n  });\r\n\r\n  const isUnmounted = useRef(false);\r\n\r\n  // Register a subscription for cleanup\r\n  const registerSubscription = useCallback((unsubscribe: () => void) => {\r\n    if (!isUnmounted.current) {\r\n      cleanupRegistry.current.subscriptions.push(unsubscribe);\r\n    }\r\n    return unsubscribe;\r\n  }, []);\r\n\r\n  // Register a timer for cleanup\r\n  const registerTimer = useCallback((timer: NodeJS.Timeout) => {\r\n    if (!isUnmounted.current) {\r\n      cleanupRegistry.current.timers.push(timer);\r\n    }\r\n    return timer;\r\n  }, []);\r\n\r\n  // Register an interval for cleanup\r\n  const registerInterval = useCallback((interval: NodeJS.Timeout) => {\r\n    if (!isUnmounted.current) {\r\n      cleanupRegistry.current.intervals.push(interval);\r\n    }\r\n    return interval;\r\n  }, []);\r\n\r\n  // Register an event listener for cleanup\r\n  const registerEventListener = useCallback(<T extends Element | Window | Document>(\r\n    element: T,\r\n    event: string,\r\n    handler: EventListener,\r\n    options?: boolean | AddEventListenerOptions\r\n  ) => {\r\n    if (!isUnmounted.current) {\r\n      element.addEventListener(event, handler, options);\r\n      cleanupRegistry.current.eventListeners.push({\r\n        element,\r\n        event,\r\n        handler,\r\n        options\r\n      });\r\n    }\r\n    \r\n    return () => {\r\n      element.removeEventListener(event, handler, options);\r\n    };\r\n  }, []);\r\n\r\n  // Register an observer for cleanup\r\n  const registerObserver = useCallback(<T extends IntersectionObserver | MutationObserver | ResizeObserver>(\r\n    observer: T\r\n  ) => {\r\n    if (!isUnmounted.current) {\r\n      cleanupRegistry.current.observers.push(observer);\r\n    }\r\n    return observer;\r\n  }, []);\r\n\r\n  // Register an AbortController for cleanup\r\n  const registerAbortController = useCallback(() => {\r\n    const controller = new AbortController();\r\n    if (!isUnmounted.current) {\r\n      cleanupRegistry.current.abortControllers.push(controller);\r\n    }\r\n    return controller;\r\n  }, []);\r\n\r\n  // Safe timeout that auto-cleans up\r\n  const safeSetTimeout = useCallback((callback: () => void, delay: number) => {\r\n    const timer = setTimeout(() => {\r\n      if (!isUnmounted.current) {\r\n        callback();\r\n      }\r\n    }, delay);\r\n    \r\n    return registerTimer(timer);\r\n  }, [registerTimer]);\r\n\r\n  // Safe interval that auto-cleans up\r\n  const safeSetInterval = useCallback((callback: () => void, delay: number) => {\r\n    const interval = setInterval(() => {\r\n      if (!isUnmounted.current) {\r\n        callback();\r\n      }\r\n    }, delay);\r\n    \r\n    return registerInterval(interval);\r\n  }, [registerInterval]);\r\n\r\n  // Safe fetch with AbortController\r\n  const safeFetch = useCallback(async (\r\n    input: RequestInfo | URL,\r\n    init?: RequestInit\r\n  ): Promise<Response> => {\r\n    const controller = registerAbortController();\r\n    \r\n    return fetch(input, {\r\n      ...init,\r\n      signal: controller.signal\r\n    });\r\n  }, [registerAbortController]);\r\n\r\n  // Manual cleanup function\r\n  const cleanup = useCallback(() => {\r\n    const registry = cleanupRegistry.current;\r\n\r\n    // Cleanup subscriptions\r\n    registry.subscriptions.forEach(unsubscribe => {\r\n      try {\r\n        unsubscribe();\r\n      } catch (error) {\r\n        console.warn('Error during subscription cleanup:', error);\r\n      }\r\n    });\r\n\r\n    // Cleanup timers\r\n    registry.timers.forEach(timer => {\r\n      try {\r\n        clearTimeout(timer);\r\n      } catch (error) {\r\n        console.warn('Error during timer cleanup:', error);\r\n      }\r\n    });\r\n\r\n    // Cleanup intervals\r\n    registry.intervals.forEach(interval => {\r\n      try {\r\n        clearInterval(interval);\r\n      } catch (error) {\r\n        console.warn('Error during interval cleanup:', error);\r\n      }\r\n    });\r\n\r\n    // Cleanup event listeners\r\n    registry.eventListeners.forEach(({ element, event, handler, options }) => {\r\n      try {\r\n        element.removeEventListener(event, handler, options);\r\n      } catch (error) {\r\n        // Silent cleanup\r\n      }\r\n    });\r\n\r\n    // Cleanup observers\r\n    registry.observers.forEach(observer => {\r\n      try {\r\n        observer.disconnect();\r\n      } catch (error) {\r\n        // Silent cleanup\r\n      }\r\n    });\r\n\r\n    // Cleanup AbortControllers\r\n    registry.abortControllers.forEach(controller => {\r\n      try {\r\n        controller.abort();\r\n      } catch (error) {\r\n        // Silent cleanup\r\n      }\r\n    });\r\n\r\n    // Clear all registries\r\n    registry.subscriptions = [];\r\n    registry.timers = [];\r\n    registry.intervals = [];\r\n    registry.eventListeners = [];\r\n    registry.observers = [];\r\n    registry.abortControllers = [];\r\n  }, []);\r\n\r\n  // Cleanup on unmount\r\n  useEffect(() => {\r\n    return () => {\r\n      isUnmounted.current = true;\r\n      cleanup();\r\n    };\r\n  }, [cleanup]);\r\n\r\n  return {\r\n    registerSubscription,\r\n    registerTimer,\r\n    registerInterval,\r\n    registerEventListener,\r\n    registerObserver,\r\n    registerAbortController,\r\n    safeSetTimeout,\r\n    safeSetInterval,\r\n    safeFetch,\r\n    cleanup,\r\n    isUnmounted: () => isUnmounted.current\r\n  };\r\n};\r\n\r\n/**\r\n * Hook for managing component state with automatic cleanup\r\n * Prevents state updates after component unmount\r\n */\r\nexport const useSafeState = <T>(initialState: T | (() => T)) => {\r\n  const { isUnmounted } = useMemoryCleanup();\r\n  const [state, setState] = React.useState(initialState);\r\n\r\n  const safeSetState = useCallback((\r\n    value: T | ((prevState: T) => T)\r\n  ) => {\r\n    if (!isUnmounted()) {\r\n      setState(value);\r\n    }\r\n  }, [isUnmounted]);\r\n\r\n  return [state, safeSetState] as const;\r\n};\r\n\r\n/**\r\n * Hook for managing async operations with cleanup\r\n */\r\nexport const useAsyncOperation = () => {\r\n  const { registerAbortController, isUnmounted } = useMemoryCleanup();\r\n\r\n  const executeAsync = useCallback(async <T>(\r\n    asyncFn: (signal: AbortSignal) => Promise<T>\r\n  ): Promise<T | null> => {\r\n    const controller = registerAbortController();\r\n    \r\n    try {\r\n      const result = await asyncFn(controller.signal);\r\n      return isUnmounted() ? null : result;\r\n    } catch (error) {\r\n      if (error instanceof Error && error.name === 'AbortError') {\r\n        return null; // Operation was cancelled\r\n      }\r\n      throw error;\r\n    }\r\n  }, [registerAbortController, isUnmounted]);\r\n\r\n  return { executeAsync };\r\n};","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { X, Home, Package, Star, Tag, User, ShoppingCart, Heart, ChevronRight, LogOut, Settings, Package as PackageIcon } from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { useWishlist } from '../../contexts/WishlistContext';\r\n\r\nimport { useSwipeGesture } from '../../hooks/useMobileGestures';\r\n\r\ninterface MobileNavigationProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  onCartClick: () => void;\r\n}\r\n\r\ninterface NavigationItem {\r\n  name: string;\r\n  href: string;\r\n  icon: React.ReactNode;\r\n  hasDropdown?: boolean;\r\n  dropdownItems?: {\r\n    name: string;\r\n    href: string;\r\n  }[];\r\n}\r\n\r\nconst MobileNavigation: React.FC<MobileNavigationProps> = ({\r\n  isOpen,\r\n  onClose,\r\n  onCartClick\r\n}) => {\r\n  const { user, logout } = useAuth();\r\n  const { itemCount } = useCart();\r\n  const { items: wishlistItems } = useWishlist();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const navRef = useRef<HTMLDivElement>(null);\r\n\r\n  const [activeDropdown, setActiveDropdown] = useState<string | null>(null);\r\n\r\n  // Navigation items with icons for mobile\r\n  const navigationItems: NavigationItem[] = [\r\n    { name: 'Home', href: '/', icon: <Home className=\"h-5 w-5\" /> },\r\n    {\r\n      name: 'Collections',\r\n      href: '/products',\r\n      icon: <Package className=\"h-5 w-5\" />,\r\n      hasDropdown: true,\r\n      dropdownItems: [\r\n        { name: 'All Products', href: '/products' },\r\n        { name: 'Oudh Attars', href: '/categories/oudh-attars' },\r\n        { name: 'Floral Attars', href: '/categories/floral-attars' },\r\n        { name: 'Musk Attars', href: '/categories/musk-attars' },\r\n        { name: 'Amber Attars', href: '/categories/amber-attars' },\r\n        { name: 'Saffron Attars', href: '/categories/saffron-attars' },\r\n        { name: 'Sandalwood Attars', href: '/categories/sandalwood-attars' },\r\n        { name: 'Jasmine Attars', href: '/categories/jasmine-attars' },\r\n        { name: 'Attar Blends', href: '/categories/attar-blends' },\r\n        { name: 'Seasonal Attars', href: '/categories/seasonal-attars' },\r\n        { name: 'Heritage Attars', href: '/categories/heritage-attars' },\r\n      ]\r\n    },\r\n    { name: 'New Arrivals', href: '/new-arrivals', icon: <Star className=\"h-5 w-5\" /> },\r\n    { name: 'Offers', href: '/deals', icon: <Tag className=\"h-5 w-5\" /> },\r\n    { name: 'About', href: '/about', icon: <User className=\"h-5 w-5\" /> },\r\n  ];\r\n\r\n  // Handle swipe to close\r\n  const { bindGestures } = useSwipeGesture({\r\n    onSwipeLeft: () => onClose(),\r\n  });\r\n\r\n  // Close dropdown when route changes\r\n  useEffect(() => {\r\n    onClose();\r\n    setActiveDropdown(null);\r\n  }, [location.pathname, onClose]);\r\n\r\n  // Bind swipe gestures to navigation panel\r\n  useEffect(() => {\r\n    if (navRef.current && isOpen) {\r\n      bindGestures(navRef.current);\r\n    }\r\n  }, [isOpen, bindGestures]);\r\n\r\n  // Handle escape key\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => document.removeEventListener('keydown', handleEscape);\r\n  }, [isOpen, onClose]);\r\n\r\n  const isActiveLink = (href: string) => {\r\n    return location.pathname === href;\r\n  };\r\n\r\n  const toggleDropdown = (itemName: string) => {\r\n    setActiveDropdown(activeDropdown === itemName ? null : itemName);\r\n  };\r\n\r\n  // Focus management for accessibility\r\n  useEffect(() => {\r\n    if (isOpen && navRef.current) {\r\n      // Focus the first focusable element when menu opens\r\n      const firstFocusable = navRef.current.querySelector('button, a, input') as HTMLElement;\r\n      if (firstFocusable) {\r\n        firstFocusable.focus();\r\n      }\r\n    }\r\n  }, [isOpen]);\r\n\r\n  return (\r\n    <>\r\n      {/* Backdrop */}\r\n      {isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 md:hidden\"\r\n          onClick={onClose}\r\n          role=\"button\"\r\n          tabIndex={0}\r\n          onKeyDown={(e) => {\r\n            if (e.key === 'Enter' || e.key === ' ') {\r\n              onClose();\r\n            }\r\n          }}\r\n          aria-label=\"Close navigation menu\"\r\n        />\r\n      )}\r\n\r\n      {/* Mobile Navigation Panel - Android-like slide-in from left */}\r\n      <div\r\n        ref={navRef}\r\n        className={`fixed top-0 left-0 h-full w-80 max-w-[90vw] bg-white z-50 shadow-2xl transform transition-transform duration-300 ease-out md:hidden ${isOpen ? 'translate-x-0' : '-translate-x-full'\r\n          }`}\r\n        role=\"dialog\"\r\n        aria-modal=\"true\"\r\n        aria-labelledby=\"mobile-nav-title\"\r\n        aria-hidden={!isOpen}\r\n      >\r\n        {/* Header with close button */}\r\n        <div className=\"flex items-center justify-between p-4 border-b border-gray-200\">\r\n          <h2 id=\"mobile-nav-title\" className=\"text-lg font-semibold text-gray-900\">\r\n            Menu\r\n          </h2>\r\n          <button\r\n            onClick={onClose}\r\n            className=\"p-2 rounded-full hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n            aria-label=\"Close menu\"\r\n          >\r\n            <X className=\"h-5 w-5 text-gray-600\" />\r\n          </button>\r\n        </div>\r\n\r\n        {/* User Section */}\r\n        <div className=\"p-4 border-b border-gray-200\">\r\n          {user ? (\r\n            <div className=\"flex items-center space-x-3\">\r\n              <img\r\n                src={user.avatar || `https://api.dicebear.com/8.x/initials/svg?seed=${user.name}`}\r\n                alt={user.name}\r\n                className=\"h-12 w-12 rounded-full border-2 border-purple-200\"\r\n              />\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"text-sm font-semibold text-gray-900 truncate\">{user.name}</p>\r\n                <p className=\"text-xs text-gray-500 uppercase\">{user.role}</p>\r\n              </div>\r\n            </div>\r\n          ) : (\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center\">\r\n                <User className=\"h-6 w-6 text-gray-500\" />\r\n              </div>\r\n              <div>\r\n                <p className=\"text-sm font-semibold text-gray-900\">Guest</p>\r\n                <button\r\n                  onClick={() => {\r\n                    navigate('/auth');\r\n                    onClose();\r\n                  }}\r\n                  className=\"text-xs text-purple-600 font-medium hover:text-purple-700 focus:outline-none focus:underline\"\r\n                >\r\n                  Sign in\r\n                </button>\r\n              </div>\r\n            </div>\r\n          )}\r\n        </div>\r\n\r\n        {/* Quick Actions */}\r\n        <div className=\"grid grid-cols-3 gap-2 p-4 border-b border-gray-200\">\r\n          <Link\r\n            to=\"/wishlist\"\r\n            onClick={onClose}\r\n            className=\"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n          >\r\n            <div className=\"relative\">\r\n              <Heart className=\"h-6 w-6 text-gray-600\" />\r\n              {wishlistItems.length > 0 && (\r\n                <span className=\"absolute -top-2 -right-2 h-5 w-5 text-xs rounded-full flex items-center justify-center font-medium bg-purple-600 text-white\">\r\n                  {wishlistItems.length > 9 ? '9+' : wishlistItems.length}\r\n                </span>\r\n              )}\r\n            </div>\r\n            <span className=\"text-xs mt-1 text-gray-600\">Wishlist</span>\r\n          </Link>\r\n\r\n          <button\r\n            onClick={() => {\r\n              onCartClick();\r\n              onClose();\r\n            }}\r\n            className=\"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n          >\r\n            <div className=\"relative\">\r\n              <ShoppingCart className=\"h-6 w-6 text-gray-600\" />\r\n              {itemCount > 0 && (\r\n                <span className=\"absolute -top-2 -right-2 h-5 w-5 text-xs rounded-full flex items-center justify-center font-medium bg-purple-600 text-white\">\r\n                  {itemCount > 9 ? '9+' : itemCount}\r\n                </span>\r\n              )}\r\n            </div>\r\n            <span className=\"text-xs mt-1 text-gray-600\">Cart</span>\r\n          </button>\r\n\r\n          {user ? (\r\n            <Link\r\n              to=\"/profile\"\r\n              onClick={onClose}\r\n              className=\"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n            >\r\n              <User className=\"h-6 w-6 text-gray-600\" />\r\n              <span className=\"text-xs mt-1 text-gray-600\">Profile</span>\r\n            </Link>\r\n          ) : (\r\n            <button\r\n              onClick={() => {\r\n                navigate('/auth');\r\n                onClose();\r\n              }}\r\n              className=\"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n            >\r\n              <User className=\"h-6 w-6 text-gray-600\" />\r\n              <span className=\"text-xs mt-1 text-gray-600\">Account</span>\r\n            </button>\r\n          )}\r\n        </div>\r\n\r\n        {/* Navigation Menu */}\r\n        <div className=\"flex-1 overflow-y-auto\">\r\n          <nav className=\"py-2\">\r\n            {navigationItems.map((item) => (\r\n              <div key={item.name}>\r\n                {item.hasDropdown ? (\r\n                  <>\r\n                    <button\r\n                      onClick={() => toggleDropdown(item.name)}\r\n                      className={`w-full flex items-center justify-between px-4 py-3 text-base font-medium ${isActiveLink(item.href)\r\n                          ? 'text-purple-600 bg-purple-50'\r\n                          : 'text-gray-700 hover:bg-gray-50'\r\n                        }`}\r\n                      aria-expanded={activeDropdown === item.name}\r\n                    >\r\n                      <div className=\"flex items-center\">\r\n                        <span className=\"mr-3 text-gray-500\">{item.icon}</span>\r\n                        <span>{item.name}</span>\r\n                      </div>\r\n                      <ChevronRight\r\n                        className={`h-5 w-5 text-gray-400 transition-transform ${activeDropdown === item.name ? 'rotate-90' : ''\r\n                          }`}\r\n                      />\r\n                    </button>\r\n\r\n                    {activeDropdown === item.name && (\r\n                      <div className=\"bg-gray-50\" role=\"region\" aria-label={`${item.name} submenu`}>\r\n                        {item.dropdownItems?.map((dropdownItem) => (\r\n                          <Link\r\n                            key={dropdownItem.name}\r\n                            to={dropdownItem.href}\r\n                            onClick={onClose}\r\n                            className={`block px-12 py-3 text-sm ${isActiveLink(dropdownItem.href)\r\n                                ? 'text-purple-600 bg-purple-50'\r\n                                : 'text-gray-600 hover:bg-gray-100'\r\n                              }`}\r\n                          >\r\n                            {dropdownItem.name}\r\n                          </Link>\r\n                        ))}\r\n                      </div>\r\n                    )}\r\n                  </>\r\n                ) : (\r\n                  <Link\r\n                    to={item.href}\r\n                    onClick={onClose}\r\n                    className={`flex items-center px-4 py-3 text-base font-medium ${isActiveLink(item.href)\r\n                        ? 'text-purple-600 bg-purple-50'\r\n                        : 'text-gray-700 hover:bg-gray-50'\r\n                      }`}\r\n                  >\r\n                    <span className=\"mr-3 text-gray-500\">{item.icon}</span>\r\n                    <span>{item.name}</span>\r\n                  </Link>\r\n                )}\r\n              </div>\r\n            ))}\r\n          </nav>\r\n        </div>\r\n\r\n        {/* User Actions */}\r\n        {user && (\r\n          <div className=\"border-t border-gray-200 py-2\">\r\n            <Link\r\n              to=\"/dashboard\"\r\n              onClick={onClose}\r\n              className=\"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n            >\r\n              <Settings className=\"h-5 w-5 text-gray-500 mr-3\" />\r\n              <span>Dashboard</span>\r\n            </Link>\r\n\r\n            <Link\r\n              to=\"/orders\"\r\n              onClick={onClose}\r\n              className=\"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500\"\r\n            >\r\n              <PackageIcon className=\"h-5 w-5 text-gray-500 mr-3\" />\r\n              <span>My Orders</span>\r\n            </Link>\r\n\r\n            <button\r\n              onClick={() => {\r\n                logout();\r\n                onClose();\r\n              }}\r\n              className=\"flex items-center w-full px-4 py-3 text-base font-medium text-red-600 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500\"\r\n            >\r\n              <LogOut className=\"h-5 w-5 text-red-500 mr-3\" />\r\n              <span>Sign Out</span>\r\n            </button>\r\n          </div>\r\n        )}\r\n\r\n      </div>\r\n    </>\r\n  );\r\n};\r\n\r\nexport default MobileNavigation;","export default \"data:image/webp;base64,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\"","import React, { useState, useEffect, useRef } from 'react';\r\nimport { Link, useLocation, useNavigate } from 'react-router-dom';\r\nimport { Search, ShoppingCart, User, Menu, Heart, LogOut, Settings, Package, ChevronDown, Sparkles } from 'lucide-react';\r\nimport { useAuth } from '../../contexts/AuthContext';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { useWishlist } from '../../contexts/WishlistContext';\r\nimport { SearchOverlay } from './SearchOverlay';\r\n\r\nimport MobileNavigation from './MobileNavigation';\r\nimport logo from '../../assets/images/optimized/logo-optimized.webp';\r\n\r\n// Preload the logo image\r\nconst preloadImage = (src: string) => {\r\n  const img = new Image();\r\n  img.src = src;\r\n};\r\n\r\n// Convert to optimized image component with better loading strategy\r\nconst OptimizedLogo = React.memo(() => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const [logoSrc, setLogoSrc] = useState('');\r\n  \r\n  useEffect(() => {\r\n    preloadImage(logo);\r\n    setLogoSrc(logo);\r\n    setIsLoaded(true);\r\n  }, []);\r\n\r\n  if (!isLoaded) {\r\n    return (\r\n      <div className=\"w-10 h-10 flex items-center justify-center\">\r\n        <div className=\"w-8 h-8 bg-gray-200 rounded-full animate-pulse\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <img\r\n      src={logoSrc}\r\n      alt=\"S.Essences Logo\" \r\n      width={40}\r\n      height={40}\r\n      loading=\"eager\"\r\n      decoding=\"async\"\r\n      className=\"object-contain w-10 h-10 transition-all duration-300 md:w-8 md:h-8\"\r\n    />\r\n  );\r\n});\r\n\r\ninterface HeaderProps {\r\n  onAuthClick: () => void;\r\n  onCartClick: () => void;\r\n}\r\n\r\ninterface DropdownItem {\r\n  name: string;\r\n  href: string;\r\n}\r\n\r\ninterface NavigationItem {\r\n  name: string;\r\n  href: string;\r\n  hasDropdown?: boolean;\r\n  dropdownItems?: DropdownItem[];\r\n}\r\n\r\nexport const Header: React.FC<HeaderProps> = ({ onAuthClick, onCartClick }) => {\r\n  const { user, logout } = useAuth();\r\n  const { itemCount } = useCart();\r\n  const { items: wishlistItems } = useWishlist();\r\n\r\n  const [isMenuOpen, setIsMenuOpen] = useState(false);\r\n  const [isUserMenuOpen, setIsUserMenuOpen] = useState(false);\r\n  const [isSearchOpen, setIsSearchOpen] = useState(false);\r\n  const [isCategoriesOpen, setIsCategoriesOpen] = useState(false);\r\n\r\n  const [isScrolled, setIsScrolled] = useState(false);\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  \r\n  const categoriesDropdownRef = useRef<HTMLDivElement>(null);\r\n  const userMenuRef = useRef<HTMLDivElement>(null);\r\n\n  const navigationItems: NavigationItem[] = [\r\n    { name: 'Home', href: '/' },\r\n    {\r\n      name: 'Collections',\r\n      href: '/products',\r\n      hasDropdown: true,\r\n      dropdownItems: [\r\n        { name: 'All Products', href: '/products' },\r\n        { name: 'Oudh Attars', href: '/categories/oudh-attars' },\r\n        { name: 'Floral Attars', href: '/categories/floral-attars' },\r\n        { name: 'Musk Attars', href: '/categories/musk-attars' },\r\n        { name: 'Amber Attars', href: '/categories/amber-attars' },\r\n        { name: 'Saffron Attars', href: '/categories/saffron-attars' },\r\n        { name: 'Sandalwood Attars', href: '/categories/sandalwood-attars' },\r\n        { name: 'Jasmine Attars', href: '/categories/jasmine-attars' },\r\n        { name: 'Attar Blends', href: '/categories/attar-blends' },\r\n        { name: 'Seasonal Attars', href: '/categories/seasonal-attars' },\r\n        { name: 'Heritage Attars', href: '/categories/heritage-attars' },\r\n      ]\r\n    },\r\n    { name: 'New Arrivals', href: '/new-arrivals' },\r\n    { name: 'Offers', href: '/deals' },\r\n    { name: 'About', href: '/about' },\r\n  ];\r\n\r\n  const isActiveLink = (href: string) => {\r\n    return location.pathname === href;\r\n  };\r\n\r\n  // Detect scroll position for floating header background\r\n  useEffect(() => {\r\n    const handleScroll = () => {\r\n      const scrollPosition = window.scrollY;\r\n      setIsScrolled(scrollPosition > 50);\r\n    };\r\n\r\n    window.addEventListener('scroll', handleScroll, { passive: true });\r\n    return () => window.removeEventListener('scroll', handleScroll);\r\n  }, []);\r\n\r\n  // Close dropdowns when clicking outside\r\n  useEffect(() => {\r\n    const handleClickOutside = (event: MouseEvent) => {\r\n      if (categoriesDropdownRef.current && !categoriesDropdownRef.current.contains(event.target as Node)) {\r\n        setIsCategoriesOpen(false);\r\n      }\r\n      if (userMenuRef.current && !userMenuRef.current.contains(event.target as Node)) {\r\n        setIsUserMenuOpen(false);\r\n      }\r\n\r\n    };\r\n\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  // Close menus on route change and escape key\r\n  useEffect(() => {\r\n    if (isUserMenuOpen) setIsUserMenuOpen(false);\r\n    if (isCategoriesOpen) setIsCategoriesOpen(false);\r\n\r\n    if (isSearchOpen) setIsSearchOpen(false);\r\n  }, [location.pathname]);\r\n\r\n  useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape') {\r\n        setIsUserMenuOpen(false);\r\n        setIsCategoriesOpen(false);\r\n\r\n        setIsSearchOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener('keydown', handleEscape);\r\n    return () => document.removeEventListener('keydown', handleEscape);\r\n  }, []);\r\n\r\n  // Check if we're on homepage to determine initial transparency\r\n  const isHomePage = location.pathname === '/';\r\n  const headerClasses = `\r\n    fixed top-0 left-0 right-0 z-50 transition-all duration-300 ease-in-out\r\n    ${isHomePage && !isScrolled \r\n      ? 'bg-transparent backdrop-blur-none shadow-none' \r\n      : 'bg-white/90 backdrop-blur-xl shadow-lg border-b border-white/20'\r\n    }\r\n  `;\r\n\r\n  const containerClasses = `\r\n    mx-auto px-4 sm:px-6 lg:px-8 transition-all duration-300\r\n    ${isScrolled \r\n      ? 'max-w-6xl mt-4 mb-4 bg-white/90 backdrop-blur-2xl rounded-2xl shadow-xl border border-white/30' \r\n      : 'max-w-7xl'\r\n    }\r\n  `;\r\n\r\n  return (\r\n    <>\r\n      <header className={headerClasses}>\r\n        <div className={containerClasses}>\r\n          <div className={`flex items-center justify-between transition-all duration-300 ${\r\n            isScrolled ? 'h-14 py-2' : 'h-16 sm:h-18 py-2 sm:py-3'\r\n          }`}>\r\n            {/* Logo */}\r\n            <Link to=\"/\" className=\"flex items-center space-x-2 flex-shrink-0 group\" onClick={() => window.scrollTo(0, 0)}>\r\n              <OptimizedLogo />\r\n              <span className={`font-bold tracking-tight transition-all duration-300 ${\r\n                isScrolled \r\n                  ? 'text-gray-900 text-lg' \r\n                  : isHomePage && !isScrolled \r\n                    ? 'text-white text-xl drop-shadow-lg' \r\n                    : 'text-gray-900 text-xl'\r\n              }`}>S.Essences</span>\r\n            </Link>\r\n\r\n            {/* Desktop Navigation - Centered (hidden on mobile, visible on tablet and desktop) */}\r\n            <nav className=\"hidden md:flex items-center justify-center flex-1\">\r\n              <div className={`flex items-center transition-all duration-300 ${\r\n                isScrolled ? 'space-x-6' : 'space-x-8'\r\n              }`}>\r\n                {navigationItems.map((item) => (\r\n                  <div key={item.name} className=\"relative\">\r\n                    {item.hasDropdown ? (\r\n                      <div className=\"relative\" ref={categoriesDropdownRef}>\r\n                        <button\r\n                          onClick={() => setIsCategoriesOpen(!isCategoriesOpen)}\r\n                          className={`flex items-center space-x-1 px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg ${\r\n                            isActiveLink(item.href)\r\n                              ? 'text-purple-600 bg-purple-50/50'\r\n                              : isHomePage && !isScrolled\r\n                                ? 'text-white hover:text-purple-200 hover:bg-white/10'\r\n                                : 'text-gray-700 hover:text-purple-600 hover:bg-gray-50'\r\n                          }`}\r\n                        >\r\n                          <span>{item.name}</span>\r\n                          <ChevronDown className={`h-4 w-4 transition-transform duration-200 ${isCategoriesOpen ? 'rotate-180' : ''}`} />\r\n                        </button>\r\n\r\n                        {/* Simplified Dropdown without heavy animations */}\r\n                        {isCategoriesOpen && (\r\n                          <div className=\"absolute top-full left-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50 py-2\">\r\n                            {item.dropdownItems?.map((dropdownItem) => (\r\n                              <Link\r\n                                key={dropdownItem.name}\r\n                                to={dropdownItem.href}\r\n                                onClick={() => {\r\n                                  setIsCategoriesOpen(false);\r\n                                  window.scrollTo(0, 0);\r\n                                }}\r\n                                className=\"block px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600\"\r\n                              >\r\n                                {dropdownItem.name}\r\n                              </Link>\r\n                            ))}\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    ) : (\r\n                      <Link\r\n                        to={item.href}\r\n                        onClick={() => window.scrollTo(0, 0)}\r\n                        className={`px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg ${\r\n                          isActiveLink(item.href)\r\n                            ? 'text-purple-600 bg-purple-50/50'\r\n                            : isHomePage && !isScrolled\r\n                              ? 'text-white hover:text-purple-200 hover:bg-white/10'\r\n                              : 'text-gray-700 hover:text-purple-600 hover:bg-gray-50'\r\n                        }`}\r\n                      >\r\n                        {item.name}\r\n                      </Link>\r\n                    )}\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </nav>\r\n\r\n            {/* Action Bar - Right Aligned */}\r\n            <div className={`flex items-center transition-all duration-300 ${\r\n              isScrolled ? 'space-x-2' : 'space-x-3'\r\n            }`}>\r\n              {/* Search Button */}\r\n              <button\r\n                onClick={() => setIsSearchOpen(true)}\r\n                className={`p-2 transition-all duration-200 rounded-lg ${\r\n                  isHomePage && !isScrolled\r\n                    ? 'text-white/90 hover:text-white hover:bg-white/10'\r\n                    : 'text-gray-600 hover:text-purple-600 hover:bg-purple-50'\r\n                }`}\r\n                aria-label=\"Search\"\r\n              >\r\n                <Search className=\"h-5 w-5\" />\r\n              </button>\r\n\r\n              {/* Wishlist */}\r\n              <Link to=\"/wishlist\" className={`relative p-2 transition-all duration-200 rounded-lg ${\r\n                isHomePage && !isScrolled\r\n                  ? 'text-white/90 hover:text-white hover:bg-white/10'\r\n                  : 'text-gray-600 hover:text-purple-600 hover:bg-purple-50'\r\n              }`}>\r\n                <Heart className=\"h-5 w-5\" />\r\n                {wishlistItems.length > 0 && (\r\n                  <span className=\"absolute -top-1 -right-1 h-5 w-5 text-xs rounded-full flex items-center justify-center font-medium bg-purple-600 text-white shadow-sm\">\r\n                    {wishlistItems.length > 9 ? '9+' : wishlistItems.length}\r\n                  </span>\r\n                )}\r\n              </Link>\r\n\r\n              {/* Cart */}\r\n              <button\r\n                onClick={() => {\r\n                  onCartClick();\r\n                  window.scrollTo(0, 0);\r\n                }}\r\n                className={`relative p-2 transition-all duration-200 rounded-lg ${\r\n                  isHomePage && !isScrolled\r\n                    ? 'text-white/90 hover:text-white hover:bg-white/10'\r\n                    : 'text-gray-600 hover:text-purple-600 hover:bg-purple-50'\r\n                }`}\r\n                aria-label={`Shopping cart (${itemCount} items)`}\r\n              >\r\n                <ShoppingCart className=\"h-5 w-5\" />\r\n                {itemCount > 0 && (\r\n                  <span className=\"absolute -top-1 -right-1 h-5 w-5 text-xs rounded-full flex items-center justify-center font-medium bg-purple-600 text-white shadow-sm\">\r\n                    {itemCount > 9 ? '9+' : itemCount}\r\n                  </span>\r\n                )}\r\n              </button>\r\n\r\n              {/* Get Started Button */}\r\n              {user ? (\r\n                <div className=\"relative\" ref={userMenuRef}>\r\n                  <button\r\n                    onClick={() => setIsUserMenuOpen(!isUserMenuOpen)}\r\n                    className={`flex items-center space-x-2 p-2 transition-all duration-200 rounded-lg ${\r\n                      isHomePage && !isScrolled\r\n                        ? 'text-white/90 hover:text-white hover:bg-white/10'\r\n                        : 'text-gray-600 hover:text-purple-600 hover:bg-purple-50'\r\n                    }`}\r\n                  >\r\n                    <img\r\n                      src={user.avatar || `https://api.dicebear.com/8.x/initials/svg?seed=${user.name}`}\r\n                      alt={user.name}\r\n                      className=\"h-8 w-8 rounded-full border-2 border-white/30 shadow-sm\"\r\n                    />\r\n                  </button>\r\n                  {isUserMenuOpen && (\r\n                    <div className=\"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50 py-2\">\r\n                      <div className=\"px-4 py-3 border-b border-gray-200\">\r\n                        <p className=\"text-sm font-semibold text-gray-900\">{user.name}</p>\r\n                        <p className=\"text-xs text-gray-500 uppercase mt-1\">{user.role}</p>\r\n\r\n                      </div>\r\n                      <div className=\"py-1\">\r\n                        <Link\r\n                          to=\"/profile\"\r\n                          onClick={() => {\r\n                            setIsUserMenuOpen(false);\r\n                            window.scrollTo(0, 0);\r\n                          }}\r\n                          className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600\"\r\n                        >\r\n                          <User className=\"h-4 w-4 mr-3\" />\r\n                          <span>Profile</span>\r\n                        </Link>\r\n                        <Link\r\n                          to=\"/dashboard\"\r\n                          onClick={() => {\r\n                            setIsUserMenuOpen(false);\r\n                            window.scrollTo(0, 0);\r\n                          }}\r\n                          className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600\"\r\n                        >\r\n                          <Settings className=\"h-4 w-4 mr-3\" />\r\n                          <span>Dashboard</span>\r\n                        </Link>\r\n                        <Link\r\n                          to=\"/orders\"\r\n                          onClick={() => {\r\n                            setIsUserMenuOpen(false);\r\n                            window.scrollTo(0, 0);\r\n                          }}\r\n                          className=\"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600\"\r\n                        >\r\n                          <Package className=\"h-4 w-4 mr-3\" />\r\n                          <span>My Orders</span>\r\n                        </Link>\r\n                      </div>\r\n\n                      <div className=\"border-t border-gray-200 py-1\">\r\n                        <button\r\n                          onClick={() => { \r\n                            logout(); \r\n                            setIsUserMenuOpen(false);\r\n                            window.scrollTo(0, 0);\r\n                          }}\r\n                          className=\"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600\"\r\n                        >\r\n                          <LogOut className=\"h-4 w-4 mr-3\" />\r\n                          <span>Sign Out</span>\r\n                        </button>\r\n                      </div>\r\n                    </div>\r\n                  )}\r\n                </div>\r\n              ) : (\r\n                <button\r\n                  onClick={() => {\r\n                    navigate('/auth');\r\n                    window.scrollTo(0, 0);\r\n                  }}\r\n                  className={`px-6 py-2.5 text-sm font-semibold rounded-full transition-all duration-200 shadow-sm hover:shadow-md flex items-center space-x-2 ${\r\n                    isHomePage && !isScrolled\r\n                      ? 'bg-white/20 hover:bg-white/30 text-white border border-white/30'\r\n                      : 'bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl'\r\n                  }`}\r\n                  aria-label=\"Get Started\"\r\n                >\r\n                  <Sparkles className=\"h-4 w-4\" />\r\n                  <span>Get Started</span>\r\n                </button>\r\n              )}\r\n\r\n              {/* Mobile Menu Button - Visible only on mobile */}\r\n              <button\r\n                onClick={() => setIsMenuOpen(true)}\r\n                className={`md:hidden p-2 transition-all duration-200 rounded-lg ${\r\n                  isHomePage && !isScrolled\r\n                    ? 'text-white/90 hover:text-white hover:bg-white/10'\r\n                    : 'text-gray-600 hover:text-purple-600 hover:bg-purple-50'\r\n                }`}\r\n                aria-label=\"Open menu\"\r\n              >\r\n                <Menu className=\"h-6 w-6\" />\r\n              </button>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </header>\r\n      \r\n      {/* Mobile Navigation Component - Android app-like slide-in */}\r\n      <MobileNavigation \r\n        isOpen={isMenuOpen} \r\n        onClose={() => setIsMenuOpen(false)} \r\n        onCartClick={onCartClick}\r\n      />\r\n      \r\n      <SearchOverlay isOpen={isSearchOpen} onClose={() => setIsSearchOpen(false)} />\r\n    </>\r\n  );\r\n};\r\n\r\nexport default Header;\r\n","import React from 'react';\r\nimport { Facebook, Twitter, Instagram, Youtube, Mail, Phone, MapPin } from 'lucide-react';\r\nimport logo from '../../assets/images/logo.png';\r\n\r\nexport const Footer: React.FC = () => {\r\n  const footerSections = [\r\n    {\r\n      title: 'Company',\r\n      links: ['About Us', 'Careers', 'Press', 'News', 'Privacy Policy', 'Terms of Service'],\r\n    },\r\n    {\r\n      title: 'Customer Service',\r\n      links: ['Help Center', 'Contact Us', 'Return Policy', 'Size Guide', 'Track Your Order', 'FAQ'],\r\n    },\r\n    {\r\n      title: 'Categories',\r\n      links: ['Oudh Attars', 'Floral Attars', 'Musk Attars', 'Amber Attars', 'Sandalwood Attars', 'Heritage Attars'],\r\n    },\r\n    {\r\n      title: 'Quick Links',\r\n      links: ['New Arrivals', 'Best Sellers', 'Sale', 'Brands', 'Gift Cards', 'Wishlist'],\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <footer className=\"bg-neutral-900 text-text-inverse\">\r\n      <div className=\"container-luxury section-padding\">\r\n        {/* Updated grid layout for better responsiveness */}\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-8 md:gap-10 lg:gap-12\">\r\n          {/* Brand Section */}\r\n          <div className=\"lg:col-span-2 xl:col-span-2\">\r\n            <div className=\"flex items-center space-x-3 mb-6\">\r\n              <img \r\n                src={logo} \r\n                alt=\"Logo\" \r\n                className=\"w-8 h-8 object-contain\"\r\n              />\r\n              <h3 className=\"text-2xl font-semibold text-text-inverse font-luxury\">S.Essences</h3>\r\n            </div>\r\n            <p className=\"text-neutral-300 mb-8 leading-relaxed max-w-md\">\r\n              Your destination for curated excellence. We bring together the finest products with uncompromising quality and sophisticated design.\r\n            </p>\r\n            <div className=\"flex space-x-4\">\r\n              <a href=\"#\" className=\"text-neutral-400 hover:text-text-inverse transition-colors duration-200 p-2 rounded-lg hover:bg-neutral-800\">\r\n                <Facebook className=\"h-5 w-5\" />\r\n              </a>\r\n              <a href=\"#\" className=\"text-neutral-400 hover:text-text-inverse transition-colors duration-200 p-2 rounded-lg hover:bg-neutral-800\">\r\n                <Twitter className=\"h-5 w-5\" />\r\n              </a>\r\n              <a href=\"#\" className=\"text-neutral-400 hover:text-text-inverse transition-colors duration-200 p-2 rounded-lg hover:bg-neutral-800\">\r\n                <Instagram className=\"h-5 w-5\" />\r\n              </a>\r\n              <a href=\"#\" className=\"text-neutral-400 hover:text-text-inverse transition-colors duration-200 p-2 rounded-lg hover:bg-neutral-800\">\r\n                <Youtube className=\"h-5 w-5\" />\r\n              </a>\r\n            </div>\r\n          </div>\r\n\r\n          {/* Footer Links - Updated for better responsiveness */}\r\n          {footerSections.map((section, index) => (\r\n            <div key={section.title} className={`${index === 0 ? 'md:col-span-1' : ''} ${index === 1 ? 'md:col-span-1' : ''}`}>\r\n              <h4 className=\"text-lg font-medium mb-6 text-text-inverse\">{section.title}</h4>\r\n              <ul className=\"space-y-3\">\r\n                {section.links.map((link) => (\r\n                  <li key={link}>\r\n                    <a href=\"#\" className=\"text-neutral-300 hover:text-text-inverse transition-colors duration-200 text-sm leading-relaxed\">\r\n                      {link}\r\n                    </a>\r\n                  </li>\r\n                ))}\r\n              </ul>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Contact Info - Updated for better responsiveness */}\r\n        <div className=\"border-t border-neutral-800 mt-12 md:mt-16 pt-8 md:pt-12\">\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"p-2 bg-neutral-800 rounded-lg\">\r\n                <Mail className=\"h-5 w-5 text-primary-400\" />\r\n              </div>\r\n              <span className=\"text-neutral-300 text-sm md:text-base\">support@sophisticatedcommerce.com</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"p-2 bg-neutral-800 rounded-lg\">\r\n                <Phone className=\"h-5 w-5 text-primary-400\" />\r\n              </div>\r\n              <span className=\"text-neutral-300 text-sm md:text-base\">+1 (555) 123-4567</span>\r\n            </div>\r\n            <div className=\"flex items-center space-x-4\">\r\n              <div className=\"p-2 bg-neutral-800 rounded-lg\">\r\n                <MapPin className=\"h-5 w-5 text-primary-400\" />\r\n              </div>\r\n              <span className=\"text-neutral-300 text-sm md:text-base\">123 Commerce St, City, State 12345</span>\r\n            </div>\r\n          </div>\r\n        </div>\r\n\r\n        {/* Copyright - Updated for better responsiveness */}\r\n        <div className=\"border-t border-neutral-800 mt-8 md:mt-12 pt-6 md:pt-8\">\r\n          <div className=\"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0\">\r\n            <p className=\"text-neutral-400 text-sm\">\r\n               2025 S.Essences. All rights reserved.\r\n            </p>\r\n            <div className=\"flex flex-wrap justify-center md:justify-end space-x-4 md:space-x-6 text-sm\">\r\n              <a href=\"#\" className=\"text-neutral-400 hover:text-text-inverse transition-colors duration-200\">Privacy Policy</a>\r\n              <a href=\"#\" className=\"text-neutral-400 hover:text-text-inverse transition-colors duration-200\">Terms of Service</a>\r\n              <a href=\"#\" className=\"text-neutral-400 hover:text-text-inverse transition-colors duration-200\">Cookie Policy</a>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </footer>\r\n  );\r\n};\r\n","export default \"__VITE_ASSET__BI01Uto4__\"","import React from 'react';\r\nimport { X, Minus, Plus, ShoppingBag } from 'lucide-react';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { Link } from 'react-router-dom';\r\n\r\ninterface CartSidebarProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const CartSidebar: React.FC<CartSidebarProps> = ({ isOpen, onClose }) => {\r\n  const { items, updateQuantity, removeItem, total, clearCart, loading, itemCount } = useCart();\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isOpen && (\r\n        <>\r\n          <motion.div\r\n            initial={{ opacity: 0 }}\r\n            animate={{ opacity: 1 }}\r\n            exit={{ opacity: 0 }}\r\n            className=\"fixed inset-0 bg-black bg-opacity-50 z-50\"\r\n            onClick={onClose}\r\n          />\r\n          \r\n          <motion.div\r\n            initial={{ x: '100%' }}\r\n            animate={{ x: 0 }}\r\n            exit={{ x: '100%' }}\r\n            transition={{ type: 'spring', damping: 25, stiffness: 200 }}\r\n            className=\"fixed right-0 top-0 h-screen w-full max-w-md bg-white shadow-xl z-50\"\r\n            style={{\r\n              height: '100vh',\r\n              maxHeight: '100vh'\r\n            }}\r\n          >\r\n            <div className=\"flex flex-col h-full max-h-screen\">\r\n              {/* Header - flex-shrink-0 to prevent shrinking */}\r\n              <div className=\"flex-shrink-0 flex items-center justify-between p-6 border-b border-neutral-200\">\r\n                <h2 className=\"text-xl font-semibold text-neutral-900\">Shopping Cart ({itemCount})</h2>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"p-2 hover:bg-neutral-100 rounded-lg transition-colors duration-200\"\r\n                  aria-label=\"Close cart\"\r\n                >\r\n                  <X className=\"h-5 w-5 text-neutral-600\" />\r\n                </button>\r\n              </div>\r\n\r\n              {/* Cart Items - flex-grow with overflow handling */}\r\n              <div className=\"flex-grow overflow-y-auto p-6\">\r\n                {loading ? (\r\n                  <div className=\"flex items-center justify-center h-full\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-neutral-900\"></div>\r\n                  </div>\r\n                ) : items.length === 0 ? (\r\n                  <div className=\"flex flex-col items-center justify-center h-64 text-neutral-500\">\r\n                    <ShoppingBag className=\"h-16 w-16 mb-4 text-neutral-300\" />\r\n                    <p className=\"text-lg font-medium mb-2 text-neutral-700\">Your cart is empty</p>\r\n                    <p className=\"text-sm text-neutral-500\">Add some products to get started!</p>\r\n                  </div>\r\n                ) : (\r\n                  <div className=\"space-y-4\">\r\n                    <AnimatePresence>\r\n                      {items.map((item) => (\r\n                        <motion.div\r\n                          key={item.product.id}\r\n                          layout\r\n                          initial={{ opacity: 0, height: 0 }}\r\n                          animate={{ opacity: 1, height: 'auto' }}\r\n                          exit={{ opacity: 0, height: 0 }}\r\n                          className=\"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg\"\r\n                        >\r\n                          <img\r\n                            src={(item.product.images && item.product.images.length > 0 ? item.product.images[0] : '') || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4='}\r\n                            alt={item.product.name}\r\n                            className=\"w-16 h-16 object-cover rounded-lg\"\r\n                          />\r\n                          \r\n                          <div className=\"flex-1 min-w-0\">\r\n                            <h3 className=\"font-medium text-gray-900 truncate\">\r\n                              {item.product.name}\r\n                            </h3>\r\n                            <p className=\"text-sm text-gray-500\">{item.product.price.toLocaleString('en-IN')}</p>\r\n                            \r\n                            <div className=\"flex items-center space-x-2 mt-2\">\r\n                              <button\r\n                                onClick={() => updateQuantity(item.product.id, item.quantity - 1)}\r\n                                className=\"p-1 hover:bg-gray-100 rounded\"\r\n                                aria-label={`Decrease quantity of ${item.product.name}`}\r\n                                disabled={item.quantity <= 1}\r\n                              >\r\n                                <Minus className=\"h-4 w-4\" />\r\n                              </button>\r\n                              <span className=\"px-2 py-1 bg-gray-100 rounded text-sm min-w-[40px] text-center\">\r\n                                {item.quantity}\r\n                              </span>\r\n                              <button\r\n                                onClick={() => updateQuantity(item.product.id, item.quantity + 1)}\r\n                                className=\"p-1 hover:bg-gray-100 rounded\"\r\n                                aria-label={`Increase quantity of ${item.product.name}`}\r\n                              >\r\n                                <Plus className=\"h-4 w-4\" />\r\n                              </button>\r\n                            </div>\r\n                          </div>\r\n                          \r\n                          <div className=\"text-right\">\r\n                            <p className=\"font-semibold text-gray-900\">\r\n                              {(item.product.price * item.quantity).toLocaleString('en-IN')}\r\n                            </p>\r\n                            <button\r\n                              onClick={() => removeItem(item.product.id)}\r\n                              className=\"text-red-500 text-sm hover:text-red-700 mt-1\"\r\n                              aria-label={`Remove ${item.product.name} from cart`}\r\n                            >\r\n                              Remove\r\n                            </button>\r\n                          </div>\r\n                        </motion.div>\r\n                      ))}\r\n                    </AnimatePresence>\r\n                    \r\n                    {items.length > 0 && (\r\n                      <button\r\n                        onClick={clearCart}\r\n                        className=\"w-full text-red-500 text-sm hover:text-red-700 py-2 border border-red-200 rounded-lg hover:bg-red-50 transition-colors\"\r\n                      >\r\n                        Clear Cart\r\n                      </button>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n\r\n              {/* Footer - flex-shrink-0 to prevent shrinking */}\r\n              {items.length > 0 && (\r\n                <div className=\"flex-shrink-0 border-t border-neutral-200 p-6 bg-neutral-50\">\r\n                  <div className=\"flex items-center justify-between mb-6\">\r\n                    <span className=\"text-lg font-semibold text-neutral-700\">Total:</span>\r\n                    <span className=\"text-2xl font-bold text-neutral-900\">${total.toFixed(2)}</span>\r\n                  </div>\r\n\r\n                  <div className=\"space-y-3\">\r\n                    <Link to=\"/checkout\" onClick={onClose}>\r\n                      <motion.button\r\n                        className=\"w-full bg-neutral-900 text-white py-3.5 px-6 rounded-lg font-medium hover:bg-neutral-800 transition-colors duration-200 shadow-lg hover:shadow-xl\"\r\n                        whileHover={{ scale: 1.02 }}\r\n                        whileTap={{ scale: 0.98 }}\r\n                      >\r\n                        Proceed to Checkout\r\n                      </motion.button>\r\n                    </Link>\r\n                    <button\r\n                      onClick={onClose}\r\n                      className=\"w-full bg-white border-2 border-neutral-200 text-neutral-900 py-3.5 px-6 rounded-lg font-medium hover:bg-neutral-50 hover:border-neutral-300 transition-colors duration-200\"\r\n                    >\r\n                      Continue Shopping\r\n                    </button>\r\n                  </div>\r\n                </div>\r\n              )}\r\n            </div>\r\n          </motion.div>\r\n        </>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { X, GitCompare } from 'lucide-react';\r\nimport { useCompare } from '../../contexts/CompareContext';\r\n\r\nexport const CompareTray: React.FC = () => {\r\n  const { items, removeItem, clearCompare } = useCompare();\r\n\r\n  if (items.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <div className=\"fixed bottom-0 left-0 right-0 z-40 bg-white/90 backdrop-blur-lg shadow-[0_-5px_20px_rgba(0,0,0,0.1)]\">\r\n        <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex items-center space-x-4\">\r\n              <h3 className=\"text-lg font-semibold text-gray-900\">Compare Products ({items.length}/4)</h3>\r\n              <div className=\"flex -space-x-4\">\r\n                {items.map(item => (\r\n                  <div key={item.id} className=\"relative group\">\r\n                    <img\r\n                      src={item.images[0]}\r\n                      alt={item.name}\r\n                      className=\"w-12 h-12 object-cover rounded-full border-2 border-white shadow-md\"\r\n                    />\r\n                    <button\r\n                      onClick={() => removeItem(item.id)}\r\n                      className=\"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity\"\r\n                    >\r\n                      <X className=\"h-3 w-3\" />\r\n                    </button>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </div>\r\n            <div className=\"flex items-center space-x-3\">\r\n              <button\r\n                onClick={clearCompare}\r\n                className=\"text-sm text-gray-600 hover:text-red-600\"\r\n              >\r\n                Clear All\r\n              </button>\r\n              <Link to=\"/compare\">\r\n                <button className=\"bg-indigo-600 text-white px-6 py-2.5 rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2 font-medium\">\r\n                  <GitCompare className=\"h-5 w-5\" />\r\n                  <span>Compare Now</span>\r\n                </button>\r\n              </Link>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\nimport { Header } from './Header';\r\nimport { Footer } from './Footer';\r\nimport { CartSidebar } from '../Cart/CartSidebar';\r\nimport { CompareTray } from './CompareTray';\r\n\r\n\r\ninterface LayoutProps {\r\n  children: React.ReactNode;\r\n}\r\n\r\nexport const Layout: React.FC<LayoutProps> = ({ children }) => {\r\n  const [isCartOpen, setIsCartOpen] = useState(false);\r\n  const location = useLocation();\r\n  const isHomePage = location.pathname === '/';\r\n  const isDashboardPage = location.pathname.startsWith('/dashboard');\r\n\r\n  return (\r\n    <div className=\"min-h-screen transition-colors duration-300 bg-background-primary\">\r\n\r\n      {!isDashboardPage && (\r\n        <Header\r\n          onAuthClick={() => { }}\r\n          onCartClick={() => setIsCartOpen(true)}\r\n        />\r\n      )}\r\n\r\n      <main className={`${!isHomePage && !isDashboardPage ? \"pt-20\" : \"\"} relative`}>\r\n        <div className=\"min-h-[calc(100vh-200px)]\">\r\n          {children}\r\n        </div>\r\n      </main>\r\n\r\n      {!isDashboardPage && <Footer />}\r\n\r\n      <CartSidebar\r\n        isOpen={isCartOpen}\r\n        onClose={() => setIsCartOpen(false)}\r\n      />\r\n\r\n      <CompareTray />\r\n    </div>\r\n  );\r\n};","import React from 'react';\r\nimport { AlertTriangle, X, Database, RefreshCw } from 'lucide-react';\r\nimport { useError } from '../../contexts/ErrorContext';\r\nimport { detectRLSRecursionError, generateRLSFixSuggestion } from '../../utils/errorHandling';\r\n\r\nexport const DatabaseErrorOverlay: React.FC = () => {\r\n  const { error, setError } = useError();\r\n\r\n  if (!error) return null;\r\n\r\n  // Detect specific error types\r\n  const errorObj = new Error(error);\r\n  const isRLSRecursion = detectRLSRecursionError(errorObj);\r\n  const isRLSIssue = error.includes('row-level security') || error.includes('policy');\r\n  const isConnectionIssue = error.includes('connection') || error.includes('network');\r\n  \r\n  // Generate appropriate guidance\r\n  const getErrorGuidance = () => {\r\n    if (isRLSRecursion) {\r\n      return {\r\n        title: 'RLS Infinite Recursion Detected',\r\n        description: 'Your database Row Level Security policies are causing an infinite loop. This is a common setup issue that can be easily fixed.',\r\n        solution: [\r\n          'Run the rls_policies_fix.sql script in your Supabase SQL Editor',\r\n          'This script replaces problematic policies with safe alternatives',\r\n          'The fix includes role caching to prevent future recursion issues',\r\n          'After running the script, refresh this page'\r\n        ],\r\n        scriptFile: 'rls_policies_fix.sql',\r\n        severity: 'critical'\r\n      };\r\n    }\r\n    \r\n    if (isRLSIssue) {\r\n      return {\r\n        title: 'Row Level Security Policy Issue',\r\n        description: 'There\\'s an issue with your database security policies. This affects data access permissions.',\r\n        solution: [\r\n          'Check your user role and permissions',\r\n          'Run the database_schema_fixes.sql script to ensure policies are correct',\r\n          'Verify you have the necessary access rights',\r\n          'Contact support if the issue persists'\r\n        ],\r\n        scriptFile: 'database_schema_fixes.sql',\r\n        severity: 'high'\r\n      };\r\n    }\r\n    \r\n    if (isConnectionIssue) {\r\n      return {\r\n        title: 'Database Connection Error',\r\n        description: 'Unable to connect to the database. This could be a network or configuration issue.',\r\n        solution: [\r\n          'Check your internet connection',\r\n          'Verify your Supabase project is active',\r\n          'Check environment variables (VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY)',\r\n          'Try refreshing the page'\r\n        ],\r\n        scriptFile: null,\r\n        severity: 'medium'\r\n      };\r\n    }\r\n    \r\n    return {\r\n      title: 'Database Configuration Required',\r\n      description: 'A critical database setup error has been detected. Your database needs proper configuration.',\r\n      solution: [\r\n        'Run the complete_ecommerce_schema.sql script in your Supabase SQL Editor',\r\n        'Then run the database_schema_fixes.sql script',\r\n        'Finally run the rls_policies_fix.sql script',\r\n        'Refresh the page after completing all scripts'\r\n      ],\r\n      scriptFile: 'complete_ecommerce_schema.sql',\r\n      severity: 'critical'\r\n    };\r\n  };\r\n  \r\n  const guidance = getErrorGuidance();\r\n  \r\n  const getSeverityColor = () => {\r\n    switch (guidance.severity) {\r\n      case 'critical': return 'bg-red-900/95';\r\n      case 'high': return 'bg-orange-900/95';\r\n      case 'medium': return 'bg-yellow-900/95';\r\n      default: return 'bg-red-900/95';\r\n    }\r\n  };\r\n  \r\n  const getSeverityIcon = () => {\r\n    switch (guidance.severity) {\r\n      case 'critical': return AlertTriangle;\r\n      case 'high': return Database;\r\n      case 'medium': return RefreshCw;\r\n      default: return AlertTriangle;\r\n    }\r\n  };\r\n  \r\n  const SeverityIcon = getSeverityIcon();\r\n\r\n  return (\r\n    <div className={`fixed inset-0 ${getSeverityColor()} text-white z-[200] flex items-center justify-center p-8`}>\r\n      <div className=\"max-w-4xl text-center\">\r\n        <SeverityIcon className=\"mx-auto h-16 w-16 text-yellow-400 mb-6\" />\r\n        <h1 className=\"text-4xl font-bold mb-4\">{guidance.title}</h1>\r\n        <p className=\"text-xl text-red-100 mb-8\">\r\n          {guidance.description}\r\n        </p>\r\n        \r\n        {/* Error Details */}\r\n        <div className=\"bg-black/30 p-6 rounded-lg text-left font-mono text-sm mb-8 max-h-32 overflow-y-auto\">\r\n          <p className=\"font-bold text-yellow-300 mb-2\">&gt; Error Details:</p>\r\n          <p className=\"break-words\">{error}</p>\r\n        </div>\r\n        \r\n        {/* Solution Steps */}\r\n        <div className=\"bg-black/20 p-6 rounded-lg text-left mb-8\">\r\n          <h3 className=\"font-bold text-yellow-300 mb-4 text-lg\"> How to Fix This:</h3>\r\n          <ol className=\"list-decimal list-inside space-y-2 text-red-100\">\r\n            {guidance.solution.map((step, index) => (\r\n              <li key={index} className=\"leading-relaxed\">{step}</li>\r\n            ))}\r\n          </ol>\r\n          \r\n          {guidance.scriptFile && (\r\n            <div className=\"mt-4 p-3 bg-blue-900/30 rounded border border-blue-500\">\r\n              <p className=\"text-blue-200 text-sm\">\r\n                 <strong>Script to run:</strong> <code className=\"bg-black/30 px-2 py-1 rounded\">{guidance.scriptFile}</code>\r\n              </p>\r\n            </div>\r\n          )}\r\n        </div>\r\n        \r\n        {/* RLS-specific additional help */}\r\n        {isRLSRecursion && (\r\n          <div className=\"bg-purple-900/20 border border-purple-500 p-4 rounded-lg mb-8 text-left\">\r\n            <h4 className=\"font-bold text-purple-300 mb-2\"> Understanding RLS Recursion:</h4>\r\n            <p className=\"text-purple-100 text-sm leading-relaxed\">\r\n              Row Level Security (RLS) infinite recursion occurs when a security policy on a table references the same table \r\n              in its condition. For example, checking if a user is an admin by querying the profiles table from within a \r\n              profiles table policy creates a loop. Our fix uses safe role caching to avoid this issue.\r\n            </p>\r\n          </div>\r\n        )}\r\n        \r\n        {/* Action Buttons */}\r\n        <div className=\"flex justify-center space-x-4\">\r\n          <button\r\n            onClick={() => setError(null)}\r\n            className=\"bg-yellow-400 text-red-900 font-bold px-8 py-3 rounded-lg hover:bg-yellow-300 transition-colors flex items-center\"\r\n          >\r\n            <X className=\"mr-2 h-5 w-5\" />\r\n            I will fix this (Dismiss)\r\n          </button>\r\n          \r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            className=\"bg-blue-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-blue-500 transition-colors flex items-center\"\r\n          >\r\n            <RefreshCw className=\"mr-2 h-5 w-5\" />\r\n            Refresh Page\r\n          </button>\r\n        </div>\r\n        \r\n        {/* Additional Resources */}\r\n        <div className=\"mt-8 text-sm text-red-200\">\r\n          <p>Need help? Check the project documentation or contact support.</p>\r\n          <p className=\"mt-2\">\r\n             <strong>Files in your project:</strong> All SQL scripts are in your project root directory\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { Component, ReactNode } from 'react';\r\nimport { AlertTriangle, RefreshCw, Home } from 'lucide-react';\r\n\r\ninterface ErrorInfo {\r\n  componentStack: string;\r\n}\r\n\r\ninterface ErrorBoundaryState {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n  errorInfo: ErrorInfo | null;\r\n}\r\n\r\ninterface ErrorBoundaryProps {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n}\r\n\r\nexport class ErrorBoundary extends Component<ErrorBoundaryProps, ErrorBoundaryState> {\r\n  constructor(props: ErrorBoundaryProps) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null\r\n    };\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): Partial<ErrorBoundaryState> {\r\n    return {\r\n      hasError: true,\r\n      error\r\n    };\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    // Filter out common browser extension and cross-origin errors\r\n    const ignoredErrors = [\r\n      'XrayWrapper',\r\n      'cross-origin',\r\n      'webkit-text-size-adjust',\r\n      'content-script',\r\n      '__cf_bm',\r\n      'Invalid URI',\r\n      'Load of media resource'\r\n    ];\r\n\r\n    const shouldIgnore = ignoredErrors.some(ignored =>\r\n      error.message?.includes(ignored) || error.stack?.includes(ignored)\r\n    );\r\n\r\n    // Error logging removed for production\r\n\r\n    this.setState({\r\n      error,\r\n      errorInfo\r\n    });\r\n\r\n    // Call the onError callback if provided\r\n    if (this.props.onError && !shouldIgnore) {\r\n      this.props.onError(error, errorInfo);\r\n    }\r\n\r\n    // In a real app, you might want to log this to an error reporting service\r\n    if (!shouldIgnore && import.meta.env.PROD) {\r\n      // logErrorToService(error, errorInfo);\r\n    }\r\n  }\r\n\r\n  handleRetry = () => {\r\n    this.setState({\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null\r\n    });\r\n  };\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // Custom fallback UI\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      return (\r\n        <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n          <div className=\"max-w-md w-full mx-auto text-center\">\r\n            <div className=\"bg-white rounded-lg shadow-lg p-8\">\r\n              <div className=\"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6\">\r\n                <AlertTriangle className=\"h-8 w-8 text-red-600\" />\r\n              </div>\r\n\r\n              <h1 className=\"text-2xl font-bold text-gray-900 mb-4\">\r\n                Something went wrong\r\n              </h1>\r\n\r\n              <p className=\"text-gray-600 mb-6\">\r\n                We're sorry, but something unexpected happened. Please try again or return to the home page.\r\n              </p>\r\n\r\n              {process.env.NODE_ENV === 'development' && this.state.error && (\r\n                <div className=\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6 text-left\">\r\n                  <p className=\"text-sm font-medium text-red-800 mb-2\">Error Details:</p>\r\n                  <pre className=\"text-xs text-red-700 overflow-auto max-h-32\">\r\n                    {this.state.error.toString()}\r\n                  </pre>\r\n                </div>\r\n              )}\r\n\r\n              <div className=\"flex flex-col sm:flex-row gap-4\">\r\n                <button\r\n                  onClick={this.handleRetry}\r\n                  className=\"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors font-medium flex items-center justify-center\"\r\n                >\r\n                  <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n                  Try Again\r\n                </button>\r\n\r\n                <a\r\n                  href=\"/\"\r\n                  className=\"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center justify-center\"\r\n                >\r\n                  <Home className=\"h-4 w-4 mr-2\" />\r\n                  Go Home\r\n                </a>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\n// Higher-order component for wrapping components with error boundary\r\nexport function withErrorBoundary<P extends object>(\r\n  Component: React.ComponentType<P>,\r\n  fallback?: ReactNode\r\n) {\r\n  return function WrappedComponent(props: P) {\r\n    return (\r\n      <ErrorBoundary fallback={fallback}>\r\n        <Component {...props} />\r\n      </ErrorBoundary>\r\n    );\r\n  };\r\n}\r\n","import { useEffect } from 'react';\r\nimport { useLocation } from 'react-router-dom';\r\n\r\n/**\r\n * ScrollToTop component that automatically scrolls to the top of the page\r\n * whenever the route changes. This ensures a consistent user experience\r\n * across all page transitions.\r\n */\r\nexport const ScrollToTop: React.FC = () => {\r\n  const { pathname } = useLocation();\r\n\r\n  useEffect(() => {\r\n    // Use smooth scrolling for better user experience\r\n    // Add a small delay to ensure DOM is ready\r\n    const timer = setTimeout(() => {\r\n      window.scrollTo({\r\n        top: 0,\r\n        left: 0,\r\n        behavior: 'smooth'\r\n      });\r\n    }, 100);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, [pathname]);\r\n\r\n  // This component doesn't render anything\r\n  return null;\r\n};","import React, { memo } from 'react';\r\nimport { Loader, AlertCircle, CheckCircle, WifiOff, RefreshCw } from 'lucide-react';\r\n\r\nexport type LoaderType = 'spinner' | 'dots' | 'pulse' | 'skeleton' | 'progress';\r\nexport type LoaderSize = 'xs' | 'sm' | 'md' | 'lg' | 'xl';\r\nexport type LoaderStatus = 'loading' | 'success' | 'error' | 'offline' | 'retry';\r\n\r\ninterface UniversalLoaderProps {\r\n    type?: LoaderType;\r\n    size?: LoaderSize;\r\n    status?: LoaderStatus;\r\n    text?: string;\r\n    subText?: string;\r\n    progress?: number; // 0-100\r\n    overlay?: boolean;\r\n    className?: string;\r\n    onRetry?: () => void;\r\n    showIcon?: boolean;\r\n    animated?: boolean;\r\n}\r\n\r\nconst sizeClasses = {\r\n    xs: 'w-3 h-3',\r\n    sm: 'w-4 h-4',\r\n    md: 'w-6 h-6',\r\n    lg: 'w-8 h-8',\r\n    xl: 'w-12 h-12'\r\n};\r\n\r\nconst textSizeClasses = {\r\n    xs: 'text-xs',\r\n    sm: 'text-sm',\r\n    md: 'text-base',\r\n    lg: 'text-lg',\r\n    xl: 'text-xl'\r\n};\r\n\r\nexport const UniversalLoader = memo<UniversalLoaderProps>(({\r\n    type = 'spinner',\r\n    size = 'md',\r\n    status = 'loading',\r\n    text,\r\n    subText,\r\n    progress = 0,\r\n    overlay = false,\r\n    className = '',\r\n    onRetry,\r\n    showIcon = true,\r\n    animated = true\r\n}) => {\r\n    const getIcon = () => {\r\n        if (!showIcon) return null;\r\n\r\n        const iconClass = `${sizeClasses[size]} ${status === 'loading' ? 'text-blue-500' :\r\n                status === 'success' ? 'text-green-500' :\r\n                    status === 'error' ? 'text-red-500' :\r\n                        status === 'offline' ? 'text-gray-500' :\r\n                            'text-blue-500'\r\n            }`;\r\n\r\n        switch (status) {\r\n            case 'success':\r\n                return <CheckCircle className={iconClass} />;\r\n            case 'error':\r\n                return <AlertCircle className={iconClass} />;\r\n            case 'offline':\r\n                return <WifiOff className={iconClass} />;\r\n            case 'retry':\r\n                return <RefreshCw className={`${iconClass} ${animated ? 'animate-spin' : ''}`} />;\r\n            default:\r\n                return <Loader className={`${iconClass} ${animated ? 'animate-spin' : ''}`} />;\r\n        }\r\n    };\r\n\r\n    const getLoaderContent = () => {\r\n        switch (type) {\r\n            case 'dots':\r\n                return (\r\n                    <div className=\"flex space-x-1\">\r\n                        {[0, 1, 2].map((i) => (\r\n                            <div\r\n                                key={i}\r\n                                className={`${sizeClasses[size]} bg-blue-500 rounded-full ${animated ? 'animate-pulse' : ''\r\n                                    }`}\r\n                                style={{\r\n                                    animationDelay: `${i * 0.2}s`,\r\n                                    animationDuration: '1s'\r\n                                }}\r\n                            />\r\n                        ))}\r\n                    </div>\r\n                );\r\n\r\n            case 'pulse':\r\n                return (\r\n                    <div\r\n                        className={`${sizeClasses[size]} bg-blue-500 rounded-full ${animated ? 'animate-pulse' : ''\r\n                            }`}\r\n                    />\r\n                );\r\n\r\n            case 'skeleton':\r\n                return (\r\n                    <div className=\"space-y-2\">\r\n                        <div className={`h-4 bg-gray-200 rounded ${animated ? 'animate-pulse' : ''}`} />\r\n                        <div className={`h-4 bg-gray-200 rounded w-3/4 ${animated ? 'animate-pulse' : ''}`} />\r\n                        <div className={`h-4 bg-gray-200 rounded w-1/2 ${animated ? 'animate-pulse' : ''}`} />\r\n                    </div>\r\n                );\r\n\r\n            case 'progress':\r\n                return (\r\n                    <div className=\"w-full max-w-xs\">\r\n                        <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n                            <div\r\n                                className=\"bg-blue-500 h-2 rounded-full transition-all duration-300\"\r\n                                style={{ width: `${Math.min(100, Math.max(0, progress))}%` }}\r\n                            />\r\n                        </div>\r\n                        {text && (\r\n                            <p className={`mt-2 text-center ${textSizeClasses[size]} text-gray-600`}>\r\n                                {text}\r\n                            </p>\r\n                        )}\r\n                    </div>\r\n                );\r\n\r\n            default: // spinner\r\n                return getIcon();\r\n        }\r\n    };\r\n\r\n    const getStatusColor = () => {\r\n        switch (status) {\r\n            case 'success':\r\n                return 'text-green-600';\r\n            case 'error':\r\n                return 'text-red-600';\r\n            case 'offline':\r\n                return 'text-gray-600';\r\n            default:\r\n                return 'text-gray-600';\r\n        }\r\n    };\r\n\r\n    const content = (\r\n        <div className={`flex flex-col items-center justify-center py-4 ${className}`}>\r\n            <div className=\"flex flex-col items-center space-y-2\">\r\n                {getLoaderContent()}\r\n\r\n                {text && (\r\n                    <p className={`${textSizeClasses[size]} font-medium ${getStatusColor()}`}>\r\n                        {text}\r\n                    </p>\r\n                )}\r\n\r\n                {subText && (\r\n                    <p className={`${textSizeClasses[size === 'xs' ? 'xs' : 'sm']} text-gray-500 text-center max-w-xs`}>\r\n                        {subText}\r\n                    </p>\r\n                )}\r\n\r\n                {status === 'error' && onRetry && (\r\n                    <button\r\n                        onClick={onRetry}\r\n                        className=\"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm font-medium\"\r\n                    >\r\n                        Try Again\r\n                    </button>\r\n                )}\r\n\r\n                {status === 'offline' && (\r\n                    <div className=\"mt-2 flex items-center text-xs text-gray-500\">\r\n                        <WifiOff className=\"h-3 w-3 mr-1\" />\r\n                        <span>Check your internet connection</span>\r\n                    </div>\r\n                )}\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    if (overlay) {\r\n        return (\r\n            <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n                <div className=\"bg-white rounded-lg p-6 shadow-xl max-w-sm w-full mx-4\">\r\n                    {content}\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return content;\r\n});\r\n\r\nUniversalLoader.displayName = 'UniversalLoader';\r\n\r\n// Convenience components for common use cases\r\nexport const PageLoader = memo<Omit<UniversalLoaderProps, 'type' | 'size'>>((props) => (\r\n    <div className=\"min-h-screen flex items-center justify-center bg-gray-50\">\r\n        <UniversalLoader type=\"spinner\" size=\"lg\" {...props} />\r\n    </div>\r\n));\r\n\r\nexport const CardLoader = memo<Omit<UniversalLoaderProps, 'type' | 'size'>>((props) => (\r\n    <div className=\"p-6\">\r\n        <UniversalLoader type=\"skeleton\" size=\"md\" {...props} />\r\n    </div>\r\n));\r\n\r\nexport const ButtonLoader = memo<Omit<UniversalLoaderProps, 'type' | 'size'>>((props) => (\r\n    <UniversalLoader type=\"spinner\" size=\"sm\" {...props} />\r\n));\r\n\r\nexport const InlineLoader = memo<Omit<UniversalLoaderProps, 'type' | 'size'>>((props) => (\r\n    <UniversalLoader type=\"dots\" size=\"sm\" {...props} />\r\n));\r\n\r\n// Progressive loading component\r\ninterface ProgressiveLoaderProps {\r\n    stages: Array<{\r\n        name: string;\r\n        description?: string;\r\n        completed: boolean;\r\n        loading: boolean;\r\n        error?: boolean;\r\n    }>;\r\n    className?: string;\r\n}\r\n\r\nexport const ProgressiveLoader = memo<ProgressiveLoaderProps>(({\r\n    stages,\r\n    className = ''\r\n}) => {\r\n    const completedStages = stages.filter(stage => stage.completed).length;\r\n    const totalStages = stages.length;\r\n    const progress = totalStages > 0 ? (completedStages / totalStages) * 100 : 0;\r\n\r\n    return (\r\n        <div className={`bg-white rounded-lg border border-gray-200 p-6 ${className}`}>\r\n            <div className=\"mb-4\">\r\n                <div className=\"flex items-center justify-between mb-2\">\r\n                    <h3 className=\"text-sm font-medium text-gray-900\">Loading Content</h3>\r\n                    <span className=\"text-xs text-gray-500\">{completedStages}/{totalStages}</span>\r\n                </div>\r\n                <div className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n                    <div\r\n                        className=\"h-full bg-blue-500 rounded-full transition-all duration-500\"\r\n                        style={{ width: `${progress}%` }}\r\n                    />\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"space-y-3\">\r\n                {stages.map((stage, index) => (\r\n                    <div key={index} className=\"flex items-center space-x-3\">\r\n                        <div className=\"flex-shrink-0\">\r\n                            {stage.completed ? (\r\n                                <CheckCircle className=\"h-4 w-4 text-green-500\" />\r\n                            ) : stage.error ? (\r\n                                <AlertCircle className=\"h-4 w-4 text-red-500\" />\r\n                            ) : stage.loading ? (\r\n                                <Loader className=\"h-4 w-4 text-blue-500 animate-spin\" />\r\n                            ) : (\r\n                                <div className=\"h-4 w-4 border-2 border-gray-300 rounded-full\" />\r\n                            )}\r\n                        </div>\r\n                        <div className=\"flex-1 min-w-0\">\r\n                            <p className={`text-sm font-medium ${stage.completed ? 'text-green-600' :\r\n                                    stage.error ? 'text-red-600' :\r\n                                        stage.loading ? 'text-blue-600' : 'text-gray-500'\r\n                                }`}>\r\n                                {stage.name}\r\n                            </p>\r\n                            {stage.description && (\r\n                                <p className=\"text-xs text-gray-500 mt-1\">{stage.description}</p>\r\n                            )}\r\n                        </div>\r\n                    </div>\r\n                ))}\r\n            </div>\r\n        </div>\r\n    );\r\n});\r\n\r\nProgressiveLoader.displayName = 'ProgressiveLoader';\r\n\r\n","import React, { useState, useRef, useEffect } from 'react';\r\nimport { AlertTriangle, RefreshCw } from 'lucide-react';\r\n\r\ninterface MediaErrorHandlerProps {\r\n  src: string;\r\n  alt: string;\r\n  fallbackSrc?: string;\r\n  className?: string;\r\n  width?: number;\r\n  height?: number;\r\n  onError?: (error: Event) => void;\r\n  onLoad?: () => void;\r\n  retryAttempts?: number;\r\n  placeholder?: React.ReactNode;\r\n}\r\n\r\n/**\r\n * Enhanced image component with error handling and retry logic\r\n */\r\nexport const SafeImage: React.FC<MediaErrorHandlerProps> = ({\r\n  src,\r\n  alt,\r\n  fallbackSrc,\r\n  className = '',\r\n  width,\r\n  height,\r\n  onError,\r\n  onLoad,\r\n  retryAttempts = 2,\r\n  placeholder\r\n}) => {\r\n  const [currentSrc, setCurrentSrc] = useState(src);\r\n  const [hasError, setHasError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n  const [attempts, setAttempts] = useState(0);\r\n  const imgRef = useRef<HTMLImageElement>(null);\r\n\r\n  const handleError = (event: React.SyntheticEvent<HTMLImageElement, Event>) => {\r\n    console.warn(`Image load failed: ${currentSrc}`);\r\n\r\n    if (onError) {\r\n      onError(event.nativeEvent);\r\n    }\r\n\r\n    // Try fallback or retry\r\n    if (attempts < retryAttempts) {\r\n      setAttempts(prev => prev + 1);\r\n      // Add cache busting parameter for retry\r\n      const separator = currentSrc.includes('?') ? '&' : '?';\r\n      setCurrentSrc(`${currentSrc}${separator}retry=${attempts + 1}`);\r\n    } else if (fallbackSrc && currentSrc !== fallbackSrc) {\r\n      setCurrentSrc(fallbackSrc);\r\n      setAttempts(0);\r\n    } else {\r\n      setHasError(true);\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleLoad = () => {\r\n    setIsLoading(false);\r\n    setHasError(false);\r\n    if (onLoad) {\r\n      onLoad();\r\n    }\r\n  };\r\n\r\n  const handleRetry = () => {\r\n    setHasError(false);\r\n    setIsLoading(true);\r\n    setAttempts(0);\r\n    setCurrentSrc(src);\r\n  };\r\n\r\n  // Reset when src changes\r\n  useEffect(() => {\r\n    setCurrentSrc(src);\r\n    setHasError(false);\r\n    setIsLoading(true);\r\n    setAttempts(0);\r\n  }, [src]);\r\n\r\n  if (hasError) {\r\n    return (\r\n      <div\r\n        className={`flex flex-col items-center justify-center bg-gray-100 border border-gray-200 rounded ${className}`}\r\n        style={{ width, height: height || 'auto', minHeight: height ? `${height}px` : '100px' }}\r\n      >\r\n        <AlertTriangle className=\"h-8 w-8 text-gray-400 mb-2\" />\r\n        <p className=\"text-sm text-gray-500 text-center mb-2\">Failed to load image</p>\r\n        <button\r\n          onClick={handleRetry}\r\n          className=\"flex items-center px-3 py-1 text-xs bg-gray-200 hover:bg-gray-300 rounded transition-colors\"\r\n        >\r\n          <RefreshCw className=\"h-3 w-3 mr-1\" />\r\n          Retry\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"relative\">\r\n      {isLoading && placeholder && (\r\n        <div className=\"absolute inset-0 flex items-center justify-center bg-gray-100 rounded\">\r\n          {placeholder}\r\n        </div>\r\n      )}\r\n      <img\r\n        ref={imgRef}\r\n        src={currentSrc}\r\n        alt={alt}\r\n        width={width}\r\n        height={height}\r\n        className={`${className} ${isLoading ? 'opacity-0' : 'opacity-100'} transition-opacity duration-300`}\r\n        onError={handleError}\r\n        onLoad={handleLoad}\r\n        loading=\"lazy\"\r\n        decoding=\"async\"\r\n        crossOrigin=\"anonymous\"\r\n        style={{\r\n          ...(width && height && {\r\n            aspectRatio: `${width} / ${height}`\r\n          })\r\n        }}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Default placeholder component\r\n */\r\nexport const ImagePlaceholder: React.FC<{ size?: 'sm' | 'md' | 'lg' }> = ({ size = 'md' }) => {\r\n  const sizeClasses = {\r\n    sm: 'h-4 w-4',\r\n    md: 'h-8 w-8',\r\n    lg: 'h-12 w-12'\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex items-center justify-center\">\r\n      <ImageIcon className={`${sizeClasses[size]} text-gray-400 animate-pulse`} />\r\n    </div>\r\n  );\r\n};\r\n\r\n/**\r\n * Video component with error handling\r\n */\r\ninterface SafeVideoProps {\r\n  src: string;\r\n  poster?: string;\r\n  className?: string;\r\n  width?: number;\r\n  height?: number;\r\n  autoPlay?: boolean;\r\n  muted?: boolean;\r\n  loop?: boolean;\r\n  controls?: boolean;\r\n  onError?: (error: Event) => void;\r\n  onLoad?: () => void;\r\n}\r\n\r\nexport const SafeVideo: React.FC<SafeVideoProps> = ({\r\n  src,\r\n  poster,\r\n  className = '',\r\n  width,\r\n  height,\r\n  autoPlay = false,\r\n  muted = true,\r\n  loop = false,\r\n  controls = true,\r\n  onError,\r\n  onLoad\r\n}) => {\r\n  const [hasError, setHasError] = useState(false);\r\n  const [isLoading, setIsLoading] = useState(true);\r\n\r\n  const handleError = (event: React.SyntheticEvent<HTMLVideoElement, Event>) => {\r\n    console.warn(`Video load failed: ${src}`);\r\n    setHasError(true);\r\n    setIsLoading(false);\r\n\r\n    if (onError) {\r\n      onError(event.nativeEvent);\r\n    }\r\n  };\r\n\r\n  const handleLoad = () => {\r\n    setIsLoading(false);\r\n    setHasError(false);\r\n    if (onLoad) {\r\n      onLoad();\r\n    }\r\n  };\r\n\r\n  if (hasError) {\r\n    return (\r\n      <div\r\n        className={`flex flex-col items-center justify-center bg-gray-100 border border-gray-200 rounded ${className}`}\r\n        style={{ width, height: height || 'auto', minHeight: '200px' }}\r\n      >\r\n        <AlertTriangle className=\"h-12 w-12 text-gray-400 mb-2\" />\r\n        <p className=\"text-sm text-gray-500 text-center\">Video unavailable</p>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <video\r\n      src={src}\r\n      poster={poster}\r\n      width={width}\r\n      height={height}\r\n      className={className}\r\n      autoPlay={autoPlay}\r\n      muted={muted}\r\n      loop={loop}\r\n      controls={controls}\r\n      onError={handleError}\r\n      onLoadedData={handleLoad}\r\n      preload=\"metadata\"\r\n      crossOrigin=\"anonymous\"\r\n    />\r\n  );\r\n};\r\n\r\n/**\r\n * Global media error handler for unhandled media errors\r\n */\r\nexport const GlobalMediaErrorHandler: React.FC = () => {\r\n  useEffect(() => {\r\n    const handleGlobalMediaError = (event: Event) => {\r\n      const target = event.target as HTMLMediaElement;\r\n      if (target && (target.tagName === 'IMG' || target.tagName === 'VIDEO' || target.tagName === 'AUDIO')) {\r\n        // Prevent the error from bubbling up and causing console errors\r\n        event.preventDefault();\r\n        event.stopPropagation();\r\n      }\r\n    };\r\n\r\n    // Listen for media errors globally\r\n    document.addEventListener('error', handleGlobalMediaError, true);\r\n\r\n    return () => {\r\n      document.removeEventListener('error', handleGlobalMediaError, true);\r\n    };\r\n  }, []);\r\n\r\n  return null;\r\n};\r\n","import React, { Suspense, useEffect, lazy, memo } from 'react';\nimport { BrowserRouter as Router, Routes, Route } from 'react-router-dom';\nimport './styles/pwa-responsive.css';\nimport { CombinedProvider } from './contexts/CombinedProvider';\nimport { Layout } from './components/Layout/Layout';\nimport { DatabaseErrorOverlay } from './components/Common/DatabaseErrorOverlay';\nimport { ErrorBoundary } from './components/Common/ErrorBoundary';\nimport { ScrollToTop } from './components/Common/ScrollToTop';\nimport { PageLoader } from './components/Common/UniversalLoader';\nimport { GlobalMediaErrorHandler } from './components/Common/MediaErrorHandler';\nimport { SkipLink } from './utils/accessibilityEnhancements';\nimport { initializeDatabase } from './utils/database/init';\n\n// Lazy-loaded pages for code splitting - optimized for performance\nconst HomePage = React.lazy(() => import('./pages/HomePage.tsx'));\nconst ProductsPage = React.lazy(() => import('./pages/ProductsPage.tsx'));\nconst ProductDetailPage = React.lazy(() => import('./pages/ProductDetailPage.tsx'));\nconst SearchPage = React.lazy(() => import('./pages/SearchPage.tsx'));\nconst WishlistPage = React.lazy(() => import('./pages/WishlistPage.tsx'));\nconst ComparePage = React.lazy(() => import('./pages/ComparePage.tsx'));\nconst NewArrivalsPage = React.lazy(() => import('./pages/NewArrivalsPage.tsx'));\nconst DealsPage = React.lazy(() => import('./pages/DealsPage.tsx'));\nconst CategoriesPage = React.lazy(() => import('./pages/CategoriesPage.tsx'));\nconst CollectionsPage = React.lazy(() => import('./pages/CollectionsPage.tsx'));\nconst AuthPage = React.lazy(() => import('./pages/AuthPage.tsx'));\nconst NotFoundPage = React.lazy(() => import('./pages/NotFoundPage.tsx'));\n\n// Heavy admin/dashboard pages - loaded only when needed\nconst DashboardPage = React.lazy(() =>\n  import('./pages/DashboardPage.tsx').then(module => ({ default: module.default }))\n);\nconst ProfilePage = React.lazy(() =>\n  import('./pages/ProductionProfilePage.tsx').then(module => ({ default: module.default }))\n);\nconst CheckoutPage = React.lazy(() =>\n  import('./pages/CheckoutPage.tsx').then(module => ({ default: module.default }))\n);\nconst OrdersPage = React.lazy(() =>\n  import('./pages/OrdersPage.tsx').then(module => ({ default: module.default }))\n);\nconst SettingsPage = React.lazy(() =>\n  import('./pages/SettingsPage.tsx').then(module => ({ default: module.default }))\n);\n\n\n\n// Universal loading fallback component\nconst PageLoadingFallback = memo(() => (\n  <PageLoader\n    text=\"Loading page...\"\n    subText=\"Please wait while we load the content\"\n  />\n));\n\nPageLoadingFallback.displayName = 'PageLoadingFallback';\n\nfunction App() {\n  // Initialize database on app start\n  useEffect(() => {\n    initializeDatabase();\n  }, []);\n\n  // Handle media errors globally\n  useEffect(() => {\n    const handleMediaError = (e: Event) => {\n      const target = e.target as HTMLMediaElement;\n      // Prevent the error from propagating\n      e.stopImmediatePropagation();\n    };\n\n    // Add event listeners for media elements\n    document.addEventListener('error', handleMediaError, true);\n\n    return () => {\n      document.removeEventListener('error', handleMediaError, true);\n    };\n  }, []);\n\n  // Initialize accessibility features\n  useEffect(() => {\n    // This will add skip links and other accessibility features\n    const initializeAccessibility = async () => {\n      const { initializeAccessibility } = await import('./utils/accessibilityEnhancements');\n      initializeAccessibility();\n    };\n\n    initializeAccessibility();\n  }, []);\n\n\n\n  return (\n    <ErrorBoundary>\n      <CombinedProvider>\n        <Router>\n          <GlobalMediaErrorHandler />\n          <ScrollToTop />\n          <SkipLink href=\"#main-content\">Skip to main content</SkipLink>\n          <Layout>\n            <main id=\"main-content\" className=\"focus:outline-none\">\n              <Suspense fallback={<PageLoadingFallback />}>\n                <Routes>\n                  <Route path=\"/\" element={<HomePage />} />\n                  <Route path=\"/products\" element={<ProductsPage />} />\n                  <Route path=\"/products/:id\" element={<ProductDetailPage />} />\n                  <Route path=\"/search\" element={<SearchPage />} />\n                  <Route path=\"/compare\" element={<ComparePage />} />\n                  <Route path=\"/dashboard\" element={<DashboardPage />} />\n                  <Route path=\"/profile\" element={<ProfilePage />} />\n                  <Route path=\"/wishlist\" element={<WishlistPage />} />\n                  <Route path=\"/orders\" element={<OrdersPage />} />\n                  <Route path=\"/checkout\" element={<CheckoutPage />} />\n                  <Route path=\"/settings\" element={<SettingsPage />} />\n                  <Route path=\"/new-arrivals\" element={<NewArrivalsPage />} />\n                  <Route path=\"/deals\" element={<DealsPage />} />\n                  <Route path=\"/categories\" element={<CategoriesPage />} />\n                  <Route path=\"/categories/:slug\" element={<ProductsPage />} />\n                  <Route path=\"/collections\" element={<CollectionsPage />} />\n                  <Route path=\"/collections/:slug\" element={<ProductsPage />} />\n                  <Route path=\"/auth\" element={<AuthPage />} />\n                  <Route path=\"*\" element={<NotFoundPage />} />\n                </Routes>\n              </Suspense>\n            </main>\n          </Layout>\n          <DatabaseErrorOverlay />\n        </Router>\n      </CombinedProvider>\n    </ErrorBoundary>\n  );\n}\n\nexport default App;","import { StrictMode } from 'react';\r\nimport { createRoot } from 'react-dom/client';\r\nimport App from './App.tsx';\r\nimport './index.css';\r\n\r\n// Initialize service worker for PWA and enhanced caching\r\nimport './utils/serviceWorker.ts';\r\n\r\ncreateRoot(document.getElementById('root')!).render(\r\n  <StrictMode>\r\n    <App />\r\n  </StrictMode>,\r\n);\r\n","export default \"__VITE_ASSET__CQPx1jz3__\"","import React, { useState, useEffect, useRef } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Truck, ShieldCheck, RefreshCw } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\nimport heroBackground from '../../assets/images/homepage/hero-background.jpg';\r\n\r\nexport const Hero: React.FC = () => {\r\n  const [isLoaded, setIsLoaded] = useState(false);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  // Initialize after component loads\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => {\r\n      setIsLoaded(true);\r\n    }, 300);\r\n\r\n    return () => clearTimeout(timer);\r\n  }, []);\r\n\r\n  return (\r\n    <section \r\n      ref={containerRef}\r\n      className=\"luxury-hero-section relative min-h-[80vh] sm:min-h-screen overflow-hidden flex items-center justify-center\"\r\n      role=\"banner\"\r\n      aria-label=\"Luxury Perfume Collection Hero\"\r\n    >\r\n      {/* Sophisticated Full-Screen Background */}\r\n      <div className=\"absolute inset-0\">\r\n        {/* Premium Perfume Bottle Composition Background */}\r\n        <div \r\n          className=\"absolute inset-0 bg-cover bg-center bg-no-repeat scale-105\"\r\n          style={{\r\n            backgroundImage: `url('${heroBackground}')`\r\n          }}\r\n        />\r\n        \r\n        {/* Sophisticated Dark Gradient Overlay (25% opacity) */}\r\n        <div className=\"absolute inset-0 luxury-hero-overlay\" />\r\n        \r\n        {/* Premium Vignette Effect for Focus */}\r\n        <div className=\"absolute inset-0 luxury-hero-vignette\" />\r\n        \r\n        {/* Light Ray Effects */}\r\n        <div className=\"absolute inset-0 luxury-light-rays\" />\r\n      </div>\r\n\r\n      {/* Luxury Content Container */}\r\n      <div className=\"relative z-10 luxury-hero-container w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\r\n        <motion.div\r\n          className=\"hero-content\"\r\n          initial={{ opacity: 0, y: 40 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ duration: 1.2, ease: \"easeOut\" }}\r\n          aria-live=\"polite\"\r\n        >\r\n          {/* Elegant Typography Section */}\r\n          <h1 className=\"primary-headline mb-4 sm:mb-6 md:mb-8\">\r\n            <motion.span \r\n              className=\"headline-line-1 block text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-bold text-white mb-2 sm:mb-3\"\r\n              style={{\r\n                fontFamily: 'Poppins, sans-serif',\r\n                letterSpacing: '-0.02em',\r\n                lineHeight: '1.1',\r\n                textShadow: '0 4px 20px rgba(0, 0, 0, 0.5)'\r\n              }}\r\n              initial={{ opacity: 0, y: 30 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ duration: 1, delay: 0.3 }}\r\n            >\r\n              Discover Your Signature\r\n            </motion.span>\r\n            <motion.span \r\n              className=\"headline-line-2 block text-xl sm:text-2xl md:text-3xl lg:text-4xl font-light text-white/95\"\r\n              style={{\r\n                fontFamily: 'Poppins, sans-serif',\r\n                letterSpacing: '-0.01em',\r\n                lineHeight: '1.2',\r\n                textShadow: '0 4px 20px rgba(0, 0, 0, 0.5)'\r\n              }}\r\n              initial={{ opacity: 0, y: 30 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ duration: 1, delay: 0.5 }}\r\n            >\r\n              Fragrance Journey\r\n            </motion.span>\r\n          </h1>\r\n\r\n          <motion.p \r\n            className=\"hero-tagline text-sm sm:text-base md:text-lg text-white/90 font-light mb-6 sm:mb-8 md:mb-10 max-w-2xl mx-auto leading-relaxed px-3 sm:px-0\"\r\n            style={{\r\n              fontFamily: 'Inter, sans-serif',\r\n              letterSpacing: '0.02em',\r\n              textShadow: '0 2px 10px rgba(0, 0, 0, 0.4)'\r\n            }}\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 1, delay: 0.7 }}\r\n          >\r\n            Curated luxury fragrances from world's finest perfume houses\r\n          </motion.p>\r\n\r\n          {/* Sophisticated CTA Buttons */}\r\n          <motion.nav \r\n            className=\"hero-actions flex flex-col sm:flex-row gap-2 sm:gap-3 md:gap-4 justify-center items-center mb-8 sm:mb-10 md:mb-12\"\r\n            aria-label=\"Primary Actions\"\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 1, delay: 0.9 }}\r\n          >\r\n            <Link to=\"/products\" className=\"w-full sm:w-auto\">\r\n              <motion.button \r\n                className=\"primary-cta w-full sm:w-auto px-4 sm:px-5 py-2 sm:py-2.5 md:py-3 bg-gradient-to-r from-purple-600 to-purple-700 text-white font-semibold text-sm sm:text-base rounded-full shadow-lg hover:shadow-xl active:from-purple-700 active:to-purple-800 touch-manipulation\"\r\n                style={{\r\n                  fontFamily: 'Inter, sans-serif',\r\n                  letterSpacing: '0.01em',\r\n                  minWidth: '120px'\r\n                }}\r\n                whileHover={{ \r\n                  scale: 1.02,\r\n                  boxShadow: '0 0 25px rgba(147, 51, 234, 0.5)',\r\n                  transition: { duration: 0.2 }\r\n                }}\r\n                whileTap={{ scale: 0.98 }}\r\n                transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n              >\r\n                Shop Collection\r\n              </motion.button>\r\n            </Link>\r\n            \r\n            <Link to=\"/products?category=fragrance-finder\" className=\"w-full sm:w-auto\">\r\n              <motion.button \r\n                className=\"secondary-cta w-full sm:w-auto px-4 sm:px-5 py-2 sm:py-2.5 md:py-3 bg-white border-2 border-white text-white-700 font-semibold text-sm sm:text-base rounded-full shadow-lg hover:shadow-xl active:bg-gray-50 touch-manipulation\"\r\n                style={{\r\n                  fontFamily: 'Inter, sans-serif',\r\n                  letterSpacing: '0.01em',\r\n                  minWidth: '120px'\r\n                }}\r\n                whileHover={{ \r\n                  scale: 1.02,\r\n                  backgroundColor: 'rgba(255, 255, 255, 0.95)',\r\n                  boxShadow: '0 0 25px rgba(255, 255, 255, 0.4)',\r\n                  transition: { duration: 0.2 }\r\n                }}\r\n                whileTap={{ scale: 0.98 }}\r\n                transition={{ type: \"spring\", stiffness: 300, damping: 20 }}\r\n              >\r\n                Find Your Scent\r\n              </motion.button>\r\n            </Link>\r\n          </motion.nav>\r\n        </motion.div>\r\n      </div>\r\n\r\n      {/* Premium Trust Indicators */}\r\n      <motion.div \r\n        className=\"absolute bottom-4 sm:bottom-6 left-1/2 transform -translate-x-1/2 z-20 w-full max-w-2xl px-3 sm:px-4\"\r\n        initial={{ opacity: 0, y: 30 }}\r\n        animate={{ opacity: 1, y: 0 }}\r\n        transition={{ duration: 1, delay: 1.1 }}\r\n      >\r\n        <div className=\"flex flex-col sm:flex-row items-center justify-center space-y-2 sm:space-y-0 sm:space-x-4 md:space-x-6 text-white/90 text-xs sm:text-sm md:text-base backdrop-blur-sm bg-black/20 rounded-lg sm:rounded-xl py-2 sm:py-3 px-3 sm:px-4 md:px-6\">\r\n          <motion.div \r\n            className=\"flex items-center space-x-1.5 sm:space-x-2\"\r\n            initial={{ opacity: 0, x: -30 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ duration: 0.8, delay: 1.3 }}\r\n          >\r\n            <Truck className=\"h-3.5 w-3.5 sm:h-4 sm:w-4 text-yellow-400\" />\r\n            <span className=\"font-medium\">Free Shipping</span>\r\n          </motion.div>\r\n          \r\n          <motion.div \r\n            className=\"flex items-center space-x-1.5 sm:space-x-2\"\r\n            initial={{ opacity: 0, y: 30 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ duration: 0.8, delay: 1.5 }}\r\n          >\r\n            <ShieldCheck className=\"h-3.5 w-3.5 sm:h-4 sm:w-4 text-yellow-400\" />\r\n            <span className=\"font-medium\">Authentic Products</span>\r\n          </motion.div>\r\n          \r\n          <motion.div \r\n            className=\"flex items-center space-x-1.5 sm:space-x-2\"\r\n            initial={{ opacity: 0, x: 30 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ duration: 0.8, delay: 1.7 }}\r\n          >\r\n            <RefreshCw className=\"h-3.5 w-3.5 sm:h-4 sm:w-4 text-yellow-400\" />\r\n            <span className=\"font-medium\">30-Day Returns</span>\r\n          </motion.div>\r\n        </div>\r\n      </motion.div>\r\n    </section>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { ArrowRight } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { Category } from '../../types';\r\n\r\ninterface CategorySectionProps {\r\n  categories: Category[];\r\n}\r\n\r\nexport const CategorySection: React.FC<CategorySectionProps> = ({ categories }) => {\r\n  // Limit to exactly 6 categories\r\n  const limitedCategories = categories.slice(0, 6);\r\n\r\n  return (\r\n    <section className=\"py-8 sm:py-12 md:py-16 bg-white\">\r\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8\">\r\n        <div className=\"text-center mb-6 sm:mb-8 md:mb-10\">\r\n          <motion.h2\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-neutral-900 mb-2 sm:mb-3 font-luxury leading-tight\"\r\n          >\r\n            Curated Collections\r\n          </motion.h2>\r\n          <motion.p\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            transition={{ delay: 0.1 }}\r\n            className=\"text-sm sm:text-base md:text-lg text-neutral-600 max-w-2xl mx-auto leading-relaxed px-3 sm:px-0\"\r\n          >\r\n            Explore our thoughtfully curated collections, each designed to elevate your lifestyle with sophisticated elegance.\r\n          </motion.p>\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-3 sm:gap-4 md:gap-5\">\r\n          {limitedCategories.map((category, index) => (\r\n            <motion.div\r\n              key={category.id}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              whileInView={{ opacity: 1, y: 0 }}\r\n              viewport={{ once: true }}\r\n              transition={{ delay: index * 0.1 }}\r\n              className=\"touch-manipulation\"\r\n            >\r\n              <Link to={`/products?category=${encodeURIComponent(category.name)}`}>\r\n                <div className=\"card-interactive group relative h-48 sm:h-56 md:h-64 overflow-hidden rounded-lg sm:rounded-xl\">\r\n                  <div className=\"absolute inset-0\">\r\n                    <img\r\n                      src={category.image}\r\n                      alt={category.name}\r\n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-500\"\r\n                    />\r\n                  </div>\r\n\r\n                  {/* Luxury gradient overlay */}\r\n                  <div className=\"absolute inset-0 bg-gradient-to-t from-black/70 via-black/20 to-transparent\"></div>\r\n\r\n                  <div className=\"absolute bottom-0 left-0 right-0 p-3 sm:p-4 text-white\">\r\n                    <h3 className=\"text-base sm:text-lg font-bold mb-1 text-white drop-shadow-lg\">{category.name}</h3>\r\n                    <p className=\"text-[10px] sm:text-xs text-gray-100 mb-2 drop-shadow-md\">\r\n                      {category.productCount} products\r\n                    </p>\r\n                    <div className=\"flex items-center text-[10px] sm:text-xs font-medium text-white drop-shadow-md\">\r\n                      <span>Explore Now</span>\r\n                      <ArrowRight className=\"ml-1 h-2.5 w-2.5 sm:h-3 sm:w-3\" />\r\n                    </div>\r\n                  </div>\r\n\r\n                  <div className=\"absolute top-2 right-2 sm:top-3 sm:right-3 bg-white/95 text-neutral-900 px-2 py-0.5 sm:px-2.5 sm:py-1 rounded-full text-[10px] sm:text-xs font-semibold shadow-md backdrop-blur-sm\">\r\n                    {category.productCount}+ items\r\n                  </div>\r\n                </div>\r\n              </Link>\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    </section>\r\n  );\r\n};","import React from 'react';\r\nimport { Shield, Lock, CreditCard, Award, CheckCircle, Globe } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface TrustBadgeProps {\r\n  variant?: 'horizontal' | 'vertical' | 'compact';\r\n  showLabels?: boolean;\r\n  className?: string;\r\n}\r\n\r\nconst trustBadges = [\r\n  {\r\n    icon: Shield,\r\n    label: 'SSL Secured',\r\n    description: '256-bit encryption',\r\n    color: 'text-green-600',\r\n    bgColor: 'bg-green-50',\r\n    borderColor: 'border-green-200'\r\n  },\r\n  {\r\n    icon: Lock,\r\n    label: 'Privacy Protected',\r\n    description: 'GDPR Compliant',\r\n    color: 'text-blue-600',\r\n    bgColor: 'bg-blue-50',\r\n    borderColor: 'border-blue-200'\r\n  },\r\n  {\r\n    icon: CreditCard,\r\n    label: 'Secure Payments',\r\n    description: 'PCI DSS Certified',\r\n    color: 'text-purple-600',\r\n    bgColor: 'bg-purple-50',\r\n    borderColor: 'border-purple-200'\r\n  },\r\n  {\r\n    icon: Award,\r\n    label: 'Trusted Store',\r\n    description: 'Verified Business',\r\n    color: 'text-amber-600',\r\n    bgColor: 'bg-amber-50',\r\n    borderColor: 'border-amber-200'\r\n  }\r\n];\r\n\r\nexport const TrustBadges: React.FC<TrustBadgeProps> = ({ \r\n  variant = 'horizontal', \r\n  showLabels = true,\r\n  className = ''\r\n}) => {\r\n  const containerClasses = {\r\n    horizontal: 'flex items-center justify-center space-x-6',\r\n    vertical: 'flex flex-col space-y-4',\r\n    compact: 'flex items-center space-x-3'\r\n  };\r\n\r\n  const badgeClasses = {\r\n    horizontal: 'flex items-center space-x-2 px-4 py-3',\r\n    vertical: 'flex items-center space-x-3 px-4 py-3',\r\n    compact: 'flex items-center space-x-1 px-2 py-1'\r\n  };\r\n\r\n  return (\r\n    <div className={`${containerClasses[variant]} ${className}`}>\r\n      {trustBadges.map((badge, index) => (\r\n        <motion.div\r\n          key={badge.label}\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: index * 0.1 }}\r\n          className={`\r\n            ${badgeClasses[variant]}\r\n            ${badge.bgColor} ${badge.borderColor}\r\n            border rounded-lg hover:shadow-md transition-all duration-300\r\n            ${variant === 'compact' ? 'text-xs' : 'text-sm'}\r\n          `}\r\n        >\r\n          <badge.icon className={`\r\n            ${badge.color} \r\n            ${variant === 'compact' ? 'h-4 w-4' : 'h-5 w-5'}\r\n          `} />\r\n          {showLabels && (\r\n            <div className={variant === 'compact' ? '' : 'text-left'}>\r\n              <div className={`font-medium text-gray-900 ${variant === 'compact' ? 'text-xs' : ''}`}>\r\n                {badge.label}\r\n              </div>\r\n              {variant !== 'compact' && (\r\n                <div className=\"text-xs text-gray-600\">\r\n                  {badge.description}\r\n                </div>\r\n              )}\r\n            </div>\r\n          )}\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Security guarantee component for checkout\r\nexport const SecurityGuarantee: React.FC<{ className?: string }> = ({ className = '' }) => {\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.95 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      className={`\r\n        bg-gradient-to-r from-green-50 to-blue-50 \r\n        border border-green-200 rounded-xl p-6 ${className}\r\n      `}\r\n    >\r\n      <div className=\"flex items-center justify-center space-x-3 mb-4\">\r\n        <div className=\"p-2 bg-green-100 rounded-full\">\r\n          <Shield className=\"h-6 w-6 text-green-600\" />\r\n        </div>\r\n        <h3 className=\"text-lg font-semibold text-gray-900\">\r\n          100% Secure Checkout\r\n        </h3>\r\n      </div>\r\n      \r\n      <div className=\"grid grid-cols-2 gap-4 text-sm\">\r\n        <div className=\"flex items-center space-x-2\">\r\n          <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n          <span className=\"text-gray-700\">SSL Encrypted</span>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n          <span className=\"text-gray-700\">PCI Compliant</span>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n          <span className=\"text-gray-700\">Privacy Protected</span>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2\">\r\n          <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n          <span className=\"text-gray-700\">Money Back Guarantee</span>\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"mt-4 text-center\">\r\n        <p className=\"text-xs text-gray-600\">\r\n          Your payment information is processed securely. We do not store credit card details.\r\n        </p>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n// Payment method badges\r\nexport const PaymentBadges: React.FC<{ className?: string }> = ({ className = '' }) => {\r\n  const paymentMethods = [\r\n    { name: 'Visa', logo: '' },\r\n    { name: 'Mastercard', logo: '' },\r\n    { name: 'American Express', logo: '' },\r\n    { name: 'PayPal', logo: '' },\r\n    { name: 'Apple Pay', logo: '' },\r\n    { name: 'Google Pay', logo: '' }\r\n  ];\r\n\r\n  return (\r\n    <div className={`flex items-center justify-center space-x-3 ${className}`}>\r\n      <span className=\"text-sm text-gray-600 font-medium\">We Accept:</span>\r\n      <div className=\"flex items-center space-x-2\">\r\n        {paymentMethods.map((method, index) => (\r\n          <div\r\n            key={method.name}\r\n            className=\"flex items-center justify-center w-10 h-6 bg-white border border-gray-200 rounded text-xs\"\r\n            title={method.name}\r\n          >\r\n            {method.logo}\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Company credibility indicators\r\nexport const CredibilityIndicators: React.FC<{ className?: string }> = ({ className = '' }) => {\r\n  const stats = [\r\n    { value: '10+', label: 'Years in Business', icon: Globe },\r\n    { value: '50K+', label: 'Happy Customers', icon: Award },\r\n    { value: '99.9%', label: 'Uptime Guarantee', icon: Shield },\r\n    { value: '24/7', label: 'Customer Support', icon: CheckCircle }\r\n  ];\r\n\r\n  return (\r\n    <div className={`grid grid-cols-2 md:grid-cols-4 gap-6 ${className}`}>\r\n      {stats.map((stat, index) => (\r\n        <motion.div\r\n          key={stat.label}\r\n          initial={{ opacity: 0, y: 20 }}\r\n          whileInView={{ opacity: 1, y: 0 }}\r\n          viewport={{ once: true }}\r\n          transition={{ delay: index * 0.1 }}\r\n          className=\"text-center\"\r\n        >\r\n          <div className=\"flex items-center justify-center mb-2\">\r\n            <div className=\"p-3 bg-gray-100 rounded-full\">\r\n              <stat.icon className=\"h-6 w-6 text-gray-700\" />\r\n            </div>\r\n          </div>\r\n          <div className=\"text-2xl font-bold text-gray-900 mb-1\">\r\n            {stat.value}\r\n          </div>\r\n          <div className=\"text-sm text-gray-600\">\r\n            {stat.label}\r\n          </div>\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { Eye, ShoppingBag, Users, Star, TrendingUp, Clock } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\n\r\ninterface RecentPurchase {\r\n  id: string;\r\n  customerName: string;\r\n  productName: string;\r\n  location: string;\r\n  timeAgo: string;\r\n  verified: boolean;\r\n}\r\n\r\ninterface SocialProofProps {\r\n  className?: string;\r\n  productId?: string;\r\n  showRecentPurchases?: boolean;\r\n  showViewingCount?: boolean;\r\n  showCustomerCount?: boolean;\r\n}\r\n\r\n// Mock data - in real implementation, this would come from your analytics/database\r\nconst mockRecentPurchases: RecentPurchase[] = [\r\n  {\r\n    id: '1',\r\n    customerName: 'Sarah M.',\r\n    productName: 'Premium Smartphone Pro Max',\r\n    location: 'New York',\r\n    timeAgo: '2 minutes ago',\r\n    verified: true\r\n  },\r\n  {\r\n    id: '2',\r\n    customerName: 'Michael K.',\r\n    productName: 'Wireless Bluetooth Headphones',\r\n    location: 'California',\r\n    timeAgo: '5 minutes ago',\r\n    verified: true\r\n  },\r\n  {\r\n    id: '3',\r\n    customerName: 'Emma L.',\r\n    productName: 'Smart Fitness Watch',\r\n    location: 'Texas',\r\n    timeAgo: '8 minutes ago',\r\n    verified: false\r\n  }\r\n];\r\n\r\nexport const SocialProof: React.FC<SocialProofProps> = ({\r\n  className = '',\r\n  productId,\r\n  showRecentPurchases = true,\r\n  showViewingCount = true,\r\n  showCustomerCount = true\r\n}) => {\r\n  const [currentPurchaseIndex, setCurrentPurchaseIndex] = useState(0);\r\n  const [viewingCount, setViewingCount] = useState(Math.floor(Math.random() * 15) + 3);\r\n\r\n  // Rotate through recent purchases\r\n  useEffect(() => {\r\n    if (!showRecentPurchases) return;\r\n    \r\n    const interval = setInterval(() => {\r\n      setCurrentPurchaseIndex((prev) => (prev + 1) % mockRecentPurchases.length);\r\n    }, 4000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [showRecentPurchases]);\r\n\r\n  // Simulate viewing count changes\r\n  useEffect(() => {\r\n    if (!showViewingCount) return;\r\n    \r\n    const interval = setInterval(() => {\r\n      setViewingCount(prev => {\r\n        const change = Math.random() > 0.5 ? 1 : -1;\r\n        const newCount = prev + change;\r\n        return Math.max(1, Math.min(25, newCount));\r\n      });\r\n    }, 8000);\r\n\r\n    return () => clearInterval(interval);\r\n  }, [showViewingCount, productId]);\r\n\r\n  return (\r\n    <div className={`space-y-4 ${className}`}>\r\n      {/* Recent Purchase Notification */}\r\n      {showRecentPurchases && (\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={currentPurchaseIndex}\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: 20 }}\r\n            className=\"bg-white border border-green-200 rounded-lg p-4 shadow-sm\"\r\n          >\r\n            <div className=\"flex items-center space-x-3\">\r\n              <div className=\"p-2 bg-green-100 rounded-full\">\r\n                <ShoppingBag className=\"h-4 w-4 text-green-600\" />\r\n              </div>\r\n              <div className=\"flex-1\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                  <p className=\"text-sm font-medium text-gray-900\">\r\n                    {mockRecentPurchases[currentPurchaseIndex].customerName}\r\n                  </p>\r\n                  {mockRecentPurchases[currentPurchaseIndex].verified && (\r\n                    <div className=\"w-2 h-2 bg-green-500 rounded-full\" title=\"Verified Purchase\" />\r\n                  )}\r\n                </div>\r\n                <p className=\"text-xs text-gray-600\">\r\n                  from {mockRecentPurchases[currentPurchaseIndex].location} purchased{' '}\r\n                  <span className=\"font-medium\">\r\n                    {mockRecentPurchases[currentPurchaseIndex].productName}\r\n                  </span>\r\n                </p>\r\n                <p className=\"text-xs text-gray-500 flex items-center mt-1\">\r\n                  <Clock className=\"h-3 w-3 mr-1\" />\r\n                  {mockRecentPurchases[currentPurchaseIndex].timeAgo}\r\n                </p>\r\n              </div>\r\n            </div>\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      )}\r\n\r\n      {/* Live Viewing Count */}\r\n      {showViewingCount && (\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.95 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          className=\"bg-blue-50 border border-blue-200 rounded-lg p-3\"\r\n        >\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Eye className=\"h-4 w-4 text-blue-600\" />\r\n            <span className=\"text-sm text-blue-800\">\r\n              <span className=\"font-semibold\">{viewingCount}</span> people are viewing this product\r\n            </span>\r\n            <div className=\"w-2 h-2 bg-blue-500 rounded-full animate-pulse\" />\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n\r\n      {/* Customer Count Indicator */}\r\n      {showCustomerCount && (\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 10 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          className=\"bg-purple-50 border border-purple-200 rounded-lg p-3\"\r\n        >\r\n          <div className=\"flex items-center space-x-2\">\r\n            <Users className=\"h-4 w-4 text-purple-600\" />\r\n            <span className=\"text-sm text-purple-800\">\r\n              Join <span className=\"font-semibold\">50,000+</span> happy customers\r\n            </span>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Review Summary Component\r\nexport const ReviewSummary: React.FC<{\r\n  rating: number;\r\n  reviewCount: number;\r\n  className?: string;\r\n}> = ({ rating, reviewCount, className = '' }) => {\r\n  const percentage = (rating / 5) * 100;\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: 10 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      className={`bg-yellow-50 border border-yellow-200 rounded-lg p-4 ${className}`}\r\n    >\r\n      <div className=\"flex items-center space-x-3\">\r\n        <div className=\"flex items-center space-x-1\">\r\n          {[...Array(5)].map((_, i) => (\r\n            <Star\r\n              key={i}\r\n              className={`h-5 w-5 ${\r\n                i < Math.floor(rating)\r\n                  ? 'text-yellow-400 fill-current'\r\n                  : 'text-gray-300'\r\n              }`}\r\n            />\r\n          ))}\r\n        </div>\r\n        <div>\r\n          <div className=\"flex items-center space-x-2\">\r\n            <span className=\"text-lg font-bold text-gray-900\">{rating.toFixed(1)}</span>\r\n            <span className=\"text-sm text-gray-600\">\r\n              ({reviewCount.toLocaleString()} reviews)\r\n            </span>\r\n          </div>\r\n          <div className=\"text-xs text-gray-600\">\r\n            {percentage.toFixed(0)}% of customers recommend this product\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n// Trending Indicator\r\nexport const TrendingIndicator: React.FC<{\r\n  isHot?: boolean;\r\n  salesIncrease?: number;\r\n  className?: string;\r\n}> = ({ isHot = false, salesIncrease = 0, className = '' }) => {\r\n  if (!isHot && salesIncrease <= 0) return null;\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.8 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      className={`inline-flex items-center space-x-1 px-2 py-1 rounded-full text-xs font-medium ${\r\n        isHot \r\n          ? 'bg-red-100 text-red-700 border border-red-200'\r\n          : 'bg-green-100 text-green-700 border border-green-200'\r\n      } ${className}`}\r\n    >\r\n      <TrendingUp className=\"h-3 w-3\" />\r\n      <span>\r\n        {isHot ? 'Hot Item' : `+${salesIncrease}% sales`}\r\n      </span>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n// Stock Urgency Indicator\r\nexport const StockUrgency: React.FC<{\r\n  stock: number;\r\n  lowStockThreshold?: number;\r\n  className?: string;\r\n}> = ({ stock, lowStockThreshold = 10, className = '' }) => {\r\n  if (stock > lowStockThreshold) return null;\r\n\r\n  const isVeryLow = stock <= 3;\r\n  const urgencyLevel = isVeryLow ? 'high' : 'medium';\r\n\r\n  const styles = {\r\n    high: 'bg-red-50 border-red-200 text-red-700',\r\n    medium: 'bg-orange-50 border-orange-200 text-orange-700'\r\n  };\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.95 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      className={`border rounded-lg p-3 ${styles[urgencyLevel]} ${className}`}\r\n    >\r\n      <div className=\"flex items-center space-x-2\">\r\n        <div className={`w-2 h-2 rounded-full ${\r\n          isVeryLow ? 'bg-red-500 animate-pulse' : 'bg-orange-500'\r\n        }`} />\r\n        <span className=\"text-sm font-medium\">\r\n          {isVeryLow ? 'Almost sold out!' : 'Low stock alert'}\r\n        </span>\r\n      </div>\r\n      <p className=\"text-xs mt-1\">\r\n        Only {stock} left in stock - order soon!\r\n      </p>\r\n    </motion.div>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Shield, Truck, RotateCcw, Headphones, Award, Clock } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface TrustSignal {\r\n  icon: React.ElementType;\r\n  title: string;\r\n  description: string;\r\n  color: string;\r\n  bgColor: string;\r\n}\r\n\r\nconst trustSignals: TrustSignal[] = [\r\n  {\r\n    icon: Truck,\r\n    title: 'Free Shipping',\r\n    description: 'On orders over $50',\r\n    color: 'text-emerald-600',\r\n    bgColor: 'bg-emerald-50'\r\n  },\r\n  {\r\n    icon: RotateCcw,\r\n    title: '30-Day Returns',\r\n    description: 'Hassle-free returns',\r\n    color: 'text-blue-600',\r\n    bgColor: 'bg-blue-50'\r\n  },\r\n  {\r\n    icon: Shield,\r\n    title: 'Secure Checkout',\r\n    description: 'SSL encrypted & protected',\r\n    color: 'text-neutral-700',\r\n    bgColor: 'bg-neutral-100'\r\n  },\r\n  {\r\n    icon: Headphones,\r\n    title: '24/7 Support',\r\n    description: 'Expert customer care',\r\n    color: 'text-purple-600',\r\n    bgColor: 'bg-purple-50'\r\n  }\r\n];\r\n\r\ninterface TrustSignalsProps {\r\n  variant?: 'grid' | 'horizontal' | 'vertical' | 'compact';\r\n  showIcons?: boolean;\r\n  className?: string;\r\n}\r\n\r\nexport const TrustSignals: React.FC<TrustSignalsProps> = ({\r\n  variant = 'grid',\r\n  showIcons = true,\r\n  className = ''\r\n}) => {\r\n  const containerClasses = {\r\n    grid: 'grid grid-cols-2 md:grid-cols-4 gap-4',\r\n    horizontal: 'flex flex-wrap justify-center gap-6',\r\n    vertical: 'space-y-4',\r\n    compact: 'flex flex-wrap justify-center gap-3'\r\n  };\r\n\r\n  const itemClasses = {\r\n    grid: 'text-center p-4',\r\n    horizontal: 'flex items-center space-x-3 p-3',\r\n    vertical: 'flex items-center space-x-4 p-4',\r\n    compact: 'flex items-center space-x-2 p-2 text-sm'\r\n  };\r\n\r\n  return (\r\n    <div className={`${containerClasses[variant]} ${className}`}>\r\n      {trustSignals.map((signal, index) => (\r\n        <motion.div\r\n          key={signal.title}\r\n          initial={{ opacity: 0, y: 20 }}\r\n          animate={{ opacity: 1, y: 0 }}\r\n          transition={{ delay: index * 0.1 }}\r\n          className={`\r\n            ${itemClasses[variant]}\r\n            bg-white border border-neutral-200 rounded-xl hover:shadow-lg hover:-translate-y-1 transition-all duration-300 luxury-transition\r\n          `}\r\n        >\r\n          {showIcons && (\r\n            <div className={`\r\n              ${signal.bgColor} p-3 rounded-full\r\n              ${variant === 'grid' ? 'mx-auto mb-3' : ''}\r\n              ${variant === 'compact' ? 'p-2' : ''}\r\n            `}>\r\n              <signal.icon className={`\r\n                ${signal.color}\r\n                ${variant === 'compact' ? 'h-4 w-4' : 'h-6 w-6'}\r\n              `} />\r\n            </div>\r\n          )}\r\n          <div className={variant === 'grid' ? 'text-center' : 'text-left'}>\r\n            <h3 className={`\r\n              font-semibold text-gray-900\r\n              ${variant === 'compact' ? 'text-sm' : 'text-base'}\r\n            `}>\r\n              {signal.title}\r\n            </h3>\r\n            <p className={`\r\n              text-gray-600\r\n              ${variant === 'compact' ? 'text-xs' : 'text-sm'}\r\n            `}>\r\n              {signal.description}\r\n            </p>\r\n          </div>\r\n        </motion.div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Product page specific trust signals\r\nexport const ProductTrustSignals: React.FC<{ className?: string }> = ({ className = '' }) => {\r\n  return (\r\n    <div className={`space-y-4 ${className}`}>\r\n      <div className=\"bg-gray-50 rounded-lg p-4\">\r\n        <h3 className=\"font-semibold text-gray-900 mb-3\">Why Shop With Us?</h3>\r\n        <TrustSignals variant=\"vertical\" className=\"space-y-3\" />\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Checkout page trust signals\r\nexport const CheckoutTrustSignals: React.FC<{ className?: string }> = ({ className = '' }) => {\r\n  const checkoutSignals = [\r\n    {\r\n      icon: Shield,\r\n      title: 'Secure Checkout',\r\n      description: 'Your data is protected with 256-bit SSL encryption'\r\n    },\r\n    {\r\n      icon: Award,\r\n      title: 'Trusted by 50,000+',\r\n      description: 'Join thousands of satisfied customers'\r\n    },\r\n    {\r\n      icon: Clock,\r\n      title: 'Quick Processing',\r\n      description: 'Orders processed within 24 hours'\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className={`bg-gradient-to-r from-blue-50 to-green-50 rounded-lg p-6 ${className}`}>\r\n      <h3 className=\"text-lg font-semibold text-gray-900 mb-4 text-center\">\r\n        Shop with Confidence\r\n      </h3>\r\n      <div className=\"space-y-3\">\r\n        {checkoutSignals.map((signal, index) => (\r\n          <motion.div\r\n            key={signal.title}\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ delay: index * 0.1 }}\r\n            className=\"flex items-center space-x-3\"\r\n          >\r\n            <div className=\"p-2 bg-white rounded-full shadow-sm\">\r\n              <signal.icon className=\"h-5 w-5 text-blue-600\" />\r\n            </div>\r\n            <div>\r\n              <h4 className=\"font-medium text-gray-900 text-sm\">{signal.title}</h4>\r\n              <p className=\"text-xs text-gray-600\">{signal.description}</p>\r\n            </div>\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Homepage trust section\r\nexport const HomepageTrustSection: React.FC<{ className?: string }> = ({ className = '' }) => {\r\n  return (\r\n    <section className={`py-16 bg-gray-50 ${className}`}>\r\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8\">\r\n        <div className=\"text-center mb-12\">\r\n          <motion.h2\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            className=\"text-3xl md:text-4xl font-bold text-gray-900 mb-4\"\r\n          >\r\n            Why Choose Us?\r\n          </motion.h2>\r\n          <motion.p\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            transition={{ delay: 0.1 }}\r\n            className=\"text-xl text-gray-600 max-w-2xl mx-auto\"\r\n          >\r\n            We're committed to providing you with the best shopping experience possible.\r\n          </motion.p>\r\n        </div>\r\n        \r\n        <TrustSignals variant=\"grid\" className=\"mb-12\" />\r\n        \r\n        {/* Additional trust metrics */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          whileInView={{ opacity: 1, y: 0 }}\r\n          viewport={{ once: true }}\r\n          className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mt-12\"\r\n        >\r\n          <div className=\"text-center\">\r\n            <div className=\"text-4xl font-bold text-blue-600 mb-2\">99.9%</div>\r\n            <div className=\"text-gray-600\">Customer Satisfaction</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-4xl font-bold text-green-600 mb-2\">50K+</div>\r\n            <div className=\"text-gray-600\">Happy Customers</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-4xl font-bold text-purple-600 mb-2\">10+</div>\r\n            <div className=\"text-gray-600\">Years of Excellence</div>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\n// Mini trust indicators for product cards\r\nexport const MiniTrustIndicators: React.FC<{ \r\n  freeShipping?: boolean;\r\n  warranty?: boolean;\r\n  returns?: boolean;\r\n  className?: string;\r\n}> = ({ freeShipping, warranty, returns, className = '' }) => {\r\n  const indicators = [];\r\n  \r\n  if (freeShipping) {\r\n    indicators.push({ icon: Truck, text: 'Free Shipping', color: 'text-blue-600' });\r\n  }\r\n  if (warranty) {\r\n    indicators.push({ icon: Shield, text: 'Warranty', color: 'text-green-600' });\r\n  }\r\n  if (returns) {\r\n    indicators.push({ icon: RotateCcw, text: 'Returns', color: 'text-purple-600' });\r\n  }\r\n\r\n  if (indicators.length === 0) return null;\r\n\r\n  return (\r\n    <div className={`flex items-center space-x-2 ${className}`}>\r\n      {indicators.map((indicator, index) => (\r\n        <div\r\n          key={indicator.text}\r\n          className=\"flex items-center space-x-1 text-xs text-gray-600\"\r\n          title={indicator.text}\r\n        >\r\n          <indicator.icon className={`h-3 w-3 ${indicator.color}`} />\r\n          <span>{indicator.text}</span>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { \r\n  Shield, \r\n  Truck, \r\n  RotateCcw, \r\n  Star, \r\n  Users, \r\n  Eye,\r\n  ShoppingBag,\r\n  Clock,\r\n  CheckCircle,\r\n  Award\r\n} from 'lucide-react';\r\n\r\ninterface ProductPageTrustSignalsProps {\r\n  className?: string;\r\n}\r\n\r\nexport const ProductPageTrustSignals: React.FC<ProductPageTrustSignalsProps> = ({ \r\n  className = '' \r\n}) => {\r\n  const [currentViewers, setCurrentViewers] = useState(0);\r\n  const [recentPurchases, setRecentPurchases] = useState(0);\r\n\r\n  // Simulate real-time activity\r\n  useEffect(() => {\r\n    const updateViewers = () => {\r\n      setCurrentViewers(Math.floor(Math.random() * 50) + 15);\r\n    };\r\n    \r\n    const updatePurchases = () => {\r\n      setRecentPurchases(Math.floor(Math.random() * 20) + 5);\r\n    };\r\n\r\n    updateViewers();\r\n    updatePurchases();\r\n    \r\n    const viewerInterval = setInterval(updateViewers, 8000);\r\n    const purchaseInterval = setInterval(updatePurchases, 12000);\r\n\r\n    return () => {\r\n      clearInterval(viewerInterval);\r\n      clearInterval(purchaseInterval);\r\n    };\r\n  }, []);\r\n\r\n  const trustFeatures = [\r\n    {\r\n      icon: Shield,\r\n      title: \"Secure Shopping\",\r\n      description: \"256-bit SSL encryption\"\r\n    },\r\n    {\r\n      icon: Truck,\r\n      title: \"Free Shipping\",\r\n      description: \"On orders over $50\"\r\n    },\r\n    {\r\n      icon: RotateCcw,\r\n      title: \"Easy Returns\",\r\n      description: \"30-day return policy\"\r\n    },\r\n    {\r\n      icon: Award,\r\n      title: \"Quality Guarantee\",\r\n      description: \"Premium products only\"\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className={`space-y-6 ${className}`}>\r\n      {/* Trust Features Grid */}\r\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\r\n        {trustFeatures.map((feature, index) => (\r\n          <motion.div\r\n            key={feature.title}\r\n            initial={{ opacity: 0, y: 20 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            transition={{ delay: index * 0.1 }}\r\n            className=\"bg-white rounded-luxury p-4 text-center border border-neutral-100 hover:border-neutral-200 transition-colors duration-200\"\r\n          >\r\n            <feature.icon className=\"h-6 w-6 text-neutral-600 mx-auto mb-2\" />\r\n            <h4 className=\"text-sm font-semibold text-neutral-900 mb-1\">\r\n              {feature.title}\r\n            </h4>\r\n            <p className=\"text-xs text-neutral-600\">\r\n              {feature.description}\r\n            </p>\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n\r\n      {/* Social Proof Indicators */}\r\n      <div className=\"bg-gradient-to-r from-neutral-50 to-white rounded-luxury-lg p-6 border border-neutral-100\">\r\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\r\n          {/* Current Viewers */}\r\n          <motion.div \r\n            className=\"flex items-center space-x-3\"\r\n            key={currentViewers}\r\n            initial={{ scale: 1 }}\r\n            animate={{ scale: [1, 1.05, 1] }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <div className=\"p-2 bg-blue-100 rounded-full\">\r\n              <Eye className=\"h-4 w-4 text-blue-600\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-semibold text-neutral-900\">\r\n                {currentViewers} people\r\n              </p>\r\n              <p className=\"text-xs text-neutral-600\">viewing now</p>\r\n            </div>\r\n          </motion.div>\r\n\r\n          {/* Recent Purchases */}\r\n          <motion.div \r\n            className=\"flex items-center space-x-3\"\r\n            key={recentPurchases}\r\n            initial={{ scale: 1 }}\r\n            animate={{ scale: [1, 1.05, 1] }}\r\n            transition={{ duration: 0.3 }}\r\n          >\r\n            <div className=\"p-2 bg-green-100 rounded-full\">\r\n              <ShoppingBag className=\"h-4 w-4 text-green-600\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-semibold text-neutral-900\">\r\n                {recentPurchases} sold\r\n              </p>\r\n              <p className=\"text-xs text-neutral-600\">in last 24h</p>\r\n            </div>\r\n          </motion.div>\r\n\r\n          {/* Customer Satisfaction */}\r\n          <div className=\"flex items-center space-x-3\">\r\n            <div className=\"p-2 bg-yellow-100 rounded-full\">\r\n              <Star className=\"h-4 w-4 text-yellow-600 fill-current\" />\r\n            </div>\r\n            <div>\r\n              <p className=\"text-sm font-semibold text-neutral-900\">\r\n                4.8/5 rating\r\n              </p>\r\n              <p className=\"text-xs text-neutral-600\">from 2,847 reviews</p>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Security Badges */}\r\n      <div className=\"flex items-center justify-center space-x-6 py-4\">\r\n        <div className=\"flex items-center space-x-2 text-neutral-600\">\r\n          <Shield className=\"h-5 w-5\" />\r\n          <span className=\"text-sm font-medium\">SSL Secured</span>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2 text-neutral-600\">\r\n          <CheckCircle className=\"h-5 w-5\" />\r\n          <span className=\"text-sm font-medium\">Verified Store</span>\r\n        </div>\r\n        <div className=\"flex items-center space-x-2 text-neutral-600\">\r\n          <Users className=\"h-5 w-5\" />\r\n          <span className=\"text-sm font-medium\">50K+ Customers</span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Recent Purchase Notification Component\r\ninterface RecentPurchaseNotificationProps {\r\n  productName: string;\r\n  customerLocation: string;\r\n  timeAgo: string;\r\n}\r\n\r\nexport const RecentPurchaseNotification: React.FC<RecentPurchaseNotificationProps> = ({\r\n  productName,\r\n  customerLocation,\r\n  timeAgo\r\n}) => {\r\n  const [isVisible, setIsVisible] = useState(false);\r\n\r\n  useEffect(() => {\r\n    const timer = setTimeout(() => setIsVisible(true), Math.random() * 5000 + 2000);\r\n    const hideTimer = setTimeout(() => setIsVisible(false), 8000);\r\n\r\n    return () => {\r\n      clearTimeout(timer);\r\n      clearTimeout(hideTimer);\r\n    };\r\n  }, []);\r\n\r\n  return (\r\n    <AnimatePresence>\r\n      {isVisible && (\r\n        <motion.div\r\n          initial={{ opacity: 0, x: -100 }}\r\n          animate={{ opacity: 1, x: 0 }}\r\n          exit={{ opacity: 0, x: -100 }}\r\n          className=\"fixed bottom-6 left-6 bg-white rounded-luxury-lg shadow-luxury border border-neutral-200 p-4 max-w-sm z-50\"\r\n        >\r\n          <div className=\"flex items-start space-x-3\">\r\n            <div className=\"p-2 bg-green-100 rounded-full flex-shrink-0\">\r\n              <CheckCircle className=\"h-4 w-4 text-green-600\" />\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className=\"text-sm font-medium text-neutral-900 truncate\">\r\n                {productName}\r\n              </p>\r\n              <p className=\"text-xs text-neutral-600\">\r\n                Purchased by someone in {customerLocation}\r\n              </p>\r\n              <p className=\"text-xs text-neutral-500 mt-1\">\r\n                {timeAgo}\r\n              </p>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      )}\r\n    </AnimatePresence>\r\n  );\r\n};\r\n\r\n// Urgency Indicator Component\r\ninterface UrgencyIndicatorProps {\r\n  stock: number;\r\n  threshold?: number;\r\n  className?: string;\r\n}\r\n\r\nexport const UrgencyIndicator: React.FC<UrgencyIndicatorProps> = ({\r\n  stock,\r\n  threshold = 10,\r\n  className = ''\r\n}) => {\r\n  if (stock > threshold) return null;\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, scale: 0.9 }}\r\n      animate={{ opacity: 1, scale: 1 }}\r\n      className={`bg-red-50 border border-red-200 rounded-luxury p-3 ${className}`}\r\n    >\r\n      <div className=\"flex items-center space-x-2\">\r\n        <Clock className=\"h-4 w-4 text-red-600\" />\r\n        <div>\r\n          <p className=\"text-sm font-semibold text-red-900\">\r\n            Only {stock} left in stock!\r\n          </p>\r\n          <p className=\"text-xs text-red-700\">\r\n            Order soon to avoid disappointment\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n","import { useAuth } from '../contexts/AuthContext';\r\nimport { useCart } from '../contexts/CartContext';\r\nimport { useAuthModal } from '../contexts/AuthModalContext';\r\nimport { Product } from '../types';\r\n\r\ninterface UseAddToCartWithAuthReturn {\r\n  handleAddToCart: (product: Product, quantity?: number) => void;\r\n}\r\n\r\nexport const useAddToCartWithAuth = (): UseAddToCartWithAuthReturn => {\r\n  const { user } = useAuth();\r\n  const { addItem: addToCart } = useCart();\r\n  const { showAuthModal } = useAuthModal();\r\n\r\n  const handleAddToCart = (product: Product, quantity: number = 1) => {\r\n    // Check if user is authenticated\r\n    if (user) {\r\n      // User is logged in, add item to cart directly\r\n      addToCart(product, quantity);\r\n    } else {\r\n      // User is not logged in, show authentication modal\r\n      showAuthModal(product, 'cart');\r\n    }\r\n  };\r\n\r\n  return {\r\n    handleAddToCart\r\n  };\r\n};","import { useAuth } from '../contexts/AuthContext';\r\nimport { useWishlist } from '../contexts/WishlistContext';\r\nimport { useAuthModal } from '../contexts/AuthModalContext';\r\nimport { Product } from '../types';\r\n\r\ninterface UseAddToWishlistWithAuthReturn {\r\n  handleAddToWishlist: (product: Product) => void;\r\n}\r\n\r\nexport const useAddToWishlistWithAuth = (): UseAddToWishlistWithAuthReturn => {\r\n  const { user } = useAuth();\r\n  const { addItem: addToWishlist } = useWishlist();\r\n  const { showAuthModal } = useAuthModal();\r\n\r\n  const handleAddToWishlist = (product: Product) => {\r\n    // Check if user is authenticated\r\n    if (user) {\r\n      // User is logged in, add item to wishlist directly\r\n      addToWishlist(product);\r\n    } else {\r\n      // User is not logged in, show authentication modal\r\n      showAuthModal(product, 'wishlist');\r\n    }\r\n  };\r\n\r\n  return {\r\n    handleAddToWishlist\r\n  };\r\n};","import { useAuth } from '../contexts/AuthContext';\r\nimport { useCompare } from '../contexts/CompareContext';\r\nimport { useAuthModal } from '../contexts/AuthModalContext';\r\nimport { Product } from '../types';\r\n\r\ninterface UseAddToCompareWithAuthReturn {\r\n  handleAddToCompare: (product: Product) => void;\r\n}\r\n\r\nexport const useAddToCompareWithAuth = (): UseAddToCompareWithAuthReturn => {\r\n  const { user } = useAuth();\r\n  const { addItem: addToCompare } = useCompare();\r\n  const { showAuthModal } = useAuthModal();\r\n\r\n  const handleAddToCompare = (product: Product) => {\r\n    // Check if user is authenticated\r\n    if (user) {\r\n      // User is logged in, add item to compare directly\r\n      addToCompare(product);\r\n    } else {\r\n      // User is not logged in, show authentication modal\r\n      showAuthModal(product, 'compare');\r\n    }\r\n  };\r\n\r\n  return {\r\n    handleAddToCompare\r\n  };\r\n};","import React from 'react';\r\nimport { Loader, WifiOff, AlertCircle, CheckCircle } from 'lucide-react';\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: 'small' | 'medium' | 'large';\r\n  text?: string;\r\n  subText?: string;\r\n  overlay?: boolean;\r\n  className?: string;\r\n  stage?: 'loading' | 'success' | 'error' | 'offline';\r\n  progress?: number; // 0-100\r\n  showProgress?: boolean;\r\n  onRetry?: () => void;\r\n}\r\n\r\n// Backward compatibility\r\ninterface EnhancedLoadingSpinnerProps extends LoadingSpinnerProps {}\r\n\r\nexport const LoadingSpinner: React.FC<LoadingSpinnerProps> = ({\r\n  size = 'medium',\r\n  text,\r\n  subText,\r\n  overlay = false,\r\n  className = '',\r\n  stage = 'loading',\r\n  progress = 0,\r\n  showProgress = false,\r\n  onRetry\r\n}) => {\r\n  const sizes = {\r\n    small: 'h-4 w-4',\r\n    medium: 'h-10 w-10',\r\n    large: 'h-12 w-12'\r\n  };\r\n\r\n  const getIcon = () => {\r\n    switch (stage) {\r\n      case 'success':\r\n        return <CheckCircle className={`${sizes[size]} text-green-500`} />;\r\n      case 'error':\r\n        return <AlertCircle className={`${sizes[size]} text-red-500`} />;\r\n      case 'offline':\r\n        return <WifiOff className={`${sizes[size]} text-gray-500`} />;\r\n      default:\r\n        return <Loader className={`${sizes[size]} text-primary`} />;\r\n    }\r\n  };\r\n\r\n  const getStatusColor = () => {\r\n    switch (stage) {\r\n      case 'success':\r\n        return 'text-green-600';\r\n      case 'error':\r\n        return 'text-red-600';\r\n      case 'offline':\r\n        return 'text-gray-600';\r\n      default:\r\n        return 'text-gray-600';\r\n    }\r\n  };\r\n\r\n  const spinner = (\r\n    <div className={`flex flex-col items-center justify-center py-8 ${className}`}>\r\n      <div className=\"flex flex-col items-center\">\r\n          {getIcon()}\r\n          \r\n          {showProgress && stage === 'loading' && (\r\n            <div className=\"w-32 h-2 bg-gray-200 rounded-full mt-4 overflow-hidden\">\r\n              <div\r\n                className=\"h-full bg-primary rounded-full transition-all duration-300\"\r\n                style={{ width: `${progress}%` }}\r\n              />\r\n            </div>\r\n          )}\r\n          \r\n          {text && (\r\n            <p className={`mt-4 text-sm font-medium ${getStatusColor()}`}>\r\n              {text}\r\n            </p>\r\n          )}\r\n\r\n          {subText && (\r\n            <p className=\"mt-2 text-xs text-gray-500 text-center max-w-xs\">\r\n              {subText}\r\n            </p>\r\n          )}\r\n          \r\n          {stage === 'error' && onRetry && (\r\n            <button\r\n              onClick={onRetry}\r\n              className=\"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm font-medium\"\r\n            >\r\n              Try Again\r\n            </button>\r\n          )}\r\n\r\n          {stage === 'offline' && (\r\n            <div className=\"mt-4 flex items-center text-xs text-gray-500\">\r\n              <WifiOff className=\"h-3 w-3 mr-1\" />\r\n              <span>Check your internet connection</span>\r\n            </div>\r\n          )}\r\n        </div>\r\n    </div>\r\n  );\r\n\r\n  if (overlay) {\r\n    return (\r\n      <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50\">\r\n        <div className=\"bg-white rounded-lg p-6 shadow-xl\">\r\n          {spinner}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return spinner;\r\n};\r\n\r\n// Progressive loading component for multi-stage loading\r\ninterface ProgressiveLoadingProps {\r\n  stages: Array<{\r\n    name: string;\r\n    description?: string;\r\n    completed: boolean;\r\n    loading: boolean;\r\n    error?: boolean;\r\n  }>;\r\n  className?: string;\r\n}\r\n\r\nexport const ProgressiveLoading: React.FC<ProgressiveLoadingProps> = ({\r\n  stages,\r\n  className = ''\r\n}) => {\r\n  const completedStages = stages.filter(stage => stage.completed).length;\r\n  const totalStages = stages.length;\r\n  const progress = (completedStages / totalStages) * 100;\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg border border-gray-200 p-6 ${className}`}>\r\n      <div className=\"mb-4\">\r\n        <div className=\"flex items-center justify-between mb-2\">\r\n          <h3 className=\"text-sm font-medium text-gray-900\">Loading Content</h3>\r\n          <span className=\"text-xs text-gray-500\">{completedStages}/{totalStages}</span>\r\n        </div>\r\n        <div className=\"w-full h-2 bg-gray-200 rounded-full overflow-hidden\">\r\n          <div\r\n            className=\"h-full bg-primary rounded-full transition-all duration-500\"\r\n            style={{ width: `${progress}%` }}\r\n          />\r\n        </div>\r\n      </div>\r\n      \r\n      <div className=\"space-y-3\">\r\n        {stages.map((stage) => (\r\n          <div\r\n            key={stage.name}\r\n            className=\"flex items-center space-x-3\"\r\n          >\r\n            <div className=\"flex-shrink-0\">\r\n              {stage.completed ? (\r\n                <CheckCircle className=\"h-4 w-4 text-green-500\" />\r\n              ) : stage.error ? (\r\n                <AlertCircle className=\"h-4 w-4 text-red-500\" />\r\n              ) : stage.loading ? (\r\n                <Loader className=\"h-4 w-4 text-primary\" />\r\n              ) : (\r\n                <div className=\"h-4 w-4 border-2 border-gray-300 rounded-full\" />\r\n              )}\r\n            </div>\r\n            <div className=\"flex-1 min-w-0\">\r\n              <p className={`text-sm font-medium ${\r\n                stage.completed ? 'text-green-600' :\r\n                stage.error ? 'text-red-600' :\r\n                stage.loading ? 'text-primary' : 'text-gray-500'\r\n              }`}>\r\n                {stage.name}\r\n              </p>\r\n              {stage.description && (\r\n                <p className=\"text-xs text-gray-500 mt-1\">{stage.description}</p>\r\n              )}\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Backward compatibility export\r\nexport const EnhancedLoadingSpinner = LoadingSpinner;","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { LucideIcon } from 'lucide-react';\r\n\r\n// Touch target sizing standards for mobile optimization\r\nexport const TOUCH_TARGETS = {\r\n  minimum: '44px',      // Apple HIG minimum\r\n  comfortable: '48px',  // Material Design recommendation\r\n  optimal: '56px',      // Luxury e-commerce standard\r\n  spacing: '8px'        // Minimum spacing between targets\r\n} as const;\r\n\r\ninterface MobileTouchButtonProps {\r\n  children: React.ReactNode;\r\n  onClick?: (e: React.MouseEvent) => void;\r\n  className?: string;\r\n  icon?: LucideIcon;\r\n  variant?: 'primary' | 'secondary' | 'ghost' | 'danger';\r\n  size?: 'minimum' | 'comfortable' | 'optimal';\r\n  loading?: boolean;\r\n  disabled?: boolean;\r\n  ariaLabel?: string;\r\n  title?: string;\r\n  fullWidth?: boolean;\r\n  hapticFeedback?: boolean; // For future PWA implementation\r\n}\r\n\r\nexport const MobileTouchButton: React.FC<MobileTouchButtonProps> = ({\r\n  children,\r\n  onClick,\r\n  className = '',\r\n  icon: Icon,\r\n  variant = 'primary',\r\n  size = 'comfortable',\r\n  loading = false,\r\n  disabled = false,\r\n  ariaLabel,\r\n  title,\r\n  fullWidth = false,\r\n  hapticFeedback = false,\r\n}) => {\r\n  const baseClasses = `\r\n    relative inline-flex items-center justify-center font-medium\r\n    touch-manipulation select-none\r\n    transition-all duration-200 ease-out\r\n    focus:outline-none focus:ring-2 focus:ring-offset-2\r\n    active:scale-95 active:transition-transform active:duration-100\r\n    ${fullWidth ? 'w-full' : ''}\r\n  `;\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-neutral-900 text-white hover:bg-neutral-800 focus:ring-neutral-500 shadow-sm hover:shadow-md',\r\n    secondary: 'bg-white text-neutral-900 border border-neutral-300 hover:bg-neutral-50 focus:ring-neutral-500 shadow-sm hover:shadow-md',\r\n    ghost: 'text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100 focus:ring-neutral-500',\r\n    danger: 'bg-red-600 text-white hover:bg-red-700 focus:ring-red-500 shadow-sm hover:shadow-md',\r\n  };\r\n\r\n  const sizeClasses = {\r\n    minimum: `min-h-[44px] min-w-[44px] px-2.5 sm:px-3 py-1.5 text-xs rounded-md`,\r\n    comfortable: `min-h-[48px] min-w-[48px] px-3 sm:px-4 py-2 text-sm rounded-md`,\r\n    optimal: `min-h-[56px] min-w-[56px] px-4 sm:px-5 py-2.5 text-base rounded-lg`,\r\n  };\r\n\r\n  const iconSizeClasses = {\r\n    minimum: 'h-3.5 w-3.5',\r\n    comfortable: 'h-4 w-4',\r\n    optimal: 'h-5 w-5',\r\n  };\r\n\r\n  const handleClick = (e: React.MouseEvent) => {\r\n    if (hapticFeedback && 'vibrate' in navigator) {\r\n      navigator.vibrate(10); // Subtle haptic feedback\r\n    }\r\n    onClick?.(e);\r\n  };\r\n\r\n  return (\r\n    <motion.button\r\n      onClick={handleClick}\r\n      disabled={disabled || loading}\r\n      className={`\r\n        ${baseClasses}\r\n        ${variantClasses[variant]}\r\n        ${sizeClasses[size]}\r\n        ${className}\r\n        ${disabled ? 'opacity-50 cursor-not-allowed' : ''}\r\n      `}\r\n      aria-label={ariaLabel}\r\n      title={title}\r\n      whileTap={{ scale: 0.95 }}\r\n      transition={{ type: 'spring', stiffness: 400, damping: 25 }}\r\n    >\r\n      {loading ? (\r\n        <div className={`${iconSizeClasses[size]} border-2 border-current border-t-transparent rounded-full animate-spin`} />\r\n      ) : (\r\n        <>\r\n          {Icon && (\r\n            <Icon className={`${iconSizeClasses[size]} ${children ? 'mr-1.5' : ''}`} />\r\n          )}\r\n          {children}\r\n        </>\r\n      )}\r\n    </motion.button>\r\n  );\r\n};\r\n\r\n// Mobile-optimized icon button for actions like wishlist, compare, etc.\r\ninterface MobileIconButtonProps {\r\n  icon: LucideIcon;\r\n  onClick?: (e: React.MouseEvent) => void;\r\n  className?: string;\r\n  variant?: 'primary' | 'secondary' | 'ghost';\r\n  size?: 'minimum' | 'comfortable' | 'optimal';\r\n  disabled?: boolean;\r\n  ariaLabel: string;\r\n  active?: boolean;\r\n}\r\n\r\nexport const MobileIconButton: React.FC<MobileIconButtonProps> = ({\r\n  icon: Icon,\r\n  onClick,\r\n  className = '',\r\n  variant = 'ghost',\r\n  size = 'comfortable',\r\n  disabled = false,\r\n  ariaLabel,\r\n  active = false,\r\n}) => {\r\n  const baseClasses = `\r\n    relative inline-flex items-center justify-center\r\n    touch-manipulation select-none\r\n    transition-all duration-200 ease-out\r\n    focus:outline-none focus:ring-2 focus:ring-offset-2\r\n    active:scale-90 active:transition-transform active:duration-100\r\n    rounded-full\r\n  `;\r\n\r\n  const variantClasses = {\r\n    primary: active \r\n      ? 'bg-neutral-900 text-white shadow-md' \r\n      : 'bg-white text-neutral-600 hover:bg-neutral-900 hover:text-white border border-neutral-200 shadow-sm',\r\n    secondary: active\r\n      ? 'bg-neutral-100 text-neutral-900 shadow-md'\r\n      : 'bg-white text-neutral-600 hover:bg-neutral-100 hover:text-neutral-900 border border-neutral-200 shadow-sm',\r\n    ghost: active\r\n      ? 'bg-neutral-100 text-neutral-900'\r\n      : 'text-neutral-600 hover:text-neutral-900 hover:bg-neutral-100',\r\n  };\r\n\r\n  const sizeClasses = {\r\n    minimum: `h-[44px] w-[44px]`,\r\n    comfortable: `h-[48px] w-[48px]`,\r\n    optimal: `h-[56px] w-[56px]`,\r\n  };\r\n\r\n  const iconSizeClasses = {\r\n    minimum: 'h-4 w-4',\r\n    comfortable: 'h-5 w-5',\r\n    optimal: 'h-6 w-6',\r\n  };\r\n\r\n  return (\r\n    <motion.button\r\n      onClick={onClick}\r\n      disabled={disabled}\r\n      className={`\r\n        ${baseClasses}\r\n        ${variantClasses[variant]}\r\n        ${sizeClasses[size]}\r\n        ${className}\r\n        ${disabled ? 'opacity-50 cursor-not-allowed' : ''}\r\n      `}\r\n      aria-label={ariaLabel}\r\n      whileTap={{ scale: 0.9 }}\r\n      transition={{ type: 'spring', stiffness: 400, damping: 25 }}\r\n    >\r\n      <Icon className={iconSizeClasses[size]} />\r\n    </motion.button>\r\n  );\r\n};\r\n\r\n// Mobile-optimized floating action button\r\ninterface MobileFABProps {\r\n  icon: LucideIcon;\r\n  onClick?: () => void;\r\n  className?: string;\r\n  variant?: 'primary' | 'secondary';\r\n  position?: 'bottom-right' | 'bottom-left' | 'bottom-center';\r\n  ariaLabel: string;\r\n}\r\n\r\nexport const MobileFAB: React.FC<MobileFABProps> = ({\r\n  icon: Icon,\r\n  onClick,\r\n  className = '',\r\n  variant = 'primary',\r\n  position = 'bottom-right',\r\n  ariaLabel,\r\n}) => {\r\n  const positionClasses = {\r\n    'bottom-right': 'fixed bottom-4 right-4 z-50',\r\n    'bottom-left': 'fixed bottom-4 left-4 z-50',\r\n    'bottom-center': 'fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50',\r\n  };\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-neutral-900 text-white hover:bg-neutral-800 shadow-lg hover:shadow-xl',\r\n    secondary: 'bg-white text-neutral-900 border border-neutral-300 hover:bg-neutral-50 shadow-lg hover:shadow-xl',\r\n  };\r\n\r\n  return (\r\n    <motion.button\r\n      onClick={onClick}\r\n      className={`\r\n        ${positionClasses[position]}\r\n        ${variantClasses[variant]}\r\n        h-12 w-12 rounded-full\r\n        touch-manipulation select-none\r\n        transition-all duration-200 ease-out\r\n        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-neutral-500\r\n        flex items-center justify-center\r\n        ${className}\r\n      `}\r\n      aria-label={ariaLabel}\r\n      whileTap={{ scale: 0.9 }}\r\n      whileHover={{ scale: 1.05 }}\r\n      transition={{ type: 'spring', stiffness: 400, damping: 25 }}\r\n    >\r\n      <Icon className=\"h-5 w-5\" />\r\n    </motion.button>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Heart, ShoppingCart, Star, GitCompare } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { Product } from '../../types';\r\nimport { useCart } from '../../contexts/CartContext';\r\nimport { useWishlist } from '../../contexts/WishlistContext';\r\nimport { useCompare } from '../../contexts/CompareContext';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\nimport { MobileTouchButton, MobileIconButton } from './MobileTouchButton';\r\nimport { useSwipeGesture } from '../../hooks/useMobileGestures';\r\n\r\ninterface MobileProductCardProps {\r\n  product: Product;\r\n  variant?: 'default' | 'compact' | 'featured';\r\n}\r\n\r\nexport const MobileProductCard: React.FC<MobileProductCardProps> = ({ \r\n  product, \r\n  variant = 'default' \r\n}) => {\r\n  const { addItem: addToCart } = useCart();\r\n  const { addItem: addToWishlist, isInWishlist } = useWishlist();\r\n  const { addItem: addToCompare, isInCompare } = useCompare();\r\n  const { showSuccess } = useNotification();\r\n  const [currentImageIndex, setCurrentImageIndex] = useState(0);\r\n\r\n  // Swipe gesture for image carousel\r\n  const { onTouchStart, onTouchMove, onTouchEnd } = useSwipeGesture({\r\n    onSwipeLeft: () => {\r\n      if (product.images.length > 1) {\r\n        setCurrentImageIndex(prev => \r\n          prev === product.images.length - 1 ? 0 : prev + 1\r\n        );\r\n      }\r\n    },\r\n    onSwipeRight: () => {\r\n      if (product.images.length > 1) {\r\n        setCurrentImageIndex(prev => \r\n          prev === 0 ? product.images.length - 1 : prev - 1\r\n        );\r\n      }\r\n    }\r\n  });\r\n\r\n  const handleAddToCart = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    if (product.stock > 0) {\r\n      addToCart(product);\r\n      showSuccess(`${product.name} has been added to your cart.`, 'Added to Cart');\r\n    }\r\n  };\r\n\r\n  const handleWishlistToggle = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    addToWishlist(product);\r\n    showSuccess(\r\n      `${product.name} has been ${isInWishlist(product.id) ? 'removed from' : 'added to'} your wishlist.`,\r\n      isInWishlist(product.id) ? 'Removed from Wishlist' : 'Added to Wishlist'\r\n    );\r\n  };\r\n\r\n  const handleCompareToggle = (e: React.MouseEvent) => {\r\n    e.stopPropagation();\r\n    e.preventDefault();\r\n    addToCompare(product);\r\n  };\r\n\r\n  const discount = product.originalPrice \r\n    ? Math.round(((product.originalPrice - product.price) / product.originalPrice) * 100)\r\n    : 0;\r\n\r\n  const stockStatus = {\r\n    text: product.stock > 10 ? 'In Stock' : product.stock > 0 ? `${product.stock} left` : 'Out of Stock',\r\n    color: product.stock > 10 ? 'bg-green-500' : product.stock > 0 ? 'bg-orange-500' : 'bg-red-500'\r\n  };\r\n\r\n  if (variant === 'compact') {\r\n    return (\r\n      <motion.div\r\n        className=\"bg-white rounded-lg shadow-sm border border-neutral-200 overflow-hidden\"\r\n        whileTap={{ scale: 0.98 }}\r\n        transition={{ type: 'spring', stiffness: 400, damping: 25 }}\r\n      >\r\n        <Link to={`/products/${product.id}`} className=\"block\">\r\n          <div className=\"flex\">\r\n            {/* Compact Image */}\r\n            <div className=\"w-16 sm:w-20 h-16 sm:h-20 flex-shrink-0 relative\">\r\n              <img\r\n                src={product.images[0]}\r\n                alt={product.name}\r\n                className=\"w-full h-full object-cover\"\r\n                loading=\"lazy\"\r\n              />\r\n              {discount > 0 && (\r\n                <span className=\"absolute top-1 left-1 bg-red-500 text-white text-[10px] px-1 py-0.5 rounded font-bold\">\r\n                  -{discount}%\r\n                </span>\r\n              )}\r\n            </div>\r\n            \r\n            {/* Compact Content */}\r\n            <div className=\"flex-1 p-2.5 min-h-[64px] sm:min-h-[80px] flex flex-col justify-between\">\r\n              <div>\r\n                <h3 className=\"font-medium text-neutral-900 text-xs leading-tight line-clamp-2\">\r\n                  {product.name}\r\n                </h3>\r\n                <p className=\"text-[10px] text-neutral-500 mt-1\">{product.category}</p>\r\n              </div>\r\n              \r\n              <div className=\"flex items-center justify-between mt-1.5\">\r\n                <div className=\"flex items-center space-x-1\">\r\n                  <span className=\"font-semibold text-neutral-900 text-xs\">{product.price.toLocaleString('en-IN')}</span>\r\n                  {product.originalPrice && (\r\n                    <span className=\"text-[10px] text-neutral-500 line-through\">\r\n                      {product.originalPrice.toLocaleString('en-IN')}\r\n                    </span>\r\n                  )}\r\n                </div>\r\n                \r\n                <div className=\"flex items-center space-x-1\">\r\n                  <Star className=\"w-2.5 h-2.5 fill-yellow-400 text-yellow-400\" />\r\n                  <span className=\"text-[10px] text-neutral-600\">{product.rating}</span>\r\n                </div>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </Link>\r\n      </motion.div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <motion.div\r\n      className=\"product-card bg-white overflow-hidden rounded-lg sm:rounded-xl shadow-sm border border-neutral-200\"\r\n      whileTap={{ scale: 0.98 }}\r\n      transition={{ type: 'spring', stiffness: 400, damping: 25 }}\r\n    >\r\n      {/* Mobile-Optimized Image Section */}\r\n      <div className=\"relative\">\r\n        <Link to={`/products/${product.id}`} className=\"block\">\r\n          <div \r\n            className=\"aspect-square relative overflow-hidden\"\r\n            onTouchStart={onTouchStart}\r\n            onTouchMove={onTouchMove}\r\n            onTouchEnd={onTouchEnd}\r\n          >\r\n            <img\r\n              key={currentImageIndex}\r\n              src={(product.images && product.images.length > 0 ? product.images[currentImageIndex] || product.images[0] : '') || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4='}\r\n              alt={product.name}\r\n              className=\"w-full h-full object-cover transition-transform duration-300\"\r\n              loading=\"lazy\"\r\n            />\r\n            \r\n            {/* Image indicators for multiple images */}\r\n            {product.images && product.images.length > 1 && (\r\n              <div className=\"absolute bottom-1.5 left-1/2 transform -translate-x-1/2 flex space-x-1\">\r\n                {product.images.map((_, index) => (\r\n                  <button\r\n                    key={index}\r\n                    onClick={(e) => {\r\n                      e.preventDefault();\r\n                      e.stopPropagation();\r\n                      setCurrentImageIndex(index);\r\n                    }}\r\n                    className={`w-1 h-1 rounded-full transition-colors ${\r\n                      index === currentImageIndex ? 'bg-white' : 'bg-white/50'\r\n                    }`}\r\n                    aria-label={`View image ${index + 1}`}\r\n                  />\r\n                ))}\r\n              </div>\r\n            )}\r\n          </div>\r\n        </Link>\r\n\r\n        {/* Mobile-Optimized Badges */}\r\n        <div className=\"absolute top-1.5 left-1.5 flex flex-col space-y-1\">\r\n          {discount > 0 && (\r\n            <span className=\"bg-red-500 text-white text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm\">\r\n              -{discount}%\r\n            </span>\r\n          )}\r\n          \r\n          <span className={`${stockStatus.color} text-white text-[10px] px-1.5 py-0.5 rounded-full font-bold shadow-sm flex items-center space-x-1`}>\r\n            <div className={`w-1 h-1 rounded-full bg-white ${product.stock > 0 ? 'animate-pulse' : ''}`}></div>\r\n            <span>{stockStatus.text}</span>\r\n          </span>\r\n        </div>\r\n\r\n        {/* Mobile Action Buttons */}\r\n        <div className=\"absolute top-1.5 right-1.5 flex flex-col space-y-1.5\">\r\n          <MobileIconButton\r\n            icon={Heart}\r\n            onClick={handleWishlistToggle}\r\n            variant={isInWishlist(product.id) ? 'primary' : 'secondary'}\r\n            size=\"minimum\"\r\n            ariaLabel={isInWishlist(product.id) ? 'Remove from wishlist' : 'Add to wishlist'}\r\n            active={isInWishlist(product.id)}\r\n          />\r\n          \r\n          <MobileIconButton\r\n            icon={GitCompare}\r\n            onClick={handleCompareToggle}\r\n            variant={isInCompare(product.id) ? 'primary' : 'secondary'}\r\n            size=\"minimum\"\r\n            ariaLabel={isInCompare(product.id) ? 'Remove from compare' : 'Add to compare'}\r\n            active={isInCompare(product.id)}\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      {/* Mobile-Optimized Content */}\r\n      <div className=\"p-2.5 sm:p-3 space-y-2\">\r\n        <div>\r\n          <p className=\"text-[10px] text-neutral-500 font-medium uppercase tracking-wide\">\r\n            {product.category}\r\n          </p>\r\n          <Link to={`/products/${product.id}`}>\r\n            <h3 className=\"font-medium text-neutral-900 text-sm leading-tight line-clamp-2 mt-0.5\">\r\n              {product.name}\r\n            </h3>\r\n          </Link>\r\n        </div>\r\n        \r\n        {/* Price and Rating */}\r\n        <div className=\"flex items-center justify-between\">\r\n          <div className=\"flex items-center space-x-1.5\">\r\n            <span className=\"font-semibold text-neutral-900 text-base\">{product.price.toLocaleString('en-IN')}</span>\r\n            {product.originalPrice && (\r\n              <span className=\"text-xs text-neutral-500 line-through\">\r\n                {product.originalPrice.toLocaleString('en-IN')}\r\n              </span>\r\n            )}\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-1\">\r\n            <Star className=\"w-3 h-3 fill-yellow-400 text-yellow-400\" />\r\n            <span className=\"text-xs text-neutral-600 font-medium\">{product.rating}</span>\r\n          </div>\r\n        </div>\r\n        \r\n        {/* Mobile Add to Cart Button */}\r\n        <MobileTouchButton\r\n          onClick={handleAddToCart}\r\n          disabled={product.stock === 0}\r\n          variant={product.stock === 0 ? 'secondary' : 'primary'}\r\n          size=\"comfortable\"\r\n          icon={ShoppingCart}\r\n          fullWidth\r\n          ariaLabel={product.stock === 0 ? 'Out of stock' : 'Add to cart'}\r\n        >\r\n          {product.stock === 0 ? 'Out of Stock' : 'Add to Cart'}\r\n        </MobileTouchButton>\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};","import React, { useState, useRef, useEffect } from 'react';\r\nimport { ChevronLeft, ChevronRight } from 'lucide-react';\r\n// Removed framer-motion imports\r\nimport { Product } from '../../types';\r\nimport { MobileProductCard } from './MobileProductCard';\r\nimport { MobileIconButton } from './MobileTouchButton';\r\nimport { useSwipeGesture } from '../../hooks/useMobileGestures';\r\n\r\ninterface MobileProductCarouselProps {\r\n  products: Product[];\r\n  title?: string;\r\n  variant?: 'default' | 'compact' | 'featured';\r\n  itemsPerView?: number;\r\n  showNavigation?: boolean;\r\n  autoPlay?: boolean;\r\n  autoPlayInterval?: number;\r\n}\r\n\r\nexport const MobileProductCarousel: React.FC<MobileProductCarouselProps> = ({\r\n  products,\r\n  title,\r\n  variant = 'default',\r\n  itemsPerView = 1.2, // Show partial next item to indicate scrollability\r\n  showNavigation = true,\r\n  autoPlay = false,\r\n  autoPlayInterval = 5000,\r\n}) => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  // Removed auto-play state\r\n  const carouselRef = useRef<HTMLDivElement>(null);\r\n  // Removed autoPlayRef\r\n\r\n  const maxIndex = Math.max(0, products.length - Math.floor(itemsPerView));\r\n\r\n  // Removed auto-play functionality\r\n\r\n  // Removed pauseAutoPlay function\r\n\r\n  const goToNext = () => {\r\n    // Removed pauseAutoPlay call\r\n    setCurrentIndex(prev => Math.min(prev + 1, maxIndex));\r\n  };\r\n\r\n  const goToPrevious = () => {\r\n    // Removed pauseAutoPlay call\r\n    setCurrentIndex(prev => Math.max(prev - 1, 0));\r\n  };\r\n\r\n  const goToSlide = (index: number) => {\r\n    // Removed pauseAutoPlay call\r\n    setCurrentIndex(Math.min(Math.max(index, 0), maxIndex));\r\n  };\r\n\r\n  // Swipe gesture support\r\n  const { onTouchStart, onTouchMove, onTouchEnd } = useSwipeGesture({\r\n    onSwipeLeft: goToNext,\r\n    onSwipeRight: goToPrevious,\r\n  }, {\r\n    minSwipeDistance: 50,\r\n    preventDefaultTouchmove: false, // Allow scrolling\r\n  });\r\n\r\n  if (!products.length) {\r\n    return null;\r\n  }\r\n\r\n  const itemWidth = 100 / itemsPerView;\r\n  const translateX = -(currentIndex * itemWidth);\r\n\r\n  return (\r\n    <div className=\"w-full\">\r\n      {/* Title */}\r\n      {title && (\r\n        <div className=\"flex items-center justify-between mb-3 px-3\">\r\n          <h2 className=\"text-lg font-semibold text-neutral-900\">{title}</h2>\r\n          {showNavigation && products.length > itemsPerView && (\r\n            <div className=\"flex space-x-1.5\">\r\n              <MobileIconButton\r\n                icon={ChevronLeft}\r\n                onClick={goToPrevious}\r\n                disabled={currentIndex === 0}\r\n                variant=\"secondary\"\r\n                size=\"minimum\"\r\n                ariaLabel=\"Previous products\"\r\n              />\r\n              <MobileIconButton\r\n                icon={ChevronRight}\r\n                onClick={goToNext}\r\n                disabled={currentIndex >= maxIndex}\r\n                variant=\"secondary\"\r\n                size=\"minimum\"\r\n                ariaLabel=\"Next products\"\r\n              />\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Carousel Container */}\r\n      <div className=\"relative overflow-hidden\">\r\n        <div\r\n          ref={carouselRef}\r\n          className=\"flex transition-transform duration-300 ease-out\"\r\n          style={{ \r\n            transform: `translateX(${translateX}%)`,\r\n            width: `${(products.length / itemsPerView) * 100}%`\r\n          }}\r\n          onTouchStart={onTouchStart}\r\n          onTouchMove={onTouchMove}\r\n          onTouchEnd={onTouchEnd}\r\n        >\r\n          {products.map((product, index) => (\r\n            <div\r\n              key={product.id}\r\n              className=\"flex-shrink-0 px-1.5\"\r\n              style={{ width: `${itemWidth}%` }}\r\n            >\r\n              <MobileProductCard product={product} variant={variant} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {/* Navigation Overlay for larger carousels */}\r\n        {showNavigation && products.length > itemsPerView && (\r\n          <>\r\n            {currentIndex > 0 && (\r\n              <button\r\n                onClick={goToPrevious}\r\n                className=\"absolute left-1.5 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm rounded-full p-1.5 shadow-md z-10 active:bg-white/80 touch-manipulation\"\r\n                aria-label=\"Previous products\"\r\n              >\r\n                <ChevronLeft className=\"w-4 h-4 text-neutral-700\" />\r\n              </button>\r\n            )}\r\n            \r\n            {currentIndex < maxIndex && (\r\n              <button\r\n                onClick={goToNext}\r\n                className=\"absolute right-1.5 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm rounded-full p-1.5 shadow-md z-10 active:bg-white/80 touch-manipulation\"\r\n                aria-label=\"Next products\"\r\n              >\r\n                <ChevronRight className=\"w-4 h-4 text-neutral-700\" />\r\n              </button>\r\n            )}\r\n          </>\r\n        )}\r\n      </div>\r\n\r\n      {/* Indicators */}\r\n      {products.length > itemsPerView && (\r\n        <div className=\"flex justify-center mt-3 space-x-1.5\">\r\n          {Array.from({ length: maxIndex + 1 }, (_, index) => (\r\n            <button\r\n              key={index}\r\n              onClick={() => goToSlide(index)}\r\n              className={`w-1.5 h-1.5 rounded-full transition-colors duration-200 ${\r\n                index === currentIndex \r\n                  ? 'bg-neutral-900' \r\n                  : 'bg-neutral-300 hover:bg-neutral-400'\r\n              } touch-manipulation`}\r\n              aria-label={`Go to slide ${index + 1}`}\r\n            />\r\n          ))}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Specialized carousel for featured products\r\nexport const MobileFeaturedCarousel: React.FC<{\r\n  products: Product[];\r\n  title?: string;\r\n}> = ({ products, title }) => {\r\n  return (\r\n    <MobileProductCarousel\r\n      products={products}\r\n      title={title}\r\n      variant=\"featured\"\r\n      itemsPerView={1}\r\n      showNavigation={true}\r\n      // Removed autoPlay to prevent blinking\r\n      autoPlay={false}\r\n      autoPlayInterval={4000}\r\n    />\r\n  );\r\n};\r\n\r\n// Specialized carousel for compact product lists\r\nexport const MobileCompactCarousel: React.FC<{\r\n  products: Product[];\r\n  title?: string;\r\n}> = ({ products, title }) => {\r\n  return (\r\n    <MobileProductCarousel\r\n      products={products}\r\n      title={title}\r\n      variant=\"compact\"\r\n      itemsPerView={1.5}\r\n      showNavigation={false}\r\n      autoPlay={false}\r\n    />\r\n  );\r\n};\r\n\r\n// Enhanced Grid layout for mobile product listings with luxury design\r\ninterface MobileProductGridProps {\r\n  products: Product[];\r\n  columns?: 1 | 2;\r\n  variant?: 'default' | 'compact' | 'luxury';\r\n}\r\n\r\nexport const MobileProductGrid: React.FC<MobileProductGridProps> = ({\r\n  products,\r\n  columns = 2,\r\n  variant = 'luxury',\r\n}) => {\r\n  const gridCols = columns === 1 ? 'grid-cols-1' : 'grid-cols-2';\r\n  const gap = variant === 'compact' ? 'gap-2' : variant === 'luxury' ? 'gap-3' : 'gap-3';\r\n  const padding = variant === 'luxury' ? 'px-3' : 'p-3';\r\n\r\n  return (\r\n    <div className={`grid ${gridCols} ${gap} ${padding} py-4`}>\r\n      {products.map((product, index) => (\r\n        // Removed motion animations\r\n        <div\r\n          key={product.id}\r\n          className=\"touch-manipulation\"\r\n        >\r\n          <MobileProductCard\r\n            product={product}\r\n            variant={variant}\r\n          />\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};","import React, { useState, useEffect } from 'react';\r\nimport { Product } from '../../types';\r\nimport { ProductCard } from '../Product/ProductCard';\r\nimport { ProductDetails } from '../Product/ProductDetails';\r\nimport { useProducts } from '../../contexts/ProductContext';\r\nimport { LoadingSpinner } from '../Common/LoadingSpinner';\r\nimport { MobileFeaturedCarousel } from '../Mobile/MobileProductCarousel';\r\nimport { useMobileDetection } from '../../hooks/useMobileGestures';\r\n\r\nexport const FeaturedProducts: React.FC = () => {\r\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\r\n  const { featuredProducts, featuredLoading, fetchFeaturedProducts } = useProducts();\r\n  const { isMobile } = useMobileDetection();\r\n\r\n  useEffect(() => {\r\n    fetchFeaturedProducts(8);\r\n  }, [fetchFeaturedProducts]);\r\n\r\n  return (\r\n    <section className=\"py-6 sm:py-8 md:py-12 bg-gray-50\">\r\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8\">\r\n        <div className=\"text-center mb-6 sm:mb-8 md:mb-10\">\r\n          <h2 className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 sm:mb-3 leading-tight\">\r\n            Featured Attars & Perfumes\r\n          </h2>\r\n          <p className=\"text-sm sm:text-base text-gray-600 px-3 sm:px-0\">\r\n            Handpicked authentic Indian attars and premium perfumes\r\n          </p>\r\n        </div>\r\n\r\n        {featuredLoading ? (\r\n          <div className=\"flex justify-center py-8 sm:py-10\">\r\n            <LoadingSpinner />\r\n          </div>\r\n        ) : featuredProducts.length > 0 ? (\r\n          isMobile ? (\r\n            <MobileFeaturedCarousel\r\n              products={featuredProducts}\r\n              title=\"Featured Attars\"\r\n            />\r\n          ) : (\r\n            <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3 sm:gap-4 md:gap-5\">\r\n              {featuredProducts.map((product, index) => (\r\n                <div\r\n                  key={product.id}\r\n                  className=\"touch-manipulation\"\r\n                >\r\n                  <ProductCard product={product} />\r\n                </div>\r\n              ))}\r\n            </div>\r\n          )\r\n        ) : (\r\n          <div className=\"text-center py-8 sm:py-10\">\r\n            <p className=\"text-gray-600\">No featured products available at the moment.</p>\r\n            <p className=\"text-xs sm:text-sm text-gray-500 mt-1 sm:mt-2\">Check back soon for our latest featured items!</p>\r\n          </div>\r\n        )}\r\n\r\n        {selectedProduct && (\r\n          <ProductDetails\r\n            product={selectedProduct}\r\n            isOpen={!!selectedProduct}\r\n            onClose={() => setSelectedProduct(null)}\r\n          />\r\n        )}\r\n      </div>\r\n    </section>\r\n  );\r\n};","import React, { useState } from 'react';\r\n// Removed framer-motion import\r\nimport { TrendingUp, ArrowRight } from 'lucide-react';\r\nimport { Product } from '../../types';\r\nimport { ProductCard } from '../Product/ProductCard';\r\nimport { ProductDetails } from '../Product/ProductDetails';\r\nimport { useProducts } from '../../contexts/ProductContext';\r\nimport { MobileCompactCarousel } from '../Mobile/MobileProductCarousel';\r\nimport { useMobileDetection } from '../../hooks/useMobileGestures';\r\n\r\nexport const TrendingSection: React.FC = () => {\r\n  const [selectedProduct, setSelectedProduct] = useState<Product | null>(null);\r\n  const { products } = useProducts();\r\n  const { isMobile } = useMobileDetection();\r\n\r\n  const trendingProducts = products.filter(p => p.tags && Array.isArray(p.tags) && p.tags.includes('trending')).slice(0, 6);\r\n\r\n  return (\r\n    <section className=\"py-8 sm:py-12 md:py-16 bg-gradient-to-br from-blue-600 via-purple-700 to-indigo-800 text-white\">\r\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8\">\r\n        <div className=\"text-center mb-6 sm:mb-8 md:mb-10\">\r\n          {/* Removed motion animations */}\r\n          <div className=\"flex items-center justify-center space-x-1.5 sm:space-x-2 mb-2 sm:mb-3\">\r\n            <TrendingUp className=\"h-4 w-4 sm:h-5 sm:w-5 text-blue-200\" />\r\n            <span className=\"text-blue-200 font-medium text-xs sm:text-sm\">TRENDING NOW</span>\r\n          </div>\r\n          <h2 className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold mb-2 sm:mb-3 leading-tight\">\r\n            What's Hot Right Now\r\n          </h2>\r\n          <p className=\"text-sm sm:text-base md:text-lg text-blue-200 max-w-2xl mx-auto px-3 sm:px-0 leading-relaxed\">\r\n            Don't miss out on the most popular products that everyone's talking about\r\n          </p>\r\n        </div>\r\n\r\n        {isMobile ? (\r\n          <MobileCompactCarousel\r\n            products={trendingProducts}\r\n            title=\"Trending Products\"\r\n          />\r\n        ) : (\r\n          <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 sm:gap-5 md:gap-6\">\r\n            {trendingProducts.map((product) => (\r\n              <div key={product.id} className=\"touch-manipulation\">\r\n                <div className=\"bg-white/10 backdrop-blur-sm rounded-lg sm:rounded-xl p-0.5\">\r\n                  <ProductCard\r\n                    product={product}\r\n                  />\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n\r\n        {/* Removed motion animations */}\r\n        <div className=\"text-center mt-6 sm:mt-8 md:mt-10\">\r\n          <button className=\"btn-accent-darkbg !text-sm sm:!text-base active:bg-white/20 touch-manipulation\">\r\n            <span>View All Trending</span>\r\n            <ArrowRight className=\"h-3.5 w-3.5 sm:h-4 sm:w-4 ml-1.5\" />\r\n          </button>\r\n        </div>\r\n      </div>\r\n\r\n      {selectedProduct && (\r\n        <ProductDetails\r\n          product={selectedProduct}\r\n          isOpen={!!selectedProduct}\r\n          onClose={() => setSelectedProduct(null)}\r\n        />\r\n      )}\r\n    </section>\r\n  );\r\n};","import React, { useState, useRef, useEffect } from 'react';\r\nimport { Star, Quote, ChevronLeft, ChevronRight } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { useSwipeGesture } from '../../hooks/useMobileGestures';\r\nimport { SafeImage } from '../Common/MediaErrorHandler';\r\n\r\n// Use placeholder avatar images from a reliable source\r\nconst generateAvatarUrl = (name: string, size: number = 80) => {\r\n  return `https://ui-avatars.com/api/?name=${encodeURIComponent(name)}&size=${size}&background=6366f1&color=ffffff&bold=true`;\r\n};\r\n\r\n// Fallback avatar URLs\r\nconst sarahMitchellAvatar = generateAvatarUrl('Sarah Johnson');\r\nconst davidKimAvatar = generateAvatarUrl('Michael Chen');\r\nconst lisaThompsonAvatar = generateAvatarUrl('Lisa Thompson');\r\nconst jamesWilsonAvatar = generateAvatarUrl('James Wilson');\r\n\r\nconst testimonialsData = [\r\n  {\r\n    quote: \"Absolutely incredible service! The product quality exceeded my expectations, and the shipping was lightning fast. I've never had such a seamless online shopping experience.\",\r\n    name: 'Sarah Johnson',\r\n    role: 'Fashion Entrepreneur',\r\n    location: 'New York, NY',\r\n    avatar: sarahMitchellAvatar,\r\n    rating: 5,\r\n    product: 'Premium Handbag Collection',\r\n    verified: true\r\n  },\r\n  {\r\n    quote: \"The attention to detail is remarkable. Every interaction, from browsing to checkout to delivery, felt premium. This is how online shopping should be done.\",\r\n    name: 'Michael Chen',\r\n    role: 'Tech Executive',\r\n    location: 'San Francisco, CA',\r\n    avatar: davidKimAvatar,\r\n    rating: 5,\r\n    product: 'Smart Home Electronics',\r\n    verified: true\r\n  },\r\n  {\r\n    quote: \"I was hesitant to shop online for luxury items, but this platform changed my mind completely. Authentic products, excellent packaging, and outstanding customer support.\",\r\n    name: 'Emily Rodriguez',\r\n    role: 'Interior Designer',\r\n    location: 'Miami, FL',\r\n    avatar: generateAvatarUrl('Emily Rodriguez'),\r\n    rating: 5,\r\n    product: 'Home Dcor & Furniture',\r\n    verified: true\r\n  },\r\n  {\r\n    quote: \"The personalized recommendations are spot-on! It's like having a personal shopper who really understands my style. Five stars all the way!\",\r\n    name: 'David Kim',\r\n    role: 'Creative Director',\r\n    location: 'Los Angeles, CA',\r\n    avatar: davidKimAvatar,\r\n    rating: 5,\r\n    product: 'Fashion & Accessories',\r\n    verified: true\r\n  },\r\n  {\r\n    quote: \"Fast, reliable, and trustworthy. I've made multiple purchases and every single one has been perfect. This is my go-to shopping destination now.\",\r\n    name: 'Lisa Thompson',\r\n    role: 'Marketing Manager',\r\n    location: 'Chicago, IL',\r\n    avatar: lisaThompsonAvatar,\r\n    rating: 5,\r\n    product: 'Beauty & Wellness',\r\n    verified: true\r\n  },\r\n  {\r\n    quote: \"The quality control is impressive. Every product arrives exactly as described, often better than expected. Truly a premium shopping experience.\",\r\n    name: 'James Wilson',\r\n    role: 'Business Owner',\r\n    location: 'Austin, TX',\r\n    avatar: jamesWilsonAvatar,\r\n    rating: 5,\r\n    product: 'Sports & Outdoor Gear',\r\n    verified: true\r\n  }\r\n];\r\n\r\n// Testimonial Card Component\r\nconst TestimonialCard: React.FC<{ testimonial: typeof testimonialsData[0], isFeatured?: boolean }> = ({ \r\n  testimonial, \r\n  isFeatured = false \r\n}) => {\r\n  return (\r\n    <div className={`bg-white rounded-lg sm:rounded-xl shadow-md hover:shadow-lg transition-all duration-300 p-3 sm:p-4 border border-gray-100 hover:border-blue-200 touch-manipulation ${isFeatured ? 'sm:p-5 md:p-6' : ''}`}>\r\n      <div className={`flex items-center justify-between mb-2 sm:mb-3 ${isFeatured ? 'sm:mb-4' : ''}`}>\r\n        <div className=\"flex space-x-0.5 sm:space-x-1\">\r\n          {[...Array(testimonial.rating)].map((_, i) => (\r\n            <Star key={i} className=\"h-3 w-3 sm:h-4 sm:w-4 text-yellow-400 fill-current\" />\r\n          ))}\r\n        </div>\r\n        {testimonial.verified && (\r\n          <div className=\"flex items-center space-x-1 text-green-600\">\r\n            <div className=\"w-1 h-1 sm:w-1.5 sm:h-1.5 bg-green-500 rounded-full\"></div>\r\n            <span className=\"text-[10px] font-medium\">Verified</span>\r\n          </div>\r\n        )}\r\n      </div>\r\n      \r\n      <blockquote className={`text-gray-700 leading-relaxed flex-grow ${isFeatured ? 'text-base sm:text-lg md:text-xl font-medium mb-4 sm:mb-6' : 'text-xs sm:text-sm mb-3 sm:mb-4 line-clamp-4'}`}>\r\n        \"{testimonial.quote}\"\r\n      </blockquote>\r\n      \r\n      <div className={`border-t border-gray-100 pt-2.5 sm:pt-3 ${isFeatured ? 'sm:pt-4' : ''}`}>\r\n        <div className=\"flex items-center\">\r\n          <SafeImage\r\n            src={testimonial.avatar}\r\n            alt={testimonial.name}\r\n            className={`rounded-full object-cover ${isFeatured ? 'h-10 w-10 sm:h-12 sm:w-12 md:h-14 md:w-14 border-2 sm:border-4 border-white/20' : 'h-8 w-8 sm:h-10 sm:w-10'}`}\r\n            width={isFeatured ? 56 : 40}\r\n            height={isFeatured ? 56 : 40}\r\n          />\r\n          <div className=\"ml-2 sm:ml-3 flex-1 min-w-0\">\r\n            <p className={`font-bold text-gray-900 truncate ${isFeatured ? 'text-sm sm:text-base md:text-lg' : 'text-xs sm:text-sm'}`}>{testimonial.name}</p>\r\n            <p className={`truncate ${isFeatured ? 'text-xs sm:text-sm text-gray-600' : 'text-[10px] sm:text-xs text-gray-600'}`}>{testimonial.role}</p>\r\n            <p className={`truncate mt-0.5 ${isFeatured ? 'text-[10px] text-gray-500' : 'text-[10px] text-gray-500'}`}>{testimonial.location}</p>\r\n          </div>\r\n        </div>\r\n        <div className={`mt-2 rounded-md sm:rounded-lg px-2 py-1.5 ${isFeatured ? 'sm:px-3 sm:py-2 bg-gray-50' : 'bg-gray-50'}`}>\r\n          <p className={`font-medium truncate ${isFeatured ? 'text-xs sm:text-sm text-gray-600' : 'text-[10px] text-gray-600'}`}>Purchased: {testimonial.product}</p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Testimonial Carousel Component\r\nconst TestimonialCarousel: React.FC = () => {\r\n  const [currentIndex, setCurrentIndex] = useState(0);\r\n  const carouselRef = useRef<HTMLDivElement>(null);\r\n  const autoPlayRef = useRef<NodeJS.Timeout>();\r\n  \r\n  // Auto-play functionality\r\n  useEffect(() => {\r\n    autoPlayRef.current = setInterval(() => {\r\n      setCurrentIndex(prev => (prev >= testimonialsData.length - 1 ? 0 : prev + 1));\r\n    }, 5000);\r\n    \r\n    return () => {\r\n      if (autoPlayRef.current) {\r\n        clearInterval(autoPlayRef.current);\r\n      }\r\n    };\r\n  }, []);\r\n  \r\n  // Pause auto-play on user interaction\r\n  const pauseAutoPlay = () => {\r\n    if (autoPlayRef.current) {\r\n      clearInterval(autoPlayRef.current);\r\n    }\r\n  };\r\n  \r\n  const goToNext = () => {\r\n    pauseAutoPlay();\r\n    setCurrentIndex(prev => (prev >= testimonialsData.length - 1 ? 0 : prev + 1));\r\n  };\r\n  \r\n  const goToPrevious = () => {\r\n    pauseAutoPlay();\r\n    setCurrentIndex(prev => (prev <= 0 ? testimonialsData.length - 1 : prev - 1));\r\n  };\r\n  \r\n  const goToSlide = (index: number) => {\r\n    pauseAutoPlay();\r\n    setCurrentIndex(index);\r\n  };\r\n  \r\n  // Swipe gesture support\r\n  const { onTouchStart, onTouchMove, onTouchEnd } = useSwipeGesture({\r\n    onSwipeLeft: goToNext,\r\n    onSwipeRight: goToPrevious,\r\n  }, {\r\n    minSwipeDistance: 50,\r\n    preventDefaultTouchmove: false,\r\n  });\r\n  \r\n  // Calculate item width and translateX for carousel\r\n  const itemWidth = 100; // 100% for 1 item per view\r\n  const translateX = -(currentIndex * itemWidth);\r\n  \r\n  return (\r\n    <div className=\"relative\">\r\n      {/* Carousel Container */}\r\n      <div \r\n        ref={carouselRef}\r\n        className=\"relative overflow-hidden\"\r\n        onTouchStart={onTouchStart}\r\n        onTouchMove={onTouchMove}\r\n        onTouchEnd={onTouchEnd}\r\n      >\r\n        <div\r\n          className=\"flex transition-transform duration-500 ease-out\"\r\n          style={{ \r\n            transform: `translateX(${translateX}%)`,\r\n            width: `${testimonialsData.length * 100}%`\r\n          }}\r\n        >\r\n          {testimonialsData.map((testimonial, index) => (\r\n            <div\r\n              key={index}\r\n              className=\"flex-shrink-0 w-full px-1\"\r\n            >\r\n              <TestimonialCard testimonial={testimonial} />\r\n            </div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n      \r\n      {/* Navigation Arrows */}\r\n      <button\r\n        onClick={goToPrevious}\r\n        className=\"absolute left-0 top-1/2 transform -translate-y-1/2 -translate-x-1/2 bg-white/90 backdrop-blur-sm rounded-full p-1.5 sm:p-2 shadow-md z-10 active:bg-white/80 touch-manipulation hidden sm:flex items-center justify-center\"\r\n        aria-label=\"Previous testimonial\"\r\n      >\r\n        <ChevronLeft className=\"w-4 h-4 sm:w-5 sm:h-5 text-neutral-700\" />\r\n      </button>\r\n      \r\n      <button\r\n        onClick={goToNext}\r\n        className=\"absolute right-0 top-1/2 transform -translate-y-1/2 translate-x-1/2 bg-white/90 backdrop-blur-sm rounded-full p-1.5 sm:p-2 shadow-md z-10 active:bg-white/80 touch-manipulation hidden sm:flex items-center justify-center\"\r\n        aria-label=\"Next testimonial\"\r\n      >\r\n        <ChevronRight className=\"w-4 h-4 sm:w-5 sm:h-5 text-neutral-700\" />\r\n      </button>\r\n      \r\n      {/* Mobile Navigation Arrows */}\r\n      <button\r\n        onClick={goToPrevious}\r\n        className=\"absolute left-2 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm rounded-full p-1 shadow-md z-10 active:bg-white/80 touch-manipulation sm:hidden flex items-center justify-center\"\r\n        aria-label=\"Previous testimonial\"\r\n      >\r\n        <ChevronLeft className=\"w-3 h-3 text-neutral-700\" />\r\n      </button>\r\n      \r\n      <button\r\n        onClick={goToNext}\r\n        className=\"absolute right-2 top-1/2 transform -translate-y-1/2 bg-white/90 backdrop-blur-sm rounded-full p-1 shadow-md z-10 active:bg-white/80 touch-manipulation sm:hidden flex items-center justify-center\"\r\n        aria-label=\"Next testimonial\"\r\n      >\r\n        <ChevronRight className=\"w-3 h-3 text-neutral-700\" />\r\n      </button>\r\n      \r\n      {/* Indicators */}\r\n      <div className=\"flex justify-center mt-4 space-x-1.5\">\r\n        {testimonialsData.map((_, index) => (\r\n          <button\r\n            key={index}\r\n            onClick={() => goToSlide(index)}\r\n            className={`w-2 h-2 rounded-full transition-colors duration-200 ${\r\n              index === currentIndex \r\n                ? 'bg-blue-600' \r\n                : 'bg-gray-300 hover:bg-gray-400'\r\n            } touch-manipulation`}\r\n            aria-label={`Go to testimonial ${index + 1}`}\r\n          />\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport const Testimonials: React.FC = () => {\r\n  return (\r\n    <section className=\"py-8 sm:py-12 md:py-16 bg-white\">\r\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8\">\r\n        <div className=\"text-center mb-6 sm:mb-8 md:mb-10\">\r\n          <motion.div\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            className=\"inline-flex items-center space-x-1.5 bg-blue-100 text-blue-800 rounded-full px-2.5 sm:px-3 py-1 sm:py-1.5 mb-3 sm:mb-4\"\r\n          >\r\n            <Star className=\"h-3 w-3 sm:h-3.5 sm:w-3.5 fill-current\" />\r\n            <span className=\"font-medium text-[10px] sm:text-xs\">5.0 Average Rating</span>\r\n          </motion.div>\r\n          \r\n          <motion.h2\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            transition={{ delay: 0.1 }}\r\n            className=\"text-xl sm:text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900 mb-2 sm:mb-3 leading-tight\"\r\n          >\r\n            Loved by Thousands\r\n            <span className=\"block text-blue-600\">of Happy Customers</span>\r\n          </motion.h2>\r\n          \r\n          <motion.p\r\n            initial={{ opacity: 0, y: 20 }}\r\n            whileInView={{ opacity: 1, y: 0 }}\r\n            viewport={{ once: true }}\r\n            transition={{ delay: 0.2 }}\r\n            className=\"text-sm sm:text-base md:text-lg text-gray-600 max-w-3xl mx-auto leading-relaxed px-3 sm:px-0\"\r\n          >\r\n            Join over 1 million satisfied customers who trust us for their shopping needs. Here's what they have to say about their experience.\r\n          </motion.p>\r\n        </div>\r\n\r\n        {/* Featured Testimonial */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 30 }}\r\n          whileInView={{ opacity: 1, y: 0 }}\r\n          viewport={{ once: true }}\r\n          transition={{ delay: 0.3 }}\r\n          className=\"mb-6 sm:mb-8 md:mb-10\"\r\n        >\r\n          <div className=\"relative bg-gradient-to-br from-blue-600 to-purple-700 rounded-xl sm:rounded-2xl p-4 sm:p-6 md:p-8 text-white\">\r\n            <Quote className=\"h-6 w-6 sm:h-8 sm:w-8 md:h-10 md:w-10 text-blue-200 mb-3 sm:mb-4 md:mb-6\" />\r\n            <blockquote className=\"text-base sm:text-lg md:text-xl font-medium leading-relaxed mb-4 sm:mb-6\">\r\n              \"{testimonialsData[0].quote}\"\r\n            </blockquote>\r\n            <div className=\"flex items-center\">\r\n              <SafeImage\r\n                src={testimonialsData[0].avatar}\r\n                alt={testimonialsData[0].name}\r\n                className=\"h-10 w-10 sm:h-12 sm:w-12 md:h-14 md:w-14 rounded-full border-2 sm:border-4 border-white/20 object-cover\"\r\n                width={56}\r\n                height={56}\r\n              />\r\n              <div className=\"ml-2.5 sm:ml-3 md:ml-4\">\r\n                <div className=\"flex items-center space-x-1.5 mb-0.5 sm:mb-1\">\r\n                  <p className=\"font-bold text-sm sm:text-base md:text-lg\">{testimonialsData[0].name}</p>\r\n                  <div className=\"w-1.5 h-1.5 sm:w-2 sm:h-2 bg-green-400 rounded-full\"></div>\r\n                  <span className=\"text-[10px] sm:text-xs text-blue-200\">Verified Buyer</span>\r\n                </div>\r\n                <p className=\"text-[10px] sm:text-xs text-blue-200\">{testimonialsData[0].role}  {testimonialsData[0].location}</p>\r\n                <p className=\"text-[10px] text-blue-100 mt-1 line-clamp-1\">Purchased: {testimonialsData[0].product}</p>\r\n              </div>\r\n            </div>\r\n            \r\n            {/* Decorative elements */}\r\n            <div className=\"absolute top-3 right-3 sm:top-4 sm:right-4 flex space-x-0.5 sm:space-x-1\">\r\n              {[...Array(5)].map((_, i) => (\r\n                <Star key={i} className=\"h-3 w-3 sm:h-4 sm:w-4 md:h-5 md:w-5 text-yellow-400 fill-current\" />\r\n              ))}\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n\r\n        {/* Testimonials Carousel */}\r\n        <div className=\"mb-6 sm:mb-8 md:mb-10\">\r\n          <TestimonialCarousel />\r\n        </div>\r\n        \r\n        {/* Stats Section */}\r\n        <motion.div\r\n          initial={{ opacity: 0, y: 20 }}\r\n          whileInView={{ opacity: 1, y: 0 }}\r\n          viewport={{ once: true }}\r\n          className=\"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 md:gap-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg sm:rounded-xl p-3 sm:p-4 md:p-6\"\r\n        >\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg sm:text-xl md:text-2xl font-bold text-blue-600 mb-0.5 sm:mb-1\">1M+</div>\r\n            <div className=\"text-[10px] sm:text-xs text-gray-600 font-medium\">Happy Customers</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg sm:text-xl md:text-2xl font-bold text-green-600 mb-0.5 sm:mb-1\">4.9/5</div>\r\n            <div className=\"text-[10px] sm:text-xs text-gray-600 font-medium\">Average Rating</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg sm:text-xl md:text-2xl font-bold text-purple-600 mb-0.5 sm:mb-1\">98%</div>\r\n            <div className=\"text-[10px] sm:text-xs text-gray-600 font-medium\">Satisfaction Rate</div>\r\n          </div>\r\n          <div className=\"text-center\">\r\n            <div className=\"text-lg sm:text-xl md:text-2xl font-bold text-orange-600 mb-0.5 sm:mb-1\">24/7</div>\r\n            <div className=\"text-[10px] sm:text-xs text-gray-600 font-medium\">Customer Support</div>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </section>\r\n  );\r\n};","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { Eye, ArrowRight, X } from 'lucide-react';\r\nimport { Link } from 'react-router-dom';\r\nimport { useRecommendations } from '../../contexts/RecommendationsContext';\r\nimport { ProductRecommendations } from '../Product/ProductRecommendations';\r\n\r\ninterface RecentlyViewedProps {\r\n  maxItems?: number;\r\n  showClearButton?: boolean;\r\n  className?: string;\r\n  layout?: 'horizontal' | 'grid';\r\n}\r\n\r\nexport const RecentlyViewed: React.FC<RecentlyViewedProps> = ({\r\n  maxItems = 6,\r\n  showClearButton = true,\r\n  className = '',\r\n  layout = 'horizontal'\r\n}) => {\r\n  const { \r\n    recommendations, \r\n    clearRecentlyViewed, \r\n    getRecentlyViewed \r\n  } = useRecommendations();\r\n\r\n  const recentlyViewedProducts = getRecentlyViewed(maxItems);\r\n\r\n  // Don't render if no recently viewed products\r\n  if (recentlyViewedProducts.length === 0) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <section className={`py-6 sm:py-8 ${className}`}>\r\n      <div className=\"max-w-7xl mx-auto px-3 sm:px-4 md:px-6 lg:px-8\">\r\n        {/* Section Header */}\r\n        <div className=\"flex flex-col sm:flex-row sm:items-center justify-between gap-3 sm:gap-4 mb-4 sm:mb-6\">\r\n          <div className=\"flex items-center space-x-2 sm:space-x-3\">\r\n            <div className=\"p-1.5 sm:p-2 bg-neutral-100 rounded-lg\">\r\n              <Eye className=\"h-3.5 w-3.5 sm:h-4 sm:w-4 text-neutral-600\" />\r\n            </div>\r\n            <div>\r\n              <h2 className=\"text-lg sm:text-xl font-semibold text-neutral-900\">\r\n                Recently Viewed\r\n              </h2>\r\n              <p className=\"text-neutral-600 text-[10px] sm:text-xs mt-0.5\">\r\n                Continue where you left off\r\n              </p>\r\n            </div>\r\n          </div>\r\n          \r\n          <div className=\"flex items-center space-x-2 sm:space-x-3\">\r\n            {showClearButton && (\r\n              <button\r\n                onClick={clearRecentlyViewed}\r\n                className=\"flex items-center space-x-1 sm:space-x-1.5 text-neutral-500 hover:text-neutral-700 transition-colors text-[10px] sm:text-xs touch-manipulation\"\r\n              >\r\n                <X className=\"h-3 w-3 sm:h-3.5 sm:w-3.5\" />\r\n                <span>Clear All</span>\r\n              </button>\r\n            )}\r\n            \r\n            {recentlyViewedProducts.length > maxItems && (\r\n              <Link \r\n                to=\"/products\" \r\n                className=\"flex items-center space-x-1 sm:space-x-1.5 text-primary-600 hover:text-primary-700 transition-colors text-[10px] sm:text-xs touch-manipulation\"\r\n              >\r\n                <span className=\"font-medium\">View All</span>\r\n                <ArrowRight className=\"h-3 w-3 sm:h-3.5 sm:w-3.5\" />\r\n              </Link>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        {/* Products Grid */}\r\n        <ProductRecommendations\r\n          type=\"recently-viewed\"\r\n          maxItems={maxItems}\r\n          layout={layout}\r\n          showAddToCart={true}\r\n          className=\"bg-transparent\"\r\n        />\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\n// Compact version for sidebars or smaller spaces\r\nexport const RecentlyViewedCompact: React.FC<{\r\n  maxItems?: number;\r\n  className?: string;\r\n}> = ({ maxItems = 3, className = '' }) => {\r\n  const { getRecentlyViewed, removeFromRecentlyViewed } = useRecommendations();\r\n  const recentlyViewedProducts = getRecentlyViewed(maxItems);\r\n\r\n  if (recentlyViewedProducts.length === 0) {\r\n    return (\r\n      <div className={`bg-white rounded-xl border border-neutral-200 p-6 ${className}`}>\r\n        <div className=\"flex items-center space-x-3 mb-4\">\r\n          <Eye className=\"h-5 w-5 text-neutral-600\" />\r\n          <h3 className=\"font-semibold text-neutral-900\">Recently Viewed</h3>\r\n        </div>\r\n        <div className=\"text-center py-8\">\r\n          <Eye className=\"h-12 w-12 text-neutral-300 mx-auto mb-3\" />\r\n          <p className=\"text-neutral-500 text-sm\">No recently viewed products</p>\r\n          <p className=\"text-neutral-400 text-xs mt-1\">\r\n            Products you view will appear here\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className={`bg-white rounded-xl border border-neutral-200 p-6 ${className}`}>\r\n      <div className=\"flex items-center justify-between mb-4\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <Eye className=\"h-5 w-5 text-neutral-600\" />\r\n          <h3 className=\"font-semibold text-neutral-900\">Recently Viewed</h3>\r\n        </div>\r\n        <Link \r\n          to=\"/products\" \r\n          className=\"text-primary-600 hover:text-primary-700 transition-colors\"\r\n        >\r\n          <ArrowRight className=\"h-4 w-4\" />\r\n        </Link>\r\n      </div>\r\n\r\n      <div className=\"space-y-3\">\r\n        {recentlyViewedProducts.map((product, index) => (\r\n          <motion.div\r\n            key={product.id}\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ delay: index * 0.1 }}\r\n          >\r\n            <Link \r\n              to={`/products/${product.id}`}\r\n              className=\"group flex items-center space-x-3 p-3 rounded-lg hover:bg-neutral-50 transition-colors\"\r\n            >\r\n              <img\r\n                src={(product.images && product.images.length > 0 ? product.images[0] : '') || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KICA8cmVjdCB3aWR0aD0iNDAwIiBoZWlnaHQ9IjQwMCIgZmlsbD0iI2Y5ZmFmYiIvPgogIDx0ZXh0IHg9IjIwMCIgeT0iMjAwIiBmb250LXNpemU9IjE2IiBmaWxsPSIjNjM3MzgwIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIiBkeT0iLjNlbSI+SW1hZ2UgTm90IEZvdW5kPC90ZXh0Pgo8L3N2Zz4='}\r\n                alt={product.name}\r\n                className=\"w-10 h-10 object-cover rounded-lg\"\r\n              />\r\n              <div className=\"flex-1 min-w-0\">\r\n                <h4 className=\"font-medium text-neutral-900 text-sm truncate group-hover:text-primary-600 transition-colors\">\r\n                  {product.name}\r\n                </h4>\r\n                <p className=\"text-primary-600 font-semibold text-sm\">\r\n                  {product.price.toLocaleString('en-IN')}\r\n                </p>\r\n              </div>\r\n              <button\r\n                onClick={(e) => {\r\n                  e.preventDefault();\r\n                  e.stopPropagation();\r\n                  removeFromRecentlyViewed(product.id);\r\n                }}\r\n                className=\"opacity-0 group-hover:opacity-100 p-1 hover:bg-neutral-200 rounded transition-all\"\r\n              >\r\n                <X className=\"h-3 w-3 text-neutral-500\" />\r\n              </button>\r\n            </Link>\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n\r\n      {recentlyViewedProducts.length >= maxItems && (\r\n        <div className=\"mt-4 pt-4 border-t border-neutral-200\">\r\n          <Link\r\n            to=\"/products\"\r\n            className=\"block text-center text-sm text-primary-600 hover:text-primary-700 transition-colors font-medium\"\r\n          >\r\n            View All Recently Viewed\r\n          </Link>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Widget for dashboard or profile pages\r\nexport const RecentlyViewedWidget: React.FC<{\r\n  className?: string;\r\n}> = ({ className = '' }) => {\r\n  const { getRecentlyViewed, getRecommendationAnalytics } = useRecommendations();\r\n  const recentlyViewedProducts = getRecentlyViewed(5);\r\n  const analytics = getRecommendationAnalytics();\r\n\r\n  return (\r\n    <div className={`bg-white rounded-xl border border-neutral-200 p-6 ${className}`}>\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          <div className=\"p-2 bg-primary-100 rounded-lg\">\r\n            <Eye className=\"h-5 w-5 text-primary-600\" />\r\n          </div>\r\n          <div>\r\n            <h3 className=\"font-semibold text-neutral-900\">Browsing Activity</h3>\r\n            <p className=\"text-neutral-600 text-sm\">Your recent product views</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Analytics Summary */}\r\n      <div className=\"grid grid-cols-2 gap-4 mb-6\">\r\n        <div className=\"text-center p-3 bg-neutral-50 rounded-lg\">\r\n          <p className=\"text-2xl font-bold text-neutral-900\">\r\n            {analytics.recentlyViewed?.totalViewed || 0}\r\n          </p>\r\n          <p className=\"text-xs text-neutral-600\">Total Views</p>\r\n        </div>\r\n        <div className=\"text-center p-3 bg-neutral-50 rounded-lg\">\r\n          <p className=\"text-2xl font-bold text-neutral-900\">\r\n            {analytics.recentlyViewed?.uniqueProducts || 0}\r\n          </p>\r\n          <p className=\"text-xs text-neutral-600\">Unique Products</p>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Recent Products */}\r\n      {recentlyViewedProducts.length > 0 ? (\r\n        <div className=\"space-y-3\">\r\n          <h4 className=\"font-medium text-neutral-900 text-sm\">Recent Products</h4>\r\n          {recentlyViewedProducts.slice(0, 3).map((product) => (\r\n            <Link\r\n              key={product.id}\r\n              to={`/products/${product.id}`}\r\n              className=\"flex items-center space-x-3 p-2 rounded-lg hover:bg-neutral-50 transition-colors\"\r\n            >\r\n              <img\r\n                src={product.images[0]}\r\n                alt={product.name}\r\n                className=\"w-10 h-10 object-cover rounded-lg\"\r\n              />\r\n              <div className=\"flex-1 min-w-0\">\r\n                <p className=\"font-medium text-neutral-900 text-sm truncate\">\r\n                  {product.name}\r\n                </p>\r\n                <p className=\"text-primary-600 font-semibold text-xs\">\r\n                  {product.price.toLocaleString('en-IN')}\r\n                </p>\r\n              </div>\r\n            </Link>\r\n          ))}\r\n          \r\n          {recentlyViewedProducts.length > 3 && (\r\n            <Link\r\n              to=\"/products\"\r\n              className=\"block text-center text-sm text-primary-600 hover:text-primary-700 transition-colors font-medium pt-2\"\r\n            >\r\n              View {recentlyViewedProducts.length - 3} more\r\n            </Link>\r\n          )}\r\n        </div>\r\n      ) : (\r\n        <div className=\"text-center py-6\">\r\n          <Eye className=\"h-8 w-8 text-neutral-300 mx-auto mb-2\" />\r\n          <p className=\"text-neutral-500 text-sm\">No recent activity</p>\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","export default \"data:image/jpeg;base64,UExBQ0VIT0xERVJfSU1BR0VfT1VESF9DT0xMRUNUSU9OX0JBTk5FUl80MDB4MzAw\"","export default \"__VITE_ASSET__BIzMSItG__\"","export default \"data:image/jpeg;base64,UExBQ0VIT0xERVJfSU1BR0VfSEVSSVRBR0VfQkxFTkRTX0JBTk5FUl80MDB4MzAw\"","export default \"__VITE_ASSET__DEOVyBpq__\"","import React from 'react';\r\nimport { AlertTriangle, RefreshCw, WifiOff, Database, Clock } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface ErrorFallbackProps {\r\n  error?: string | null;\r\n  onRetry?: () => void;\r\n  type?: 'network' | 'database' | 'timeout' | 'general';\r\n  showRetry?: boolean;\r\n  className?: string;\r\n  size?: 'small' | 'medium' | 'large';\r\n}\r\n\r\nexport const ErrorFallback: React.FC<ErrorFallbackProps> = ({\r\n  error,\r\n  onRetry,\r\n  type = 'general',\r\n  showRetry = true,\r\n  className = '',\r\n  size = 'medium'\r\n}) => {\r\n  const getErrorIcon = () => {\r\n    switch (type) {\r\n      case 'network':\r\n        return <WifiOff className=\"h-8 w-8 text-red-500\" />;\r\n      case 'database':\r\n        return <Database className=\"h-8 w-8 text-red-500\" />;\r\n      case 'timeout':\r\n        return <Clock className=\"h-8 w-8 text-orange-500\" />;\r\n      default:\r\n        return <AlertTriangle className=\"h-8 w-8 text-red-500\" />;\r\n    }\r\n  };\r\n\r\n  const getErrorTitle = () => {\r\n    switch (type) {\r\n      case 'network':\r\n        return 'Connection Problem';\r\n      case 'database':\r\n        return 'Database Error';\r\n      case 'timeout':\r\n        return 'Request Timed Out';\r\n      default:\r\n        return 'Something Went Wrong';\r\n    }\r\n  };\r\n\r\n  const getErrorMessage = () => {\r\n    if (error) return error;\r\n    \r\n    switch (type) {\r\n      case 'network':\r\n        return 'Please check your internet connection and try again.';\r\n      case 'database':\r\n        return 'Unable to connect to the database. Please try again later.';\r\n      case 'timeout':\r\n        return 'The request took too long to complete. Please try again.';\r\n      default:\r\n        return 'An unexpected error occurred. Please try again.';\r\n    }\r\n  };\r\n\r\n  const getSizeClasses = () => {\r\n    switch (size) {\r\n      case 'small':\r\n        return 'p-4 text-sm';\r\n      case 'large':\r\n        return 'p-8 text-lg';\r\n      default:\r\n        return 'p-6 text-base';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`bg-white rounded-lg border border-red-200 ${getSizeClasses()} ${className}`}>\r\n      <div className=\"text-center\">\r\n        <div className=\"flex justify-center mb-4\">\r\n          {getErrorIcon()}\r\n        </div>\r\n        \r\n        <h3 className=\"font-semibold text-gray-900 mb-2\">\r\n          {getErrorTitle()}\r\n        </h3>\r\n        \r\n        <p className=\"text-gray-600 mb-4\">\r\n          {getErrorMessage()}\r\n        </p>\r\n        \r\n        {showRetry && onRetry && (\r\n          <button\r\n            onClick={onRetry}\r\n            className=\"inline-flex items-center px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark\"\r\n          >\r\n            <RefreshCw className=\"h-4 w-4 mr-2\" />\r\n            Try Again\r\n          </button>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface ProductGridErrorProps {\r\n  error?: string | null;\r\n  onRetry?: () => void;\r\n  showSkeleton?: boolean;\r\n}\r\n\r\nexport const ProductGridError: React.FC<ProductGridErrorProps> = ({\r\n  error,\r\n  onRetry,\r\n  showSkeleton = false\r\n}) => {\r\n  if (showSkeleton) {\r\n    return (\r\n      <div className=\"grid grid-cols-1 sm:grid-cols-2 xl:grid-cols-3 gap-6\">\r\n        {Array.from({ length: 6 }).map((_, index) => (\r\n          <div key={index} className=\"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden animate-pulse\">\r\n            <div className=\"aspect-square bg-gray-200\"></div>\r\n            <div className=\"p-4 space-y-3\">\r\n              <div className=\"h-4 bg-gray-200 rounded w-3/4\"></div>\r\n              <div className=\"h-3 bg-gray-200 rounded w-1/2\"></div>\r\n              <div className=\"h-6 bg-gray-200 rounded w-1/4\"></div>\r\n            </div>\r\n          </div>\r\n        ))}\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"col-span-full\">\r\n      <ErrorFallback\r\n        error={error}\r\n        onRetry={onRetry}\r\n        type=\"database\"\r\n        size=\"large\"\r\n        className=\"max-w-md mx-auto\"\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface NetworkStatusProps {\r\n  isOnline: boolean;\r\n  onRetry?: () => void;\r\n}\r\n\r\nexport const NetworkStatus: React.FC<NetworkStatusProps> = ({ isOnline, onRetry }) => {\r\n  if (isOnline) return null;\r\n\r\n  return (\r\n    <motion.div\r\n      initial={{ opacity: 0, y: -50 }}\r\n      animate={{ opacity: 1, y: 0 }}\r\n      className=\"fixed top-0 left-0 right-0 bg-red-500 text-white p-3 z-50\"\r\n    >\r\n      <div className=\"container mx-auto flex items-center justify-between\">\r\n        <div className=\"flex items-center\">\r\n          <WifiOff className=\"h-5 w-5 mr-2\" />\r\n          <span>You're offline. Some features may not work properly.</span>\r\n        </div>\r\n        {onRetry && (\r\n          <button\r\n            onClick={onRetry}\r\n            className=\"bg-red-600 hover:bg-red-700 px-3 py-1 rounded text-sm transition-colors\"\r\n          >\r\n            Retry\r\n          </button>\r\n        )}\r\n      </div>\r\n    </motion.div>\r\n  );\r\n};\r\n\r\n\r\n\r\nexport default ErrorFallback;\r\n","import React from 'react';\r\n\r\n// Hook to detect online status\r\nexport const useNetworkStatus = () => {\r\n  const [isOnline, setIsOnline] = React.useState(navigator.onLine);\r\n\r\n  React.useEffect(() => {\r\n    const handleOnline = () => setIsOnline(true);\r\n    const handleOffline = () => setIsOnline(false);\r\n\r\n    window.addEventListener('online', handleOnline);\r\n    window.addEventListener('offline', handleOffline);\r\n\r\n    return () => {\r\n      window.removeEventListener('online', handleOnline);\r\n      window.removeEventListener('offline', handleOffline);\r\n    };\r\n  }, []);\r\n\r\n  return isOnline;\r\n};\r\n","import React, { ReactNode } from 'react';\r\nimport { X } from 'lucide-react';\r\n\r\ninterface ModalProps {\r\n  isOpen: boolean;\r\n  onClose: () => void;\r\n  title: string;\r\n  children: ReactNode;\r\n  size?: 'sm' | 'md' | 'lg' | 'xl';\r\n}\r\n\r\nexport const Modal: React.FC<ModalProps> = ({ isOpen, onClose, title, children, size = 'md' }) => {\r\n  const sizeClasses = {\r\n    sm: 'max-w-sm',\r\n    md: 'max-w-md',\r\n    lg: 'max-w-lg',\r\n    xl: 'max-w-xl',\r\n  };\r\n\r\n  // Handle escape key\r\n  React.useEffect(() => {\r\n    const handleEscape = (e: KeyboardEvent) => {\r\n      if (e.key === 'Escape' && isOpen) {\r\n        onClose();\r\n      }\r\n    };\r\n\r\n    if (isOpen) {\r\n      document.addEventListener('keydown', handleEscape);\r\n      // Prevent body scroll when modal is open\r\n      document.body.style.overflow = 'hidden';\r\n    }\r\n\r\n    return () => {\r\n      document.removeEventListener('keydown', handleEscape);\r\n      document.body.style.overflow = 'unset';\r\n    };\r\n  }, [isOpen, onClose]);\r\n\r\n  return (\r\n    <>\r\n      {isOpen && (\r\n        <div\r\n          className=\"fixed inset-0 z-50 overflow-y-auto backdrop-blur-sm\"\r\n          role=\"dialog\"\r\n          aria-modal=\"true\"\r\n          aria-labelledby=\"modal-title\"\r\n        >\r\n          <div className=\"flex min-h-screen items-center justify-center p-4\">\r\n            <div\r\n              className=\"fixed inset-0 bg-black bg-opacity-60\"\r\n              onClick={onClose}\r\n              aria-hidden=\"true\"\r\n            />\r\n\r\n            <div className={`relative bg-white rounded-2xl shadow-2xl w-full mx-4 border border-neutral-200 ${sizeClasses[size]}`}>\r\n              <div className=\"flex items-center justify-between p-6 border-b border-neutral-200\">\r\n                <h2 id=\"modal-title\" className=\"text-xl font-semibold text-neutral-900 font-luxury\">{title}</h2>\r\n                <button\r\n                  onClick={onClose}\r\n                  className=\"p-2 hover:bg-neutral-100 rounded-lg transition-colors duration-200\"\r\n                  aria-label=\"Close modal\"\r\n                >\r\n                  <X className=\"h-5 w-5 text-neutral-600\" />\r\n                </button>\r\n              </div>\r\n\r\n              <div className=\"p-6\">\r\n                {children}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      )}\r\n    </>\r\n  );\r\n};\r\n","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport { Category } from '../../types';\r\nimport { ArrowRight } from 'lucide-react';\r\nimport { useMobileDetection } from '../../hooks/useMobileGestures';\r\n\r\ninterface CategoryDisplayCardProps {\r\n  category: Category;\r\n}\r\n\r\nexport const CategoryDisplayCard: React.FC<CategoryDisplayCardProps> = ({ category }) => {\r\n  const { isMobile } = useMobileDetection();\r\n\r\n  // Mobile-specific styling\r\n  const cardClasses = isMobile \r\n    ? \"group relative bg-white rounded-xl shadow-md overflow-hidden cursor-pointer h-64 flex flex-col justify-end touch-manipulation\"\r\n    : \"group relative bg-white rounded-2xl shadow-lg overflow-hidden cursor-pointer h-80 flex flex-col justify-end\";\r\n\r\n  const textClasses = isMobile \r\n    ? \"text-lg font-bold mb-1 text-white drop-shadow-lg\"\r\n    : \"text-2xl font-bold mb-2 text-white drop-shadow-lg\";\r\n\r\n  const countClasses = isMobile \r\n    ? \"text-xs font-semibold\"\r\n    : \"text-sm font-semibold\";\r\n\r\n  return (\r\n    <Link to={`/categories/${category.slug}`}>\r\n      <div className={cardClasses}>\r\n        <img\r\n          src={category.image}\r\n          alt={category.name}\r\n          className=\"absolute inset-0 w-full h-full object-cover group-hover:scale-110 transition-transform duration-500\"\r\n        />\r\n        {/* Enhanced gradient overlay for better text contrast */}\r\n        <div className=\"absolute inset-0 bg-gradient-to-t from-black/85 via-black/50 to-transparent\"></div>\r\n\r\n        <div className=\"relative p-4 sm:p-6 text-white z-10\">\r\n          <h3 className={textClasses}>{category.name}</h3>\r\n          <div className=\"flex items-center text-sm font-medium text-white drop-shadow-md mt-2\">\r\n            <span>Explore Now</span>\r\n            <ArrowRight className=\"ml-2 h-4 w-4\" />\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"absolute top-3 sm:top-4 right-3 sm:right-4 bg-white/95 text-neutral-900 px-2.5 py-0.5 sm:px-3 sm:py-1 rounded-full shadow-lg backdrop-blur-sm\">\r\n          <span className={countClasses}>{category.productCount}+ items</span>\r\n        </div>\r\n      </div>\r\n    </Link>\r\n  );\r\n};","import React, { Component, ErrorInfo, ReactNode } from 'react';\r\nimport { AlertTriangle, RefreshCw, Home, Bug, Shield, WifiOff, Database, Send, Copy, CheckCircle } from 'lucide-react';\r\nimport { useNetworkStatus } from '../../utils/networkResilience';\r\n\r\ninterface Props {\r\n  children: ReactNode;\r\n  fallback?: ReactNode;\r\n  onError?: (error: Error, errorInfo: ErrorInfo) => void;\r\n  enableRetry?: boolean;\r\n  maxRetries?: number;\r\n  enableReporting?: boolean;\r\n  fallbackComponent?: 'minimal' | 'detailed' | 'custom';\r\n  context?: string;\r\n}\r\n\r\ninterface State {\r\n  hasError: boolean;\r\n  error: Error | null;\r\n  errorInfo: ErrorInfo | null;\r\n  retryCount: number;\r\n  isRetrying: boolean;\r\n  errorId: string;\r\n  errorType: 'network' | 'database' | 'render' | 'chunk' | 'unknown';\r\n  isReported: boolean;\r\n  showDetails: boolean;\r\n}\r\n\r\nexport class AdminErrorBoundary extends Component<Props, State> {\r\n  private retryTimeoutId: NodeJS.Timeout | null = null;\r\n\r\n  constructor(props: Props) {\r\n    super(props);\r\n    this.state = {\r\n      hasError: false,\r\n      error: null,\r\n      errorInfo: null,\r\n      retryCount: 0,\r\n      isRetrying: false,\r\n      errorId: '',\r\n      errorType: 'unknown',\r\n      isReported: false,\r\n      showDetails: false\r\n    };\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    if (this.retryTimeoutId) {\r\n      clearTimeout(this.retryTimeoutId);\r\n    }\r\n  }\r\n\r\n  static getDerivedStateFromError(error: Error): Partial<State> {\r\n    const errorId = `error_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`;\r\n    const errorType = AdminErrorBoundary.classifyError(error);\r\n\r\n    return {\r\n      hasError: true,\r\n      error,\r\n      errorInfo: null,\r\n      errorId,\r\n      errorType,\r\n      isReported: false,\r\n      showDetails: false\r\n    };\r\n  }\r\n\r\n  static classifyError(error: Error): State['errorType'] {\r\n    const message = error.message.toLowerCase();\r\n    const stack = error.stack?.toLowerCase() || '';\r\n\r\n    if (message.includes('network') || message.includes('fetch') || message.includes('connection')) {\r\n      return 'network';\r\n    }\r\n    if (message.includes('database') || message.includes('supabase') || message.includes('postgres')) {\r\n      return 'database';\r\n    }\r\n    if (message.includes('chunk') || message.includes('loading') || stack.includes('import')) {\r\n      return 'chunk';\r\n    }\r\n    if (stack.includes('render') || message.includes('render')) {\r\n      return 'render';\r\n    }\r\n    return 'unknown';\r\n  }\r\n\r\n  componentDidCatch(error: Error, errorInfo: ErrorInfo) {\r\n    this.setState({\r\n      error,\r\n      errorInfo\r\n    });\r\n\r\n    // Enhanced error logging with context\r\n    const errorContext = {\r\n      errorId: this.state.errorId,\r\n      errorType: this.state.errorType,\r\n      context: this.props.context,\r\n      userAgent: navigator.userAgent,\r\n      timestamp: new Date().toISOString(),\r\n      url: window.location.href,\r\n      userId: this.getCurrentUserId(),\r\n      componentStack: errorInfo.componentStack,\r\n      errorBoundary: 'AdminErrorBoundary'\r\n    };\r\n\r\n    // Error logging removed for production\r\n\r\n    // Call custom error handler if provided\r\n    if (this.props.onError) {\r\n      this.props.onError(error, errorInfo);\r\n    }\r\n\r\n    // Auto-report critical errors in production\r\n    if (this.props.enableReporting !== false && this.shouldAutoReport(error)) {\r\n      this.reportError(error, errorInfo, errorContext);\r\n    }\r\n  }\r\n\r\n  private getCurrentUserId(): string | null {\r\n    try {\r\n      // Try to get user ID from various sources\r\n      const authUser = JSON.parse(localStorage.getItem('supabase.auth.token') || '{}');\r\n      return authUser?.user?.id || null;\r\n    } catch {\r\n      return null;\r\n    }\r\n  }\r\n\r\n  private shouldAutoReport(error: Error): boolean {\r\n    const criticalErrors = ['chunk', 'network', 'database'];\r\n    return criticalErrors.includes(this.state.errorType) ||\r\n      error.message.includes('ChunkLoadError') ||\r\n      error.message.includes('Loading chunk');\r\n  }\r\n\r\n  private reportError = async (error: Error, errorInfo: ErrorInfo, context: any) => {\r\n    try {\r\n      // Error reporting removed for production\r\n\r\n      this.setState({ isReported: true });\r\n    } catch (reportingError) {\r\n      // Silent error reporting failure\r\n    }\r\n  };\r\n\r\n  handleRetry = () => {\r\n    const { maxRetries = 3 } = this.props;\r\n\r\n    if (this.state.retryCount >= maxRetries) {\r\n      return;\r\n    }\r\n\r\n    this.setState({\r\n      isRetrying: true,\r\n      retryCount: this.state.retryCount + 1\r\n    });\r\n\r\n    // Implement progressive delay for retries\r\n    const delay = Math.min(1000 * Math.pow(2, this.state.retryCount), 10000);\r\n\r\n    this.retryTimeoutId = setTimeout(() => {\r\n      this.setState({\r\n        hasError: false,\r\n        error: null,\r\n        errorInfo: null,\r\n        isRetrying: false,\r\n        showDetails: false\r\n      });\r\n    }, delay);\r\n  };\r\n\r\n  handleGoHome = () => {\r\n    window.location.href = '/dashboard';\r\n  };\r\n\r\n  handleReportError = () => {\r\n    if (this.state.error && this.state.errorInfo) {\r\n      const errorContext = {\r\n        errorId: this.state.errorId,\r\n        errorType: this.state.errorType,\r\n        context: this.props.context,\r\n        timestamp: new Date().toISOString(),\r\n        url: window.location.href,\r\n        userId: this.getCurrentUserId()\r\n      };\r\n\r\n      this.reportError(this.state.error, this.state.errorInfo, errorContext);\r\n    }\r\n  };\r\n\r\n  handleCopyError = async () => {\r\n    if (this.state.error) {\r\n      const errorText = `Error ID: ${this.state.errorId}\r\nType: ${this.state.errorType}\r\nMessage: ${this.state.error.message}\r\nStack: ${this.state.error.stack}\r\nTimestamp: ${new Date().toISOString()}\r\nURL: ${window.location.href}`;\r\n\r\n      try {\r\n        await navigator.clipboard.writeText(errorText);\r\n        // Show success feedback (could integrate with notification system)\r\n      } catch (err) {\r\n        // Silent clipboard failure\r\n      }\r\n    }\r\n  };\r\n\r\n  toggleDetails = () => {\r\n    this.setState({ showDetails: !this.state.showDetails });\r\n  };\r\n\r\n  private getErrorIcon() {\r\n    switch (this.state.errorType) {\r\n      case 'network':\r\n        return <WifiOff className=\"h-8 w-8 text-red-600\" />;\r\n      case 'database':\r\n        return <Database className=\"h-8 w-8 text-red-600\" />;\r\n      case 'chunk':\r\n        return <RefreshCw className=\"h-8 w-8 text-orange-600\" />;\r\n      case 'render':\r\n        return <Shield className=\"h-8 w-8 text-purple-600\" />;\r\n      default:\r\n        return <AlertTriangle className=\"h-8 w-8 text-red-600\" />;\r\n    }\r\n  }\r\n\r\n  private getErrorTitle() {\r\n    switch (this.state.errorType) {\r\n      case 'network':\r\n        return 'Connection Problem';\r\n      case 'database':\r\n        return 'Database Error';\r\n      case 'chunk':\r\n        return 'Loading Error';\r\n      case 'render':\r\n        return 'Rendering Error';\r\n      default:\r\n        return 'Something went wrong';\r\n    }\r\n  }\r\n\r\n  private getErrorMessage() {\r\n    switch (this.state.errorType) {\r\n      case 'network':\r\n        return 'Unable to connect to the server. Please check your internet connection and try again.';\r\n      case 'database':\r\n        return 'There was a problem accessing the database. Our team has been notified.';\r\n      case 'chunk':\r\n        return 'Failed to load application resources. This usually resolves with a page refresh.';\r\n      case 'render':\r\n        return 'A component failed to render properly. Please try refreshing the page.';\r\n      default:\r\n        return 'We encountered an unexpected error. Please try again or contact support if the problem persists.';\r\n    }\r\n  }\r\n\r\n  private renderMinimalFallback() {\r\n    return (\r\n      <div className=\"p-4 bg-red-50 border border-red-200 rounded-lg\">\r\n        <div className=\"flex items-center space-x-3\">\r\n          {this.getErrorIcon()}\r\n          <div>\r\n            <h3 className=\"font-medium text-red-900\">{this.getErrorTitle()}</h3>\r\n            <p className=\"text-sm text-red-700 mt-1\">{this.getErrorMessage()}</p>\r\n          </div>\r\n        </div>\r\n        <div className=\"mt-3 flex space-x-2\">\r\n          <button\r\n            onClick={this.handleRetry}\r\n            disabled={this.state.isRetrying || this.state.retryCount >= (this.props.maxRetries || 3)}\r\n            className=\"text-sm bg-red-600 text-white px-3 py-1 rounded hover:bg-red-700 disabled:opacity-50\"\r\n          >\r\n            {this.state.isRetrying ? 'Retrying...' : 'Retry'}\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      // Custom fallback UI\r\n      if (this.props.fallback) {\r\n        return this.props.fallback;\r\n      }\r\n\r\n      // Render minimal fallback for certain contexts\r\n      if (this.props.fallbackComponent === 'minimal') {\r\n        return this.renderMinimalFallback();\r\n      }\r\n\r\n      // Enhanced detailed error UI\r\n      return (\r\n        <div className=\"min-h-screen bg-gray-50 flex flex-col justify-center py-12 sm:px-6 lg:px-8\">\r\n          <div className=\"sm:mx-auto sm:w-full sm:max-w-lg\">\r\n            <div className=\"bg-white py-8 px-4 shadow-lg sm:rounded-lg sm:px-10\">\r\n              <div className=\"text-center\">\r\n                <div className=\"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4\">\r\n                  {this.getErrorIcon()}\r\n                </div>\r\n\r\n                <h2 className=\"text-2xl font-bold text-gray-900 mb-2\">\r\n                  {this.getErrorTitle()}\r\n                </h2>\r\n\r\n                <p className=\"text-gray-600 mb-4\">\r\n                  {this.getErrorMessage()}\r\n                </p>\r\n\r\n                {/* Error ID for support */}\r\n                <div className=\"bg-gray-50 rounded-lg p-3 mb-6\">\r\n                  <p className=\"text-xs text-gray-500 mb-1\">Error ID</p>\r\n                  <p className=\"text-sm font-mono text-gray-700\">{this.state.errorId}</p>\r\n                </div>\r\n\r\n                {/* Retry count indicator */}\r\n                {this.state.retryCount > 0 && (\r\n                  <div className=\"mb-4 text-sm text-gray-500\">\r\n                    Retry attempt: {this.state.retryCount} / {this.props.maxRetries || 3}\r\n                  </div>\r\n                )}\r\n\r\n                {process.env.NODE_ENV === 'development' && this.state.error && (\r\n                  <div className=\"mb-6 p-4 bg-gray-100 rounded-lg text-left\">\r\n                    <h3 className=\"text-sm font-medium text-gray-900 mb-2\">Error Details:</h3>\r\n                    <pre className=\"text-xs text-red-600 whitespace-pre-wrap overflow-auto max-h-32\">\r\n                      {this.state.error.toString()}\r\n                      {this.state.errorInfo?.componentStack}\r\n                    </pre>\r\n                  </div>\r\n                )}\r\n\r\n                {/* Action buttons */}\r\n                <div className=\"flex flex-col sm:flex-row gap-3 mb-4\">\r\n                  <button\r\n                    onClick={this.handleRetry}\r\n                    disabled={this.state.isRetrying || this.state.retryCount >= (this.props.maxRetries || 3)}\r\n                    className=\"flex-1 flex items-center justify-center px-4 py-2 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed\"\r\n                  >\r\n                    <RefreshCw className={`h-4 w-4 mr-2 ${this.state.isRetrying ? 'animate-spin' : ''}`} />\r\n                    {this.state.isRetrying ? 'Retrying...' : 'Try Again'}\r\n                  </button>\r\n\r\n                  <button\r\n                    onClick={this.handleGoHome}\r\n                    className=\"flex-1 flex items-center justify-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n                  >\r\n                    <Home className=\"h-4 w-4 mr-2\" />\r\n                    Go Home\r\n                  </button>\r\n                </div>\r\n\r\n                {/* Additional actions */}\r\n                <div className=\"flex flex-col sm:flex-row gap-2 text-sm\">\r\n                  <button\r\n                    onClick={this.handleCopyError}\r\n                    className=\"flex items-center justify-center px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors\"\r\n                  >\r\n                    <Copy className=\"h-4 w-4 mr-1\" />\r\n                    Copy Error Details\r\n                  </button>\r\n\r\n                  {this.props.enableReporting !== false && !this.state.isReported && (\r\n                    <button\r\n                      onClick={this.handleReportError}\r\n                      className=\"flex items-center justify-center px-3 py-2 text-gray-600 hover:text-gray-800 hover:bg-gray-100 rounded-md transition-colors\"\r\n                    >\r\n                      <Send className=\"h-4 w-4 mr-1\" />\r\n                      Report Error\r\n                    </button>\r\n                  )}\r\n\r\n                  {this.state.isReported && (\r\n                    <div className=\"flex items-center justify-center px-3 py-2 text-green-600\">\r\n                      <CheckCircle className=\"h-4 w-4 mr-1\" />\r\n                      Error Reported\r\n                    </div>\r\n                  )}\r\n                </div>\r\n\r\n                {/* Development error details */}\r\n                {process.env.NODE_ENV === 'development' && (\r\n                  <div className=\"mt-6 pt-4 border-t border-gray-200\">\r\n                    <button\r\n                      onClick={this.toggleDetails}\r\n                      className=\"flex items-center justify-center text-sm text-gray-500 hover:text-gray-700 mb-3\"\r\n                    >\r\n                      <Bug className=\"h-4 w-4 mr-1\" />\r\n                      {this.state.showDetails ? 'Hide' : 'Show'} Error Details\r\n                    </button>\r\n\r\n                    {this.state.showDetails && this.state.error && (\r\n                      <div className=\"bg-gray-100 rounded-lg p-4 text-left\">\r\n                        <div className=\"mb-3\">\r\n                          <h4 className=\"text-sm font-medium text-gray-900 mb-1\">Error Message:</h4>\r\n                          <p className=\"text-sm text-red-600\">{this.state.error.message}</p>\r\n                        </div>\r\n\r\n                        <div className=\"mb-3\">\r\n                          <h4 className=\"text-sm font-medium text-gray-900 mb-1\">Error Type:</h4>\r\n                          <p className=\"text-sm text-gray-700\">{this.state.errorType}</p>\r\n                        </div>\r\n\r\n                        {this.state.error.stack && (\r\n                          <div className=\"mb-3\">\r\n                            <h4 className=\"text-sm font-medium text-gray-900 mb-1\">Stack Trace:</h4>\r\n                            <pre className=\"text-xs text-gray-600 whitespace-pre-wrap overflow-auto max-h-32 bg-white p-2 rounded border\">\r\n                              {this.state.error.stack}\r\n                            </pre>\r\n                          </div>\r\n                        )}\r\n\r\n                        {this.state.errorInfo?.componentStack && (\r\n                          <div>\r\n                            <h4 className=\"text-sm font-medium text-gray-900 mb-1\">Component Stack:</h4>\r\n                            <pre className=\"text-xs text-gray-600 whitespace-pre-wrap overflow-auto max-h-32 bg-white p-2 rounded border\">\r\n                              {this.state.errorInfo.componentStack}\r\n                            </pre>\r\n                          </div>\r\n                        )}\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n\r\n// Hook version for functional components\r\nexport const useErrorHandler = () => {\r\n  const handleError = (error: Error, errorInfo?: any) => {\r\n    // Error handling logic removed for production\r\n  };\r\n\r\n  return handleError;\r\n};\r\n\r\n// Higher-order component for wrapping components with error boundary\r\nexport const withErrorBoundary = <P extends object>(\r\n  Component: React.ComponentType<P>,\r\n  fallback?: ReactNode\r\n) => {\r\n  const WrappedComponent = (props: P) => (\r\n    <AdminErrorBoundary fallback={fallback}>\r\n      <Component {...props} />\r\n    </AdminErrorBoundary>\r\n  );\r\n\r\n  WrappedComponent.displayName = `withErrorBoundary(${Component.displayName || Component.name})`;\r\n\r\n  return WrappedComponent;\r\n};\r\n","import React from 'react';\r\nimport { Loader2, Database, Users, Package, ShoppingCart, BarChart3, Settings } from 'lucide-react';\r\n\r\ninterface LoadingSpinnerProps {\r\n  size?: 'small' | 'medium' | 'large';\r\n  text?: string;\r\n  className?: string;\r\n}\r\n\r\nexport const EnhancedLoadingSpinner: React.FC<LoadingSpinnerProps> = ({ \r\n  size = 'medium', \r\n  text,\r\n  className = ''\r\n}) => {\r\n  const sizeClasses = {\r\n    small: 'h-4 w-4',\r\n    medium: 'h-8 w-8',\r\n    large: 'h-12 w-12'\r\n  };\r\n\r\n  const containerClasses = {\r\n    small: 'p-2',\r\n    medium: 'p-4',\r\n    large: 'p-8'\r\n  };\r\n\r\n  return (\r\n    <div className={`flex flex-col items-center justify-center ${containerClasses[size]} ${className}`}>\r\n      <Loader2 className={`${sizeClasses[size]} animate-spin text-indigo-600`} />\r\n      {text && (\r\n        <p className={`mt-2 text-gray-600 ${\r\n          size === 'small' ? 'text-sm' : size === 'large' ? 'text-lg' : 'text-base'\r\n        }`}>\r\n          {text}\r\n        </p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface SkeletonProps {\r\n  className?: string;\r\n  rows?: number;\r\n}\r\n\r\nexport const SkeletonLoader: React.FC<SkeletonProps> = ({ className = '', rows = 1 }) => {\r\n  return (\r\n    <div className={`animate-pulse ${className}`}>\r\n      {Array.from({ length: rows }).map((_, index) => (\r\n        <div key={index} className=\"h-4 bg-gray-200 rounded mb-2 last:mb-0\"></div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface TableSkeletonProps {\r\n  rows?: number;\r\n  columns?: number;\r\n}\r\n\r\nexport const TableSkeleton: React.FC<TableSkeletonProps> = ({ rows = 5, columns = 4 }) => {\r\n  return (\r\n    <div className=\"animate-pulse\">\r\n      {/* Header */}\r\n      <div className=\"grid gap-4 mb-4\" style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}>\r\n        {Array.from({ length: columns }).map((_, index) => (\r\n          <div key={index} className=\"h-6 bg-gray-300 rounded\"></div>\r\n        ))}\r\n      </div>\r\n      \r\n      {/* Rows */}\r\n      {Array.from({ length: rows }).map((_, rowIndex) => (\r\n        <div key={rowIndex} className=\"grid gap-4 mb-3\" style={{ gridTemplateColumns: `repeat(${columns}, 1fr)` }}>\r\n          {Array.from({ length: columns }).map((_, colIndex) => (\r\n            <div key={colIndex} className=\"h-4 bg-gray-200 rounded\"></div>\r\n          ))}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface CardSkeletonProps {\r\n  count?: number;\r\n}\r\n\r\nexport const CardSkeleton: React.FC<CardSkeletonProps> = ({ count = 1 }) => {\r\n  return (\r\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\r\n      {Array.from({ length: count }).map((_, index) => (\r\n        <div key={index} className=\"bg-white rounded-xl shadow-sm border border-gray-200 p-6 animate-pulse\">\r\n          <div className=\"flex items-center justify-between\">\r\n            <div className=\"flex-1\">\r\n              <div className=\"h-4 bg-gray-200 rounded w-24 mb-2\"></div>\r\n              <div className=\"h-8 bg-gray-200 rounded w-16 mb-2\"></div>\r\n              <div className=\"h-3 bg-gray-200 rounded w-20\"></div>\r\n            </div>\r\n            <div className=\"w-12 h-12 bg-gray-200 rounded-lg\"></div>\r\n          </div>\r\n        </div>\r\n      ))}\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface AdminLoadingStateProps {\r\n  type: 'dashboard' | 'users' | 'products' | 'orders' | 'analytics' | 'settings';\r\n  message?: string;\r\n}\r\n\r\nexport const AdminLoadingState: React.FC<AdminLoadingStateProps> = ({ type, message }) => {\r\n  const getIcon = () => {\r\n    switch (type) {\r\n      case 'dashboard':\r\n        return <Database className=\"h-12 w-12 text-indigo-600\" />;\r\n      case 'users':\r\n        return <Users className=\"h-12 w-12 text-indigo-600\" />;\r\n      case 'products':\r\n        return <Package className=\"h-12 w-12 text-indigo-600\" />;\r\n      case 'orders':\r\n        return <ShoppingCart className=\"h-12 w-12 text-indigo-600\" />;\r\n      case 'analytics':\r\n        return <BarChart3 className=\"h-12 w-12 text-indigo-600\" />;\r\n      case 'settings':\r\n        return <Settings className=\"h-12 w-12 text-indigo-600\" />;\r\n      default:\r\n        return <Loader2 className=\"h-12 w-12 text-indigo-600 animate-spin\" />;\r\n    }\r\n  };\r\n\r\n  const getDefaultMessage = () => {\r\n    switch (type) {\r\n      case 'dashboard':\r\n        return 'Loading dashboard data...';\r\n      case 'users':\r\n        return 'Loading user information...';\r\n      case 'products':\r\n        return 'Loading product catalog...';\r\n      case 'orders':\r\n        return 'Loading order history...';\r\n      case 'analytics':\r\n        return 'Generating analytics report...';\r\n      case 'settings':\r\n        return 'Loading system settings...';\r\n      default:\r\n        return 'Loading...';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"flex flex-col items-center justify-center min-h-64 p-8\">\r\n      <div className=\"flex flex-col items-center space-y-4\">\r\n        <div className=\"relative\">\r\n          {getIcon()}\r\n          <div className=\"absolute inset-0 animate-pulse\">\r\n            <Loader2 className=\"h-12 w-12 text-indigo-300 animate-spin\" />\r\n          </div>\r\n        </div>\r\n        \r\n        <div className=\"text-center\">\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-1\">\r\n            {message || getDefaultMessage()}\r\n          </h3>\r\n          <p className=\"text-sm text-gray-500\">\r\n            Please wait while we fetch the latest data\r\n          </p>\r\n        </div>\r\n        \r\n        <div className=\"flex space-x-1\">\r\n          <div className=\"w-2 h-2 bg-indigo-600 rounded-full animate-bounce\"></div>\r\n          <div className=\"w-2 h-2 bg-indigo-600 rounded-full animate-bounce\" style={{ animationDelay: '0.1s' }}></div>\r\n          <div className=\"w-2 h-2 bg-indigo-600 rounded-full animate-bounce\" style={{ animationDelay: '0.2s' }}></div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface ProgressBarProps {\r\n  progress: number;\r\n  label?: string;\r\n  className?: string;\r\n}\r\n\r\nexport const ProgressBar: React.FC<ProgressBarProps> = ({ progress, label, className = '' }) => {\r\n  return (\r\n    <div className={`w-full ${className}`}>\r\n      {label && (\r\n        <div className=\"flex justify-between text-sm text-gray-600 mb-1\">\r\n          <span>{label}</span>\r\n          <span>{Math.round(progress)}%</span>\r\n        </div>\r\n      )}\r\n      <div className=\"w-full bg-gray-200 rounded-full h-2\">\r\n        <div \r\n          className=\"bg-indigo-600 h-2 rounded-full transition-all duration-300 ease-out\"\r\n          style={{ width: `${Math.min(100, Math.max(0, progress))}%` }}\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface EmptyStateProps {\r\n  icon?: React.ReactNode;\r\n  title: string;\r\n  description: string;\r\n  action?: {\r\n    label: string;\r\n    onClick: () => void;\r\n  };\r\n}\r\n\r\nexport const EmptyState: React.FC<EmptyStateProps> = ({ icon, title, description, action }) => {\r\n  return (\r\n    <div className=\"text-center py-12\">\r\n      <div className=\"mx-auto h-24 w-24 text-gray-400 mb-4\">\r\n        {icon || <Package className=\"h-24 w-24\" />}\r\n      </div>\r\n      <h3 className=\"text-lg font-medium text-gray-900 mb-2\">{title}</h3>\r\n      <p className=\"text-gray-500 mb-6 max-w-sm mx-auto\">{description}</p>\r\n      {action && (\r\n        <button\r\n          onClick={action.onClick}\r\n          className=\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\r\n        >\r\n          {action.label}\r\n        </button>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useRef, useCallback } from 'react';\r\nimport { Upload, X, Link, CheckCircle, Image as ImageIcon } from 'lucide-react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { StorageService, UploadProgress } from '../../services/storageService';\r\nimport { useNotification } from '../../contexts/NotificationContext';\r\n\r\ninterface ImageUploadProps {\r\n  value: string;\r\n  onChange: (url: string) => void;\r\n  onPathChange?: (path: string) => void;\r\n  folder?: string;\r\n  placeholder?: string;\r\n  className?: string;\r\n  disabled?: boolean;\r\n  showUrlInput?: boolean;\r\n  aspectRatio?: 'square' | 'landscape' | 'portrait' | 'auto';\r\n  maxWidth?: number;\r\n  maxHeight?: number;\r\n}\r\n\r\nexport const ImageUpload: React.FC<ImageUploadProps> = ({\r\n  value,\r\n  onChange,\r\n  onPathChange,\r\n  folder = 'categories',\r\n  placeholder = 'Upload an image or enter URL',\r\n  className = '',\r\n  disabled = false,\r\n  showUrlInput = true,\r\n  aspectRatio = 'auto',\r\n  maxWidth = 400,\r\n  maxHeight = 300\r\n}) => {\r\n  const [isDragging, setIsDragging] = useState(false);\r\n  const [isUploading, setIsUploading] = useState(false);\r\n  const [uploadProgress, setUploadProgress] = useState<UploadProgress | null>(null);\r\n  const [urlInput, setUrlInput] = useState(value);\r\n  const [showUrlField, setShowUrlField] = useState(false);\r\n  const fileInputRef = useRef<HTMLInputElement>(null);\r\n  const { showNotification } = useNotification();\r\n\r\n  const handleDragOver = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    if (!disabled) {\r\n      setIsDragging(true);\r\n    }\r\n  }, [disabled]);\r\n\r\n  const handleDragLeave = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n  }, []);\r\n\r\n  const handleDrop = useCallback((e: React.DragEvent) => {\r\n    e.preventDefault();\r\n    setIsDragging(false);\r\n\r\n    if (disabled) return;\r\n\r\n    const files = Array.from(e.dataTransfer.files);\r\n    const imageFile = files.find(file => file.type.startsWith('image/'));\r\n\r\n    if (imageFile) {\r\n      handleFileUpload(imageFile);\r\n    } else {\r\n      showNotification({\r\n        type: 'error',\r\n        title: 'Invalid File',\r\n        message: 'Please drop an image file'\r\n      });\r\n    }\r\n  }, [disabled]);\r\n\r\n  const handleFileSelect = useCallback((e: React.ChangeEvent<HTMLInputElement>) => {\r\n    const file = e.target.files?.[0];\r\n    if (file) {\r\n      handleFileUpload(file);\r\n    }\r\n  }, []);\r\n\r\n  const handleFileUpload = async (file: File) => {\r\n    setIsUploading(true);\r\n    setUploadProgress(null);\r\n\r\n    try {\r\n      const result = await StorageService.uploadImage(\r\n        file,\r\n        folder,\r\n        (progress) => { setUploadProgress(progress); }\r\n      );\r\n\r\n      if (result.error) {\r\n        showNotification({\r\n          type: 'error',\r\n          title: 'Upload Failed',\r\n          message: result.error\r\n        });\r\n      } else {\r\n        onChange(result.url);\r\n        onPathChange?.(result.path);\r\n        setUrlInput(result.url);\r\n        showNotification({\r\n          type: 'success',\r\n          title: 'Upload Successful',\r\n          message: 'Image uploaded successfully'\r\n        });\r\n      }\r\n    } catch (error) {\r\n      showNotification({\r\n        type: 'error',\r\n        title: 'Upload Error',\r\n        message: error instanceof Error ? error.message : 'Failed to upload image'\r\n      });\r\n    } finally {\r\n      setIsUploading(false);\r\n      setUploadProgress(null);\r\n    }\r\n  };\r\n\r\n  const handleUrlSubmit = () => {\r\n    const url = urlInput.trim();\r\n    if (url) {\r\n      onChange(url);\r\n      setShowUrlField(false);\r\n      showNotification({\r\n        type: 'success',\r\n        title: 'Image URL Updated',\r\n        message: 'Image URL has been updated'\r\n      });\r\n    }\r\n  };\r\n\r\n  const handleRemoveImage = () => {\r\n    onChange('');\r\n    onPathChange?.('');\r\n    setUrlInput('');\r\n    if (fileInputRef.current) {\r\n      fileInputRef.current.value = '';\r\n    }\r\n  };\r\n\r\n  const getAspectRatioClass = () => {\r\n    switch (aspectRatio) {\r\n      case 'square': return 'aspect-square';\r\n      case 'landscape': return 'aspect-video';\r\n      case 'portrait': return 'aspect-[3/4]';\r\n      default: return '';\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className={`space-y-4 ${className}`}>\r\n      {/* Image Preview or Upload Area */}\r\n      <div className=\"relative\">\r\n        {value ? (\r\n          <div className={`relative rounded-lg overflow-hidden border border-gray-200 ${getAspectRatioClass()}`}>\r\n            <img\r\n              src={value}\r\n              alt=\"Preview\"\r\n              className=\"w-full h-full object-cover\"\r\n              style={{ maxWidth, maxHeight }}\r\n              onError={(e) => {\r\n                (e.target as HTMLImageElement).src = 'https://via.placeholder.com/400x400/f3f4f6/9ca3af?text=No+Image';\r\n              }}\r\n            />\r\n\r\n            {/* Remove button */}\r\n            {!disabled && (\r\n              <button\r\n                onClick={handleRemoveImage}\r\n                className=\"absolute top-2 right-2 p-1 bg-red-500 text-white rounded-full hover:bg-red-600 transition-colors\"\r\n                title=\"Remove image\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </button>\r\n            )}\r\n\r\n            {/* Upload overlay when uploading */}\r\n            <AnimatePresence>\r\n              {isUploading && (\r\n                <motion.div\r\n                  initial={{ opacity: 0 }}\r\n                  animate={{ opacity: 1 }}\r\n                  exit={{ opacity: 0 }}\r\n                  className=\"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center\"\r\n                >\r\n                  <div className=\"text-center text-white\">\r\n                    <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-white mx-auto mb-2\"></div>\r\n                    {uploadProgress && (\r\n                      <div className=\"text-sm\">\r\n                        {uploadProgress.percentage}%\r\n                      </div>\r\n                    )}\r\n                  </div>\r\n                </motion.div>\r\n              )}\r\n            </AnimatePresence>\r\n          </div>\r\n        ) : (\r\n          <div\r\n            onDragOver={handleDragOver}\r\n            onDragLeave={handleDragLeave}\r\n            onDrop={handleDrop}\r\n            className={`\r\n              relative border-2 border-dashed rounded-lg p-6 text-center transition-all duration-200\r\n              ${isDragging\r\n                ? 'border-indigo-400 bg-indigo-50'\r\n                : 'border-gray-300 hover:border-gray-400'\r\n              }\r\n              ${disabled ? 'opacity-50 cursor-not-allowed' : 'cursor-pointer'}\r\n              ${getAspectRatioClass()}\r\n            `}\r\n            onClick={() => !disabled && fileInputRef.current?.click()}\r\n          >\r\n            <input\r\n              ref={fileInputRef}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleFileSelect}\r\n              className=\"hidden\"\r\n              disabled={disabled}\r\n            />\r\n\r\n            <div className=\"flex flex-col items-center justify-center h-full min-h-[120px]\">\r\n              {isUploading ? (\r\n                <>\r\n                  <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mb-3\"></div>\r\n                  <p className=\"text-sm text-gray-600\">Uploading...</p>\r\n                  {uploadProgress && (\r\n                    <div className=\"mt-2 w-full max-w-xs\">\r\n                      <div className=\"bg-gray-200 rounded-full h-2\">\r\n                        <div\r\n                          className=\"bg-indigo-600 h-2 rounded-full transition-all duration-300\"\r\n                          style={{ width: `${uploadProgress.percentage}%` }}\r\n                        ></div>\r\n                      </div>\r\n                      <p className=\"text-xs text-gray-500 mt-1\">\r\n                        {uploadProgress.percentage}%\r\n                      </p>\r\n                    </div>\r\n                  )}\r\n                </>\r\n              ) : (\r\n                <>\r\n                  <ImageIcon className=\"h-12 w-12 text-gray-400 mb-3\" />\r\n                  <p className=\"text-sm text-gray-600 mb-2\">{placeholder}</p>\r\n                  <p className=\"text-xs text-gray-500\">\r\n                    Drag & drop or click to select\r\n                  </p>\r\n                  <p className=\"text-xs text-gray-400 mt-1\">\r\n                    PNG, JPG, WebP up to 5MB\r\n                  </p>\r\n                </>\r\n              )}\r\n            </div>\r\n          </div>\r\n        )}\r\n      </div>\r\n\r\n      {/* URL Input Section */}\r\n      {showUrlInput && !disabled && (\r\n        <div className=\"space-y-2\">\r\n          {!showUrlField ? (\r\n            <button\r\n              onClick={() => setShowUrlField(true)}\r\n              className=\"flex items-center space-x-2 text-sm text-indigo-600 hover:text-indigo-700\"\r\n            >\r\n              <Link className=\"h-4 w-4\" />\r\n              <span>Or enter image URL</span>\r\n            </button>\r\n          ) : (\r\n            <div className=\"flex space-x-2\">\r\n              <input\r\n                type=\"url\"\r\n                value={urlInput}\r\n                onChange={(e) => setUrlInput(e.target.value)}\r\n                placeholder=\"https://example.com/image.jpg\"\r\n                className=\"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500\"\r\n                onKeyPress={(e) => e.key === 'Enter' && handleUrlSubmit()}\r\n              />\r\n              <button\r\n                onClick={handleUrlSubmit}\r\n                className=\"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors\"\r\n              >\r\n                <CheckCircle className=\"h-4 w-4\" />\r\n              </button>\r\n              <button\r\n                onClick={() => {\r\n                  setShowUrlField(false);\r\n                  setUrlInput(value);\r\n                }}\r\n                className=\"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 transition-colors\"\r\n              >\r\n                <X className=\"h-4 w-4\" />\r\n              </button>\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n\r\n      {/* Upload Status */}\r\n      <AnimatePresence>\r\n        {isUploading && uploadProgress && (\r\n          <motion.div\r\n            initial={{ opacity: 0, y: -10 }}\r\n            animate={{ opacity: 1, y: 0 }}\r\n            exit={{ opacity: 0, y: -10 }}\r\n            className=\"flex items-center space-x-2 text-sm text-gray-600\"\r\n          >\r\n            <Upload className=\"h-4 w-4 animate-pulse\" />\r\n            <span>\r\n              Uploading... {uploadProgress.percentage}%\r\n              ({Math.round(uploadProgress.loaded / 1024)}KB / {Math.round(uploadProgress.total / 1024)}KB)\r\n            </span>\r\n          </motion.div>\r\n        )}\r\n      </AnimatePresence>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState } from 'react';\r\n\r\ninterface TableColumn<T = Record<string, unknown>> {\r\n  key: string;\r\n  title: string;\r\n  render?: (value: unknown, record: T) => React.ReactNode;\r\n  className?: string;\r\n  responsive?: 'all' | 'xs' | 'sm' | 'md' | 'lg' | 'xl';\r\n  width?: string | number;\r\n  minWidth?: string | number;\r\n  maxWidth?: string | number;\r\n}\r\n\r\ninterface ResponsiveTableProps<T = Record<string, unknown>> {\r\n  columns: TableColumn<T>[];\r\n  data: T[];\r\n  loading?: boolean;\r\n  onRowClick?: (record: T) => void;\r\n  emptyMessage?: string;\r\n  className?: string;\r\n}\r\n\r\nexport const ResponsiveTable = <T extends Record<string, unknown> = Record<string, unknown>>(\r\n  props: ResponsiveTableProps<T>\r\n) => {\r\n  const {\r\n    columns,\r\n    data,\r\n    loading = false,\r\n    onRowClick,\r\n    emptyMessage = 'No data available',\r\n    className = ''\r\n  } = props;\r\n  const [windowWidth, setWindowWidth] = useState(window.innerWidth);\r\n\r\n  useEffect(() => {\r\n    const handleResize = () => {\r\n      setWindowWidth(window.innerWidth);\r\n    };\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"flex items-center justify-center p-8\">\r\n        <div className=\"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600\"></div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  // Filter columns based on responsive breakpoints\r\n  const visibleColumns = columns.filter(col => {\r\n    if (col.responsive === 'all' || !col.responsive) return true;\r\n    \r\n    const breakpoints: Record<string, number> = {\r\n      xs: 0,\r\n      sm: 640,\r\n      md: 768,\r\n      lg: 1024,\r\n      xl: 1280\r\n    };\r\n    \r\n    return windowWidth >= (breakpoints[col.responsive] || 0);\r\n  });\r\n\r\n  // Calculate if we should use fixed table layout\r\n  const hasColumnWidths = visibleColumns.some(col => col.width || col.minWidth || col.maxWidth);\r\n  const useFixedLayout = hasColumnWidths && windowWidth >= 768;\r\n\r\n  return (\r\n    <div className={`overflow-hidden rounded-lg border border-gray-200 shadow-sm ${className}`}>\r\n      {/* Desktop Table */}\r\n      <div className=\"hidden md:block overflow-x-auto\">\r\n        <table \r\n          className={`min-w-full divide-y divide-gray-200 ${useFixedLayout ? '' : ''}`}\r\n          style={{ tableLayout: useFixedLayout ? 'fixed' : 'auto' }}\r\n        >\r\n          <thead className=\"bg-gray-50\">\r\n            <tr>\r\n              {visibleColumns.map((column) => (\r\n                <th\r\n                  key={column.key}\r\n                  className={`px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider ${column.className || ''}`}\r\n                  style={{ \r\n                    width: column.width ? (typeof column.width === 'string' ? column.width : `${column.width}px`) : 'auto',\r\n                    minWidth: column.minWidth ? (typeof column.minWidth === 'string' ? column.minWidth : `${column.minWidth}px`) : 'auto',\r\n                    maxWidth: column.maxWidth ? (typeof column.maxWidth === 'string' ? column.maxWidth : `${column.maxWidth}px`) : 'none'\r\n                  }}\r\n                >\r\n                  {column.title}\r\n                </th>\r\n              ))}\r\n            </tr>\r\n          </thead>\r\n          <tbody className=\"bg-white divide-y divide-gray-200\">\r\n            {data.length === 0 ? (\r\n              <tr>\r\n                <td colSpan={visibleColumns.length} className=\"px-6 py-12 text-center\">\r\n                  <div className=\"flex flex-col items-center justify-center\">\r\n                    <div className=\"text-gray-400 mb-2\">\r\n                      <svg className=\"h-12 w-12\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                        <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\r\n                      </svg>\r\n                    </div>\r\n                    <h3 className=\"text-lg font-medium text-gray-900\">{emptyMessage}</h3>\r\n                  </div>\r\n                </td>\r\n              </tr>\r\n            ) : (\r\n              data.map((record, index) => (\r\n                <tr\r\n                  key={record.id || index}\r\n                  onClick={() => onRowClick?.(record)}\r\n                  className={`hover:bg-gray-50 ${onRowClick ? 'cursor-pointer' : ''}`}\r\n                >\r\n                  {visibleColumns.map((column) => (\r\n                    <td\r\n                      key={`${record.id || index}-${column.key}`}\r\n                      className={`px-6 py-4 text-sm ${column.className || ''}`}\r\n                      style={{ \r\n                        width: column.width ? (typeof column.width === 'string' ? column.width : `${column.width}px`) : 'auto',\r\n                        minWidth: column.minWidth ? (typeof column.minWidth === 'string' ? column.minWidth : `${column.minWidth}px`) : 'auto',\r\n                        maxWidth: column.maxWidth ? (typeof column.maxWidth === 'string' ? column.maxWidth : `${column.maxWidth}px`) : 'none',\r\n                        whiteSpace: column.width || column.maxWidth ? 'nowrap' : 'normal',\r\n                        overflow: 'hidden',\r\n                        textOverflow: 'ellipsis'\r\n                      }}\r\n                    >\r\n                      {column.render\r\n                        ? column.render(record[column.key], record)\r\n                        : record[column.key]}\r\n                    </td>\r\n                  ))}\r\n                </tr>\r\n              ))\r\n            )}\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n\r\n      {/* Mobile Cards */}\r\n      <div className=\"md:hidden\">\r\n        {data.length === 0 ? (\r\n          <div className=\"p-6 text-center\">\r\n            <div className=\"flex flex-col items-center justify-center\">\r\n              <div className=\"text-gray-400 mb-2\">\r\n                <svg className=\"h-12 w-12 mx-auto\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\r\n                  <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={1.5} d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />\r\n                </svg>\r\n              </div>\r\n              <h3 className=\"text-lg font-medium text-gray-900\">{emptyMessage}</h3>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <div className=\"divide-y divide-gray-200\">\r\n            {data.map((record, index) => (\r\n              <div\r\n                key={record.id || index}\r\n                onClick={() => onRowClick?.(record)}\r\n                className={`p-4 ${onRowClick ? 'cursor-pointer hover:bg-gray-50' : ''}`}\r\n              >\r\n                <div className=\"space-y-3\">\r\n                  {visibleColumns.map((column) => (\r\n                    <div key={`${record.id || index}-${column.key}`} className=\"flex justify-between\">\r\n                      <dt className=\"text-sm font-medium text-gray-500\">{column.title}</dt>\r\n                      <dd className=\"text-sm text-gray-900 break-words max-w-[60%]\">\r\n                        {column.render\r\n                          ? column.render(record[column.key], record)\r\n                          : record[column.key]}\r\n                      </dd>\r\n                    </div>\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            ))}\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};","import React, { useState } from 'react';\r\nimport { motion, AnimatePresence } from 'framer-motion';\r\nimport { ArrowLeft, ArrowRight, CreditCard, CheckCircle, Lock, Smartphone, Apple } from 'lucide-react';\r\nimport { MobileTouchButton } from './MobileTouchButton';\r\nimport { useMobileDetection } from '../../hooks/useMobileGestures';\r\n\r\ninterface MobileCheckoutProps {\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onStepChange: (step: number) => void;\r\n  onBack: () => void;\r\n  children: React.ReactNode;\r\n  stepTitle: string;\r\n  canProceed: boolean;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport const MobileCheckoutLayout: React.FC<MobileCheckoutProps> = ({\r\n  currentStep,\r\n  totalSteps,\r\n  onStepChange,\r\n  onBack,\r\n  children,\r\n  stepTitle,\r\n  canProceed,\r\n  isLoading = false\r\n}) => {\r\n  const { isMobile } = useMobileDetection();\r\n\r\n  if (!isMobile) {\r\n    return <>{children}</>;\r\n  }\r\n\r\n  const progress = (currentStep / totalSteps) * 100;\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-neutral-50 flex flex-col\">\r\n      {/* Mobile Header */}\r\n      <div className=\"bg-white border-b border-neutral-200 sticky top-0 z-10\">\r\n        <div className=\"px-3 sm:px-4 py-3\">\r\n          <div className=\"flex items-center justify-between mb-3\">\r\n            <button\r\n              onClick={onBack}\r\n              className=\"p-2 -ml-2 rounded-lg hover:bg-neutral-100 transition-colors active:bg-neutral-200 touch-manipulation\"\r\n            >\r\n              <ArrowLeft className=\"h-5 w-5 text-neutral-600\" />\r\n            </button>\r\n            <h1 className=\"text-base sm:text-lg font-semibold text-neutral-900\">{stepTitle}</h1>\r\n            <div className=\"text-xs sm:text-sm text-neutral-500\">\r\n              {currentStep}/{totalSteps}\r\n            </div>\r\n          </div>\r\n          \r\n          {/* Progress Bar */}\r\n          <div className=\"w-full bg-neutral-200 rounded-full h-1.5 sm:h-2\">\r\n            <motion.div\r\n              className=\"bg-neutral-900 h-1.5 sm:h-2 rounded-full\"\r\n              initial={{ width: 0 }}\r\n              animate={{ width: `${progress}%` }}\r\n              transition={{ duration: 0.3 }}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Content */}\r\n      <div className=\"flex-1 p-3 sm:p-4\">\r\n        <AnimatePresence mode=\"wait\">\r\n          <motion.div\r\n            key={currentStep}\r\n            initial={{ opacity: 0, x: 20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            exit={{ opacity: 0, x: -20 }}\r\n            transition={{ duration: 0.2 }}\r\n          >\r\n            {children}\r\n          </motion.div>\r\n        </AnimatePresence>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Mobile-optimized form input component\r\ninterface MobileFormInputProps {\r\n  label: string;\r\n  type?: string;\r\n  name: string;\r\n  value: string;\r\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  placeholder?: string;\r\n  required?: boolean;\r\n  error?: string;\r\n  icon?: React.ComponentType<{ className?: string }>;\r\n}\r\n\r\nexport const MobileFormInput: React.FC<MobileFormInputProps> = ({\r\n  label,\r\n  type = 'text',\r\n  name,\r\n  value,\r\n  onChange,\r\n  placeholder,\r\n  required = false,\r\n  error,\r\n  icon: Icon\r\n}) => {\r\n  // Generate a unique ID for the input if name is provided\r\n  const inputId = name ? `mobile-input-${name}` : undefined;\r\n\r\n  return (\r\n    <div className=\"space-y-2\">\r\n      <label \r\n        htmlFor={inputId}\r\n        className=\"block text-sm font-medium text-neutral-900\"\r\n      >\r\n        {label} {required && <span className=\"text-red-500\">*</span>}\r\n      </label>\r\n      <div className=\"relative\">\r\n        {Icon && (\r\n          <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n            <Icon className=\"h-5 w-5 text-neutral-400\" />\r\n          </div>\r\n        )}\r\n        <input\r\n          id={inputId}\r\n          type={type}\r\n          name={name}\r\n          value={value}\r\n          onChange={onChange}\r\n          placeholder={placeholder}\r\n          required={required}\r\n          className={`\r\n            w-full px-4 py-4 text-base border border-neutral-300 rounded-xl\r\n            focus:ring-2 focus:ring-neutral-500 focus:border-neutral-500\r\n            transition-colors duration-200\r\n            ${Icon ? 'pl-10' : ''}\r\n            ${error ? 'border-red-500 focus:ring-red-500 focus:border-red-500' : ''}\r\n            touch-manipulation\r\n          `}\r\n        />\r\n      </div>\r\n      {error && (\r\n        <p className=\"text-sm text-red-600\" role=\"alert\">{error}</p>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\n// Mobile payment method selector\r\ninterface PaymentMethod {\r\n  id: string;\r\n  name: string;\r\n  icon: React.ComponentType<{ className?: string }>;\r\n  description: string;\r\n  available: boolean;\r\n}\r\n\r\ninterface MobilePaymentSelectorProps {\r\n  selectedMethod: string;\r\n  onMethodChange: (methodId: string) => void;\r\n}\r\n\r\nexport const MobilePaymentSelector: React.FC<MobilePaymentSelectorProps> = ({\r\n  selectedMethod,\r\n  onMethodChange\r\n}) => {\r\n  const paymentMethods: PaymentMethod[] = [\r\n    {\r\n      id: 'card',\r\n      name: 'Credit/Debit Card',\r\n      icon: CreditCard,\r\n      description: 'Visa, Mastercard, Amex',\r\n      available: true\r\n    },\r\n    {\r\n      id: 'apple-pay',\r\n      name: 'Apple Pay',\r\n      icon: Apple,\r\n      description: 'Touch ID or Face ID',\r\n      available: true\r\n    },\r\n    {\r\n      id: 'google-pay',\r\n      name: 'Google Pay',\r\n      icon: Smartphone,\r\n      description: 'Quick and secure',\r\n      available: true\r\n    }\r\n  ];\r\n\r\n  return (\r\n    <div className=\"space-y-3\">\r\n      <h3 className=\"text-lg font-semibold text-neutral-900\">Payment Method</h3>\r\n      <div className=\"space-y-3\">\r\n        {paymentMethods.map((method) => (\r\n          <motion.button\r\n            key={method.id}\r\n            onClick={() => onMethodChange(method.id)}\r\n            disabled={!method.available}\r\n            className={`\r\n              w-full p-3 sm:p-4 rounded-xl border-2 transition-all duration-200\r\n              ${selectedMethod === method.id\r\n                ? 'border-neutral-900 bg-neutral-50'\r\n                : 'border-neutral-200 bg-white hover:border-neutral-300'\r\n              }\r\n              ${!method.available ? 'opacity-50 cursor-not-allowed' : ''}\r\n              touch-manipulation\r\n            `}\r\n            whileTap={{ scale: 0.98 }}\r\n          >\r\n            <div className=\"flex items-center space-x-3 sm:space-x-4\">\r\n              <div className={`\r\n                p-2 rounded-lg\r\n                ${selectedMethod === method.id ? 'bg-neutral-900 text-white' : 'bg-neutral-100 text-neutral-600'}\r\n              `}>\r\n                <method.icon className=\"h-5 w-5 sm:h-6 sm:w-6\" />\r\n              </div>\r\n              <div className=\"flex-1 text-left\">\r\n                <div className=\"font-medium text-neutral-900 text-sm sm:text-base\">{method.name}</div>\r\n                <div className=\"text-xs sm:text-sm text-neutral-500\">{method.description}</div>\r\n              </div>\r\n              {selectedMethod === method.id && (\r\n                <CheckCircle className=\"h-4 w-4 sm:h-5 sm:w-5 text-neutral-900\" />\r\n              )}\r\n            </div>\r\n          </motion.button>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Mobile checkout step navigation\r\ninterface MobileStepNavigationProps {\r\n  currentStep: number;\r\n  totalSteps: number;\r\n  onBack?: () => void;\r\n  onNext?: () => void;\r\n  nextLabel?: string;\r\n  canProceed: boolean;\r\n  isLoading?: boolean;\r\n}\r\n\r\nexport const MobileStepNavigation: React.FC<MobileStepNavigationProps> = ({\r\n  currentStep,\r\n  totalSteps,\r\n  onBack,\r\n  onNext,\r\n  nextLabel = 'Continue',\r\n  canProceed,\r\n  isLoading = false\r\n}) => {\r\n  const isLastStep = currentStep === totalSteps;\r\n\r\n  return (\r\n    <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-neutral-200 p-3 sm:p-4 safe-area-bottom\">\r\n      <div className=\"flex space-x-2 sm:space-x-3\">\r\n        {currentStep > 1 && onBack && (\r\n          <MobileTouchButton\r\n            onClick={onBack}\r\n            variant=\"secondary\"\r\n            size=\"comfortable\"\r\n            className=\"flex-1\"\r\n          >\r\n            Back\r\n          </MobileTouchButton>\r\n        )}\r\n        \r\n        {onNext && (\r\n          <MobileTouchButton\r\n            onClick={onNext}\r\n            disabled={!canProceed || isLoading}\r\n            loading={isLoading}\r\n            variant=\"primary\"\r\n            size=\"comfortable\"\r\n            className=\"flex-1\"\r\n            icon={isLastStep ? CheckCircle : ArrowRight}\r\n          >\r\n            {isLastStep ? 'Place Order' : nextLabel}\r\n          </MobileTouchButton>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\n// Security indicator for mobile\r\nexport const MobileSecurityIndicator: React.FC = () => {\r\n  return (\r\n    <div className=\"bg-green-50 border border-green-200 rounded-xl p-4 mb-6\">\r\n      <div className=\"flex items-center space-x-3\">\r\n        <div className=\"p-2 bg-green-100 rounded-lg\">\r\n          <Lock className=\"h-5 w-5 text-green-600\" />\r\n        </div>\r\n        <div>\r\n          <div className=\"font-medium text-green-900\">Secure Checkout</div>\r\n          <div className=\"text-sm text-green-700\">Your information is protected with 256-bit SSL encryption</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { \r\n  User, \r\n  Mail, \r\n  Phone, \r\n  MapPin, \r\n  CreditCard, \r\n  Calendar, \r\n  Lock,\r\n  Eye,\r\n  EyeOff\r\n} from 'lucide-react';\r\nimport { MobileFormInput, MobileSecurityIndicator } from './MobileCheckout';\r\n\r\ninterface MobileShippingFormProps {\r\n  formData: any;\r\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  errors?: Record<string, string>;\r\n}\r\n\r\nexport const MobileShippingForm: React.FC<MobileShippingFormProps> = ({\r\n  formData,\r\n  onChange,\r\n  errors = {}\r\n}) => {\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-xl font-semibold text-neutral-900 mb-4\">Shipping Information</h2>\r\n        <MobileSecurityIndicator />\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <MobileFormInput\r\n            label=\"First Name\"\r\n            name=\"firstName\"\r\n            value={formData.firstName}\r\n            onChange={onChange}\r\n            placeholder=\"John\"\r\n            required\r\n            error={errors.firstName}\r\n            icon={User}\r\n          />\r\n          <MobileFormInput\r\n            label=\"Last Name\"\r\n            name=\"lastName\"\r\n            value={formData.lastName}\r\n            onChange={onChange}\r\n            placeholder=\"Doe\"\r\n            required\r\n            error={errors.lastName}\r\n          />\r\n        </div>\r\n\r\n        <MobileFormInput\r\n          label=\"Email Address\"\r\n          type=\"email\"\r\n          name=\"email\"\r\n          value={formData.email}\r\n          onChange={onChange}\r\n          placeholder=\"john@example.com\"\r\n          required\r\n          error={errors.email}\r\n          icon={Mail}\r\n        />\r\n\r\n        <MobileFormInput\r\n          label=\"Phone Number\"\r\n          type=\"tel\"\r\n          name=\"phone\"\r\n          value={formData.phone}\r\n          onChange={onChange}\r\n          placeholder=\"+1 (555) 123-4567\"\r\n          required\r\n          error={errors.phone}\r\n          icon={Phone}\r\n        />\r\n\r\n        <MobileFormInput\r\n          label=\"Street Address\"\r\n          name=\"address\"\r\n          value={formData.address}\r\n          onChange={onChange}\r\n          placeholder=\"123 Main Street\"\r\n          required\r\n          error={errors.address}\r\n          icon={MapPin}\r\n        />\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <MobileFormInput\r\n            label=\"City\"\r\n            name=\"city\"\r\n            value={formData.city}\r\n            onChange={onChange}\r\n            placeholder=\"New York\"\r\n            required\r\n            error={errors.city}\r\n          />\r\n          <MobileFormInput\r\n            label=\"State\"\r\n            name=\"state\"\r\n            value={formData.state}\r\n            onChange={onChange}\r\n            placeholder=\"NY\"\r\n            required\r\n            error={errors.state}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <MobileFormInput\r\n            label=\"ZIP Code\"\r\n            name=\"zipCode\"\r\n            value={formData.zipCode}\r\n            onChange={onChange}\r\n            placeholder=\"10001\"\r\n            required\r\n            error={errors.zipCode}\r\n          />\r\n          <div className=\"space-y-2\">\r\n            <label htmlFor=\"mobile-country-select\" className=\"block text-sm font-medium text-neutral-900\">\r\n              Country <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <select\r\n              id=\"mobile-country-select\"\r\n              name=\"country\"\r\n              value={formData.country}\r\n              onChange={onChange}\r\n              className=\"w-full px-4 py-4 text-base border border-neutral-300 rounded-xl focus:ring-2 focus:ring-neutral-500 focus:border-neutral-500 transition-colors duration-200 touch-manipulation\"\r\n              required\r\n            >\r\n              <option value=\"United States\">United States</option>\r\n              <option value=\"Canada\">Canada</option>\r\n              <option value=\"United Kingdom\">United Kingdom</option>\r\n              <option value=\"Australia\">Australia</option>\r\n              <option value=\"Other\">Other</option>\r\n            </select>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Save Information Toggle */}\r\n      <div className=\"bg-neutral-50 rounded-xl p-4\">\r\n        <label className=\"flex items-center space-x-3\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"saveInfo\"\r\n            checked={formData.saveInfo}\r\n            onChange={onChange}\r\n            className=\"w-5 h-5 text-neutral-900 border-neutral-300 rounded focus:ring-neutral-500\"\r\n          />\r\n          <span className=\"text-sm text-neutral-700\">\r\n            Save this information for faster checkout next time\r\n          </span>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface MobilePaymentFormProps {\r\n  formData: any;\r\n  onChange: (e: React.ChangeEvent<HTMLInputElement>) => void;\r\n  errors?: Record<string, string>;\r\n  selectedPaymentMethod: string;\r\n}\r\n\r\nexport const MobilePaymentForm: React.FC<MobilePaymentFormProps> = ({\r\n  formData,\r\n  onChange,\r\n  errors = {},\r\n  selectedPaymentMethod\r\n}) => {\r\n  const [showCVV, setShowCVV] = useState(false);\r\n\r\n  if (selectedPaymentMethod !== 'card') {\r\n    return (\r\n      <div className=\"space-y-6\">\r\n        <div className=\"text-center py-12\">\r\n          <div className=\"w-16 h-16 bg-neutral-100 rounded-full flex items-center justify-center mx-auto mb-4\">\r\n            <CreditCard className=\"h-8 w-8 text-neutral-600\" />\r\n          </div>\r\n          <h3 className=\"text-lg font-semibold text-neutral-900 mb-2\">\r\n            {selectedPaymentMethod === 'apple-pay' ? 'Apple Pay' : 'Google Pay'} Selected\r\n          </h3>\r\n          <p className=\"text-neutral-600\">\r\n            You'll be redirected to complete your payment securely\r\n          </p>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"space-y-6\">\r\n      <div>\r\n        <h2 className=\"text-xl font-semibold text-neutral-900 mb-4\">Payment Information</h2>\r\n        <MobileSecurityIndicator />\r\n      </div>\r\n\r\n      <div className=\"space-y-4\">\r\n        <MobileFormInput\r\n          label=\"Card Number\"\r\n          type=\"text\"\r\n          name=\"cardNumber\"\r\n          value={formData.cardNumber}\r\n          onChange={onChange}\r\n          placeholder=\"1234 5678 9012 3456\"\r\n          required\r\n          error={errors.cardNumber}\r\n          icon={CreditCard}\r\n        />\r\n\r\n        <div className=\"grid grid-cols-2 gap-3\">\r\n          <MobileFormInput\r\n            label=\"Expiry Date\"\r\n            type=\"text\"\r\n            name=\"expiryDate\"\r\n            value={formData.expiryDate}\r\n            onChange={onChange}\r\n            placeholder=\"MM/YY\"\r\n            required\r\n            error={errors.expiryDate}\r\n            icon={Calendar}\r\n          />\r\n          \r\n          <div className=\"space-y-2\">\r\n            <label htmlFor=\"mobile-cvv-input\" className=\"block text-sm font-medium text-neutral-900\">\r\n              CVV <span className=\"text-red-500\">*</span>\r\n            </label>\r\n            <div className=\"relative\">\r\n              <div className=\"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none\">\r\n                <Lock className=\"h-5 w-5 text-neutral-400\" />\r\n              </div>\r\n              <input\r\n                id=\"mobile-cvv-input\"\r\n                type={showCVV ? 'text' : 'password'}\r\n                name=\"cvv\"\r\n                value={formData.cvv}\r\n                onChange={onChange}\r\n                placeholder=\"123\"\r\n                required\r\n                className={`\r\n                  w-full px-4 py-4 pl-10 pr-12 text-base border border-neutral-300 rounded-xl\r\n                  focus:ring-2 focus:ring-neutral-500 focus:border-neutral-500\r\n                  transition-colors duration-200 touch-manipulation\r\n                  ${errors.cvv ? 'border-red-500 focus:ring-red-500 focus:border-red-500' : ''}\r\n                `}\r\n              />\r\n              <button\r\n                type=\"button\"\r\n                onClick={() => setShowCVV(!showCVV)}\r\n                className=\"absolute inset-y-0 right-0 pr-3 flex items-center\"\r\n                aria-label={showCVV ? \"Hide CVV\" : \"Show CVV\"}\r\n              >\r\n                {showCVV ? (\r\n                  <EyeOff className=\"h-5 w-5 text-neutral-500\" />\r\n                ) : (\r\n                  <Eye className=\"h-5 w-5 text-neutral-500\" />\r\n                )}\r\n              </button>\r\n            </div>\r\n            {errors.cvv && (\r\n              <p className=\"text-sm text-red-600\" role=\"alert\">{errors.cvv}</p>\r\n            )}\r\n          </div>\r\n        </div>\r\n\r\n        <MobileFormInput\r\n          label=\"Name on Card\"\r\n          name=\"cardName\"\r\n          value={formData.cardName}\r\n          onChange={onChange}\r\n          placeholder=\"John Doe\"\r\n          required\r\n          error={errors.cardName}\r\n          icon={User}\r\n        />\r\n      </div>\r\n\r\n      {/* Billing Address Toggle */}\r\n      <div className=\"bg-neutral-50 rounded-xl p-4\">\r\n        <label className=\"flex items-center space-x-3\">\r\n          <input\r\n            type=\"checkbox\"\r\n            name=\"sameAsBilling\"\r\n            checked={formData.sameAsBilling}\r\n            onChange={onChange}\r\n            className=\"w-5 h-5 text-neutral-900 border-neutral-300 rounded focus:ring-neutral-500\"\r\n          />\r\n          <span className=\"text-sm text-neutral-700\">\r\n            Billing address is the same as shipping address\r\n          </span>\r\n        </label>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\ninterface MobileOrderSummaryProps {\r\n  items: any[];\r\n  subtotal: number;\r\n  shipping: number;\r\n  tax: number;\r\n  total: number;\r\n}\r\n\r\nexport const MobileOrderSummary: React.FC<MobileOrderSummaryProps> = ({\r\n  items,\r\n  subtotal,\r\n  shipping,\r\n  tax,\r\n  total\r\n}) => {\r\n  const [isExpanded, setIsExpanded] = useState(false);\r\n\r\n  return (\r\n    <div className=\"space-y-4\">\r\n      <div className=\"bg-white rounded-xl border border-neutral-200 overflow-hidden\">\r\n        {/* Summary Header */}\r\n        <button\r\n          onClick={() => setIsExpanded(!isExpanded)}\r\n          className=\"w-full p-4 flex items-center justify-between text-left\"\r\n        >\r\n          <div>\r\n            <h3 className=\"font-semibold text-neutral-900\">Order Summary</h3>\r\n            <p className=\"text-sm text-neutral-600\">{items.length} items</p>\r\n          </div>\r\n          <div className=\"text-right\">\r\n            <div className=\"text-lg font-semibold text-neutral-900\">${total.toFixed(2)}</div>\r\n            <div className=\"text-sm text-neutral-600\">\r\n              {isExpanded ? 'Hide details' : 'Show details'}\r\n            </div>\r\n          </div>\r\n        </button>\r\n\r\n        {/* Expanded Details */}\r\n        <motion.div\r\n          initial={false}\r\n          animate={{ height: isExpanded ? 'auto' : 0 }}\r\n          className=\"overflow-hidden\"\r\n        >\r\n          <div className=\"border-t border-neutral-200 p-4 space-y-4\">\r\n            {/* Items */}\r\n            <div className=\"space-y-3\">\r\n              {items.map((item) => (\r\n                <div key={item.id} className=\"flex items-center space-x-3\">\r\n                  <img\r\n                    src={item.images[0]}\r\n                    alt={item.name}\r\n                    className=\"w-12 h-12 object-cover rounded-lg\"\r\n                  />\r\n                  <div className=\"flex-1\">\r\n                    <h4 className=\"font-medium text-neutral-900 text-sm\">{item.name}</h4>\r\n                    <p className=\"text-xs text-neutral-600\">Qty: {item.quantity}</p>\r\n                  </div>\r\n                  <div className=\"text-sm font-medium text-neutral-900\">\r\n                    ${(item.price * item.quantity).toFixed(2)}\r\n                  </div>\r\n                </div>\r\n              ))}\r\n            </div>\r\n\r\n            {/* Totals */}\r\n            <div className=\"border-t border-neutral-200 pt-4 space-y-2\">\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-neutral-600\">Subtotal</span>\r\n                <span className=\"text-neutral-900\">${subtotal.toFixed(2)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-neutral-600\">Shipping</span>\r\n                <span className=\"text-neutral-900\">\r\n                  {shipping === 0 ? 'Free' : `$${shipping.toFixed(2)}`}\r\n                </span>\r\n              </div>\r\n              <div className=\"flex justify-between text-sm\">\r\n                <span className=\"text-neutral-600\">Tax</span>\r\n                <span className=\"text-neutral-900\">${tax.toFixed(2)}</span>\r\n              </div>\r\n              <div className=\"flex justify-between font-semibold text-base border-t border-neutral-200 pt-2\">\r\n                <span className=\"text-neutral-900\">Total</span>\r\n                <span className=\"text-neutral-900\">${total.toFixed(2)}</span>\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </motion.div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\nimport { CreditCard, Smartphone, Building, Wallet, Banknote, Shield, CheckCircle } from 'lucide-react';\nimport { motion } from 'framer-motion';\nimport { useNotification } from '../../contexts/NotificationContext';\nimport { paymentService } from '../../services/paymentService';\nimport { CartItem } from '../../types';\n\ninterface RazorpayPaymentProps {\n  amount: number;\n  items: CartItem[];\n  customerInfo: {\n    name: string;\n    email: string;\n    phone: string;\n  };\n  shippingAddress: {\n    street: string;\n    city: string;\n    state: string;\n    zipCode: string;\n    country: string;\n  };\n  onSuccess: (paymentId: string) => void;\n  onError: (error: string) => void;\n  onCancel: () => void;\n}\n\nexport const RazorpayPayment: React.FC<RazorpayPaymentProps> = ({\n  amount,\n  items,\n  customerInfo,\n  shippingAddress,\n  onSuccess,\n  onError,\n  onCancel\n}) => {\n  const [isProcessing, setIsProcessing] = useState(false);\n  const [selectedMethod, setSelectedMethod] = useState('card');\n  const { showNotification } = useNotification();\n\n  // Calculate totals\n  const subtotal = amount;\n  const gst = Math.round(subtotal * 0.18 * 100) / 100; // 18% GST\n  const shipping = subtotal >= 2000 ? 0 : (shippingAddress.state.toLowerCase().includes('kashmir') ? 50 : 100);\n  const total = subtotal + gst + shipping;\n\n  const paymentMethods = [\n    {\n      id: 'card',\n      name: 'Cards',\n      description: 'Credit/Debit Cards',\n      icon: CreditCard,\n      color: 'bg-blue-500'\n    },\n    {\n      id: 'upi',\n      name: 'UPI',\n      description: 'Google Pay, PhonePe, Paytm',\n      icon: Smartphone,\n      color: 'bg-green-500'\n    },\n    {\n      id: 'netbanking',\n      name: 'Net Banking',\n      description: 'All major banks',\n      icon: Building,\n      color: 'bg-purple-500'\n    },\n    {\n      id: 'wallet',\n      name: 'Wallets',\n      description: 'Paytm, Mobikwik',\n      icon: Wallet,\n      color: 'bg-orange-500'\n    },\n    {\n      id: 'cod',\n      name: 'Cash on Delivery',\n      description: 'Pay when delivered',\n      icon: Banknote,\n      color: 'bg-gray-500'\n    }\n  ];\n\n  const handlePayment = async () => {\n    if (selectedMethod === 'cod') {\n      // Handle Cash on Delivery\n      showNotification({\n        type: 'success',\n        title: 'Order Placed',\n        message: 'Your order has been placed. Pay when delivered.'\n      });\n      onSuccess('cod_' + Date.now());\n      return;\n    }\n\n    if (!paymentService.isConfigured()) {\n      showNotification({\n        type: 'error',\n        title: 'Payment Gateway Error',\n        message: 'Payment gateway is not configured. Please contact support.'\n      });\n      onError('Payment gateway not configured');\n      return;\n    }\n\n    setIsProcessing(true);\n\n    try {\n      const paymentData = {\n        amount: subtotal,\n        currency: 'INR',\n        items,\n        customerInfo,\n        shippingAddress\n      };\n\n      const result = await paymentService.processPayment(paymentData);\n\n      if (result.success && result.paymentId) {\n        showNotification({\n          type: 'success',\n          title: 'Payment Successful',\n          message: 'Your payment has been processed successfully!'\n        });\n        onSuccess(result.paymentId);\n      } else {\n        showNotification({\n          type: 'error',\n          title: 'Payment Failed',\n          message: result.error || 'Payment processing failed'\n        });\n        onError(result.error || 'Payment failed');\n      }\n    } catch (error) {\n      const errorMessage = error instanceof Error ? error.message : 'Payment processing failed';\n      showNotification({\n        type: 'error',\n        title: 'Payment Error',\n        message: errorMessage\n      });\n      onError(errorMessage);\n    } finally {\n      setIsProcessing(false);\n    }\n  };\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-lg p-6\">\n      {/* Payment Summary */}\n      <div className=\"mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Payment Summary</h3>\n        <div className=\"bg-gray-50 rounded-lg p-4 space-y-2\">\n          <div className=\"flex justify-between text-sm\">\n            <span>Subtotal</span>\n            <span>{subtotal.toFixed(2)}</span>\n          </div>\n          <div className=\"flex justify-between text-sm\">\n            <span>GST (18%)</span>\n            <span>{gst.toFixed(2)}</span>\n          </div>\n          <div className=\"flex justify-between text-sm\">\n            <span>Shipping</span>\n            <span>{shipping === 0 ? 'FREE' : `${shipping.toFixed(2)}`}</span>\n          </div>\n          <div className=\"border-t pt-2 flex justify-between font-semibold\">\n            <span>Total</span>\n            <span>{total.toFixed(2)}</span>\n          </div>\n        </div>\n      </div>\n\n      {/* Payment Methods */}\n      <div className=\"mb-6\">\n        <h3 className=\"text-lg font-semibold text-gray-900 mb-4\">Choose Payment Method</h3>\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 gap-3\">\n          {paymentMethods.map((method) => {\n            const Icon = method.icon;\n            return (\n              <motion.button\n                key={method.id}\n                whileHover={{ scale: 1.02 }}\n                whileTap={{ scale: 0.98 }}\n                onClick={() => setSelectedMethod(method.id)}\n                className={`p-4 rounded-lg border-2 transition-all ${\n                  selectedMethod === method.id\n                    ? 'border-blue-500 bg-blue-50'\n                    : 'border-gray-200 hover:border-gray-300'\n                }`}\n              >\n                <div className=\"flex items-center space-x-3\">\n                  <div className={`p-2 rounded-lg ${method.color} text-white`}>\n                    <Icon className=\"w-5 h-5\" />\n                  </div>\n                  <div className=\"text-left\">\n                    <div className=\"font-medium text-gray-900\">{method.name}</div>\n                    <div className=\"text-sm text-gray-500\">{method.description}</div>\n                  </div>\n                  {selectedMethod === method.id && (\n                    <CheckCircle className=\"w-5 h-5 text-blue-500 ml-auto\" />\n                  )}\n                </div>\n              </motion.button>\n            );\n          })}\n        </div>\n      </div>\n\n      {/* Security Badge */}\n      <div className=\"mb-6 flex items-center justify-center space-x-2 text-sm text-gray-600\">\n        <Shield className=\"w-4 h-4 text-green-500\" />\n        <span>Secured by Razorpay  256-bit SSL encryption</span>\n      </div>\n\n      {/* Payment Button */}\n      <div className=\"space-y-3\">\n        <motion.button\n          whileHover={{ scale: 1.02 }}\n          whileTap={{ scale: 0.98 }}\n          onClick={handlePayment}\n          disabled={isProcessing}\n          className={`w-full py-4 px-6 rounded-lg font-semibold text-white transition-all ${\n            isProcessing\n              ? 'bg-gray-400 cursor-not-allowed'\n              : 'bg-gradient-to-r from-blue-600 to-purple-600 hover:from-blue-700 hover:to-purple-700'\n          }`}\n        >\n          {isProcessing ? (\n            <div className=\"flex items-center justify-center space-x-2\">\n              <div className=\"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin\"></div>\n              <span>Processing Payment...</span>\n            </div>\n          ) : (\n            `Pay ${total.toFixed(2)}`\n          )}\n        </motion.button>\n\n        <button\n          onClick={onCancel}\n          disabled={isProcessing}\n          className=\"w-full py-2 px-4 text-gray-600 hover:text-gray-800 transition-colors\"\n        >\n          Cancel\n        </button>\n      </div>\n\n      {/* Payment Info */}\n      <div className=\"mt-6 text-xs text-gray-500 text-center\">\n        <p>By proceeding, you agree to our Terms of Service and Privacy Policy.</p>\n        <p className=\"mt-1\">All transactions are secured and encrypted.</p>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\r\nimport { CheckCircle, Truck, Package, Clock } from 'lucide-react';\r\nimport { TrackingEvent } from '../../types';\r\nimport { motion } from 'framer-motion';\r\n\r\ninterface OrderTrackingProps {\r\n  history: TrackingEvent[];\r\n}\r\n\r\nexport const OrderTracking: React.FC<OrderTrackingProps> = ({ history }) => {\r\n  const getIcon = (eventStatus: string) => {\r\n    switch (eventStatus) {\r\n      case 'Order Placed': return <Package className=\"h-5 w-5\" />;\r\n      case 'Processing': return <Clock className=\"h-5 w-5\" />;\r\n      case 'Shipped': return <Truck className=\"h-5 w-5\" />;\r\n      case 'Delivered': return <CheckCircle className=\"h-5 w-5\" />;\r\n      default: return <Package className=\"h-5 w-5\" />;\r\n    }\r\n  };\r\n\r\n  const isCompleted = (index: number) => {\r\n    return index < history.length;\r\n  };\r\n\r\n  return (\r\n    <div className=\"py-4\">\r\n      <h4 className=\"font-semibold text-gray-800 mb-4\">Tracking History</h4>\r\n      <div className=\"space-y-8\">\r\n        {history.map((event, index) => (\r\n          <motion.div\r\n            key={index}\r\n            initial={{ opacity: 0, x: -20 }}\r\n            animate={{ opacity: 1, x: 0 }}\r\n            transition={{ delay: index * 0.1 }}\r\n            className=\"flex space-x-4\"\r\n          >\r\n            <div className=\"flex flex-col items-center\">\r\n              <div\r\n                className={`w-10 h-10 rounded-full flex items-center justify-center ${\r\n                  isCompleted(index) ? 'bg-indigo-600 text-white' : 'bg-gray-200 text-gray-500'\r\n                }`}\r\n              >\r\n                {getIcon(event.status)}\r\n              </div>\r\n              {index < history.length - 1 && (\r\n                <div className={`w-0.5 flex-grow ${isCompleted(index + 1) ? 'bg-indigo-600' : 'bg-gray-200'}`} />\r\n              )}\r\n            </div>\r\n            <div>\r\n              <p className=\"font-semibold text-gray-900\">{event.status}</p>\r\n              <p className=\"text-sm text-gray-500\">{new Date(event.date).toLocaleString()}</p>\r\n              <p className=\"text-sm text-gray-500\">{event.location}</p>\r\n            </div>\r\n          </motion.div>\r\n        ))}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { useAddresses } from '../../contexts/AddressContext';\r\nimport { Address } from '../../types';\r\n\r\ninterface AddressFormProps {\r\n  address?: Address | null;\r\n  onClose: () => void;\r\n}\r\n\r\nexport const AddressForm: React.FC<AddressFormProps> = ({ address, onClose }) => {\r\n  const { addAddress, updateAddress } = useAddresses();\r\n  const [loading, setLoading] = useState(false);\r\n  const [formData, setFormData] = useState({\r\n    fullName: '',\r\n    streetAddress: '',\r\n    city: '',\r\n    state: '',\r\n    postalCode: '',\r\n    country: 'United States',\r\n    phone: '',\r\n    type: 'shipping' as 'shipping' | 'billing',\r\n    isDefault: false\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (address) {\r\n      setFormData({\r\n        fullName: address.fullName || '',\r\n        streetAddress: address.streetAddress || address.street || '',\r\n        city: address.city || '',\r\n        state: address.state || '',\r\n        postalCode: address.postalCode || address.zipCode || '',\r\n        country: address.country || 'United States',\r\n        phone: address.phone || '',\r\n        type: address.type || 'shipping',\r\n        isDefault: address.isDefault || false\r\n      });\r\n    }\r\n  }, [address]);\r\n\r\n  const handleInputChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\r\n    const { name, value, type } = e.target;\r\n    setFormData(prev => ({\r\n      ...prev,\r\n      [name]: type === 'checkbox' ? (e.target as HTMLInputElement).checked : value\r\n    }));\r\n  };\r\n\r\n  const handleSubmit = async (e: React.FormEvent) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n\r\n    try {\r\n      if (address) {\r\n        // Update existing address\r\n        await updateAddress({\r\n          ...address,\r\n          ...formData\r\n        });\r\n      } else {\r\n        // Add new address\r\n        await addAddress(formData);\r\n      }\r\n      onClose();\r\n    } catch (error) {\r\n      console.error('Error saving address:', error);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <form onSubmit={handleSubmit} className=\"space-y-8\">\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\r\n        <div>\r\n          <label htmlFor=\"fullName\" className=\"block text-sm font-medium text-text-primary mb-3\">\r\n            Full Name *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"fullName\"\r\n            name=\"fullName\"\r\n            value={formData.fullName}\r\n            onChange={handleInputChange}\r\n            required\r\n            className=\"input-field-luxury\"\r\n            placeholder=\"Enter your full name\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"phone\" className=\"block text-sm font-medium text-text-primary mb-3\">\r\n            Phone Number\r\n          </label>\r\n          <input\r\n            type=\"tel\"\r\n            id=\"phone\"\r\n            name=\"phone\"\r\n            value={formData.phone}\r\n            onChange={handleInputChange}\r\n            className=\"input-field-luxury\"\r\n            placeholder=\"Enter your phone number\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div>\r\n        <label htmlFor=\"streetAddress\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n          Street Address *\r\n        </label>\r\n        <input\r\n          type=\"text\"\r\n          id=\"streetAddress\"\r\n          name=\"streetAddress\"\r\n          value={formData.streetAddress}\r\n          onChange={handleInputChange}\r\n          required\r\n          className=\"input-field\"\r\n          placeholder=\"Enter your street address\"\r\n        />\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\r\n        <div>\r\n          <label htmlFor=\"city\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            City *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"city\"\r\n            name=\"city\"\r\n            value={formData.city}\r\n            onChange={handleInputChange}\r\n            required\r\n            className=\"input-field\"\r\n            placeholder=\"Enter city\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"state\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            State *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"state\"\r\n            name=\"state\"\r\n            value={formData.state}\r\n            onChange={handleInputChange}\r\n            required\r\n            className=\"input-field\"\r\n            placeholder=\"Enter state\"\r\n          />\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"postalCode\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Postal Code *\r\n          </label>\r\n          <input\r\n            type=\"text\"\r\n            id=\"postalCode\"\r\n            name=\"postalCode\"\r\n            value={formData.postalCode}\r\n            onChange={handleInputChange}\r\n            required\r\n            className=\"input-field\"\r\n            placeholder=\"Enter postal code\"\r\n          />\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\r\n        <div>\r\n          <label htmlFor=\"country\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Country *\r\n          </label>\r\n          <select\r\n            id=\"country\"\r\n            name=\"country\"\r\n            value={formData.country}\r\n            onChange={handleInputChange}\r\n            required\r\n            className=\"input-field\"\r\n          >\r\n            <option value=\"United States\">United States</option>\r\n            <option value=\"Canada\">Canada</option>\r\n            <option value=\"United Kingdom\">United Kingdom</option>\r\n            <option value=\"Australia\">Australia</option>\r\n            <option value=\"India\">India</option>\r\n            <option value=\"Germany\">Germany</option>\r\n            <option value=\"France\">France</option>\r\n            <option value=\"Japan\">Japan</option>\r\n            <option value=\"Other\">Other</option>\r\n          </select>\r\n        </div>\r\n\r\n        <div>\r\n          <label htmlFor=\"type\" className=\"block text-sm font-medium text-gray-700 mb-2\">\r\n            Address Type *\r\n          </label>\r\n          <select\r\n            id=\"type\"\r\n            name=\"type\"\r\n            value={formData.type}\r\n            onChange={handleInputChange}\r\n            required\r\n            className=\"input-field\"\r\n          >\r\n            <option value=\"shipping\">Shipping</option>\r\n            <option value=\"billing\">Billing</option>\r\n          </select>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"flex items-center\">\r\n        <input\r\n          type=\"checkbox\"\r\n          id=\"isDefault\"\r\n          name=\"isDefault\"\r\n          checked={formData.isDefault}\r\n          onChange={handleInputChange}\r\n          className=\"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded\"\r\n        />\r\n        <label htmlFor=\"isDefault\" className=\"ml-2 block text-sm text-gray-700\">\r\n          Set as default {formData.type} address\r\n        </label>\r\n      </div>\r\n\r\n      <div className=\"flex gap-4 pt-4\">\r\n        <motion.button\r\n          type=\"button\"\r\n          onClick={onClose}\r\n          className=\"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors\"\r\n          whileHover={{ scale: 1.02 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          Cancel\r\n        </motion.button>\r\n        <motion.button\r\n          type=\"submit\"\r\n          disabled={loading}\r\n          className=\"flex-1 btn-primary\"\r\n          whileHover={{ scale: 1.02 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          {loading ? 'Saving...' : address ? 'Update Address' : 'Add Address'}\r\n        </motion.button>\r\n      </div>\r\n    </form>\r\n  );\r\n};\r\n","import React, { useState } from 'react';\r\nimport { Plus, Edit, Trash2, MapPin, Star } from 'lucide-react';\r\nimport { motion } from 'framer-motion';\r\nimport { useAddresses } from '../../contexts/AddressContext';\r\nimport { Address } from '../../types';\r\nimport { Modal } from '../Common/Modal';\r\nimport { AddressForm } from './AddressForm';\r\n\r\nexport const AddressManagement: React.FC = () => {\r\n  const { addresses, deleteAddress, setDefaultAddress, loading } = useAddresses();\r\n  const [isModalOpen, setIsModalOpen] = useState(false);\r\n  const [editingAddress, setEditingAddress] = useState<Address | null>(null);\r\n\r\n  const handleAddAddress = () => {\r\n    setEditingAddress(null);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleEditAddress = (address: Address) => {\r\n    setEditingAddress(address);\r\n    setIsModalOpen(true);\r\n  };\r\n\r\n  const handleDeleteAddress = async (addressId: string) => {\r\n    if (window.confirm('Are you sure you want to delete this address?')) {\r\n      await deleteAddress(addressId);\r\n    }\r\n  };\r\n\r\n  const handleSetDefault = async (addressId: string, type: 'shipping' | 'billing') => {\r\n    await setDefaultAddress(addressId, type);\r\n  };\r\n\r\n  if (loading) {\r\n    return (\r\n      <div className=\"p-6\">\r\n        <div className=\"animate-pulse space-y-4\">\r\n          {[1, 2, 3].map((i) => (\r\n            <div key={i} className=\"bg-gray-200 h-32 rounded-lg\"></div>\r\n          ))}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <div className=\"p-6\">\r\n      <div className=\"flex items-center justify-between mb-6\">\r\n        <div>\r\n          <h1 className=\"text-2xl font-bold text-gray-900\">My Addresses</h1>\r\n          <p className=\"text-gray-600 mt-1\">Manage your shipping and billing addresses</p>\r\n        </div>\r\n        <motion.button\r\n          onClick={handleAddAddress}\r\n          className=\"btn-primary flex items-center gap-2\"\r\n          whileHover={{ scale: 1.02 }}\r\n          whileTap={{ scale: 0.98 }}\r\n        >\r\n          <Plus className=\"h-4 w-4\" />\r\n          Add Address\r\n        </motion.button>\r\n      </div>\r\n\r\n      {addresses.length === 0 ? (\r\n        <div className=\"text-center py-12\">\r\n          <MapPin className=\"h-16 w-16 text-gray-300 mx-auto mb-4\" />\r\n          <h3 className=\"text-lg font-medium text-gray-900 mb-2\">No addresses yet</h3>\r\n          <p className=\"text-gray-600 mb-6\">Add your first address to get started</p>\r\n          <motion.button\r\n            onClick={handleAddAddress}\r\n            className=\"btn-primary\"\r\n            whileHover={{ scale: 1.02 }}\r\n            whileTap={{ scale: 0.98 }}\r\n          >\r\n            Add Address\r\n          </motion.button>\r\n        </div>\r\n      ) : (\r\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n          {addresses.map((address, index) => (\r\n            <motion.div\r\n              key={address.id}\r\n              initial={{ opacity: 0, y: 20 }}\r\n              animate={{ opacity: 1, y: 0 }}\r\n              transition={{ delay: index * 0.1 }}\r\n              className=\"bg-white rounded-lg border border-gray-200 p-6 hover:shadow-md transition-shadow\"\r\n            >\r\n              <div className=\"flex items-start justify-between mb-4\">\r\n                <div className=\"flex items-center gap-2\">\r\n                  <MapPin className=\"h-5 w-5 text-gray-400\" />\r\n                  <span className=\"font-medium text-gray-900 capitalize\">\r\n                    {address.type || 'shipping'}\r\n                  </span>\r\n                  {address.isDefault && (\r\n                    <Star className=\"h-4 w-4 text-yellow-500 fill-current\" />\r\n                  )}\r\n                </div>\r\n                <div className=\"flex items-center gap-2\">\r\n                  <button\r\n                    onClick={() => handleEditAddress(address)}\r\n                    className=\"p-1 text-gray-400 hover:text-indigo-600 transition-colors\"\r\n                  >\r\n                    <Edit className=\"h-4 w-4\" />\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleDeleteAddress(address.id!)}\r\n                    className=\"p-1 text-gray-400 hover:text-red-600 transition-colors\"\r\n                  >\r\n                    <Trash2 className=\"h-4 w-4\" />\r\n                  </button>\r\n                </div>\r\n              </div>\r\n\r\n              <div className=\"space-y-2 mb-4\">\r\n                <p className=\"font-medium text-gray-900\">{address.fullName}</p>\r\n                <p className=\"text-gray-600 text-sm\">\r\n                  {address.streetAddress || address.street}\r\n                </p>\r\n                <p className=\"text-gray-600 text-sm\">\r\n                  {address.city}, {address.state} {address.postalCode || address.zipCode}\r\n                </p>\r\n                <p className=\"text-gray-600 text-sm\">{address.country}</p>\r\n                {address.phone && (\r\n                  <p className=\"text-gray-600 text-sm\">{address.phone}</p>\r\n                )}\r\n              </div>\r\n\r\n              {!address.isDefault && (\r\n                <div className=\"flex gap-2\">\r\n                  <button\r\n                    onClick={() => handleSetDefault(address.id!, 'shipping')}\r\n                    className=\"flex-1 text-xs px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors\"\r\n                  >\r\n                    Set as Default Shipping\r\n                  </button>\r\n                  <button\r\n                    onClick={() => handleSetDefault(address.id!, 'billing')}\r\n                    className=\"flex-1 text-xs px-3 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors\"\r\n                  >\r\n                    Set as Default Billing\r\n                  </button>\r\n                </div>\r\n              )}\r\n            </motion.div>\r\n          ))}\r\n        </div>\r\n      )}\r\n\r\n      <Modal\r\n        isOpen={isModalOpen}\r\n        onClose={() => setIsModalOpen(false)}\r\n        title={editingAddress ? 'Edit Address' : 'Add New Address'}\r\n      >\r\n        <AddressForm\r\n          address={editingAddress}\r\n          onClose={() => setIsModalOpen(false)}\r\n        />\r\n      </Modal>\r\n    </div>\r\n  );\r\n};\r\n","import React, { useState, useEffect } from 'react';\nimport { Menu, X } from 'lucide-react';\n\ninterface ResponsiveContainerProps {\n  children: React.ReactNode;\n  className?: string;\n  enablePWASupport?: boolean;\n  showMobileMenu?: boolean;\n  onMobileMenuToggle?: (isOpen: boolean) => void;\n}\n\ninterface ViewportInfo {\n  width: number;\n  height: number;\n  isMobile: boolean;\n  isTablet: boolean;\n  isDesktop: boolean;\n  isPWA: boolean;\n  orientation: 'portrait' | 'landscape';\n}\n\nexport const ResponsiveContainer: React.FC<ResponsiveContainerProps> = ({\n  children,\n  className = '',\n  enablePWASupport = true,\n  showMobileMenu = false,\n  onMobileMenuToggle\n}) => {\n  const [viewport, setViewport] = useState<ViewportInfo>({\n    width: typeof window !== 'undefined' ? window.innerWidth : 1024,\n    height: typeof window !== 'undefined' ? window.innerHeight : 768,\n    isMobile: false,\n    isTablet: false,\n    isDesktop: true,\n    isPWA: false,\n    orientation: 'landscape'\n  });\n\n  const [isMobileMenuOpen, setIsMobileMenuOpen] = useState(false);\n\n  useEffect(() => {\n    const updateViewport = () => {\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      const isMobile = width < 768;\n      const isTablet = width >= 768 && width < 1024;\n      const isDesktop = width >= 1024;\n      const isPWA = window.matchMedia('(display-mode: standalone)').matches ||\n        window.matchMedia('(display-mode: fullscreen)').matches ||\n        (window.navigator as any).standalone === true;\n      const orientation = width > height ? 'landscape' : 'portrait';\n\n      setViewport({\n        width,\n        height,\n        isMobile,\n        isTablet,\n        isDesktop,\n        isPWA,\n        orientation\n      });\n    };\n\n    updateViewport();\n    window.addEventListener('resize', updateViewport);\n    window.addEventListener('orientationchange', updateViewport);\n\n    return () => {\n      window.removeEventListener('resize', updateViewport);\n      window.removeEventListener('orientationchange', updateViewport);\n    };\n  }, []);\n\n  const handleMobileMenuToggle = () => {\n    const newState = !isMobileMenuOpen;\n    setIsMobileMenuOpen(newState);\n    onMobileMenuToggle?.(newState);\n  };\n\n  const containerClasses = [\n    'responsive-container',\n    viewport.isMobile && 'mobile-view',\n    viewport.isTablet && 'tablet-view',\n    viewport.isDesktop && 'desktop-view',\n    viewport.isPWA && 'pwa-view',\n    viewport.orientation === 'landscape' && 'landscape-view',\n    viewport.orientation === 'portrait' && 'portrait-view',\n    enablePWASupport && viewport.isPWA && 'pwa-safe-area',\n    className\n  ].filter(Boolean).join(' ');\n\n  return (\n    <div className={containerClasses}>\n      {/* PWA Status Bar Spacer */}\n      {enablePWASupport && viewport.isPWA && (\n        <div className=\"pwa-status-bar-spacer h-safe-top\" />\n      )}\n\n      {/* Mobile Menu Toggle */}\n      {viewport.isMobile && showMobileMenu && (\n        <div className=\"mobile-menu-header flex items-center justify-between p-4 bg-white border-b border-gray-200\">\n          <h1 className=\"text-lg font-semibold text-gray-900\">User Management</h1>\n          <button\n            onClick={handleMobileMenuToggle}\n            className=\"p-2 rounded-lg hover:bg-gray-100 focus:outline-none focus:ring-2 focus:ring-indigo-500\"\n            aria-label={isMobileMenuOpen ? 'Close menu' : 'Open menu'}\n          >\n            {isMobileMenuOpen ? (\n              <X className=\"w-6 h-6 text-gray-600\" />\n            ) : (\n              <Menu className=\"w-6 h-6 text-gray-600\" />\n            )}\n          </button>\n        </div>\n      )}\n\n      {/* Mobile Menu Overlay */}\n      {viewport.isMobile && isMobileMenuOpen && (\n        <div className=\"mobile-menu-overlay fixed inset-0 z-50 bg-black bg-opacity-50\">\n          <div className=\"mobile-menu-content bg-white w-80 h-full shadow-xl\">\n            <div className=\"p-4 border-b border-gray-200\">\n              <div className=\"flex items-center justify-between\">\n                <h2 className=\"text-lg font-semibold text-gray-900\">Menu</h2>\n                <button\n                  onClick={handleMobileMenuToggle}\n                  className=\"p-2 rounded-lg hover:bg-gray-100\"\n                >\n                  <X className=\"w-5 h-5 text-gray-600\" />\n                </button>\n              </div>\n            </div>\n            <div className=\"p-4\">\n              {/* Menu content would go here */}\n              <p className=\"text-sm text-gray-600\">Mobile menu content</p>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {/* Main Content */}\n      <div className=\"responsive-content\">\n        {children}\n      </div>\n\n      {/* PWA Bottom Safe Area */}\n      {enablePWASupport && viewport.isPWA && (\n        <div className=\"pwa-bottom-spacer h-safe-bottom\" />\n      )}\n\n\n    </div>\n  );\n};\n\n// Hook for accessing viewport information\nexport const useViewport = () => {\n  const [viewport, setViewport] = useState<ViewportInfo>({\n    width: typeof window !== 'undefined' ? window.innerWidth : 1024,\n    height: typeof window !== 'undefined' ? window.innerHeight : 768,\n    isMobile: false,\n    isTablet: false,\n    isDesktop: true,\n    isPWA: false,\n    orientation: 'landscape'\n  });\n\n  useEffect(() => {\n    const updateViewport = () => {\n      const width = window.innerWidth;\n      const height = window.innerHeight;\n      const isMobile = width < 768;\n      const isTablet = width >= 768 && width < 1024;\n      const isDesktop = width >= 1024;\n      const isPWA = window.matchMedia('(display-mode: standalone)').matches ||\n        window.matchMedia('(display-mode: fullscreen)').matches ||\n        (window.navigator as any).standalone === true;\n      const orientation = width > height ? 'landscape' : 'portrait';\n\n      setViewport({\n        width,\n        height,\n        isMobile,\n        isTablet,\n        isDesktop,\n        isPWA,\n        orientation\n      });\n    };\n\n    updateViewport();\n    window.addEventListener('resize', updateViewport);\n    window.addEventListener('orientationchange', updateViewport);\n\n    return () => {\n      window.removeEventListener('resize', updateViewport);\n      window.removeEventListener('orientationchange', updateViewport);\n    };\n  }, []);\n\n  return viewport;\n};\n\n// PWA Installation Hook\nexport const usePWAInstall = () => {\n  const [deferredPrompt, setDeferredPrompt] = useState<any>(null);\n  const [isInstallable, setIsInstallable] = useState(false);\n  const [isInstalled, setIsInstalled] = useState(false);\n\n  useEffect(() => {\n    const handleBeforeInstallPrompt = (e: Event) => {\n      e.preventDefault();\n      setDeferredPrompt(e);\n      setIsInstallable(true);\n    };\n\n    const handleAppInstalled = () => {\n      setIsInstalled(true);\n      setIsInstallable(false);\n      setDeferredPrompt(null);\n    };\n\n    // Check if already installed\n    const isPWA = window.matchMedia('(display-mode: standalone)').matches ||\n      (window.navigator as any).standalone === true;\n    setIsInstalled(isPWA);\n\n    window.addEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n    window.addEventListener('appinstalled', handleAppInstalled);\n\n    return () => {\n      window.removeEventListener('beforeinstallprompt', handleBeforeInstallPrompt);\n      window.removeEventListener('appinstalled', handleAppInstalled);\n    };\n  }, []);\n\n  const installPWA = async () => {\n    if (!deferredPrompt) return false;\n\n    deferredPrompt.prompt();\n    const { outcome } = await deferredPrompt.userChoice;\n\n    if (outcome === 'accepted') {\n      setDeferredPrompt(null);\n      setIsInstallable(false);\n      return true;\n    }\n\n    return false;\n  };\n\n  return {\n    isInstallable,\n    isInstalled,\n    installPWA\n  };\n};\n\n// Touch and Gesture Support Hook\nexport const useTouchGestures = () => {\n  const [touchInfo, setTouchInfo] = useState({\n    isTouch: false,\n    supportsHover: true,\n    preferredInputSize: 'normal' as 'small' | 'normal' | 'large'\n  });\n\n  useEffect(() => {\n    const isTouch = 'ontouchstart' in window || navigator.maxTouchPoints > 0;\n    const supportsHover = window.matchMedia('(hover: hover)').matches;\n    const preferredInputSize = window.matchMedia('(pointer: coarse)').matches ? 'large' : 'normal';\n\n    setTouchInfo({\n      isTouch,\n      supportsHover,\n      preferredInputSize\n    });\n  }, []);\n\n  return touchInfo;\n};\n","import React from 'react';\r\nimport { motion } from 'framer-motion';\r\nimport { LucideIcon } from 'lucide-react';\r\n\r\ninterface EnhancedButtonProps {\r\n  children: React.ReactNode;\r\n  onClick?: () => void;\r\n  className?: string;\r\n  icon?: LucideIcon;\r\n  variant?: 'primary' | 'secondary' | 'ghost';\r\n  size?: 'sm' | 'md' | 'lg';\r\n  loading?: boolean;\r\n  disabled?: boolean;\r\n  ariaLabel?: string;\r\n  title?: string;\r\n  mobileOptimized?: boolean; // New prop for mobile optimization\r\n}\r\n\r\nexport const EnhancedButton: React.FC<EnhancedButtonProps> = ({\r\n  children,\r\n  onClick,\r\n  className = '',\r\n  icon: Icon,\r\n  variant = 'ghost',\r\n  size = 'md',\r\n  loading = false,\r\n  disabled = false,\r\n  ariaLabel,\r\n  title,\r\n  mobileOptimized = false,\r\n}) => {\r\n  const baseClasses = 'relative inline-flex items-center justify-center font-medium transition-all duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2';\r\n\r\n  // Mobile-optimized classes for touch interaction\r\n  const mobileClasses = mobileOptimized\r\n    ? 'touch-manipulation select-none active:scale-95 transition-transform duration-150'\r\n    : '';\r\n\r\n  const variantClasses = {\r\n    primary: 'bg-gradient-to-r from-purple-600 to-purple-700 text-white hover:from-purple-700 hover:to-purple-800 focus:ring-purple-500',\r\n    secondary: 'bg-white text-purple-700 hover:bg-purple-100 focus:ring-purple-500',\r\n    ghost: 'text-purple-600 hover:text-purple-700 hover:bg-purple-50 focus:ring-purple-500',\r\n  };\r\n\r\n  // Enhanced size classes with mobile-optimized touch targets\r\n  const sizeClasses = {\r\n    sm: mobileOptimized ? 'min-h-[44px] min-w-[44px] px-4 py-2 text-sm rounded-md' : 'px-3 py-1.5 text-sm rounded-md',\r\n    md: mobileOptimized ? 'min-h-[48px] min-w-[48px] px-5 py-3 text-sm rounded-lg' : 'px-4 py-2 text-sm rounded-lg',\r\n    lg: mobileOptimized ? 'min-h-[56px] min-w-[56px] px-6 py-4 text-base rounded-lg' : 'px-6 py-3 text-base rounded-lg',\r\n  };\r\n\r\n  const iconSizeClasses = {\r\n    sm: 'h-4 w-4',\r\n    md: 'h-5 w-5',\r\n    lg: 'h-6 w-6',\r\n  };\r\n\r\n  return (\r\n    <button\r\n      onClick={onClick}\r\n      disabled={disabled || loading}\r\n      className={`${baseClasses} ${mobileClasses} ${variantClasses[variant]} ${sizeClasses[size]} ${className} ${disabled ? 'opacity-50 cursor-not-allowed' : ''\r\n        }`}\r\n      aria-label={ariaLabel}\r\n      title={title}\r\n    >\r\n      {loading ? (\r\n        <div className={`${iconSizeClasses[size]} border-2 border-current border-t-transparent rounded-full animate-spin`} />\r\n      ) : (\r\n        <>\r\n          {Icon && (\r\n            <Icon className={`${iconSizeClasses[size]} ${children ? 'mr-2' : ''}`} />\r\n          )}\r\n          {children}\r\n        </>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\n// Badge component for notifications, cart count, etc.\r\ninterface BadgeProps {\r\n  count: number;\r\n  variant?: 'default' | 'success' | 'warning' | 'error';\r\n  className?: string;\r\n}\r\n\r\nexport const Badge: React.FC<BadgeProps> = ({\r\n  count,\r\n  variant = 'default',\r\n  className = ''\r\n}) => {\r\n  if (count <= 0) return null;\r\n\r\n  const variantClasses = {\r\n    default: 'bg-neutral-900 text-white',\r\n    success: 'bg-green-500 text-white',\r\n    warning: 'bg-orange-500 text-white',\r\n    error: 'bg-red-500 text-white',\r\n  };\r\n\r\n  return (\r\n    <motion.span\r\n      initial={{ scale: 0 }}\r\n      animate={{ scale: 1 }}\r\n      exit={{ scale: 0 }}\r\n      transition={{ type: 'spring', stiffness: 500, damping: 25 }}\r\n      className={`absolute -top-1 -right-1 h-4 w-4 text-xs rounded-full flex items-center justify-center font-medium ${variantClasses[variant]} ${className}`}\r\n    >\r\n      {count > 99 ? '99+' : count}\r\n    </motion.span>\r\n  );\r\n};\r\n\r\n// Tooltip component for enhanced UX\r\ninterface TooltipProps {\r\n  content: string;\r\n  children: React.ReactNode;\r\n  position?: 'top' | 'bottom' | 'left' | 'right';\r\n}\r\n\r\nexport const Tooltip: React.FC<TooltipProps> = ({\r\n  content,\r\n  children,\r\n  position = 'bottom'\r\n}) => {\r\n  const [isVisible, setIsVisible] = React.useState(false);\r\n\r\n  const positionClasses = {\r\n    top: 'bottom-full left-1/2 -translate-x-1/2 mb-2',\r\n    bottom: 'top-full left-1/2 -translate-x-1/2 mt-2',\r\n    left: 'right-full top-1/2 -translate-y-1/2 mr-2',\r\n    right: 'left-full top-1/2 -translate-y-1/2 ml-2',\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"relative inline-block\"\r\n      onMouseEnter={() => setIsVisible(true)}\r\n      onMouseLeave={() => setIsVisible(false)}\r\n    >\r\n      {children}\r\n      {isVisible && (\r\n        <motion.div\r\n          initial={{ opacity: 0, scale: 0.8 }}\r\n          animate={{ opacity: 1, scale: 1 }}\r\n          exit={{ opacity: 0, scale: 0.8 }}\r\n          transition={{ duration: 0.15 }}\r\n          className={`absolute z-50 px-2 py-1 text-xs font-medium text-white bg-neutral-900 rounded-md whitespace-nowrap ${positionClasses[position]}`}\r\n        >\r\n          {content}\r\n          <div className={`absolute w-2 h-2 bg-neutral-900 rotate-45 ${position === 'top' ? 'top-full left-1/2 -translate-x-1/2 -mt-1' :\r\n            position === 'bottom' ? 'bottom-full left-1/2 -translate-x-1/2 -mb-1' :\r\n              position === 'left' ? 'left-full top-1/2 -translate-y-1/2 -ml-1' :\r\n                'right-full top-1/2 -translate-y-1/2 -mr-1'\r\n            }`} />\r\n        </motion.div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n","import React, { useEffect, useState, useMemo } from 'react';\nimport { motion } from 'framer-motion';\nimport { \n  useResponsiveDesign, \n  useResponsiveClasses, \n  useResponsiveGrid,\n  BreakpointKey \n} from '../../utils/responsiveDesign';\nimport { \n  useAccessibilityPreferences, \n  useFocusManagement,\n  useScreenReaderAnnouncements \n} from '../../utils/accessibilityUtils';\n\n// Layout configuration\ninterface LayoutConfig {\n  container: {\n    maxWidth?: Partial<Record<BreakpointKey, string>>;\n    padding?: Partial<Record<BreakpointKey, string>>;\n    margin?: Partial<Record<BreakpointKey, string>>;\n  };\n  grid: {\n    columns?: Partial<Record<BreakpointKey, number>>;\n    gap?: Partial<Record<BreakpointKey, string>>;\n  };\n  breakpoints: {\n    behavior?: 'fluid' | 'stepped';\n    customBreakpoints?: Record<string, number>;\n  };\n}\n\n// Component props\ninterface ResponsiveLayoutProps {\n  children: React.ReactNode;\n  config?: Partial<LayoutConfig>;\n  className?: string;\n  enableAccessibility?: boolean;\n  enableAnimations?: boolean;\n  skipLinks?: Array<{ target: string; text: string }>;\n  landmark?: 'main' | 'section' | 'article' | 'aside' | 'nav' | 'header' | 'footer';\n  ariaLabel?: string;\n  ariaLabelledBy?: string;\n}\n\n// Grid item props\ninterface ResponsiveGridItemProps {\n  children: React.ReactNode;\n  span?: number | Partial<Record<BreakpointKey, number>>;\n  offset?: number | Partial<Record<BreakpointKey, number>>;\n  order?: number | Partial<Record<BreakpointKey, number>>;\n  className?: string;\n  alignSelf?: 'start' | 'center' | 'end' | 'stretch';\n}\n\n// Container component\ninterface ResponsiveContainerProps {\n  children: React.ReactNode;\n  maxWidth?: Partial<Record<BreakpointKey, string>>;\n  padding?: Partial<Record<BreakpointKey, string>>;\n  className?: string;\n  fluid?: boolean;\n  centerContent?: boolean;\n}\n\n// Default layout configuration\nconst DEFAULT_CONFIG: LayoutConfig = {\n  container: {\n    maxWidth: {\n      xs: '100%',\n      sm: '640px',\n      md: '768px',\n      lg: '1024px',\n      xl: '1280px',\n      '2xl': '1536px'\n    },\n    padding: {\n      xs: '1rem',\n      sm: '1.5rem',\n      md: '2rem',\n      lg: '2.5rem',\n      xl: '3rem',\n      '2xl': '3.5rem'\n    }\n  },\n  grid: {\n    columns: {\n      xs: 4,\n      sm: 8,\n      md: 12,\n      lg: 12,\n      xl: 12,\n      '2xl': 12\n    },\n    gap: {\n      xs: '1rem',\n      sm: '1.5rem',\n      md: '2rem',\n      lg: '2.5rem',\n      xl: '3rem',\n      '2xl': '3.5rem'\n    }\n  },\n  breakpoints: {\n    behavior: 'fluid'\n  }\n};\n\n/**\n * Main responsive layout component\n */\nexport const ResponsiveLayout: React.FC<ResponsiveLayoutProps> = ({\n  children,\n  config = {},\n  className = '',\n  enableAccessibility = true,\n  enableAnimations = true,\n  skipLinks = [],\n  landmark = 'main',\n  ariaLabel,\n  ariaLabelledBy\n}) => {\n  const { \n    breakpoint, \n    deviceType, \n    orientation, \n    isPWA, \n    isTouch,\n    safeAreaInsets \n  } = useResponsiveDesign();\n  \n  const { preferences } = useAccessibilityPreferences();\n  const { announce } = useScreenReaderAnnouncements();\n  const responsiveClasses = useResponsiveClasses();\n  \n  const [layoutReady, setLayoutReady] = useState(false);\n  \n  // Merge configuration with defaults\n  const layoutConfig = useMemo(() => {\n    return {\n      container: { ...DEFAULT_CONFIG.container, ...config.container },\n      grid: { ...DEFAULT_CONFIG.grid, ...config.grid },\n      breakpoints: { ...DEFAULT_CONFIG.breakpoints, ...config.breakpoints }\n    };\n  }, [config]);\n\n  // Install skip links\n  useEffect(() => {\n    if (enableAccessibility && skipLinks.length > 0) {\n      const container = document.createElement('div');\n      container.className = 'skip-links fixed top-0 left-0 z-50';\n      \n      skipLinks.forEach(({ target, text }) => {\n        const link = document.createElement('a');\n        link.href = target;\n        link.textContent = text;\n        link.className = `\n          sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 \n          focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white \n          focus:rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\n          focus:z-50 transition-all duration-200\n        `.trim();\n        container.appendChild(link);\n      });\n      \n      document.body.insertBefore(container, document.body.firstChild);\n      \n      return () => {\n        if (document.body.contains(container)) {\n          document.body.removeChild(container);\n        }\n      };\n    }\n  }, [enableAccessibility, skipLinks]);\n\n  // Announce layout changes to screen readers\n  useEffect(() => {\n    if (enableAccessibility && layoutReady) {\n      const message = `Layout updated for ${deviceType} device in ${orientation} orientation`;\n      announce(message, 'polite');\n    }\n  }, [breakpoint, deviceType, orientation, enableAccessibility, announce, layoutReady]);\n\n  // Set layout ready after initial render\n  useEffect(() => {\n    setLayoutReady(true);\n  }, []);\n\n  // Apply CSS custom properties for responsive values\n  useEffect(() => {\n    const root = document.documentElement;\n    \n    // Set safe area insets\n    root.style.setProperty('--safe-area-inset-top', `${safeAreaInsets.top}px`);\n    root.style.setProperty('--safe-area-inset-right', `${safeAreaInsets.right}px`);\n    root.style.setProperty('--safe-area-inset-bottom', `${safeAreaInsets.bottom}px`);\n    root.style.setProperty('--safe-area-inset-left', `${safeAreaInsets.left}px`);\n    \n    // Set current breakpoint\n    root.style.setProperty('--current-breakpoint', breakpoint);\n    root.style.setProperty('--device-type', deviceType);\n    root.style.setProperty('--orientation', orientation);\n  }, [safeAreaInsets, breakpoint, deviceType, orientation]);\n\n  // Build layout classes\n  const layoutClasses = useMemo(() => {\n    const classes = [\n      'responsive-layout',\n      responsiveClasses,\n      preferences.reducedMotion && 'reduce-motion',\n      preferences.highContrast && 'high-contrast',\n      preferences.largeText && 'large-text',\n      isTouch && 'touch-enabled',\n      isPWA && 'pwa-mode',\n      className\n    ].filter(Boolean);\n\n    return classes.join(' ');\n  }, [responsiveClasses, preferences, isTouch, isPWA, className]);\n\n  // Animation variants\n  const layoutVariants = {\n    initial: { opacity: 0, y: 20 },\n    animate: { opacity: 1, y: 0 },\n    exit: { opacity: 0, y: -20 }\n  };\n\n  const LayoutComponent = landmark === 'main' ? 'main' : landmark;\n\n  return (\n    <LayoutComponent\n      className={layoutClasses}\n      aria-label={ariaLabel}\n      aria-labelledby={ariaLabelledBy}\n      role={landmark === 'main' ? undefined : landmark}\n    >\n      {enableAnimations && !preferences.reducedMotion ? (\n        <motion.div\n          variants={layoutVariants}\n          initial=\"initial\"\n          animate=\"animate\"\n          exit=\"exit\"\n          transition={{ duration: 0.3, ease: 'easeOut' }}\n          className=\"w-full h-full\"\n        >\n          {children}\n        </motion.div>\n      ) : (\n        children\n      )}\n    </LayoutComponent>\n  );\n};\n\n/**\n * Responsive container component\n */\nexport const ResponsiveContainer: React.FC<ResponsiveContainerProps> = ({\n  children,\n  maxWidth,\n  padding,\n  className = '',\n  fluid = false,\n  centerContent = true\n}) => {\n  const { getResponsiveValue } = useResponsiveDesign();\n  \n  const containerStyles = useMemo(() => {\n    const styles: React.CSSProperties = {};\n    \n    if (!fluid && maxWidth) {\n      styles.maxWidth = getResponsiveValue(maxWidth) || '100%';\n    }\n    \n    if (padding) {\n      styles.padding = getResponsiveValue(padding) || '1rem';\n    }\n    \n    return styles;\n  }, [fluid, maxWidth, padding, getResponsiveValue]);\n\n  const containerClasses = useMemo(() => {\n    const classes = [\n      'responsive-container',\n      fluid ? 'w-full' : 'max-w-full',\n      centerContent && 'mx-auto',\n      className\n    ].filter(Boolean);\n\n    return classes.join(' ');\n  }, [fluid, centerContent, className]);\n\n  return (\n    <div className={containerClasses} style={containerStyles}>\n      {children}\n    </div>\n  );\n};\n\n/**\n * Responsive grid component\n */\nexport const ResponsiveGrid: React.FC<{\n  children: React.ReactNode;\n  columns?: Partial<Record<BreakpointKey, number>>;\n  gap?: Partial<Record<BreakpointKey, string>>;\n  className?: string;\n}> = ({ children, columns, gap, className = '' }) => {\n  const { getResponsiveValue } = useResponsiveDesign();\n  const { gridColumns } = useResponsiveGrid(columns);\n  \n  const gridStyles = useMemo(() => {\n    const styles: React.CSSProperties = {\n      display: 'grid',\n      gridTemplateColumns: `repeat(${gridColumns}, 1fr)`,\n      gap: getResponsiveValue(gap) || '1rem'\n    };\n    \n    return styles;\n  }, [gridColumns, gap, getResponsiveValue]);\n\n  return (\n    <div className={`responsive-grid ${className}`} style={gridStyles}>\n      {children}\n    </div>\n  );\n};\n\n/**\n * Responsive grid item component\n */\nexport const ResponsiveGridItem: React.FC<ResponsiveGridItemProps> = ({\n  children,\n  span = 1,\n  offset = 0,\n  order,\n  className = '',\n  alignSelf = 'stretch'\n}) => {\n  const { getResponsiveValue } = useResponsiveDesign();\n  const { getColumnSpan } = useResponsiveGrid();\n  \n  const itemStyles = useMemo(() => {\n    const actualSpan = typeof span === 'number' ? span : getResponsiveValue(span) || 1;\n    const actualOffset = typeof offset === 'number' ? offset : getResponsiveValue(offset) || 0;\n    const actualOrder = typeof order === 'number' ? order : getResponsiveValue(order);\n    \n    const styles: React.CSSProperties = {\n      gridColumn: `span ${getColumnSpan(actualSpan)}`,\n      alignSelf\n    };\n    \n    if (actualOffset > 0) {\n      styles.gridColumnStart = actualOffset + 1;\n    }\n    \n    if (actualOrder !== undefined) {\n      styles.order = actualOrder;\n    }\n    \n    return styles;\n  }, [span, offset, order, alignSelf, getResponsiveValue, getColumnSpan]);\n\n  return (\n    <div className={`responsive-grid-item ${className}`} style={itemStyles}>\n      {children}\n    </div>\n  );\n};\n\n/**\n * Responsive stack component for vertical layouts\n */\nexport const ResponsiveStack: React.FC<{\n  children: React.ReactNode;\n  spacing?: Partial<Record<BreakpointKey, string>>;\n  align?: 'start' | 'center' | 'end' | 'stretch';\n  justify?: 'start' | 'center' | 'end' | 'between' | 'around' | 'evenly';\n  direction?: 'column' | 'row' | Partial<Record<BreakpointKey, 'column' | 'row'>>;\n  className?: string;\n}> = ({ \n  children, \n  spacing, \n  align = 'stretch', \n  justify = 'start',\n  direction = 'column',\n  className = '' \n}) => {\n  const { getResponsiveValue } = useResponsiveDesign();\n  \n  const stackStyles = useMemo(() => {\n    const actualDirection = typeof direction === 'string' \n      ? direction \n      : getResponsiveValue(direction) || 'column';\n    \n    const styles: React.CSSProperties = {\n      display: 'flex',\n      flexDirection: actualDirection,\n      alignItems: align === 'start' ? 'flex-start' : \n                  align === 'end' ? 'flex-end' : \n                  align === 'center' ? 'center' : 'stretch',\n      justifyContent: justify === 'start' ? 'flex-start' :\n                     justify === 'end' ? 'flex-end' :\n                     justify === 'center' ? 'center' :\n                     justify === 'between' ? 'space-between' :\n                     justify === 'around' ? 'space-around' :\n                     justify === 'evenly' ? 'space-evenly' : 'flex-start',\n      gap: getResponsiveValue(spacing) || '1rem'\n    };\n    \n    return styles;\n  }, [direction, align, justify, spacing, getResponsiveValue]);\n\n  return (\n    <div className={`responsive-stack ${className}`} style={stackStyles}>\n      {children}\n    </div>\n  );\n};\n\n/**\n * Responsive aspect ratio component\n */\nexport const ResponsiveAspectRatio: React.FC<{\n  children: React.ReactNode;\n  ratio?: number | Partial<Record<BreakpointKey, number>>;\n  className?: string;\n}> = ({ children, ratio = 16/9, className = '' }) => {\n  const { getResponsiveValue } = useResponsiveDesign();\n  \n  const aspectRatioStyles = useMemo(() => {\n    const actualRatio = typeof ratio === 'number' \n      ? ratio \n      : getResponsiveValue(ratio) || 16/9;\n    \n    return {\n      position: 'relative' as const,\n      width: '100%',\n      paddingBottom: `${(1 / actualRatio) * 100}%`\n    };\n  }, [ratio, getResponsiveValue]);\n\n  return (\n    <div className={`responsive-aspect-ratio ${className}`} style={aspectRatioStyles}>\n      <div className=\"absolute inset-0\">\n        {children}\n      </div>\n    </div>\n  );\n};\n"],"file":"assets/index-CzTquisR.js"}