const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/HomePage--guHO31L.js","assets/router-ji7Lkway.js","assets/vendor-DRGAkOw0.js","assets/truck-CLaVScap.js","assets/ProductRecommendations-DiXyAXOw.js","assets/MobileProductCarousel-C3pRfQE8.js","assets/MobileTouchButton-C8zq9LKe.js","assets/chevron-left-C9hlcGbE.js","assets/arrow-right-DTC_1ZP5.js","assets/users-DYlva5Sj.js","assets/ProductCard-DISxUm5d.js","assets/SocialProof-qZkkTpQc.js","assets/TrustSignals-DhYlgKdg.js","assets/rotate-ccw-DHyFyuU3.js","assets/ProductDetails-CzrcZzSK.js","assets/percent-DEfUBgTS.js","assets/globe-juN_cdlp.js","assets/zap-d2V8dEVM.js","assets/ProductsPage-DTbpS5de.js","assets/funnel-DgqMlj7t.js","assets/ErrorFallback-BQ-PEhTW.js","assets/grid-3x3-7auf-lsj.js","assets/list-C_btKZ91.js","assets/ProductDetailPage-DCxSN5lY.js","assets/upload-C6HQKQk9.js","assets/Modal-DVXVptVo.js","assets/TrustBadges-By3Ep7SK.js","assets/credit-card-DOwGzToR.js","assets/square-pen-sypM05a8.js","assets/DashboardPage-DbNXhXpd.js","assets/trash-2-y9ynRNkh.js","assets/save-KH5sfU-R.js","assets/check-DKHHOl4H.js","assets/ProfilePage-BfIA-SPx.js","assets/camera-BBIGK9jQ.js","assets/CheckoutPage-Dwxa0h_o.js","assets/smartphone-CLjphsQ0.js","assets/SearchPage-VRq5_0fX.js","assets/WishlistPage-QRd0RV2e.js","assets/OrdersPage-D0h-RFwY.js","assets/ComparePage-DyIcQLu0.js","assets/NewArrivalsPage-CtLzazIo.js","assets/DealsPage-SBKkh1cc.js","assets/CategoriesPage-W-tHxpDN.js","assets/CollectionsPage-DNdwargc.js","assets/SettingsPage-CbFvWiMB.js","assets/AuthPage-XpgD4ZnT.js","assets/NotFoundPage-CMYa7g__.js"])))=>i.map(i=>d[i]);
var ng=Object.defineProperty;var sg=(t,e,r)=>e in t?ng(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r;var fe=(t,e,r)=>sg(t,typeof e!="symbol"?e+"":e,r);import{r as ig,a as og,b as ag,g as cg}from"./vendor-DRGAkOw0.js";import{r as E,a as lg,L as Ie,u as gi,b as Kd,R as Ae,B as ug,c as dg,d as _e}from"./router-ji7Lkway.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function r(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(s){if(s.ep)return;s.ep=!0;const i=r(s);fetch(s.href,i)}})();const hg="modulepreload",fg=function(t){return"/"+t},Qc={},de=function(e,r,n){let s=Promise.resolve();if(r&&r.length>0){let o=function(l){return Promise.all(l.map(u=>Promise.resolve(u).then(h=>({status:"fulfilled",value:h}),h=>({status:"rejected",reason:h}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));s=o(r.map(l=>{if(l=fg(l),l in Qc)return;Qc[l]=!0;const u=l.endsWith(".css"),h=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${h}`))return;const f=document.createElement("link");if(f.rel=u?"stylesheet":hg,u||(f.as="script"),f.crossOrigin="",f.href=l,c&&f.setAttribute("nonce",c),document.head.appendChild(f),u)return new Promise((p,m)=>{f.addEventListener("load",p),f.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${l}`)))})}))}function i(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return s.then(o=>{for(const a of o||[])a.status==="rejected"&&i(a.reason);return e().catch(i)})};var Mi={exports:{}},mn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zc;function pg(){if(Zc)return mn;Zc=1;var t=ig(),e=Symbol.for("react.element"),r=Symbol.for("react.fragment"),n=Object.prototype.hasOwnProperty,s=t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i={key:!0,ref:!0,__self:!0,__source:!0};function o(a,c,l){var u,h={},f=null,p=null;l!==void 0&&(f=""+l),c.key!==void 0&&(f=""+c.key),c.ref!==void 0&&(p=c.ref);for(u in c)n.call(c,u)&&!i.hasOwnProperty(u)&&(h[u]=c[u]);if(a&&a.defaultProps)for(u in c=a.defaultProps,c)h[u]===void 0&&(h[u]=c[u]);return{$$typeof:e,type:a,key:f,ref:p,props:h,_owner:s.current}}return mn.Fragment=r,mn.jsx=o,mn.jsxs=o,mn}var el;function mg(){return el||(el=1,Mi.exports=pg()),Mi.exports}var d=mg(),us={},tl;function gg(){if(tl)return us;tl=1;var t=og();return us.createRoot=t.createRoot,us.hydrateRoot=t.hydrateRoot,us}var yg=gg();const vg=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>de(async()=>{const{default:n}=await Promise.resolve().then(()=>Zr);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)};class Na extends Error{constructor(e,r="FunctionsError",n){super(e),this.name=r,this.context=n}}class wg extends Na{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class rl extends Na{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class nl extends Na{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Po;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Po||(Po={}));var bg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class _g{constructor(e,{headers:r={},customFetch:n,region:s=Po.Any}={}){this.url=e,this.headers=r,this.region=s,this.fetch=vg(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,r={}){var n;return bg(this,void 0,void 0,function*(){try{const{headers:s,method:i,body:o}=r;let a={},{region:c}=r;c||(c=this.region);const l=new URL(`${this.url}/${e}`);c&&c!=="any"&&(a["x-region"]=c,l.searchParams.set("forceFunctionRegion",c));let u;o&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(a["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(a["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(l.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:u}).catch(y=>{throw new wg(y)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new rl(h);if(!h.ok)throw new nl(h);let p=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),m;return p==="application/json"?m=yield h.json():p==="application/octet-stream"?m=yield h.blob():p==="text/event-stream"?m=h:p==="multipart/form-data"?m=yield h.formData():m=yield h.text(),{data:m,error:null,response:h}}catch(s){return{data:null,error:s,response:s instanceof nl||s instanceof rl?s.context:void 0}}})}}var je={},xr={},Sr={},Er={},Tr={},kr={},xg=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hr=xg();const Sg=Hr.fetch,Xd=Hr.fetch.bind(Hr),Jd=Hr.Headers,Eg=Hr.Request,Tg=Hr.Response,Zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Jd,Request:Eg,Response:Tg,default:Xd,fetch:Sg},Symbol.toStringTag,{value:"Module"})),kg=ag(Zr);var ds={},sl;function Yd(){if(sl)return ds;sl=1,Object.defineProperty(ds,"__esModule",{value:!0});class t extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return ds.default=t,ds}var il;function Qd(){if(il)return kr;il=1;var t=kr&&kr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(kr,"__esModule",{value:!0});const e=t(kg),r=t(Yd());class n{constructor(i){var o,a;this.shouldThrowOnError=!1,this.method=i.method,this.url=i.url,this.headers=new Headers(i.headers),this.schema=i.schema,this.body=i.body,this.shouldThrowOnError=(o=i.shouldThrowOnError)!==null&&o!==void 0?o:!1,this.signal=i.signal,this.isMaybeSingle=(a=i.isMaybeSingle)!==null&&a!==void 0?a:!1,i.fetch?this.fetch=i.fetch:typeof fetch>"u"?this.fetch=e.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(i,o){return this.headers=new Headers(this.headers),this.headers.set(i,o),this}then(i,o){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let c=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async l=>{var u,h,f,p;let m=null,y=null,x=null,S=l.status,_=l.statusText;if(l.ok){if(this.method!=="HEAD"){const g=await l.text();g===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((u=this.headers.get("Accept"))===null||u===void 0)&&u.includes("application/vnd.pgrst.plan+text"))?y=g:y=JSON.parse(g))}const w=(h=this.headers.get("Prefer"))===null||h===void 0?void 0:h.match(/count=(exact|planned|estimated)/),v=(f=l.headers.get("content-range"))===null||f===void 0?void 0:f.split("/");w&&v&&v.length>1&&(x=parseInt(v[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(y)&&(y.length>1?(m={code:"PGRST116",details:`Results contain ${y.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},y=null,x=null,S=406,_="Not Acceptable"):y.length===1?y=y[0]:y=null)}else{const w=await l.text();try{m=JSON.parse(w),Array.isArray(m)&&l.status===404&&(y=[],m=null,S=200,_="OK")}catch{l.status===404&&w===""?(S=204,_="No Content"):m={message:w}}if(m&&this.isMaybeSingle&&(!((p=m==null?void 0:m.details)===null||p===void 0)&&p.includes("0 rows"))&&(m=null,S=200,_="OK"),m&&this.shouldThrowOnError)throw new r.default(m)}return{error:m,data:y,count:x,status:S,statusText:_}});return this.shouldThrowOnError||(c=c.catch(l=>{var u,h,f;return{error:{message:`${(u=l==null?void 0:l.name)!==null&&u!==void 0?u:"FetchError"}: ${l==null?void 0:l.message}`,details:`${(h=l==null?void 0:l.stack)!==null&&h!==void 0?h:""}`,hint:"",code:`${(f=l==null?void 0:l.code)!==null&&f!==void 0?f:""}`},data:null,count:null,status:0,statusText:""}})),c.then(i,o)}returns(){return this}overrideTypes(){return this}}return kr.default=n,kr}var ol;function Zd(){if(ol)return Tr;ol=1;var t=Tr&&Tr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Tr,"__esModule",{value:!0});const e=t(Qd());class r extends e.default{select(s){let i=!1;const o=(s??"*").split("").map(a=>/\s/.test(a)&&!i?"":(a==='"'&&(i=!i),a)).join("");return this.url.searchParams.set("select",o),this.headers.append("Prefer","return=representation"),this}order(s,{ascending:i=!0,nullsFirst:o,foreignTable:a,referencedTable:c=a}={}){const l=c?`${c}.order`:"order",u=this.url.searchParams.get(l);return this.url.searchParams.set(l,`${u?`${u},`:""}${s}.${i?"asc":"desc"}${o===void 0?"":o?".nullsfirst":".nullslast"}`),this}limit(s,{foreignTable:i,referencedTable:o=i}={}){const a=typeof o>"u"?"limit":`${o}.limit`;return this.url.searchParams.set(a,`${s}`),this}range(s,i,{foreignTable:o,referencedTable:a=o}={}){const c=typeof a>"u"?"offset":`${a}.offset`,l=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(c,`${s}`),this.url.searchParams.set(l,`${i-s+1}`),this}abortSignal(s){return this.signal=s,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:s=!1,verbose:i=!1,settings:o=!1,buffers:a=!1,wal:c=!1,format:l="text"}={}){var u;const h=[s?"analyze":null,i?"verbose":null,o?"settings":null,a?"buffers":null,c?"wal":null].filter(Boolean).join("|"),f=(u=this.headers.get("Accept"))!==null&&u!==void 0?u:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${l}; for="${f}"; options=${h};`),l==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(s){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${s}`),this}}return Tr.default=r,Tr}var al;function Oa(){if(al)return Er;al=1;var t=Er&&Er.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Er,"__esModule",{value:!0});const e=t(Zd());class r extends e.default{eq(s,i){return this.url.searchParams.append(s,`eq.${i}`),this}neq(s,i){return this.url.searchParams.append(s,`neq.${i}`),this}gt(s,i){return this.url.searchParams.append(s,`gt.${i}`),this}gte(s,i){return this.url.searchParams.append(s,`gte.${i}`),this}lt(s,i){return this.url.searchParams.append(s,`lt.${i}`),this}lte(s,i){return this.url.searchParams.append(s,`lte.${i}`),this}like(s,i){return this.url.searchParams.append(s,`like.${i}`),this}likeAllOf(s,i){return this.url.searchParams.append(s,`like(all).{${i.join(",")}}`),this}likeAnyOf(s,i){return this.url.searchParams.append(s,`like(any).{${i.join(",")}}`),this}ilike(s,i){return this.url.searchParams.append(s,`ilike.${i}`),this}ilikeAllOf(s,i){return this.url.searchParams.append(s,`ilike(all).{${i.join(",")}}`),this}ilikeAnyOf(s,i){return this.url.searchParams.append(s,`ilike(any).{${i.join(",")}}`),this}is(s,i){return this.url.searchParams.append(s,`is.${i}`),this}in(s,i){const o=Array.from(new Set(i)).map(a=>typeof a=="string"&&new RegExp("[,()]").test(a)?`"${a}"`:`${a}`).join(",");return this.url.searchParams.append(s,`in.(${o})`),this}contains(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cs.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cs.{${i.join(",")}}`):this.url.searchParams.append(s,`cs.${JSON.stringify(i)}`),this}containedBy(s,i){return typeof i=="string"?this.url.searchParams.append(s,`cd.${i}`):Array.isArray(i)?this.url.searchParams.append(s,`cd.{${i.join(",")}}`):this.url.searchParams.append(s,`cd.${JSON.stringify(i)}`),this}rangeGt(s,i){return this.url.searchParams.append(s,`sr.${i}`),this}rangeGte(s,i){return this.url.searchParams.append(s,`nxl.${i}`),this}rangeLt(s,i){return this.url.searchParams.append(s,`sl.${i}`),this}rangeLte(s,i){return this.url.searchParams.append(s,`nxr.${i}`),this}rangeAdjacent(s,i){return this.url.searchParams.append(s,`adj.${i}`),this}overlaps(s,i){return typeof i=="string"?this.url.searchParams.append(s,`ov.${i}`):this.url.searchParams.append(s,`ov.{${i.join(",")}}`),this}textSearch(s,i,{config:o,type:a}={}){let c="";a==="plain"?c="pl":a==="phrase"?c="ph":a==="websearch"&&(c="w");const l=o===void 0?"":`(${o})`;return this.url.searchParams.append(s,`${c}fts${l}.${i}`),this}match(s){return Object.entries(s).forEach(([i,o])=>{this.url.searchParams.append(i,`eq.${o}`)}),this}not(s,i,o){return this.url.searchParams.append(s,`not.${i}.${o}`),this}or(s,{foreignTable:i,referencedTable:o=i}={}){const a=o?`${o}.or`:"or";return this.url.searchParams.append(a,`(${s})`),this}filter(s,i,o){return this.url.searchParams.append(s,`${i}.${o}`),this}}return Er.default=r,Er}var cl;function eh(){if(cl)return Sr;cl=1;var t=Sr&&Sr.__importDefault||function(n){return n&&n.__esModule?n:{default:n}};Object.defineProperty(Sr,"__esModule",{value:!0});const e=t(Oa());class r{constructor(s,{headers:i={},schema:o,fetch:a}){this.url=s,this.headers=new Headers(i),this.schema=o,this.fetch=a}select(s,{head:i=!1,count:o}={}){const a=i?"HEAD":"GET";let c=!1;const l=(s??"*").split("").map(u=>/\s/.test(u)&&!c?"":(u==='"'&&(c=!c),u)).join("");return this.url.searchParams.set("select",l),o&&this.headers.append("Prefer",`count=${o}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(s,{count:i,defaultToNull:o=!0}={}){var a;const c="POST";if(i&&this.headers.append("Prefer",`count=${i}`),o||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const l=s.reduce((u,h)=>u.concat(Object.keys(h)),[]);if(l.length>0){const u=[...new Set(l)].map(h=>`"${h}"`);this.url.searchParams.set("columns",u.join(","))}}return new e.default({method:c,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}upsert(s,{onConflict:i,ignoreDuplicates:o=!1,count:a,defaultToNull:c=!0}={}){var l;const u="POST";if(this.headers.append("Prefer",`resolution=${o?"ignore":"merge"}-duplicates`),i!==void 0&&this.url.searchParams.set("on_conflict",i),a&&this.headers.append("Prefer",`count=${a}`),c||this.headers.append("Prefer","missing=default"),Array.isArray(s)){const h=s.reduce((f,p)=>f.concat(Object.keys(p)),[]);if(h.length>0){const f=[...new Set(h)].map(p=>`"${p}"`);this.url.searchParams.set("columns",f.join(","))}}return new e.default({method:u,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}update(s,{count:i}={}){var o;const a="PATCH";return i&&this.headers.append("Prefer",`count=${i}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,body:s,fetch:(o=this.fetch)!==null&&o!==void 0?o:fetch})}delete({count:s}={}){var i;const o="DELETE";return s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:o,url:this.url,headers:this.headers,schema:this.schema,fetch:(i=this.fetch)!==null&&i!==void 0?i:fetch})}}return Sr.default=r,Sr}var ll;function jg(){if(ll)return xr;ll=1;var t=xr&&xr.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(xr,"__esModule",{value:!0});const e=t(eh()),r=t(Oa());class n{constructor(i,{headers:o={},schema:a,fetch:c}={}){this.url=i,this.headers=new Headers(o),this.schemaName=a,this.fetch=c}from(i){const o=new URL(`${this.url}/${i}`);return new e.default(o,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(i){return new n(this.url,{headers:this.headers,schema:i,fetch:this.fetch})}rpc(i,o={},{head:a=!1,get:c=!1,count:l}={}){var u;let h;const f=new URL(`${this.url}/rpc/${i}`);let p;a||c?(h=a?"HEAD":"GET",Object.entries(o).filter(([y,x])=>x!==void 0).map(([y,x])=>[y,Array.isArray(x)?`{${x.join(",")}}`:`${x}`]).forEach(([y,x])=>{f.searchParams.append(y,x)})):(h="POST",p=o);const m=new Headers(this.headers);return l&&m.set("Prefer",`count=${l}`),new r.default({method:h,url:f,headers:m,schema:this.schemaName,body:p,fetch:(u=this.fetch)!==null&&u!==void 0?u:fetch})}}return xr.default=n,xr}var ul;function Ag(){if(ul)return je;ul=1;var t=je&&je.__importDefault||function(a){return a&&a.__esModule?a:{default:a}};Object.defineProperty(je,"__esModule",{value:!0}),je.PostgrestError=je.PostgrestBuilder=je.PostgrestTransformBuilder=je.PostgrestFilterBuilder=je.PostgrestQueryBuilder=je.PostgrestClient=void 0;const e=t(jg());je.PostgrestClient=e.default;const r=t(eh());je.PostgrestQueryBuilder=r.default;const n=t(Oa());je.PostgrestFilterBuilder=n.default;const s=t(Zd());je.PostgrestTransformBuilder=s.default;const i=t(Qd());je.PostgrestBuilder=i.default;const o=t(Yd());return je.PostgrestError=o.default,je.default={PostgrestClient:e.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:i.default,PostgrestError:o.default},je}var Pg=Ag();const Cg=cg(Pg),{PostgrestClient:Rg,PostgrestQueryBuilder:HC,PostgrestFilterBuilder:zC,PostgrestTransformBuilder:WC,PostgrestBuilder:GC,PostgrestError:KC}=Cg;class Ig{static detectEnvironment(){var e;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((e=navigator.userAgent)===null||e===void 0)&&e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const n=r.node,s=parseInt(n.replace(/^v/,"").split(".")[0]);return s>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${s} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${s} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let r=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(r+=`

Suggested solution: ${e.workaround}`),new Error(r)}static createWebSocket(e,r){const n=this.getWebSocketConstructor();return new n(e,r)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return e.type==="native"||e.type==="ws"}catch{return!1}}}const Ng="2.15.5",Og=`realtime-js/${Ng}`,Dg="1.0.0",Co=1e4,Lg=1e3,Mg=100;var bn;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(bn||(bn={}));var xe;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(xe||(xe={}));var it;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(it||(it={}));var Ro;(function(t){t.websocket="websocket"})(Ro||(Ro={}));var rr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rr||(rr={}));class Fg{constructor(){this.HEADER_LENGTH=1}decode(e,r){return e.constructor===ArrayBuffer?r(this._binaryDecode(e)):r(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const r=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,r,n)}_decodeBroadcast(e,r,n){const s=r.getUint8(1),i=r.getUint8(2);let o=this.HEADER_LENGTH+2;const a=n.decode(e.slice(o,o+s));o=o+s;const c=n.decode(e.slice(o,o+i));o=o+i;const l=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:a,event:c,payload:l}}}class th{constructor(e,r){this.callback=e,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var le;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(le||(le={}));const dl=(t,e,r={})=>{var n;const s=(n=r.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=$g(o,t,e,s),i),{})},$g=(t,e,r,n)=>{const s=e.find(a=>a.name===t),i=s==null?void 0:s.type,o=r[t];return i&&!n.includes(i)?rh(i,o):Io(o)},rh=(t,e)=>{if(t.charAt(0)==="_"){const r=t.slice(1,t.length);return qg(e,r)}switch(t){case le.bool:return Ug(e);case le.float4:case le.float8:case le.int2:case le.int4:case le.int8:case le.numeric:case le.oid:return Bg(e);case le.json:case le.jsonb:return Vg(e);case le.timestamp:return Hg(e);case le.abstime:case le.date:case le.daterange:case le.int4range:case le.int8range:case le.money:case le.reltime:case le.text:case le.time:case le.timestamptz:case le.timetz:case le.tsrange:case le.tstzrange:return Io(e);default:return Io(e)}},Io=t=>t,Ug=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},Bg=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},Vg=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},qg=(t,e)=>{if(typeof t!="string")return t;const r=t.length-1,n=t[r];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,r);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(a=>rh(e,a))}return t},Hg=t=>typeof t=="string"?t.replace(" ","T"):t,nh=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")+"/api/broadcast"};class Fi{constructor(e,r,n={},s=Co){this.channel=e,this.event=r,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,r){var n;return this._hasReceived(e)&&r((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:r}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(r))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var hl;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(hl||(hl={}));class _n{constructor(e,r){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.joinRef=this.channel._joinRef(),this.state=_n.syncState(this.state,s,i,o),this.pendingDiffs.forEach(c=>{this.state=_n.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],a()}),this.channel._on(n.diff,{},s=>{const{onJoin:i,onLeave:o,onSync:a}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(s):(this.state=_n.syncDiff(this.state,s,i,o),a())}),this.onJoin((s,i,o)=>{this.channel._trigger("presence",{event:"join",key:s,currentPresences:i,newPresences:o})}),this.onLeave((s,i,o)=>{this.channel._trigger("presence",{event:"leave",key:s,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,r,n,s){const i=this.cloneDeep(e),o=this.transformState(r),a={},c={};return this.map(i,(l,u)=>{o[l]||(c[l]=u)}),this.map(o,(l,u)=>{const h=i[l];if(h){const f=u.map(x=>x.presence_ref),p=h.map(x=>x.presence_ref),m=u.filter(x=>p.indexOf(x.presence_ref)<0),y=h.filter(x=>f.indexOf(x.presence_ref)<0);m.length>0&&(a[l]=m),y.length>0&&(c[l]=y)}else a[l]=u}),this.syncDiff(i,{joins:a,leaves:c},n,s)}static syncDiff(e,r,n,s){const{joins:i,leaves:o}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(i,(a,c)=>{var l;const u=(l=e[a])!==null&&l!==void 0?l:[];if(e[a]=this.cloneDeep(c),u.length>0){const h=e[a].map(p=>p.presence_ref),f=u.filter(p=>h.indexOf(p.presence_ref)<0);e[a].unshift(...f)}n(a,u,c)}),this.map(o,(a,c)=>{let l=e[a];if(!l)return;const u=c.map(h=>h.presence_ref);l=l.filter(h=>u.indexOf(h.presence_ref)<0),e[a]=l,s(a,l,c),l.length===0&&delete e[a]}),e}static map(e,r){return Object.getOwnPropertyNames(e).map(n=>r(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((r,n)=>{const s=e[n];return"metas"in s?r[n]=s.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):r[n]=s,r},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var fl;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(fl||(fl={}));var xn;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(xn||(xn={}));var yt;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(yt||(yt={}));class Da{constructor(e,r={config:{}},n){this.topic=e,this.params=r,this.socket=n,this.bindings={},this.state=xe.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new Fi(this,it.join,this.params,this.timeout),this.rejoinTimer=new th(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=xe.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(s=>s.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=xe.closed,this.socket._remove(this)}),this._onError(s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",s=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,s),this.state=xe.errored,this.rejoinTimer.scheduleTimeout())}),this._on(it.reply,{},(s,i)=>{this._trigger(this._replyEventName(i),s)}),this.presence=new _n(this),this.broadcastEndpointURL=nh(this.socket.endPoint),this.private=this.params.config.private||!1}subscribe(e,r=this.timeout){var n,s,i;if(this.socket.isConnected()||this.socket.connect(),this.state==xe.closed){const{config:{broadcast:o,presence:a,private:c}}=this.params,l=(s=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(p=>p.filter))!==null&&s!==void 0?s:[],u=!!this.bindings[xn.PRESENCE]&&this.bindings[xn.PRESENCE].length>0||((i=this.params.config.presence)===null||i===void 0?void 0:i.enabled)===!0,h={},f={broadcast:o,presence:Object.assign(Object.assign({},a),{enabled:u}),postgres_changes:l,private:c};this.socket.accessTokenValue&&(h.access_token=this.socket.accessTokenValue),this._onError(p=>e==null?void 0:e(yt.CHANNEL_ERROR,p)),this._onClose(()=>e==null?void 0:e(yt.CLOSED)),this.updateJoinPayload(Object.assign({config:f},h)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:p})=>{var m;if(this.socket.setAuth(),p===void 0){e==null||e(yt.SUBSCRIBED);return}else{const y=this.bindings.postgres_changes,x=(m=y==null?void 0:y.length)!==null&&m!==void 0?m:0,S=[];for(let _=0;_<x;_++){const b=y[_],{filter:{event:w,schema:v,table:g,filter:k}}=b,T=p&&p[_];if(T&&T.event===w&&T.schema===v&&T.table===g&&T.filter===k)S.push(Object.assign(Object.assign({},b),{id:T.id}));else{this.unsubscribe(),this.state=xe.errored,e==null||e(yt.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=S,e&&e(yt.SUBSCRIBED);return}}).receive("error",p=>{this.state=xe.errored,e==null||e(yt.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(p).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(yt.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,r={}){return await this.send({type:"presence",event:"track",payload:e},r.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,r,n){return this.state===xe.joined&&e===xn.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,r,n)}async send(e,r={}){var n,s;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const l=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=r.timeout)!==null&&n!==void 0?n:this.timeout);return await((s=l.body)===null||s===void 0?void 0:s.cancel()),l.ok?"ok":"error"}catch(l){return l.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,a,c;const l=this._push(e.type,e,r.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(a=(o=this.params)===null||o===void 0?void 0:o.config)===null||a===void 0?void 0:a.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),l.receive("ok",()=>i("ok")),l.receive("error",()=>i("error")),l.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=xe.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(it.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Fi(this,it.leave,{},e),n.receive("ok",()=>{r(),s("ok")}).receive("timeout",()=>{r(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=xe.closed,this.bindings={}}async _fetchWithTimeout(e,r,n){const s=new AbortController,i=setTimeout(()=>s.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},r),{signal:s.signal}));return clearTimeout(i),o}_push(e,r,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Fi(this,e,r,n);return this._canPush()?s.send():this._addToPushBuffer(s),s}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>Mg){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(e,r,n){return r}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,r,n){var s,i;const o=e.toLocaleLowerCase(),{close:a,error:c,leave:l,join:u}=it;if(n&&[a,c,l,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,r,n);if(r&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(s=this.bindings.postgres_changes)===null||s===void 0||s.filter(p=>{var m,y,x;return((m=p.filter)===null||m===void 0?void 0:m.event)==="*"||((x=(y=p.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(p=>p.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(p=>{var m,y,x,S,_,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in p){const w=p.id,v=(m=p.filter)===null||m===void 0?void 0:m.event;return w&&((y=r.ids)===null||y===void 0?void 0:y.includes(w))&&(v==="*"||(v==null?void 0:v.toLocaleLowerCase())===((x=r.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const w=(_=(S=p==null?void 0:p.filter)===null||S===void 0?void 0:S.event)===null||_===void 0?void 0:_.toLocaleLowerCase();return w==="*"||w===((b=r==null?void 0:r.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return p.type.toLocaleLowerCase()===o}).map(p=>{if(typeof f=="object"&&"ids"in f){const m=f.data,{schema:y,table:x,commit_timestamp:S,type:_,errors:b}=m;f=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:S,eventType:_,new:{},old:{},errors:b}),this._getPayloadRecords(m))}p.callback(f,n)})}_isClosed(){return this.state===xe.closed}_isJoined(){return this.state===xe.joined}_isJoining(){return this.state===xe.joining}_isLeaving(){return this.state===xe.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,r,n){const s=e.toLocaleLowerCase(),i={type:s,filter:r,callback:n};return this.bindings[s]?this.bindings[s].push(i):this.bindings[s]=[i],this}_off(e,r){const n=e.toLocaleLowerCase();return this.bindings[n]&&(this.bindings[n]=this.bindings[n].filter(s=>{var i;return!(((i=s.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Da.isEqual(s.filter,r))})),this}static isEqual(e,r){if(Object.keys(e).length!==Object.keys(r).length)return!1;for(const n in e)if(e[n]!==r[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(it.close,{},e)}_onError(e){this._on(it.error,{},r=>e(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=xe.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const r={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(r.new=dl(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(r.old=dl(e.columns,e.old_record)),r}}const $i=()=>{},hs={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},zg=[1e3,2e3,5e3,1e4],Wg=1e4,Gg=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class Kg{constructor(e,r){var n;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Co,this.transport=null,this.heartbeatIntervalMs=hs.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=$i,this.ref=0,this.reconnectTimer=null,this.logger=$i,this.conn=null,this.sendBuffer=[],this.serializer=new Fg,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=s=>{let i;return s?i=s:typeof fetch>"u"?i=(...o)=>de(async()=>{const{default:a}=await Promise.resolve().then(()=>Zr);return{default:a}},void 0).then(({default:a})=>a(...o)).catch(a=>{throw new Error(`Failed to load @supabase/node-fetch: ${a.message}. This is required for HTTP requests in Node.js environments without native fetch.`)}):i=fetch,(...o)=>i(...o)},!(!((n=r==null?void 0:r.params)===null||n===void 0)&&n.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${e}/${Ro.websocket}`,this.httpEndpoint=nh(e),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=Ig.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const r=e.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:Dg}))}disconnect(e,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const n=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(n),this._setConnectionState("disconnected")},e?this.conn.close(e,r??""):this.conn.close(),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const r=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const e=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,r,n){this.logger(e,r,n)}connectionState(){switch(this.conn&&this.conn.readyState){case bn.connecting:return rr.Connecting;case bn.open:return rr.Open;case bn.closing:return rr.Closing;default:return rr.Closed}}isConnected(){return this.connectionState()===rr.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(e,r={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(i=>i.topic===n);if(s)return s;{const i=new Da(`realtime:${e}`,r,this);return this.channels.push(i),i}}push(e){const{topic:r,event:n,payload:s,ref:i}=e,o=()=>{this.encode(e,a=>{var c;(c=this.conn)===null||c===void 0||c.send(a)})};this.log("push",`${r} ${n} (${i})`,s),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(e=this.conn)===null||e===void 0||e.close(Lg,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},hs.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let r=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${e}"`),r.unsubscribe())}_remove(e){this.channels=this.channels.filter(r=>r.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(l){this.log("error","error in heartbeat callback",l)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:n,event:s,payload:i,ref:o}=r,a=o?`(${o})`:"",c=i.status||"";this.log("receive",`${c} ${n} ${s} ${a}`.trim(),i),this.channels.filter(l=>l._isMember(n)).forEach(l=>l._trigger(s,i,o)),this._triggerStateCallbacks("message",r)})}_clearTimer(e){var r;e==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):e==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){this.conn&&(this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null),this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var r;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(it.error))}_appendParams(e,r){if(Object.keys(r).length===0)return e;const n=e.match(/\?/)?"&":"?",s=new URLSearchParams(r);return`${e}${n}${s}`}_workerObjectUrl(e){let r;if(e)r=e;else{const n=new Blob([Gg],{type:"application/javascript"});r=URL.createObjectURL(n)}return r}_setConnectionState(e,r=!1){this._connectionState=e,e==="connecting"?this._wasManualDisconnect=!1:e==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(e=null){let r;e?r=e:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(n=>{const s={access_token:r,version:Og};r&&n.updateJoinPayload(s),n.joinedOnce&&n._isJoined()&&n._push(it.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${e}`,r)})}_triggerStateCallbacks(e,r){try{this.stateChangeCallbacks[e].forEach(n=>{try{n(r)}catch(s){this.log("error",`error in ${e} callback`,s)}})}catch(n){this.log("error",`error triggering ${e} callbacks`,n)}}_setupReconnectionTimer(){this.reconnectTimer=new th(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},hs.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(e){var r,n,s,i,o,a,c,l,u;if(this.transport=(r=e==null?void 0:e.transport)!==null&&r!==void 0?r:null,this.timeout=(n=e==null?void 0:e.timeout)!==null&&n!==void 0?n:Co,this.heartbeatIntervalMs=(s=e==null?void 0:e.heartbeatIntervalMs)!==null&&s!==void 0?s:hs.HEARTBEAT_INTERVAL,this.worker=(i=e==null?void 0:e.worker)!==null&&i!==void 0?i:!1,this.accessToken=(o=e==null?void 0:e.accessToken)!==null&&o!==void 0?o:null,this.heartbeatCallback=(a=e==null?void 0:e.heartbeatCallback)!==null&&a!==void 0?a:$i,e!=null&&e.params&&(this.params=e.params),e!=null&&e.logger&&(this.logger=e.logger),(e!=null&&e.logLevel||e!=null&&e.log_level)&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(c=e==null?void 0:e.reconnectAfterMs)!==null&&c!==void 0?c:(h=>zg[h-1]||Wg),this.encode=(l=e==null?void 0:e.encode)!==null&&l!==void 0?l:((h,f)=>f(JSON.stringify(h))),this.decode=(u=e==null?void 0:e.decode)!==null&&u!==void 0?u:this.serializer.decode.bind(this.serializer),this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=e==null?void 0:e.workerUrl}}}class La extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Se(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class Xg extends La{constructor(e,r,n){super(e),this.name="StorageApiError",this.status=r,this.statusCode=n}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class No extends La{constructor(e,r){super(e),this.name="StorageUnknownError",this.originalError=r}}var Jg=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const sh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>de(async()=>{const{default:n}=await Promise.resolve().then(()=>Zr);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},Yg=()=>Jg(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield de(()=>Promise.resolve().then(()=>Zr),void 0)).Response:Response}),Oo=t=>{if(Array.isArray(t))return t.map(r=>Oo(r));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([r,n])=>{const s=r.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[s]=Oo(n)}),e},Qg=t=>{if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)};var yr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const Ui=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),Zg=(t,e,r)=>yr(void 0,void 0,void 0,function*(){const n=yield Yg();t instanceof n&&!(r!=null&&r.noResolveJson)?t.json().then(s=>{const i=t.status||500,o=(s==null?void 0:s.statusCode)||i+"";e(new Xg(Ui(s),i,o))}).catch(s=>{e(new No(Ui(s),s))}):e(new No(Ui(t),t))}),ey=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"||!n?s:(Qg(n)?(s.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),s.body=JSON.stringify(n)):s.body=n,e!=null&&e.duplex&&(s.duplex=e.duplex),Object.assign(Object.assign({},s),r))};function Wn(t,e,r,n,s,i){return yr(this,void 0,void 0,function*(){return new Promise((o,a)=>{t(r,ey(e,n,s,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>Zg(c,a,n))})})}function Gs(t,e,r,n){return yr(this,void 0,void 0,function*(){return Wn(t,"GET",e,r,n)})}function ct(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return Wn(t,"POST",e,n,s,r)})}function Do(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return Wn(t,"PUT",e,n,s,r)})}function ty(t,e,r,n){return yr(this,void 0,void 0,function*(){return Wn(t,"HEAD",e,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}function ih(t,e,r,n,s){return yr(this,void 0,void 0,function*(){return Wn(t,"DELETE",e,n,s,r)})}var De=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const ry={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},pl={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class ny{constructor(e,r={},n,s){this.shouldThrowOnError=!1,this.url=e,this.headers=r,this.bucketId=n,this.fetch=sh(s)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,r,n,s){return De(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},pl),s);let a=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,a["cache-control"]=`max-age=${o.cacheControl}`,a["content-type"]=o.contentType,c&&(a["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),s!=null&&s.headers&&(a=Object.assign(Object.assign({},a),s.headers));const l=this._removeEmptyFolders(r),u=this._getFinalPath(l),h=yield(e=="PUT"?Do:ct)(this.fetch,`${this.url}/object/${u}`,i,Object.assign({headers:a},o!=null&&o.duplex?{duplex:o.duplex}:{}));return{data:{path:l,id:h.Id,fullPath:h.Key},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(Se(i))return{data:null,error:i};throw i}})}upload(e,r,n){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,r,n)})}uploadToSignedUrl(e,r,n,s){return De(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),a=new URL(this.url+`/object/upload/sign/${o}`);a.searchParams.set("token",r);try{let c;const l=Object.assign({upsert:pl.upsert},s),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(l.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",l.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",l.cacheControl)):(c=n,u["cache-control"]=`max-age=${l.cacheControl}`,u["content-type"]=l.contentType);const h=yield Do(this.fetch,a.toString(),c,{headers:u});return{data:{path:i,fullPath:h.Key},error:null}}catch(c){if(this.shouldThrowOnError)throw c;if(Se(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,r){return De(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);r!=null&&r.upsert&&(s["x-upsert"]="true");const i=yield ct(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),o=new URL(this.url+i.url),a=o.searchParams.get("token");if(!a)throw new La("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:a},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}update(e,r,n){return De(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,r,n)})}move(e,r,n){return De(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Se(s))return{data:null,error:s};throw s}})}copy(e,r,n){return De(this,void 0,void 0,function*(){try{return{data:{path:(yield ct(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:r,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Se(s))return{data:null,error:s};throw s}})}createSignedUrl(e,r,n){return De(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),i=yield ct(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:r},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Se(s))return{data:null,error:s};throw s}})}createSignedUrls(e,r,n){return De(this,void 0,void 0,function*(){try{const s=yield ct(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:s.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Se(s))return{data:null,error:s};throw s}})}download(e,r){return De(this,void 0,void 0,function*(){const s=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),o=i?`?${i}`:"";try{const a=this._getFinalPath(e);return{data:yield(yield Gs(this.fetch,`${this.url}/${s}/${a}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(a){if(this.shouldThrowOnError)throw a;if(Se(a))return{data:null,error:a};throw a}})}info(e){return De(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{const n=yield Gs(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:Oo(n),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}exists(e){return De(this,void 0,void 0,function*(){const r=this._getFinalPath(e);try{return yield ty(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n)&&n instanceof No){const s=n.originalError;if([400,404].includes(s==null?void 0:s.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,r){const n=this._getFinalPath(e),s=[],i=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";i!==""&&s.push(i);const a=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});c!==""&&s.push(c);let l=s.join("&");return l!==""&&(l=`?${l}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${n}${l}`)}}}remove(e){return De(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}list(e,r,n){return De(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},ry),r),{prefix:e||""});return{data:yield ct(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(Se(s))return{data:null,error:s};throw s}})}listV2(e,r){return De(this,void 0,void 0,function*(){try{const n=Object.assign({},e);return{data:yield ct(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const r=[];return e.width&&r.push(`width=${e.width}`),e.height&&r.push(`height=${e.height}`),e.resize&&r.push(`resize=${e.resize}`),e.format&&r.push(`format=${e.format}`),e.quality&&r.push(`quality=${e.quality}`),r.join("&")}}const sy="2.12.1",iy={"X-Client-Info":`storage-js/${sy}`};var jr=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class oy{constructor(e,r={},n,s){this.shouldThrowOnError=!1;const i=new URL(e);s!=null&&s.useNewHostname&&/supabase\.(co|in|red)$/.test(i.hostname)&&!i.hostname.includes("storage.supabase.")&&(i.hostname=i.hostname.replace("supabase.","storage.supabase.")),this.url=i.href,this.headers=Object.assign(Object.assign({},iy),r),this.fetch=sh(n)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(){return jr(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(Se(e))return{data:null,error:e};throw e}})}getBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield Gs(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}createBucket(e,r={public:!1}){return jr(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:r.type,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}updateBucket(e,r){return jr(this,void 0,void 0,function*(){try{return{data:yield Do(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(Se(n))return{data:null,error:n};throw n}})}emptyBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield ct(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}deleteBucket(e){return jr(this,void 0,void 0,function*(){try{return{data:yield ih(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Se(r))return{data:null,error:r};throw r}})}}class ay extends oy{constructor(e,r={},n,s){super(e,r,n,s)}from(e){return new ny(this.url,this.headers,e,this.fetch)}}const cy="2.57.4";let vn="";typeof Deno<"u"?vn="deno":typeof document<"u"?vn="web":typeof navigator<"u"&&navigator.product==="ReactNative"?vn="react-native":vn="node";const ly={"X-Client-Info":`supabase-js-${vn}/${cy}`},uy={headers:ly},dy={schema:"public"},hy={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},fy={};var py=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};const my=t=>{let e;return t?e=t:typeof fetch>"u"?e=Xd:e=fetch,(...r)=>e(...r)},gy=()=>typeof Headers>"u"?Jd:Headers,yy=(t,e,r)=>{const n=my(r),s=gy();return(i,o)=>py(void 0,void 0,void 0,function*(){var a;const c=(a=yield e())!==null&&a!==void 0?a:t;let l=new s(o==null?void 0:o.headers);return l.has("apikey")||l.set("apikey",t),l.has("Authorization")||l.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:l}))})};var vy=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};function wy(t){return t.endsWith("/")?t:t+"/"}function by(t,e){var r,n;const{db:s,auth:i,realtime:o,global:a}=t,{db:c,auth:l,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),s),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),storage:{},global:Object.assign(Object.assign(Object.assign({},h),a),{headers:Object.assign(Object.assign({},(r=h==null?void 0:h.headers)!==null&&r!==void 0?r:{}),(n=a==null?void 0:a.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>vy(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}function _y(t){const e=t==null?void 0:t.trim();if(!e)throw new Error("supabaseUrl is required.");if(!e.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(wy(e))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const oh="2.71.1",Nr=30*1e3,Lo=3,Bi=Lo*Nr,xy="http://localhost:9999",Sy="supabase.auth.token",Ey={"X-Client-Info":`gotrue-js/${oh}`},Mo="X-Supabase-Api-Version",ah={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Ty=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,ky=600*1e3;class Ma extends Error{constructor(e,r,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=n}}function Z(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class jy extends Ma{constructor(e,r,n){super(e,r,n),this.name="AuthApiError",this.status=r,this.code=n}}function Ay(t){return Z(t)&&t.name==="AuthApiError"}class ch extends Ma{constructor(e,r){super(e),this.name="AuthUnknownError",this.originalError=r}}class zt extends Ma{constructor(e,r,n,s){super(e,n,s),this.name=r,this.status=n}}class Pt extends zt{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Py(t){return Z(t)&&t.name==="AuthSessionMissingError"}class fs extends zt{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ps extends zt{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ms extends zt{constructor(e,r=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function Cy(t){return Z(t)&&t.name==="AuthImplicitGrantRedirectError"}class ml extends zt{constructor(e,r=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Fo extends zt{constructor(e,r){super(e,"AuthRetryableFetchError",r,void 0)}}function Vi(t){return Z(t)&&t.name==="AuthRetryableFetchError"}class gl extends zt{constructor(e,r,n){super(e,"AuthWeakPasswordError",r,"weak_password"),this.reasons=n}}class $o extends zt{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ks="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),yl=` 	
\r=`.split(""),Ry=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<yl.length;e+=1)t[yl[e].charCodeAt(0)]=-2;for(let e=0;e<Ks.length;e+=1)t[Ks[e].charCodeAt(0)]=e;return t})();function vl(t,e,r){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ks[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;r(Ks[n]),e.queuedBits-=6}}function lh(t,e,r){const n=Ry[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)r(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function wl(t){const e=[],r=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},i=o=>{Oy(o,n,r)};for(let o=0;o<t.length;o+=1)lh(t.charCodeAt(o),s,i);return e.join("")}function Iy(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Ny(t,e){for(let r=0;r<t.length;r+=1){let n=t.charCodeAt(r);if(n>55295&&n<=56319){const s=(n-55296)*1024&65535;n=(t.charCodeAt(r+1)-56320&65535|s)+65536,r+=1}Iy(n,e)}}function Oy(t,e,r){if(e.utf8seq===0){if(t<=127){r(t);return}for(let n=1;n<6;n+=1)if((t>>7-n&1)===0){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&r(e.codepoint)}}function Dy(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};for(let s=0;s<t.length;s+=1)lh(t.charCodeAt(s),r,n);return new Uint8Array(e)}function Ly(t){const e=[];return Ny(t,r=>e.push(r)),new Uint8Array(e)}function My(t){const e=[],r={queue:0,queuedBits:0},n=s=>{e.push(s)};return t.forEach(s=>vl(s,r,n)),vl(null,r,n),e.join("")}function Fy(t){return Math.round(Date.now()/1e3)+t}function $y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const nt=()=>typeof window<"u"&&typeof document<"u",Jt={tested:!1,writable:!1},uh=()=>{if(!nt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jt.tested)return Jt.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Jt.tested=!0,Jt.writable=!0}catch{Jt.tested=!0,Jt.writable=!1}return Jt.writable};function Uy(t){const e={},r=new URL(t);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((s,i)=>{e[i]=s})}catch{}return r.searchParams.forEach((n,s)=>{e[s]=n}),e}const dh=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...r)=>de(async()=>{const{default:n}=await Promise.resolve().then(()=>Zr);return{default:n}},void 0).then(({default:n})=>n(...r)):e=fetch,(...r)=>e(...r)},By=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Or=async(t,e,r)=>{await t.setItem(e,JSON.stringify(r))},Yt=async(t,e)=>{const r=await t.getItem(e);if(!r)return null;try{return JSON.parse(r)}catch{return r}},At=async(t,e)=>{await t.removeItem(e)};class yi{constructor(){this.promise=new yi.promiseConstructor((e,r)=>{this.resolve=e,this.reject=r})}}yi.promiseConstructor=Promise;function qi(t){const e=t.split(".");if(e.length!==3)throw new $o("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Ty.test(e[n]))throw new $o("JWT not in base64url format");return{header:JSON.parse(wl(e[0])),payload:JSON.parse(wl(e[1])),signature:Dy(e[2]),raw:{header:e[0],payload:e[1]}}}async function Vy(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function qy(t,e){return new Promise((n,s)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){s(o);return}}})()})}function Hy(t){return("0"+t.toString(16)).substr(-2)}function zy(){const e=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=r.length;let s="";for(let i=0;i<56;i++)s+=r.charAt(Math.floor(Math.random()*n));return s}return crypto.getRandomValues(e),Array.from(e,Hy).join("")}async function Wy(t){const r=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",r),s=new Uint8Array(n);return Array.from(s).map(i=>String.fromCharCode(i)).join("")}async function Gy(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const r=await Wy(t);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ar(t,e,r=!1){const n=zy();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Or(t,`${e}-code-verifier`,s);const i=await Gy(n);return[i,n===i?"plain":"s256"]}const Ky=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function Xy(t){const e=t.headers.get(Mo);if(!e||!e.match(Ky))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function Jy(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function Yy(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const Qy=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Pr(t){if(!Qy.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function Hi(){const t={};return new Proxy(t,{get:(e,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const n=r.toString();if(n==="Symbol(Symbol.toPrimitive)"||n==="Symbol(Symbol.toStringTag)"||n==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function bl(t){return JSON.parse(JSON.stringify(t))}var Zy=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};const Zt=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),e0=[502,503,504];async function _l(t){var e;if(!By(t))throw new Fo(Zt(t),0);if(e0.includes(t.status))throw new Fo(Zt(t),t.status);let r;try{r=await t.json()}catch(i){throw new ch(Zt(i),i)}let n;const s=Xy(t);if(s&&s.getTime()>=ah["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?n=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(n=r.error_code),n){if(n==="weak_password")throw new gl(Zt(r),t.status,((e=r.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Pt}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new gl(Zt(r),t.status,r.weak_password.reasons);throw new jy(Zt(r),t.status||500,n)}const t0=(t,e,r,n)=>{const s={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))};async function ee(t,e,r,n){var s;const i=Object.assign({},n==null?void 0:n.headers);i[Mo]||(i[Mo]=ah["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(s=n==null?void 0:n.query)!==null&&s!==void 0?s:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await r0(t,e,r+a,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function r0(t,e,r,n,s,i){const o=t0(e,n,s,i);let a;try{a=await t(r,Object.assign({},o))}catch(c){throw console.error(c),new Fo(Zt(c),0)}if(a.ok||await _l(a),n!=null&&n.noResolveJson)return a;try{return await a.json()}catch(c){await _l(c)}}function gt(t){var e;let r=null;o0(t)&&(r=Object.assign({},t),t.expires_at||(r.expires_at=Fy(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:r,user:n},error:null}}function xl(t){const e=gt(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((r,n)=>r&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function It(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function n0(t){return{data:t,error:null}}function s0(t){const{action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i}=t,o=Zy(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),a={action_link:e,email_otp:r,hashed_token:n,redirect_to:s,verification_type:i},c=Object.assign({},o);return{data:{properties:a,user:c},error:null}}function i0(t){return t}function o0(t){return t.access_token&&t.refresh_token&&t.expires_in}const zi=["global","local","others"];var a0=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,n=Object.getOwnPropertySymbols(t);s<n.length;s++)e.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(t,n[s])&&(r[n[s]]=t[n[s]]);return r};class c0{constructor({url:e="",headers:r={},fetch:n}){this.url=e,this.headers=r,this.fetch=dh(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,r=zi[0]){if(zi.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${zi.join(", ")}`);try{return await ee(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,r={}){try{return await ee(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:It})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:r}=e,n=a0(e,["options"]),s=Object.assign(Object.assign({},n),r);return"newEmail"in n&&(s.new_email=n==null?void 0:n.newEmail,delete s.newEmail),await ee(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:s0,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(Z(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(e){try{return await ee(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:It})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async listUsers(e){var r,n,s,i,o,a,c;try{const l={nextPage:null,lastPage:0,total:0},u=await ee(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(r=e==null?void 0:e.page)===null||r===void 0?void 0:r.toString())!==null&&n!==void 0?n:"",per_page:(i=(s=e==null?void 0:e.perPage)===null||s===void 0?void 0:s.toString())!==null&&i!==void 0?i:""},xform:i0});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,p=(c=(a=u.headers.get("link"))===null||a===void 0?void 0:a.split(","))!==null&&c!==void 0?c:[];return p.length>0&&(p.forEach(m=>{const y=parseInt(m.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(m.split(";")[1].split("=")[1]);l[`${x}Page`]=y}),l.total=parseInt(f)),{data:Object.assign(Object.assign({},h),l),error:null}}catch(l){if(Z(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){Pr(e);try{return await ee(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:It})}catch(r){if(Z(r))return{data:{user:null},error:r};throw r}}async updateUserById(e,r){Pr(e);try{return await ee(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:r,headers:this.headers,xform:It})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,r=!1){Pr(e);try{return await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:r},xform:It})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Pr(e.userId);try{const{data:r,error:n}=await ee(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:s=>({data:{factors:s},error:null})});return{data:r,error:n}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _deleteFactor(e){Pr(e.userId),Pr(e.id);try{return{data:await ee(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}}function Sl(t={}){return{getItem:e=>t[e]||null,setItem:(e,r)=>{t[e]=r},removeItem:e=>{delete t[e]}}}function l0(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Cr={debug:!!(globalThis&&uh()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class hh extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class u0 extends hh{}async function d0(t,e,r){Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async s=>{if(s){Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,s.name);try{return await r()}finally{Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,s.name)}}else{if(e===0)throw Cr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new u0(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Cr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}l0();const h0={url:xy,storageKey:Sy,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Ey,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function El(t,e,r){return await r()}const Rr={};class Cn{constructor(e){var r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Cn.nextInstanceID,Cn.nextInstanceID+=1,this.instanceID>0&&nt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const s=Object.assign(Object.assign({},h0),e);if(this.logDebugMessages=!!s.debug,typeof s.debug=="function"&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new c0({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=dh(s.fetch),this.lock=s.lock||El,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:nt()&&(!((r=globalThis==null?void 0:globalThis.navigator)===null||r===void 0)&&r.locks)?this.lock=d0:this.lock=El,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:uh()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=Sl(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=Sl(this.memoryStorage)),nt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}get jwks(){var e,r;return(r=(e=Rr[this.storageKey])===null||e===void 0?void 0:e.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(e){Rr[this.storageKey]=Object.assign(Object.assign({},Rr[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,r;return(r=(e=Rr[this.storageKey])===null||e===void 0?void 0:e.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Rr[this.storageKey]=Object.assign(Object.assign({},Rr[this.storageKey]),{cachedAt:e})}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${oh}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const r=Uy(window.location.href);let n="none";if(this._isImplicitGrantCallback(r)?n="implicit":await this._isPKCECallback(r)&&(n="pkce"),nt()&&this.detectSessionInUrl&&n!=="none"){const{data:s,error:i}=await this._getSessionFromURL(r,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),Cy(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:a}=s;return this._debug("#_initialize()","detected session in URL",o,"redirect type",a),await this._saveSession(o),setTimeout(async()=>{a==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return Z(r)?{error:r}:{error:new ch("Unexpected error during initialization",r)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var r,n,s;try{const i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.captchaToken}},xform:gt}),{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var r,n,s;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let p=null,m=null;this.flowType==="pkce"&&([p,m]=await Ar(this.storage,this.storageKey)),i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(r=f==null?void 0:f.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:p,code_challenge_method:m},xform:gt})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await ee(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(s=f==null?void 0:f.channel)!==null&&s!==void 0?s:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:gt})}else throw new ps("You must provide either an email or phone number and a password");const{data:o,error:a}=i;if(a||!o)return{data:{user:null,session:null},error:a};const c=o.session,l=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(i){if(Z(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let r;if("email"in e){const{email:i,password:o,options:a}=e;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xl})}else if("phone"in e){const{phone:i,password:o,options:a}=e;r=await ee(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:xl})}else throw new ps("You must provide either an email or phone number and a password");const{data:n,error:s}=r;return s?{data:{user:null,session:null},error:s}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new fs}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s})}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOAuth(e){var r,n,s,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(r=e.options)===null||r===void 0?void 0:r.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(s=e.options)===null||s===void 0?void 0:s.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:r}=e;if(r==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}async signInWithSolana(e){var r,n,s,i,o,a,c,l,u,h,f,p;let m,y;if("message"in e)m=e.message,y=e.signature;else{const{chain:x,wallet:S,statement:_,options:b}=e;let w;if(nt())if(typeof S=="object")w=S;else{const g=window;if("solana"in g&&typeof g.solana=="object"&&("signIn"in g.solana&&typeof g.solana.signIn=="function"||"signMessage"in g.solana&&typeof g.solana.signMessage=="function"))w=g.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof S!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");w=S}const v=new URL((r=b==null?void 0:b.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in w&&w.signIn){const g=await w.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),_?{statement:_}:null));let k;if(Array.isArray(g)&&g[0]&&typeof g[0]=="object")k=g[0];else if(g&&typeof g=="object"&&"signedMessage"in g&&"signature"in g)k=g;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in k&&"signature"in k&&(typeof k.signedMessage=="string"||k.signedMessage instanceof Uint8Array)&&k.signature instanceof Uint8Array)m=typeof k.signedMessage=="string"?k.signedMessage:new TextDecoder().decode(k.signedMessage),y=k.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in w)||typeof w.signMessage!="function"||!("publicKey"in w)||typeof w!="object"||!w.publicKey||!("toBase58"in w.publicKey)||typeof w.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");m=[`${v.host} wants you to sign in with your Solana account:`,w.publicKey.toBase58(),..._?["",_,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${(s=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&s!==void 0?s:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(k=>`- ${k}`)]:[]].join(`
`);const g=await w.signMessage(new TextEncoder().encode(m),"utf8");if(!g||!(g instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=g}}try{const{data:x,error:S}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:m,signature:My(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(p=e.options)===null||p===void 0?void 0:p.captchaToken}}:null),xform:gt});if(S)throw S;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new fs}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:S})}catch(x){if(Z(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const r=await Yt(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(r??"").split("/");try{const{data:i,error:o}=await ee(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:gt});if(await At(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new fs}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:s??null}),error:o})}catch(i){if(Z(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:r,provider:n,token:s,access_token:i,nonce:o}=e,a=await ee(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:gt}),{data:c,error:l}=a;return l?{data:{user:null,session:null},error:l}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new fs}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:l})}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithOtp(e){var r,n,s,i,o;try{if("email"in e){const{email:a,options:c}=e;let l=null,u=null;this.flowType==="pkce"&&([l,u]=await Ar(this.storage,this.storageKey));const{error:h}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:a,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:l,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:a,options:c}=e,{data:l,error:u}=await ee(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:a,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:l==null?void 0:l.message_id},error:u}}throw new ps("You must provide either an email or phone number.")}catch(a){if(Z(a))return{data:{user:null,session:null},error:a};throw a}}async verifyOtp(e){var r,n;try{let s,i;"options"in e&&(s=(r=e.options)===null||r===void 0?void 0:r.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:a}=await ee(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:s,xform:gt});if(a)throw a;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,l=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:l,session:c},error:null}}catch(s){if(Z(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var r,n,s;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Ar(this.storage,this.storageKey)),await ee(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(r=e.options)===null||r===void 0?void 0:r.redirectTo)!==null&&n!==void 0?n:void 0}),!((s=e==null?void 0:e.options)===null||s===void 0)&&s.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:n0})}catch(i){if(Z(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:r},error:n}=e;if(n)throw n;if(!r)throw new Pt;const{error:s}=await ee(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(Z(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const r=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:i}=e,{error:o}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:s,options:i}=e,{data:o,error:a}=await ee(this.fetch,"POST",r,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:a}}throw new ps("You must provide either an email or phone number and a type")}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(e,r){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),s=(async()=>(await n,await r()))();return this.pendingInLock.push((async()=>{try{await s}catch{}})()),s}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=r();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const s=[...this.pendingInLock];await Promise.all(s),this.pendingInLock.splice(0,s.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await e(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const r=await Yt(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?e=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Bi:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.userStorage){const o=await Yt(this.userStorage,this.storageKey+"-user");o!=null&&o.user?e.user=o.user:e.user=Hi()}if(this.storage.isServer&&e.user){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,l,u)=>(!o&&l==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,l,u))})}return{data:{session:e},error:null}}const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:It}):await this._useSession(async r=>{var n,s,i;const{data:o,error:a}=r;if(a)throw a;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Pt}:await ee(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(s=o.session)===null||s===void 0?void 0:s.access_token)!==null&&i!==void 0?i:void 0,xform:It})})}catch(r){if(Z(r))return Py(r)&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:r};throw r}}async updateUser(e,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,r))}async _updateUser(e,r={}){try{return await this._useSession(async n=>{const{data:s,error:i}=n;if(i)throw i;if(!s.session)throw new Pt;const o=s.session;let a=null,c=null;this.flowType==="pkce"&&e.email!=null&&([a,c]=await Ar(this.storage,this.storageKey));const{data:l,error:u}=await ee(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:a,code_challenge_method:c}),jwt:o.access_token,xform:It});if(u)throw u;return o.user=l.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(Z(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Pt;const r=Date.now()/1e3;let n=r,s=!0,i=null;const{payload:o}=qi(e.access_token);if(o.exp&&(n=o.exp,s=n<=r),s){const{session:a,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!a)return{data:{user:null,session:null},error:null};i=a}else{const{data:a,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:a.user,token_type:"bearer",expires_in:n-r,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(r){if(Z(r))return{data:{session:null,user:null},error:r};throw r}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async r=>{var n;if(!e){const{data:o,error:a}=r;if(a)throw a;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Pt;const{session:s,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(r){if(Z(r))return{data:{user:null,session:null},error:r};throw r}}async _getSessionFromURL(e,r){try{if(!nt())throw new ms("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ms(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new ml("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ms("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new ml("No code detected.");const{data:_,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const w=new URL(window.location.href);return w.searchParams.delete("code"),window.history.replaceState(window.history.state,"",w.toString()),{data:{session:_.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:i,refresh_token:o,expires_in:a,expires_at:c,token_type:l}=e;if(!i||!a||!o||!l)throw new ms("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(a);let f=u+h;c&&(f=parseInt(c));const p=f-u;p*1e3<=Nr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${p}s, should have been closer to ${h}s`);const m=f-h;u-m>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",m,f,u):u-m<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",m,f,u);const{data:y,error:x}=await this._getUser(i);if(x)throw x;const S={provider_token:n,provider_refresh_token:s,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:l,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:S,redirectType:e.type},error:null}}catch(n){if(Z(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const r=await Yt(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&r)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{error:i};const o=(n=s.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:a}=await this.admin.signOut(o,e);if(a&&!(Ay(a)&&(a.status===404||a.status===401||a.status===403)))return{error:a}}return e!=="others"&&(await this._removeSession(),await At(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const r=$y(),n={id:r,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async r=>{var n,s;try{const{data:{session:i},error:o}=r;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((s=this.stateChangeEmitters.get(e))===null||s===void 0?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,r={}){let n=null,s=null;this.flowType==="pkce"&&([n,s]=await Ar(this.storage,this.storageKey,!0));try{return await ee(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(i){if(Z(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:r,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=r.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(r){if(Z(r))return{data:null,error:r};throw r}}async linkIdentity(e){var r;try{const{data:n,error:s}=await this._useSession(async i=>{var o,a,c,l,u;const{data:h,error:f}=i;if(f)throw f;const p=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(a=e.options)===null||a===void 0?void 0:a.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await ee(this.fetch,"GET",p,{headers:this.headers,jwt:(u=(l=h.session)===null||l===void 0?void 0:l.access_token)!==null&&u!==void 0?u:void 0})});if(s)throw s;return nt()&&!(!((r=e.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(Z(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)throw o;return await ee(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(s=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&s!==void 0?s:void 0})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _refreshAccessToken(e){const r=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{const n=Date.now();return await qy(async s=>(s>0&&await Vy(200*Math.pow(2,s-1)),this._debug(r,"refreshing attempt",s),await ee(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:gt})),(s,i)=>{const o=200*Math.pow(2,s);return i&&Vi(i)&&Date.now()+o-n<Nr})}catch(n){if(this._debug(r,"error",n),Z(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(r,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,r){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",r,"url",n),nt()&&!r.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e,r;const n="#_recoverAndRefresh()";this._debug(n,"begin");try{const s=await Yt(this.storage,this.storageKey);if(s&&this.userStorage){let o=await Yt(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!o&&(o={user:s.user},await Or(this.userStorage,this.storageKey+"-user",o)),s.user=(e=o==null?void 0:o.user)!==null&&e!==void 0?e:Hi()}else if(s&&!s.user&&!s.user){const o=await Yt(this.storage,this.storageKey+"-user");o&&(o!=null&&o.user)?(s.user=o.user,await At(this.storage,this.storageKey+"-user"),await Or(this.storage,this.storageKey,s)):s.user=Hi()}if(this._debug(n,"session from storage",s),!this._isValidSession(s)){this._debug(n,"session is not valid"),s!==null&&await this._removeSession();return}const i=((r=s.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Bi;if(this._debug(n,`session has${i?"":" not"} expired with margin of ${Bi}s`),i){if(this.autoRefreshToken&&s.refresh_token){const{error:o}=await this._callRefreshToken(s.refresh_token);o&&(console.error(o),Vi(o)||(this._debug(n,"refresh failed with a non-retryable error, removing the session",o),await this._removeSession()))}}else if(s.user&&s.user.__isUserNotAvailableProxy===!0)try{const{data:o,error:a}=await this._getUser(s.access_token);!a&&(o!=null&&o.user)?(s.user=o.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(n,"could not get user data, skipping SIGNED_IN notification")}catch(o){console.error("Error getting user data:",o),this._debug(n,"error getting user data, skipping SIGNED_IN notification",o)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){this._debug(n,"error",s),console.error(s);return}finally{this._debug(n,"end")}}async _callRefreshToken(e){var r,n;if(!e)throw new Pt;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new yi;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Pt;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const a={session:i.session,error:null};return this.refreshingDeferred.resolve(a),a}catch(i){if(this._debug(s,"error",i),Z(i)){const o={session:null,error:i};return Vi(i)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,r,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",r,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:r});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async a=>{try{await a.callback(e,r)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let a=0;a<i.length;a+=1)console.error(i[a]);throw i[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const r=Object.assign({},e),n=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!n&&r.user&&await Or(this.userStorage,this.storageKey+"-user",{user:r.user});const s=Object.assign({},r);delete s.user;const i=bl(s);await Or(this.storage,this.storageKey,i)}else{const s=bl(r);await Or(this.storage,this.storageKey,s)}}async _removeSession(){this._debug("#_removeSession()"),await At(this.storage,this.storageKey),await At(this.storage,this.storageKey+"-code-verifier"),await At(this.storage,this.storageKey+"-user"),this.userStorage&&await At(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&nt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Nr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async r=>{const{data:{session:n}}=r;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const s=Math.floor((n.expires_at*1e3-e)/Nr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts ${Nr}ms, refresh threshold is ${Lo} ticks`),s<=Lo&&await this._callRefreshToken(n.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof hh)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!nt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const r=`#_onVisibilityChanged(${e})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,r,n){const s=[`provider=${encodeURIComponent(r)}`];if(n!=null&&n.redirectTo&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Ar(this.storage,this.storageKey),a=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});s.push(a.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);s.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ee(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _enroll(e){try{return await this._useSession(async r=>{var n,s;const{data:i,error:o}=r;if(o)return{data:null,error:o};const a=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:l}=await ee(this.fetch,"POST",`${this.url}/factors`,{body:a,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(e.factorType==="totp"&&(!((s=c==null?void 0:c.totp)===null||s===void 0)&&s.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(r){if(Z(r))return{data:null,error:r};throw r}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;if(i)return{data:null,error:i};const{data:o,error:a}=await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token});return a?{data:null,error:a}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:a})})}catch(r){if(Z(r))return{data:null,error:r};throw r}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var n;const{data:s,error:i}=r;return i?{data:null,error:i}:await ee(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=s==null?void 0:s.session)===null||n===void 0?void 0:n.access_token})})}catch(r){if(Z(r))return{data:null,error:r};throw r}})}async _challengeAndVerify(e){const{data:r,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:r.id,code:e.code})}async _listFactors(){const{data:{user:e},error:r}=await this.getUser();if(r)return{data:null,error:r};const n=(e==null?void 0:e.factors)||[],s=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:s,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var r,n;const{data:{session:s},error:i}=e;if(i)return{data:null,error:i};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=qi(s.access_token);let a=null;o.aal&&(a=o.aal);let c=a;((n=(r=s.user.factors)===null||r===void 0?void 0:r.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:a,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,r={keys:[]}){let n=r.keys.find(a=>a.kid===e);if(n)return n;const s=Date.now();if(n=this.jwks.keys.find(a=>a.kid===e),n&&this.jwks_cached_at+ky>s)return n;const{data:i,error:o}=await ee(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(o)throw o;return!i.keys||i.keys.length===0||(this.jwks=i,this.jwks_cached_at=s,n=i.keys.find(a=>a.kid===e),!n)?null:n}async getClaims(e,r={}){try{let n=e;if(!n){const{data:p,error:m}=await this.getSession();if(m||!p.session)return{data:null,error:m};n=p.session.access_token}const{header:s,payload:i,signature:o,raw:{header:a,payload:c}}=qi(n);r!=null&&r.allowExpired||Jy(i.exp);const l=!s.alg||s.alg.startsWith("HS")||!s.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(s.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!l){const{error:p}=await this.getUser(n);if(p)throw p;return{data:{claims:i,header:s,signature:o},error:null}}const u=Yy(s.alg),h=await crypto.subtle.importKey("jwk",l,u,!0,["verify"]);if(!await crypto.subtle.verify(u,h,o,Ly(`${a}.${c}`)))throw new $o("Invalid JWT signature");return{data:{claims:i,header:s,signature:o},error:null}}catch(n){if(Z(n))return{data:null,error:n};throw n}}}Cn.nextInstanceID=0;const f0=Cn;class p0 extends f0{constructor(e){super(e)}}var m0=function(t,e,r,n){function s(i){return i instanceof r?i:new r(function(o){o(i)})}return new(r||(r=Promise))(function(i,o){function a(u){try{l(n.next(u))}catch(h){o(h)}}function c(u){try{l(n.throw(u))}catch(h){o(h)}}function l(u){u.done?i(u.value):s(u.value).then(a,c)}l((n=n.apply(t,e||[])).next())})};class g0{constructor(e,r,n){var s,i,o;this.supabaseUrl=e,this.supabaseKey=r;const a=_y(e);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",a),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",a),this.storageUrl=new URL("storage/v1",a),this.functionsUrl=new URL("functions/v1",a);const c=`sb-${a.hostname.split(".")[0]}-auth-token`,l={db:dy,realtime:fy,auth:Object.assign(Object.assign({},hy),{storageKey:c}),global:uy},u=by(n??{},l);this.storageKey=(s=u.auth.storageKey)!==null&&s!==void 0?s:"",this.headers=(i=u.global.headers)!==null&&i!==void 0?i:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(h,f)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(f)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=u.auth)!==null&&o!==void 0?o:{},this.headers,u.global.fetch),this.fetch=yy(r,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Rg(new URL("rest/v1",a).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),this.storage=new ay(this.storageUrl.href,this.headers,this.fetch,n==null?void 0:n.storage),u.accessToken||this._listenForAuthEvents()}get functions(){return new _g(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,r={},n={}){return this.rest.rpc(e,r,n)}channel(e,r={config:{}}){return this.realtime.channel(e,r)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,r;return m0(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(r=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&r!==void 0?r:this.supabaseKey})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,storageKey:o,flowType:a,lock:c,debug:l},u,h){const f={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new p0({url:this.authUrl.href,headers:Object.assign(Object.assign({},f),u),storageKey:o,autoRefreshToken:e,persistSession:r,detectSessionInUrl:n,storage:s,userStorage:i,flowType:a,lock:c,debug:l,fetch:h,hasCustomAuthorizationHeader:Object.keys(this.headers).some(p=>p.toLowerCase()==="authorization")})}_initRealtimeClient(e){return new Kg(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,n)=>{this._handleTokenChanged(r,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,r,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const y0=(t,e,r)=>new g0(t,e,r);function v0(){if(typeof window<"u"||typeof process>"u")return!1;const t=process.version;if(t==null)return!1;const e=t.match(/^v(\d+)\./);return e?parseInt(e[1],10)<=18:!1}v0()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const Rt=t=>/^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t),w0=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t==="x"?e:e&3|8).toString(16)}),Wi={"mock-customer-1":"11111111-1111-1111-1111-111111111111","mock-seller-1":"22222222-2222-2222-2222-222222222222","mock-admin-1":"33333333-3333-3333-3333-333333333333","mock-customer-2":"44444444-4444-4444-4444-444444444444","mock-seller-2":"55555555-5555-5555-5555-555555555555"},er=t=>Rt(t)?t:Wi[t]?(console.warn(`Converting legacy UUID "${t}" to valid UUID "${Wi[t]}"`),Wi[t]):(console.warn(`Invalid UUID "${t}" detected, generating new UUID`),w0()),b0=()=>{try{const t=localStorage.getItem("direct_login_current_user");if(t){const e=JSON.parse(t);if(e.id&&!Rt(e.id)){const r=er(e.id);e.id=r,localStorage.setItem("direct_login_current_user",JSON.stringify(e)),console.log(`Fixed stored user ID from invalid format to: ${r}`)}}}catch(t){console.error("Error validating stored user:",t),localStorage.removeItem("direct_login_current_user")}},_0=()=>{["direct_login_current_user","user_preferences","cart_items","wishlist_items"].forEach(e=>{try{const r=localStorage.getItem(e);if(r){const n=JSON.parse(r);let s=!1;n.id&&!Rt(n.id)&&(n.id=er(n.id),s=!0),n.user_id&&!Rt(n.user_id)&&(n.user_id=er(n.user_id),s=!0),n.seller_id&&!Rt(n.seller_id)&&(n.seller_id=er(n.seller_id),s=!0),Array.isArray(n)&&n.forEach(i=>{i.id&&!Rt(i.id)&&(i.id=er(i.id),s=!0),i.user_id&&!Rt(i.user_id)&&(i.user_id=er(i.user_id),s=!0),i.seller_id&&!Rt(i.seller_id)&&(i.seller_id=er(i.seller_id),s=!0)}),s&&(localStorage.setItem(e,JSON.stringify(n)),console.log(`Fixed invalid UUIDs in localStorage key: ${e}`))}}catch(r){console.error(`Error cleaning up localStorage key ${e}:`,r),localStorage.removeItem(e)}})};typeof window<"u"&&_0();const Rs="your_production_supabase_project_url",Dr="your_production_supabase_anon_key",Rn="production";function x0(){const t=[],e=[];if(Rs.startsWith("https://")?(Rs.includes("mock.supabase.co")||Rs.includes("localhost"))&&e.push("Using mock or localhost URL - ensure this is intentional"):t.push("VITE_SUPABASE_URL must start with https://"),Dr.length<50&&e.push("Supabase anon key seems unusually short"),t.length>0)throw console.error(" Configuration errors:"),t.forEach(r=>console.error(`  - ${r}`)),new Error(`Supabase configuration errors: ${t.join(", ")}`);e.length>0&&(console.warn(" Configuration warnings:"),e.forEach(r=>console.warn(`  - ${r}`)))}async function S0(){try{const t=new Promise((n,s)=>setTimeout(()=>s(new Error("Database initialization timeout")),5e3)),e=F.from("profiles").select("count").limit(1),{error:r}=await Promise.race([e,t]);if(r){if(r.message.includes("infinite recursion"))throw console.warn(" Database RLS policies need fixing. This is expected on first run."),new Error("DATABASE_NEEDS_FIXING: Please run the COMPREHENSIVE-BACKEND-FIX.sql script in your Supabase SQL Editor.");return r.message.includes("timeout")?(console.warn(" Database connection timeout. Continuing with limited functionality."),!1):(console.warn(" Database connection issue:",r.message),!1)}try{await F.rpc("set_config",{setting_name:"app.development_mode",new_value:"true",is_local:!1})}catch{console.log("Development mode configuration not available")}}catch(t){if(t instanceof Error&&t.message.includes("DATABASE_NEEDS_FIXING"))throw t;console.warn(" Database initialization check failed:",t)}}x0();typeof window<"u"&&setTimeout(()=>{S0().catch(t=>{var e;(e=t.message)!=null&&e.includes("DATABASE_NEEDS_FIXING")?console.error(" DATABASE SETUP REQUIRED:",t.message):console.warn("Database initialization warning:",t)})},1e3);const F=y0(Rs,Dr,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"supabase.auth.token",debug:Rn==="development"},realtime:{params:{eventsPerSecond:10}},global:{headers:{"X-Client-Info":"ecommerce-platform@1.0.0","X-App-Environment":Rn,apikey:Dr,Authorization:`Bearer ${Dr}`},fetch:(t,e={})=>{const r={...e,headers:{apikey:Dr,Authorization:`Bearer ${Dr}`,"Content-Type":"application/json",...e.headers,...(!e.method||e.method==="GET")&&{"Cache-Control":"max-age=60, stale-while-revalidate=300"}},signal:AbortSignal.timeout(1e4),keepalive:!0};return fetch(t,r)}},db:{schema:"public"}});let gs=!0,Tl=0;const E0=async()=>{const t=Date.now();if(t-Tl<3e4)return{healthy:gs};try{const e=Date.now(),{error:r}=await F.from("profiles").select("count").limit(1).abortSignal(AbortSignal.timeout(5e3)),n=Date.now()-e;return r?(gs=!1,{healthy:!1,error:r.message,latency:n}):(gs=!0,Tl=t,Rn==="development"&&n>1e3,{healthy:!0,latency:n})}catch(e){return gs=!1,{healthy:!1,error:e instanceof Error?e.message:"Unknown connection error"}}};typeof window<"u"&&setTimeout(()=>{E0().catch(t=>{})},3e3);const T0=async t=>{try{let e=F.from("products").select(`
        *,
        categories!inner(name, slug),
        product_variants(*)
      `).eq("active",!0);t!=null&&t.categoryId&&(e=e.eq("category_id",t.categoryId)),t!=null&&t.categorySlug&&(e=e.eq("categories.slug",t.categorySlug)),t!=null&&t.seller&&(e=e.eq("seller_id",t.seller)),t!=null&&t.featured&&(e=e.eq("featured",t.featured)),t!=null&&t.search&&(e=e.ilike("name",`%${t.search}%`)),t!=null&&t.limit&&(e=e.limit(t.limit));const{data:r,error:n}=await e.order("created_at",{ascending:!1});if(n)throw n;return(r||[]).map(i=>{var o;return{id:i.id,name:i.name,slug:i.slug,description:i.description||"",shortDescription:i.short_description,price:parseFloat(i.price),originalPrice:i.original_price?parseFloat(i.original_price):void 0,images:i.image_url?[i.image_url]:[],stock:i.stock||0,minStockLevel:i.min_stock_level,sku:i.sku,weight:i.weight,dimensions:i.dimensions,rating:parseFloat(i.rating||"0"),reviewCount:i.review_count||0,reviews:i.reviews||[],categoryId:i.category_id,category:((o=i.categories)==null?void 0:o.name)||"",sellerId:i.seller_id,sellerName:"Sufi Essences",tags:i.tags||[],specifications:i.specifications||{},featured:i.featured||!1,createdAt:new Date(i.created_at),updatedAt:new Date(i.updated_at)}})}catch(e){return console.error("Error fetching products:",e),[]}},XC=async t=>{var e;try{const{data:r,error:n}=await F.from("products").select(`
        *,
        categories(name, slug),
        product_variants(*),
        reviews(*, profiles(display_name))
      `).eq("id",t).eq("active",!0).single();if(n)throw n;return{id:r.id,name:r.name,slug:r.slug,description:r.description||"",shortDescription:r.short_description,price:parseFloat(r.price),originalPrice:r.original_price?parseFloat(r.original_price):void 0,images:r.image_url?[r.image_url]:[],stock:r.stock||0,minStockLevel:r.min_stock_level,sku:r.sku,weight:r.weight,dimensions:r.dimensions,rating:parseFloat(r.rating||"0"),reviewCount:r.review_count||0,reviews:r.reviews||[],categoryId:r.category_id,category:((e=r.categories)==null?void 0:e.name)||"",sellerId:r.seller_id,sellerName:"Sufi Essences",tags:r.tags||[],specifications:r.specifications||{},featured:r.featured||!1,createdAt:new Date(r.created_at),updatedAt:new Date(r.updated_at)}}catch(r){return console.error("Error fetching product:",r),null}},kl=async()=>{try{const{data:t,error:e}=await F.from("categories").select("*").eq("is_active",!0).order("sort_order",{ascending:!0});if(e)throw e;return(t||[]).map(n=>({id:n.id,name:n.name,slug:n.slug,description:n.description||"",image:n.image_url||"",productCount:0,parentId:n.parent_id,sortOrder:n.sort_order||0,isActive:n.is_active,createdAt:new Date(n.created_at),updatedAt:new Date(n.updated_at)}))}catch(t){return console.error("Error fetching categories:",t),[]}},k0=async t=>{try{const{data:e,error:r}=await F.from("profiles").select("*").eq("id",t).single();if(r)throw r;return e}catch(e){return console.error("Error fetching user profile:",e),null}},j0=async t=>{try{const{data:e,error:r}=await F.from("cart").select(`
        *,
        products(name, price, image_url, slug, stock)
      `).eq("user_id",t);if(r)throw r;return(e||[]).map(s=>{var i,o,a,c,l;return{id:s.id,productId:s.product_id,variantId:s.variant_id,quantity:s.quantity,product:{id:s.product_id,name:((i=s.products)==null?void 0:i.name)||"",price:parseFloat(((o=s.products)==null?void 0:o.price)||"0"),images:(a=s.products)!=null&&a.image_url?[s.products.image_url]:[],slug:((c=s.products)==null?void 0:c.slug)||"",stock:((l=s.products)==null?void 0:l.stock)||0,description:"",rating:0,reviewCount:0,categoryId:"",sellerId:"",sellerName:"Sufi Essences",reviews:[],tags:[],specifications:{},createdAt:new Date,updatedAt:new Date},createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}})}catch(e){return console.error("Error fetching cart items:",e),[]}},A0=async t=>{try{const{data:e,error:r}=await F.from("wishlist").select(`
        *,
        products(name, price, image_url, slug, stock, rating, review_count)
      `).eq("user_id",t);if(r)throw r;return(e||[]).map(s=>{var i,o,a,c,l,u,h;return{id:s.id,productId:s.product_id,product:{id:s.product_id,name:((i=s.products)==null?void 0:i.name)||"",price:parseFloat(((o=s.products)==null?void 0:o.price)||"0"),images:(a=s.products)!=null&&a.image_url?[s.products.image_url]:[],slug:((c=s.products)==null?void 0:c.slug)||"",stock:((l=s.products)==null?void 0:l.stock)||0,rating:parseFloat(((u=s.products)==null?void 0:u.rating)||"0"),reviewCount:((h=s.products)==null?void 0:h.review_count)||0,description:"",categoryId:"",sellerId:"",sellerName:"Sufi Essences",reviews:[],tags:[],specifications:{},createdAt:new Date,updatedAt:new Date},createdAt:new Date(s.created_at)}})}catch(e){return console.error("Error fetching wishlist items:",e),[]}},jl=async t=>{try{const{data:e,error:r}=await F.from("orders").select(`
        *,
        order_items(*, products(name, image_url, slug))
      `).eq("user_id",t).order("created_at",{ascending:!1});if(r)throw r;return(e||[]).map(s=>({id:s.id,orderNumber:s.order_number,userId:s.user_id,status:s.status,totalAmount:parseFloat(s.total_amount||"0"),subtotal:parseFloat(s.subtotal||"0"),taxAmount:parseFloat(s.tax_amount||"0"),shippingAmount:parseFloat(s.shipping_amount||"0"),discountAmount:parseFloat(s.discount_amount||"0"),paymentStatus:s.payment_status,paymentMethod:s.payment_method,shippingAddress:s.shipping_address,billingAddress:s.billing_address,notes:s.notes,items:(s.order_items||[]).map(i=>({id:i.id,productId:i.product_id,variantId:i.variant_id,quantity:i.quantity,unitPrice:parseFloat(i.unit_price||"0"),totalPrice:parseFloat(i.total_price||"0"),productName:i.product_name,productImage:i.product_image,product:i.products?{id:i.product_id,name:i.products.name,images:i.products.image_url?[i.products.image_url]:[],slug:i.products.slug,price:parseFloat(i.unit_price||"0"),description:"",rating:0,reviewCount:0,categoryId:"",sellerId:"",sellerName:"Sufi Essences",stock:0,reviews:[],tags:[],specifications:{},createdAt:new Date,updatedAt:new Date}:void 0})),createdAt:new Date(s.created_at),updatedAt:new Date(s.updated_at)}))}catch(e){return console.error("Error fetching orders:",e),[]}},P0=async t=>{try{const{data:e,error:r}=await F.from("orders").select(`
        *,
        order_items(*, products(name, image_url, slug)),
        profiles(display_name, email)
      `).eq("id",t).single();if(r)throw r;return e}catch(e){return console.error("Error fetching order:",e),null}},C0=async t=>{try{const e=b0(t),{data:r,error:n}=await F.from("profiles").insert({...e,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(n)throw n;return r}catch(e){return console.error("Error creating user profile:",e),null}},Al=async(t,e,r=1,n)=>{try{const{data:s,error:i}=await F.from("cart").upsert({user_id:t,product_id:e,quantity:r,variant_id:n,updated_at:new Date().toISOString()},{onConflict:"user_id,product_id,variant_id"}).select();if(i)throw i;return(s==null?void 0:s[0])||null}catch(s){return console.error("Error adding to cart:",s),null}},R0=async(t,e,r)=>{try{const{data:n,error:s}=await F.from("cart").update({quantity:e,updated_at:new Date().toISOString()}).eq("product_id",t).eq("variant_id",r||null).select();if(s)throw s;return(n==null?void 0:n[0])||null}catch(n){return console.error("Error updating cart item quantity:",n),null}},I0=async(t,e,r)=>{try{const{error:n}=await F.from("cart").delete().eq("user_id",t).eq("product_id",e).eq("variant_id",r||null);if(n)throw n;return!0}catch(n){return console.error("Error removing from cart:",n),!1}},N0=async()=>{try{const{error:t}=await F.from("cart").delete();if(t)throw t;return!0}catch(t){return console.error("Error clearing cart:",t),!1}},O0=async(t,e)=>{try{const{data:r,error:n}=await F.from("wishlist").upsert({user_id:t,product_id:e,created_at:new Date().toISOString()},{onConflict:"user_id,product_id"}).select();if(n)throw n;return(r==null?void 0:r[0])||null}catch(r){return console.error("Error adding to wishlist:",r),null}},Pl=async(t,e)=>{try{const{error:r}=await F.from("wishlist").delete().eq("user_id",t).eq("product_id",e);if(r)throw r;return!0}catch(r){return console.error("Error removing from wishlist:",r),!1}},D0=async(t,e)=>{try{const{data:r,error:n}=await F.from("orders").insert({...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(n)throw n;const s=e.map(o=>({...o,order_id:r.id,created_at:new Date().toISOString()})),{error:i}=await F.from("order_items").insert(s);if(i)throw i;return t.user_id&&await F.from("cart").delete().eq("user_id",t.user_id),r}catch(r){return console.error("Error creating order:",r),null}},JC=async(t,e)=>{try{const{data:r,error:n}=await F.from("orders").insert({...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(n)throw n;const s=e.map(o=>({...o,order_id:r.id,created_at:new Date().toISOString()})),{error:i}=await F.from("order_items").insert(s);if(i)throw i;return r}catch(r){return console.error("Error creating guest order:",r),null}},L0=async(t,e,r)=>{try{const{data:n,error:s}=await F.from("addresses").update({...r,updated_at:new Date().toISOString()}).eq("id",t).eq("user_id",e).select().single();if(s)throw s;return n}catch(n){return console.error("Error updating address:",n),null}},M0=async(t,e)=>{try{const{error:r}=await F.from("addresses").delete().eq("id",t).eq("user_id",e);if(r)throw r;return!0}catch(r){return console.error("Error deleting address:",r),!1}},F0=async(t=8)=>{try{const{data:e,error:r}=await F.from("products").select(`
        id,
        name,
        description,
        price,
        image_url,
        slug,
        featured,
        rating,
        review_count,
        category_id,
        seller_id,
        stock
      `).eq("featured",!0).eq("active",!0).limit(t).order("created_at",{ascending:!1});if(r)throw r;return(e||[]).map(s=>({id:s.id,name:s.name,description:s.description,price:parseFloat(s.price),images:s.image_url?[s.image_url]:[],slug:s.slug,featured:s.featured,rating:parseFloat(s.rating||"0"),reviewCount:s.review_count||0,categoryId:s.category_id,sellerId:s.seller_id,sellerName:"Sufi Essences",stock:s.stock||0,reviews:[],tags:[],specifications:{},createdAt:new Date,updatedAt:new Date}))}catch(e){return console.error("Error fetching featured products:",e),[]}},$0=async t=>{try{let e=F.from("products").select(`
        id,
        name,
        price,
        image_url,
        slug,
        featured,
        rating,
        review_count,
        category_id
      `).eq("active",!0);t!=null&&t.categoryId&&(e=e.eq("category_id",t.categoryId)),t!=null&&t.seller&&(e=e.eq("seller_id",t.seller)),t!=null&&t.featured&&(e=e.eq("featured",t.featured)),t!=null&&t.search&&(e=e.ilike("name",`%${t.search}%`)),t!=null&&t.limit&&(e=e.limit(t.limit)),t!=null&&t.offset&&(e=e.range(t.offset,t.offset+(t.limit||20)-1));const r=new Promise((o,a)=>setTimeout(()=>a(new Error("Query timeout")),8e3)),{data:n,error:s}=await Promise.race([e.order("created_at",{ascending:!1}),r]);if(s)throw console.error("Database query error:",s),s;return(n||[]).map(o=>({id:o.id,name:o.name,price:parseFloat(o.price||"0"),images:o.image_url?[o.image_url]:[],slug:o.slug,featured:o.featured||!1,rating:parseFloat(o.rating||"0"),reviewCount:o.review_count||0,categoryId:o.category_id,category:"",sellerId:"",sellerName:"Sufi Essences",stock:100,description:"",reviews:[],tags:[],specifications:{},createdAt:new Date,updatedAt:new Date}))}catch(e){return console.error("Error fetching basic products:",e),[]}},U0=async t=>{try{const{data:e,error:r}=await F.from("reviews").insert({...t,created_at:new Date().toISOString()}).select();if(r)throw r;return(e==null?void 0:e[0])||null}catch(e){return console.error("Error adding review:",e),null}},B0=async t=>{try{const{data:e,error:r}=await F.from("categories").insert({...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(r)throw r;return e}catch(e){return console.error("Error creating category:",e),null}},V0=async(t,e)=>{try{const{data:r,error:n}=await F.from("categories").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}catch(r){return console.error("Error updating category:",r),null}},q0=async t=>{try{const{error:e}=await F.from("categories").delete().eq("id",t);if(e)throw e;return!0}catch(e){return console.error("Error deleting category:",e),!1}},H0=async(t,e)=>{try{const{data:r,error:n}=await F.from("orders").update({status:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}catch(r){return console.error("Error updating order status:",r),null}},z0=async t=>{try{const{data:e,error:r}=await F.from("addresses").select("*").eq("user_id",t).order("created_at",{ascending:!1});if(r)throw r;return e||[]}catch(e){return console.error("Error fetching user addresses:",e),[]}},W0=async t=>{try{const{data:e,error:r}=await F.from("addresses").insert({...t,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(r)throw r;return e}catch(e){return console.error("Error adding address:",e),null}},G0=async(t,e)=>{try{await F.from("addresses").update({is_default:!1}).eq("user_id",t);const{data:r,error:n}=await F.from("addresses").update({is_default:!0}).eq("id",e).eq("user_id",t).select().single();if(n)throw n;return r}catch(r){return console.error("Error setting default address:",r),null}},YC=async()=>{try{const{data:t,error:e}=await F.from("profiles").select("*").order("created_at",{ascending:!1});if(e)throw e;return t||[]}catch(t){return console.error("Error fetching all users:",t),[]}},QC=async t=>{try{const{data:e,error:r}=await F.from("user_preferences").select("*").eq("user_id",t).single();if(r&&r.code!=="PGRST116")throw r;return e||null}catch(e){return console.error("Error fetching user preferences:",e),null}},ZC=async(t,e)=>{try{const{data:r,error:n}=await F.from("user_preferences").upsert({user_id:t,...e,updated_at:new Date().toISOString()},{onConflict:"user_id"}).select().single();if(n)throw n;return r}catch(r){return console.error("Error updating user preferences:",r),null}},eR=async t=>{try{const{data:e,error:r}=await F.from("user_security_settings").select("*").eq("user_id",t).single();if(r&&r.code!=="PGRST116")throw r;return e||null}catch(e){return console.error("Error fetching user security settings:",e),null}},tR=async(t,e)=>{try{const{data:r,error:n}=await F.from("user_security_settings").upsert({user_id:t,...e,updated_at:new Date().toISOString()},{onConflict:"user_id"}).select().single();if(n)throw n;return r}catch(r){return console.error("Error updating user security settings:",r),null}},rR=async t=>{try{const{data:e,error:r}=await F.from("user_payment_methods").select("*").eq("user_id",t).order("is_default",{ascending:!1});if(r)throw r;return e||[]}catch(e){return console.error("Error fetching user payment methods:",e),[]}},nR=async(t,e)=>{try{const{error:r}=await F.from("user_payment_methods").delete().eq("id",t).eq("user_id",e);if(r)throw r;return!0}catch(r){return console.error("Error deleting payment method:",r),!1}},sR=async(t,e)=>{try{await F.from("user_payment_methods").update({is_default:!1}).eq("user_id",e);const{data:r,error:n}=await F.from("user_payment_methods").update({is_default:!0}).eq("id",t).eq("user_id",e).select().single();if(n)throw n;return r}catch(r){return console.error("Error setting default payment method:",r),null}},fh=E.createContext(void 0),Fa=()=>{const t=E.useContext(fh);if(!t)throw new Error("useError must be used within an ErrorProvider");return t},K0=({children:t})=>{const[e,r]=E.useState(null),n=()=>r(null);return d.jsx(fh.Provider,{value:{error:e,setError:r,clearError:n},children:t})};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X0=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),J0=t=>t.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,r,n)=>n?n.toUpperCase():r.toLowerCase()),Cl=t=>{const e=J0(t);return e.charAt(0).toUpperCase()+e.slice(1)},ph=(...t)=>t.filter((e,r,n)=>!!e&&e.trim()!==""&&n.indexOf(e)===r).join(" ").trim(),Y0=t=>{for(const e in t)if(e.startsWith("aria-")||e==="role"||e==="title")return!0};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var Q0={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z0=E.forwardRef(({color:t="currentColor",size:e=24,strokeWidth:r=2,absoluteStrokeWidth:n,className:s="",children:i,iconNode:o,...a},c)=>E.createElement("svg",{ref:c,...Q0,width:e,height:e,stroke:t,strokeWidth:n?Number(r)*24/Number(e):r,className:ph("lucide",s),...!i&&!Y0(a)&&{"aria-hidden":"true"},...a},[...o.map(([l,u])=>E.createElement(l,u)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const J=(t,e)=>{const r=E.forwardRef(({className:n,...s},i)=>E.createElement(Z0,{ref:i,iconNode:e,className:ph(`lucide-${X0(Cl(t))}`,`lucide-${t}`,n),...s}));return r.displayName=Cl(t),r};/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ev=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],mh=J("arrow-left",ev);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tv=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],rv=J("award",tv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nv=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],sv=J("bell",nv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iv=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gh=J("calendar",iv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ov=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],av=J("chevron-down",ov);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cv=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],lv=J("chevron-right",cv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Le=J("circle-alert",uv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dv=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],vi=J("circle-check-big",dv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hv=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],yh=J("crown",hv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fv=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],pv=J("database",fv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mv=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Xs=J("eye-off",mv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gv=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Js=J("eye",gv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yv=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],vv=J("facebook",yv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wv=[["path",{d:"M12 10a2 2 0 0 0-2 2c0 1.02-.1 2.51-.26 4",key:"1nerag"}],["path",{d:"M14 13.12c0 2.38 0 6.38-1 8.88",key:"o46ks0"}],["path",{d:"M17.29 21.02c.12-.6.43-2.3.5-3.02",key:"ptglia"}],["path",{d:"M2 12a10 10 0 0 1 18-6",key:"ydlgp0"}],["path",{d:"M2 16h.01",key:"1gqxmh"}],["path",{d:"M21.8 16c.2-2 .131-5.354 0-6",key:"drycrb"}],["path",{d:"M5 19.5C5.5 18 6 15 6 12a6 6 0 0 1 .34-2",key:"1tidbn"}],["path",{d:"M8.65 22c.21-.66.45-1.32.57-2",key:"13wd9y"}],["path",{d:"M9 6.8a6 6 0 0 1 9 5.2v2",key:"1fr1j5"}]],vh=J("fingerprint",wv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bv=[["rect",{x:"3",y:"8",width:"18",height:"4",rx:"1",key:"bkv52"}],["path",{d:"M12 8v13",key:"1c76mn"}],["path",{d:"M19 12v7a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2v-7",key:"6wjy6b"}],["path",{d:"M7.5 8a2.5 2.5 0 0 1 0-5A4.8 8 0 0 1 12 8a4.8 8 0 0 1 4.5-5 2.5 2.5 0 0 1 0 5",key:"1ihvrl"}]],_v=J("gift",bv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xv=[["circle",{cx:"18",cy:"18",r:"3",key:"1xkwt0"}],["circle",{cx:"6",cy:"6",r:"3",key:"1lh9wr"}],["path",{d:"M13 6h3a2 2 0 0 1 2 2v7",key:"1yeb86"}],["path",{d:"M11 18H8a2 2 0 0 1-2-2V9",key:"19pyzm"}]],Sv=J("git-compare",xv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ev=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],$a=J("heart",Ev);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tv=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],wh=J("house",Tv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kv=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],jv=J("info",kv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Av=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],Pv=J("instagram",Av);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Cv=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],bh=J("loader-circle",Cv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rv=[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]],_h=J("loader",Rv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iv=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Ys=J("lock",Iv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nv=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],Ua=J("log-out",Nv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ov=[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]],In=J("mail",Ov);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dv=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Lv=J("map-pin",Dv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mv=[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]],Fv=J("menu",Mv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $v=[["path",{d:"M5 12h14",key:"1ays0h"}]],Uv=J("minus",$v);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bv=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],Uo=J("package",Bv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vv=[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Ba=J("phone",Vv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qv=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Hv=J("plus",qv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zv=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Qs=J("refresh-cw",zv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wv=[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]],xh=J("search",Wv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gv=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Va=J("settings",Gv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kv=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],Bo=J("shield",Kv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xv=[["path",{d:"M6 2 3 6v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6l-3-4Z",key:"hou9p0"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}]],Jv=J("shopping-bag",Xv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yv=[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]],qa=J("shopping-cart",Yv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qv=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],Ha=J("sparkles",Qv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zv=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],Sh=J("star",Zv);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ew=[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]],tw=J("tag",ew);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rw=[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]],nw=J("trending-up",rw);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sw=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Nn=J("triangle-alert",sw);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iw=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],ow=J("twitter",iw);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aw=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],Nt=J("user",aw);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cw=[["path",{d:"M12 20h.01",key:"zekei9"}],["path",{d:"M8.5 16.429a5 5 0 0 1 7 0",key:"1bycff"}],["path",{d:"M5 12.859a10 10 0 0 1 5.17-2.69",key:"1dl1wf"}],["path",{d:"M19 12.859a10 10 0 0 0-2.007-1.523",key:"4k23kn"}],["path",{d:"M2 8.82a15 15 0 0 1 4.177-2.643",key:"1grhjp"}],["path",{d:"M22 8.82a15 15 0 0 0-11.288-3.764",key:"z3jwby"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],Rl=J("wifi-off",cw);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lw=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],bt=J("x",lw);/**
 * @license lucide-react v0.511.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uw=[["path",{d:"M2.5 17a24.12 24.12 0 0 1 0-10 2 2 0 0 1 1.4-1.4 49.56 49.56 0 0 1 16.2 0A2 2 0 0 1 21.5 7a24.12 24.12 0 0 1 0 10 2 2 0 0 1-1.4 1.4 49.55 49.55 0 0 1-16.2 0A2 2 0 0 1 2.5 17",key:"1q2vi4"}],["path",{d:"m10 15 5-3-5-3z",key:"1jp15x"}]],dw=J("youtube",uw),hw=({isOpen:t,onClose:e,initialMode:r="login"})=>{const[n,s]=E.useState(r),[i,o]=E.useState(!1),[a,c]=E.useState(!1),[l,u]=E.useState(!1),[h,f]=E.useState(1),[p,m]=E.useState(!1),{user:y,signIn:x,signUp:S,logout:_}=kt(),[b,w]=E.useState({email:"",password:"",confirmPassword:"",fullName:"",phone:"",dateOfBirth:""}),[v,g]=E.useState({}),k=A=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A),T=A=>A.length>=8,j=()=>{const A={};return b.email?k(b.email)||(A.email="Please enter a valid email"):A.email="Email is required",b.password?T(b.password)||(A.password="Password must be at least 8 characters"):A.password="Password is required",n==="signup"&&h===1&&b.password!==b.confirmPassword&&(A.confirmPassword="Passwords do not match"),n==="signup"&&h===2&&!b.fullName.trim()&&(A.fullName="Full name is required"),g(A),Object.keys(A).length===0},P=(A,N)=>{w(I=>({...I,[A]:N})),v[A]&&g(I=>({...I,[A]:""}))},C=async A=>{if(A.preventDefault(),!!j()){u(!0);try{n==="login"?(await x(b.email,b.password),e()):n==="signup"&&(h===1?f(2):(await S(b.email,b.password,{fullName:b.fullName,phone:b.phone,dateOfBirth:b.dateOfBirth}),s("verify")))}catch(N){console.error("Auth error:",N),g({general:"Authentication failed. Please try again."})}finally{u(!1)}}};return t?d.jsxs("div",{className:"fixed inset-0 z-50 md:hidden",children:[d.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50",onClick:e}),d.jsxs("div",{className:"absolute inset-0 bg-white flex flex-col",children:[d.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[n!=="login"&&n!=="profile"&&d.jsx("button",{onClick:()=>{n==="signup"&&h===2?f(1):s("login")},className:"p-2 rounded-full hover:bg-white hover:bg-opacity-20",children:d.jsx(mh,{className:"h-6 w-6"})}),d.jsx("div",{className:"flex-1 text-center",children:d.jsxs("h2",{className:"text-xl font-bold",children:[n==="login"&&"Welcome to S.Essences",n==="signup"&&(h===1?"Create Account":"Complete Profile"),n==="forgot"&&"Reset Password",n==="verify"&&"Verify Email",n==="profile"&&"My Account"]})}),d.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-white hover:bg-opacity-20",children:d.jsx(bt,{className:"h-6 w-6"})})]})}),d.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:n==="verify"?d.jsxs("div",{className:"text-center space-y-6 py-8",children:[d.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:d.jsx(In,{className:"h-10 w-10 text-green-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Verification Email Sent"}),d.jsxs("p",{className:"text-gray-600 mt-2",children:["We've sent a verification link to ",d.jsx("strong",{children:b.email})]}),d.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Didn't receive the email? Check your spam folder or"," ",d.jsx("button",{className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"resend verification email"})]})]}),d.jsx("button",{onClick:()=>s("login"),className:"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors font-medium",children:"Back to Login"})]}):n==="profile"&&y?d.jsxs("div",{className:"space-y-6",children:[d.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-indigo-50 rounded-2xl p-6 text-center",children:[d.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4",children:d.jsx("span",{className:"text-2xl font-bold text-white",children:y.name.charAt(0)})}),d.jsx("h3",{className:"text-xl font-bold text-gray-900",children:y.name}),d.jsx("p",{className:"text-gray-600",children:y.email}),d.jsx("span",{className:"inline-block mt-2 px-3 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full capitalize",children:y.role})]}),d.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[d.jsxs("button",{className:"flex flex-col items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100",children:[d.jsx($a,{className:"h-6 w-6 text-red-500 mb-2"}),d.jsx("span",{className:"text-xs text-gray-700",children:"Wishlist"})]}),d.jsxs("button",{className:"flex flex-col items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100",children:[d.jsx(qa,{className:"h-6 w-6 text-green-500 mb-2"}),d.jsx("span",{className:"text-xs text-gray-700",children:"Cart"})]}),d.jsxs("button",{className:"flex flex-col items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100",children:[d.jsx(sv,{className:"h-6 w-6 text-blue-500 mb-2"}),d.jsx("span",{className:"text-xs text-gray-700",children:"Notifications"})]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsxs("button",{className:"w-full flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100",children:[d.jsx(Va,{className:"h-5 w-5 text-gray-500 mr-3"}),d.jsx("span",{className:"text-gray-700",children:"Account Settings"})]}),d.jsxs("button",{className:"w-full flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100",children:[d.jsx(_v,{className:"h-5 w-5 text-gray-500 mr-3"}),d.jsx("span",{className:"text-gray-700",children:"My Orders"})]}),d.jsxs("button",{onClick:_,className:"w-full flex items-center p-4 bg-white rounded-xl shadow-sm border border-gray-100 text-red-600",children:[d.jsx(Ua,{className:"h-5 w-5 mr-3"}),d.jsx("span",{children:"Sign Out"})]})]})]}):d.jsxs("form",{onSubmit:C,className:"space-y-5",children:[(n==="login"||n==="signup"&&h===1)&&d.jsxs("div",{className:"text-center mb-2",children:[d.jsxs("div",{className:"inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-full px-4 py-2 mb-3",children:[d.jsx(Ha,{className:"h-4 w-4 text-purple-600"}),d.jsx("span",{className:"text-xs font-semibold text-purple-800",children:"Premium Attar Collection"}),d.jsx(yh,{className:"h-4 w-4 text-amber-500"})]}),d.jsx("p",{className:"text-sm text-gray-600 mb-4",children:n==="login"?"Sign in to discover premium attars":"Join our community of fragrance lovers"})]}),v.general&&d.jsxs("div",{className:"bg-red-50 text-red-700 p-3 rounded-lg text-sm flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-2 flex-shrink-0"}),v.general]}),(n==="login"||n==="forgot"||n==="signup"&&h===1)&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"email",value:b.email,onChange:A=>P("email",A.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${v.email?"border-red-300":"border-gray-300"}`,placeholder:"Enter your email",disabled:l})]}),v.email&&d.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),v.email]})]}),(n==="login"||n==="reset"||n==="signup"&&h===1)&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:i?"text":"password",value:b.password,onChange:A=>P("password",A.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${v.password?"border-red-300":"border-gray-300"}`,placeholder:"Enter your password",disabled:l}),d.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:i?d.jsx(Xs,{className:"h-5 w-5"}):d.jsx(Js,{className:"h-5 w-5"})})]}),v.password&&d.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),v.password]})]}),n==="signup"&&h===1&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Confirm Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:a?"text":"password",value:b.confirmPassword,onChange:A=>P("confirmPassword",A.target.value),className:`w-full pl-10 pr-12 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${v.confirmPassword?"border-red-300":"border-gray-300"}`,placeholder:"Confirm your password",disabled:l}),d.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:a?d.jsx(Xs,{className:"h-5 w-5"}):d.jsx(Js,{className:"h-5 w-5"})})]}),v.confirmPassword&&d.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),v.confirmPassword]})]}),n==="signup"&&h===2&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name"}),d.jsxs("div",{className:"relative",children:[d.jsx(Nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"text",value:b.fullName,onChange:A=>P("fullName",A.target.value),className:`w-full pl-10 pr-4 py-3 border rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500 ${v.fullName?"border-red-300":"border-gray-300"}`,placeholder:"Enter your full name",disabled:l})]}),v.fullName&&d.jsxs("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),v.fullName]})]}),n==="signup"&&h===2&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone Number"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"tel",value:b.phone,onChange:A=>P("phone",A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter your phone number",disabled:l})]})]}),n==="signup"&&h===2&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Date of Birth"}),d.jsxs("div",{className:"relative",children:[d.jsx(gh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-gray-400"}),d.jsx("input",{type:"date",value:b.dateOfBirth,onChange:A=>P("dateOfBirth",A.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",disabled:l})]})]}),n==="login"&&d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"remember-me-mobile",name:"remember-me-mobile",type:"checkbox",checked:p,onChange:A=>m(A.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:l}),d.jsx("label",{htmlFor:"remember-me-mobile",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),d.jsx("button",{type:"button",onClick:()=>s("forgot"),className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",disabled:l,children:"Forgot?"})]}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed",children:l?d.jsxs(d.Fragment,{children:[d.jsx(bh,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):n==="login"?"Sign In":n==="signup"&&h===1?"Continue":n==="signup"&&h===2?"Create Account":n==="forgot"?"Send Reset Link":"Submit"})}),d.jsx("div",{className:"text-center text-sm text-gray-600",children:n==="login"?d.jsxs("p",{children:["Don't have an account?"," ",d.jsx("button",{type:"button",onClick:()=>s("signup"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:l,children:"Sign up"})]}):n==="signup"?d.jsxs("p",{children:["Already have an account?"," ",d.jsx("button",{type:"button",onClick:()=>s("login"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:l,children:"Sign in"})]}):n==="forgot"?d.jsxs("p",{children:["Remember your password?"," ",d.jsx("button",{type:"button",onClick:()=>s("login"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:l,children:"Sign in"})]}):null}),(n==="login"||n==="signup"&&h===1)&&d.jsx("div",{className:"pt-4 border-t border-gray-200",children:d.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs text-gray-500",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Bo,{className:"h-4 w-4 mr-1 text-green-500"}),d.jsx("span",{children:"Secure"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(vh,{className:"h-4 w-4 mr-1 text-blue-500"}),d.jsx("span",{children:"Private"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(Sh,{className:"h-4 w-4 mr-1 text-purple-500"}),d.jsx("span",{children:"Trusted"})]})]})})]})})]})]}):null},Eh=E.createContext(void 0),kt=()=>{const t=E.useContext(Eh);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},fw=({children:t})=>{const[e,r]=E.useState(null),[n,s]=E.useState(!0),[i,o]=E.useState(0),[a,c]=E.useState(!1),[l,u]=E.useState(!1),[h,f]=E.useState("login"),{setError:p}=Fa();E.useEffect(()=>{(async()=>{try{const{data:{session:j}}=await F.auth.getSession();j!=null&&j.user&&await m(j.user)}catch(j){console.error("Auth initialization error:",j),p("Authentication initialization failed")}finally{s(!1)}})()},[]),E.useEffect(()=>{const T=async(P,C)=>{s(!0),C!=null&&C.user?await m(C.user):(r(null),localStorage.removeItem("user_preferences"),localStorage.removeItem("cart_items")),s(!1)},{data:{subscription:j}}=F.auth.onAuthStateChange(T);return()=>j==null?void 0:j.unsubscribe()},[]);const m=async T=>{var j,P,C,A,N;try{const I=await k0(T.id);if(I){const R={...I,email:T.email};r(R),p(null)}else{const R=await C0({id:T.id,email:T.email,name:((j=T.user_metadata)==null?void 0:j.full_name)||"",role:((P=T.user_metadata)==null?void 0:P.role)||"customer",avatar:((C=T.user_metadata)==null?void 0:C.avatar_url)||"",phone:((A=T.user_metadata)==null?void 0:A.phone)||"",dateOfBirth:((N=T.user_metadata)==null?void 0:N.date_of_birth)||""});R?r(R):(r(null),p("Failed to create user profile"))}}catch(I){console.error("Session handling error:",I),p(I instanceof Error?I.message:"Authentication error"),r(null)}},y=async(T,j)=>{const{error:P}=await F.auth.signInWithPassword({email:T,password:j});if(P)throw P.message.includes("Invalid login credentials")?new Error("Invalid credentials. Please check your email and password."):P.message.includes("Email not confirmed")?new Error("Please confirm your email address before signing in."):P.message.includes("Too many requests")?new Error("Too many login attempts. Please wait a moment and try again."):P.message.includes("Account is temporarily locked")?new Error("Account is temporarily locked due to too many failed attempts. Please try again later."):new Error(P.message)},x=async(T,j,P)=>{const{error:C}=await F.auth.signUp({email:T,password:j,options:{data:{full_name:(P==null?void 0:P.fullName)||"",phone:(P==null?void 0:P.phone)||"",date_of_birth:(P==null?void 0:P.dateOfBirth)||"",address:(P==null?void 0:P.address)||"",subscribe_newsletter:(P==null?void 0:P.subscribeNewsletter)||!1,role:"customer"}}});if(C)throw new Error(C.message)},S=async()=>{const{error:T}=await F.auth.signOut();if(T)throw new Error(T.message);r(null),localStorage.removeItem("user_preferences"),localStorage.removeItem("cart_items")},_=async()=>{await S()},b=async(T,j)=>{try{return await y(T,j),null}catch(P){return P instanceof Error?P.message:"Login failed"}},w=async T=>{try{return await x(T.email,T.password,{fullName:T.name,phone:T.phone,dateOfBirth:T.dateOfBirth,address:T.address||""}),!0}catch(j){return console.error("Registration error:",j),!1}},v=(T="login")=>{f(T),u(!0)},g=()=>{u(!1)},k={user:e,loading:n,loginAttempts:i,isLocked:a,signIn:y,signUp:x,logout:_,signOut:S,login:b,register:w,resetPassword:async()=>{},updatePassword:async()=>{},resendVerification:async()=>{},updateProfile:async()=>{},openMobileAuth:v,closeMobileAuth:g,isMobileAuthOpen:l,mobileAuthMode:h};return d.jsxs(Eh.Provider,{value:k,children:[t,d.jsx(hw,{isOpen:l,onClose:g,initialMode:h})]})},pw=t=>{if("code"in t&&"details"in t){const e=t;switch(e.code){case"PGRST116":return{type:"database",message:e.message,userMessage:"The requested resource was not found.",code:e.code,details:e.details};case"PGRST301":return{type:"database",message:e.message,userMessage:"Database connection failed. Please try again later.",code:e.code,details:e.details};case"23505":return{type:"validation",message:e.message,userMessage:"This item already exists. Please use a different value.",code:e.code,details:e.details};case"23503":return{type:"validation",message:e.message,userMessage:"Cannot complete this action due to related data.",code:e.code,details:e.details};case"42501":return{type:"authorization",message:e.message,userMessage:"You do not have permission to perform this action.",code:e.code,details:e.details};case"PGRST204":return{type:"authorization",message:e.message,userMessage:"Access denied. You do not have permission to access this resource.",code:e.code,details:e.details};default:return{type:"database",message:e.message,userMessage:"A database error occurred. Please try again.",code:e.code,details:e.details}}}return t.message.includes("fetch")||t.message.includes("Network")?{type:"network",message:t.message,userMessage:"Network connection failed. Please check your internet connection and try again."}:t.message.includes("JWT")||t.message.includes("auth")||t.message.includes("token")?{type:"authentication",message:t.message,userMessage:"Your session has expired. Please sign in again."}:t.message.includes("infinite recursion")||t.message.includes("maximum recursion depth")||t.message.includes("stack depth limit")||t.message.includes("too much recursion")?{type:"database",message:t.message,userMessage:"Database configuration error detected. Row Level Security policies may have infinite recursion. Please run the RLS fixes script."}:t.message.includes("timeout")||t.message.includes("timed out")?{type:"network",message:t.message,userMessage:"Request timed out. Please try again."}:t.message.includes("row-level security")||t.message.includes("policy")||t.message.includes("RLS")?{type:"authorization",message:t.message,userMessage:"Access restricted by security policies. Please check your permissions."}:{type:"unknown",message:t.message,userMessage:"An unexpected error occurred. Please try again."}},Th=t=>["infinite recursion","maximum recursion depth","stack depth limit","too much recursion","recursive policy","circular dependency in policies"].some(r=>t.message.toLowerCase().includes(r.toLowerCase())),mw=t=>Th(t)?`
 RLS Infinite Recursion Detected!

This error is caused by Row Level Security policies that reference the same table they protect.

To fix this:
1. Run the 'rls_policies_fix.sql' script in your Supabase SQL Editor
2. This will replace problematic policies with safe, non-recursive alternatives
3. The fix includes role caching to prevent recursion

The error occurred in: ${t.message.substring(0,100)}...
    `:t.message.includes("row-level security")||t.message.includes("policy")?`
 RLS Policy Issue Detected!

This appears to be a Row Level Security policy restriction.

To troubleshoot:
1. Check if you have the correct role/permissions
2. Verify RLS policies are properly configured
3. Run 'rls_policies_fix.sql' to ensure policies are correct

Error details: ${t.message}
    `:"",gw=(t,e)=>{const r=t.message.includes("infinite recursion")||t.message.includes("row-level security"),n=r?"error":"warn",s=r?"":"";console[n](`${s} [${t.type.toUpperCase()}] ${e||"Error"}:`,{message:t.message,userMessage:t.userMessage,code:t.code,details:t.details,timestamp:new Date().toISOString(),isRLSError:r}),r&&console.error(" RLS Fix Required:",mw(new Error(t.message)))},kh=E.createContext(void 0),vr=()=>{const t=E.useContext(kh);if(!t)throw new Error("useNotification must be used within a NotificationProvider");return t},yw=({children:t})=>{const[e,r]=E.useState([]),n=E.useRef(new Map),s=f=>{const p=Date.now(),m=`${p}-${Math.random().toString(36).substring(2,9)}`,y=f.duration||5e3;if(e.some(_=>_.type===f.type&&_.message===f.message&&_.title===f.title&&p-_.timestamp<2e3))return;const S={...f,id:m,timestamp:p,duration:y,isVisible:!1,isDismissing:!1};if(r(_=>[S,..._]),setTimeout(()=>{r(_=>_.map(b=>b.id===m?{...b,isVisible:!0}:b))},10),y>0){const _=setTimeout(()=>{i(m)},y);n.current.set(m,_)}},i=f=>{const p=n.current.get(f);p&&(clearTimeout(p),n.current.delete(f)),r(m=>m.map(y=>y.id===f?{...y,isDismissing:!0}:y)),setTimeout(()=>{r(m=>m.filter(y=>y.id!==f))},300)},o=f=>{i(f)};E.useEffect(()=>()=>{n.current.forEach(f=>clearTimeout(f)),n.current.clear()},[]);const a=(f,p)=>{const m="type"in f?f:pw(f);gw(m,p),s({type:"error",title:"Oops! Something went wrong",message:m.userMessage,duration:7e3})},c=(f,p="Success!")=>{s({type:"success",title:p,message:f,duration:4e3})},l=(f,p="Info")=>{s({type:"info",title:p,message:f,duration:5e3})},u=(f,p="Heads up!")=>{s({type:"warning",title:p,message:f,duration:6e3})},h=({notification:f})=>{const[p,m]=E.useState(100),y=E.useRef(null);E.useEffect(()=>{if(f.duration&&f.duration>0&&f.isVisible&&!f.isDismissing){const _=Date.now(),b=f.duration,w=()=>{const v=Date.now()-_,g=Math.max(0,100-v/b*100);m(g),g>0&&(y.current=setTimeout(w,50))};w()}return()=>{y.current&&clearTimeout(y.current)}},[f.duration,f.isVisible,f.isDismissing]);const S=(()=>{switch(f.type){case"success":return{container:"bg-white border-l-4 border-emerald-500 shadow-lg shadow-emerald-500/20",icon:d.jsx(vi,{className:"h-5 w-5 text-emerald-600"}),iconBg:"bg-emerald-50",progress:"bg-emerald-500"};case"error":return{container:"bg-white border-l-4 border-red-500 shadow-lg shadow-red-500/20",icon:d.jsx(Le,{className:"h-5 w-5 text-red-600"}),iconBg:"bg-red-50",progress:"bg-red-500"};case"warning":return{container:"bg-white border-l-4 border-amber-500 shadow-lg shadow-amber-500/20",icon:d.jsx(Nn,{className:"h-5 w-5 text-amber-600"}),iconBg:"bg-amber-50",progress:"bg-amber-500"};case"info":default:return{container:"bg-white border-l-4 border-blue-500 shadow-lg shadow-blue-500/20",icon:d.jsx(jv,{className:"h-5 w-5 text-blue-600"}),iconBg:"bg-blue-50",progress:"bg-blue-500"}}})();return d.jsxs("div",{className:`
          ${S.container}
          rounded-lg overflow-hidden backdrop-blur-sm max-w-sm w-full
          transform transition-all duration-300 ease-out
          ${f.isVisible&&!f.isDismissing?"translate-x-0 opacity-100 scale-100":"translate-x-full opacity-0 scale-95"}
          ${f.isDismissing?"translate-x-full opacity-0 scale-95":""}
        `,children:[d.jsx("div",{className:"p-4",children:d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:`flex-shrink-0 ${S.iconBg} rounded-full p-2 mr-3`,children:S.icon}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-1",children:f.title}),d.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:f.message})]}),d.jsx("button",{onClick:()=>o(f.id),className:"flex-shrink-0 ml-3 p-1 rounded-lg hover:bg-gray-100 transition-colors duration-200 group",children:d.jsx(bt,{className:"h-4 w-4 text-gray-400 group-hover:text-gray-600"})})]})}),f.duration&&f.duration>0&&d.jsx("div",{className:"h-1 bg-gray-200",children:d.jsx("div",{className:`h-full ${S.progress} transition-all duration-75 ease-linear`,style:{width:`${p}%`}})})]})};return E.useEffect(()=>{let f=!1;const p=()=>{const y=document.querySelector(".notification-container");if(y){const x=window.pageYOffset||document.documentElement.scrollTop,S=Math.max(20,x+20);y.style.top=`${S}px`}},m=()=>{f||(requestAnimationFrame(()=>{p(),f=!1}),f=!0)};return window.addEventListener("scroll",m,{passive:!0}),()=>window.removeEventListener("scroll",m)},[]),d.jsxs(kh.Provider,{value:{showNotification:s,showError:a,showSuccess:c,showInfo:l,showWarning:u},children:[t,d.jsx("div",{className:"fixed top-4 right-4 z-[9999] pointer-events-none notification-container",style:{position:"fixed",top:"1rem",right:"1rem",maxHeight:"calc(100vh - 2rem)",overflow:"hidden"},children:d.jsx("div",{className:"flex flex-col-reverse gap-3 max-w-sm w-full",children:e.map(f=>d.jsx("div",{className:"pointer-events-auto",children:d.jsx(h,{notification:f})},f.id))})})]})},jh=E.createContext(void 0),za=()=>{const t=E.useContext(jh);if(!t)throw new Error("useCart must be used within a CartProvider");return t},vw=({children:t})=>{const{user:e}=kt(),{showNotification:r}=vr(),[n,s]=E.useState([]),[i,o]=E.useState(!0),[a,c]=E.useState([]),l=E.useCallback(()=>{try{const w=localStorage.getItem("guestCart");if(w){const v=JSON.parse(w);return c(v),v}}catch(w){console.error("Error loading guest cart:",w)}return[]},[]),u=E.useCallback(w=>{try{localStorage.setItem("guestCart",JSON.stringify(w)),c(w)}catch(v){console.error("Error saving guest cart:",v)}},[]),h=E.useCallback(async()=>{if(e&&a.length>0)try{for(const w of a)await Al(w.product.id,w.variantId,w.quantity);return localStorage.removeItem("guestCart"),c([]),!0}catch(w){return console.error("Error merging guest cart:",w),!1}return!1},[e,a]),f=E.useCallback(async()=>{o(!0);try{if(e){const w=await j0();s(w)}else{const w=l();s(w)}}catch(w){console.error("Error fetching cart:",w),r({type:"error",title:"Error",message:"Failed to fetch cart items. Please try again later."})}o(!1)},[e,r,l]);E.useEffect(()=>{f()},[f]),E.useEffect(()=>{e||l()},[e,l]),E.useEffect(()=>{e&&a.length>0&&h().then(w=>{w&&f()})},[e,a.length,h,f]);const p=async(w,v=1)=>{try{if(e)await Al(w.id,void 0,v)?(await f(),r({type:"success",title:"Added to Cart",message:`${w.name} has been added.`})):r({type:"error",title:"Error",message:"Could not add item to cart."});else{const g=l(),k=g.findIndex(j=>j.product.id===w.id);let T;if(k>=0)T=[...g],T[k].quantity+=v;else{const j={id:`guest-${Date.now()}-${w.id}`,product:w,productId:w.id,quantity:v,variantId:void 0,createdAt:new Date};T=[...g,j]}u(T),s(T),r({type:"success",title:"Added to Cart",message:`${w.name} has been added.`})}}catch(g){console.error("Error adding to cart:",g),r({type:"error",title:"Error",message:"Failed to add item to cart. Please try again later."})}},m=async w=>{try{if(e)await I0(w)?await f():r({type:"error",title:"Error",message:"Failed to remove item from cart."});else{const g=l().filter(k=>k.product.id!==w);u(g),s(g)}}catch(v){console.error("Error removing from cart:",v),r({type:"error",title:"Error",message:"Failed to remove item from cart. Please try again later."})}},y=async(w,v)=>{if(v<=0){await m(w);return}try{if(e)await R0(w,v)?await f():r({type:"error",title:"Error",message:"Failed to update item quantity."});else{const k=l().map(T=>T.product.id===w?{...T,quantity:v}:T);u(k),s(k)}}catch(g){console.error("Error updating quantity:",g),r({type:"error",title:"Error",message:"Failed to update item quantity. Please try again later."})}},x=async()=>{try{e?await N0()?s([]):r({type:"error",title:"Error",message:"Failed to clear cart."}):(localStorage.removeItem("guestCart"),c([]),s([]))}catch(w){console.error("Error clearing cart:",w),r({type:"error",title:"Error",message:"Failed to clear cart. Please try again later."})}},S=n.reduce((w,v)=>w+v.product.price*v.quantity,0),_=n.reduce((w,v)=>w+v.quantity,0),b={items:n,addItem:p,removeItem:m,updateQuantity:y,clearCart:x,total:S,itemCount:_,loading:i};return d.jsx(jh.Provider,{value:b,children:t})},Ah=E.createContext(void 0),Ph=()=>{const t=E.useContext(Ah);if(!t)throw new Error("useWishlist must be used within a WishlistProvider");return t},ww=({children:t})=>{const{user:e}=kt(),{showNotification:r}=vr(),[n,s]=E.useState([]),[i,o]=E.useState(!0),a=E.useCallback(async()=>{if(!e){s([]),o(!1);return}o(!0);try{const p=await A0();s(p)}catch(p){console.error("Error fetching wishlist:",p),r({type:"error",title:"Error",message:"Failed to fetch wishlist items. Please try again later."})}o(!1)},[e,r]);E.useEffect(()=>{a()},[a]);const c=async p=>{if(!e){r({type:"info",title:"Authentication Required",message:"Please log in or create an account to add items to your wishlist."});return}if(u(p.id))await l(p.id),r({type:"info",title:"Removed from Wishlist",message:`${p.name} removed from your wishlist.`});else try{await O0(p.id)?(await a(),r({type:"success",title:"Added to Wishlist",message:`${p.name} added to your wishlist.`})):r({type:"error",title:"Error",message:"Could not add item to wishlist."})}catch(m){console.error("Error adding to wishlist:",m),r({type:"error",title:"Error",message:"Failed to add item to wishlist. Please try again later."})}},l=async p=>{if(e)try{await Pl(p)?await a():r({type:"error",title:"Error",message:"Failed to remove item from wishlist."})}catch(m){console.error("Error removing from wishlist:",m),r({type:"error",title:"Error",message:"Failed to remove item from wishlist. Please try again later."})}},u=p=>n.some(m=>m.product.id===p),f={items:n,addItem:c,removeItem:l,isInWishlist:u,clearWishlist:async()=>{if(e)try{const p=n.map(m=>Pl(m.product.id));await Promise.all(p),s([])}catch(p){console.error("Error clearing wishlist:",p),r({type:"error",title:"Error",message:"Failed to clear wishlist. Please try again later."})}},loading:i};return d.jsx(Ah.Provider,{value:f,children:t})},sr=class sr{constructor(){fe(this,"measurements",new Map);fe(this,"metrics",[]);fe(this,"maxMetrics",100)}static getInstance(){return sr.instance||(sr.instance=new sr),sr.instance}startMeasure(e){this.measurements.set(e,performance.now())}endMeasure(e,r=!0){const n=this.measurements.get(e);if(!n)return this.startMeasure(e),0;const i=performance.now()-n;return this.metrics.push({name:e,duration:i,timestamp:Date.now(),success:r}),this.metrics.length>this.maxMetrics&&this.metrics.shift(),i>1e3&&console.warn(` Slow operation: ${e} took ${i.toFixed(2)}ms`),this.measurements.delete(e),i}getStats(){const e=this.metrics.filter(a=>Date.now()-a.timestamp<3e5),r=e.filter(a=>a.success);if(e.length===0)return{totalRequests:0,successRate:0,averageTime:0,slowestOperation:null,fastestOperation:null};const n=r.map(a=>a.duration),s=n.reduce((a,c)=>a+c,0)/n.length,i=e.reduce((a,c)=>c.duration>a.duration?c:a),o=e.reduce((a,c)=>c.duration<a.duration?c:a);return{totalRequests:e.length,successRate:r.length/e.length*100,averageTime:s,slowestOperation:i,fastestOperation:o}}async measureAsync(e,r){this.startMeasure(e);try{const n=await r();return this.endMeasure(e),n}catch(n){throw this.endMeasure(e),n}}measureSync(e,r){this.startMeasure(e);try{const n=r();return this.endMeasure(e),n}catch(n){throw this.endMeasure(e),n}}};fe(sr,"instance");let Vo=sr;const Je=Vo.getInstance();class wi{constructor(e={}){fe(this,"cache",new Map);fe(this,"strategy");fe(this,"stats",{hitRate:0,totalRequests:0,totalHits:0,totalMisses:0,totalSize:0,entryCount:0,gcRuns:0,lastGC:Date.now()});fe(this,"gcTimer",null);fe(this,"backgroundUpdateQueue",new Set);this.strategy={maxSize:50*1024*1024,maxEntries:1e3,defaultTTL:300*1e3,gcInterval:60*1e3,compressionThreshold:1024,...e},this.startGarbageCollection()}set(e,r,n={}){Je.startMeasure(`cache-set-${e}`);const{ttl:s=this.strategy.defaultTTL,priority:i="medium",tags:o=[],compress:a=!1}=n,c=this.serializeData(r,a),l=this.calculateSize(c);this.shouldEvict(l)&&this.evictEntries(l);const u={data:c,timestamp:Date.now(),ttl:s,accessCount:0,lastAccessed:Date.now(),size:l,priority:i,tags:o};this.cache.set(e,u),this.updateStats("set",l),Je.endMeasure(`cache-set-${e}`)}get(e){Je.startMeasure(`cache-get-${e}`),this.stats.totalRequests++;const r=this.cache.get(e);return r?this.isExpired(r)?(this.cache.delete(e),this.stats.totalMisses++,this.updateStats("delete",r.size),this.updateHitRate(),Je.endMeasure(`cache-get-${e}`,!1),r.priority==="high"&&this.queueBackgroundUpdate(e),null):(r.accessCount++,r.lastAccessed=Date.now(),this.stats.totalHits++,this.updateHitRate(),Je.endMeasure(`cache-get-${e}`),this.deserializeData(r.data)):(this.stats.totalMisses++,this.updateHitRate(),Je.endMeasure(`cache-get-${e}`,!1),null)}has(e){const r=this.cache.get(e);return r!==void 0&&!this.isExpired(r)}delete(e){const r=this.cache.get(e);return r?(this.cache.delete(e),this.updateStats("delete",r.size),!0):!1}clearByTags(e){let r=0;for(const[n,s]of this.cache.entries())s.tags.some(i=>e.includes(i))&&(this.cache.delete(n),this.updateStats("delete",s.size),r++);return r}clear(){this.cache.clear(),this.stats={...this.stats,totalSize:0,entryCount:0}}getStats(){return{...this.stats}}async prefetch(e,r,n={}){try{const s=await r();return this.set(e,s,{priority:"high",...n}),s}catch(s){throw console.warn(`Prefetch failed for key ${e}:`,s),s}}async getOrFetch(e,r,n={}){const{staleWhileRevalidate:s=!1,...i}=n,o=this.get(e);if(o!==null)return s&&this.queueBackgroundUpdate(e,r,i),o;try{const a=await r();return this.set(e,a,i),a}catch(a){throw console.error(`Fetch failed for key ${e}:`,a),a}}serializeData(e,r){return r&&typeof e=="string"?{compressed:!0,data:e}:e}deserializeData(e){return e&&e.compressed?e.data:e}calculateSize(e){return JSON.stringify(e).length*2}isExpired(e){return Date.now()-e.timestamp>e.ttl}shouldEvict(e){return this.stats.totalSize+e>this.strategy.maxSize||this.stats.entryCount>=this.strategy.maxEntries}evictEntries(e){const r=Array.from(this.cache.entries());r.sort(([,s],[,i])=>{const o={low:1,medium:2,high:3};return s.priority!==i.priority?o[s.priority]-o[i.priority]:Math.abs(s.lastAccessed-i.lastAccessed)>1e3?s.lastAccessed-i.lastAccessed:s.accessCount-i.accessCount});let n=0;for(const[s,i]of r){if(n>=e&&this.stats.entryCount<this.strategy.maxEntries)break;this.cache.delete(s),n+=i.size,this.updateStats("delete",i.size)}}updateStats(e,r){e==="set"?(this.stats.totalSize+=r,this.stats.entryCount++):(this.stats.totalSize-=r,this.stats.entryCount--)}updateHitRate(){this.stats.hitRate=this.stats.totalRequests>0?this.stats.totalHits/this.stats.totalRequests*100:0}startGarbageCollection(){this.gcTimer=setInterval(()=>{this.runGarbageCollection()},this.strategy.gcInterval)}runGarbageCollection(){const e=this.stats.entryCount,r=Date.now();for(const[s,i]of this.cache.entries())this.isExpired(i)&&(this.cache.delete(s),this.updateStats("delete",i.size));this.stats.gcRuns++,this.stats.lastGC=r;const n=e-this.stats.entryCount;n>0&&console.log(` Cache GC: Cleaned ${n} expired entries`)}queueBackgroundUpdate(e,r,n={}){this.backgroundUpdateQueue.has(e)||(this.backgroundUpdateQueue.add(e),setTimeout(async()=>{try{if(r){const s=await r();this.set(e,s,n)}}catch(s){console.warn(`Background update failed for ${e}:`,s)}finally{this.backgroundUpdateQueue.delete(e)}},100))}destroy(){this.gcTimer&&(clearInterval(this.gcTimer),this.gcTimer=null),this.clear()}}const On=new wi({maxSize:25*1024*1024,maxEntries:500,defaultTTL:300*1e3});new wi({maxSize:100*1024*1024,maxEntries:200,defaultTTL:1800*1e3});new wi({maxSize:10*1024*1024,maxEntries:300,defaultTTL:120*1e3});new wi({maxSize:5*1024*1024,maxEntries:100,defaultTTL:900*1e3});const Gi=On,ys=On,Ki=(t,e={})=>{const r=Object.keys(e).sort().map(n=>`${n}:${e[n]}`).join("|");return r?`${t}:${r}`:t},Is=t=>{t?On.clearByTags([`product-${t}`]):On.clearByTags(["product"])},Ns=()=>{On.clearByTags(["category"])},se=(t,e)=>{var r,n,s;throw console.error(`Database error in ${e}:`,t),(r=t.message)!=null&&r.includes("infinite recursion")?new Error("Database configuration error. Please run the database fix script."):(n=t.message)!=null&&n.includes("permission denied")?new Error("Permission denied. Please check your authentication."):(s=t.message)!=null&&s.includes("violates foreign key constraint")?new Error("Invalid reference. Please check related data exists."):new Error(`${e} failed: ${t.message||"Unknown error"}`)},Gn=(t,e)=>{const r=e.filter(n=>!t[n]);if(r.length>0)throw new Error(`Missing required fields: ${r.join(", ")}`)},bw=t=>{if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t))throw new Error("Invalid email format")},_w=t=>{if(t<0)throw new Error("Price cannot be negative");if(t>1e6)throw new Error("Price is too high")},xw=t=>{if(t<0)throw new Error("Stock cannot be negative");if(t>1e5)throw new Error("Stock quantity is too high")},qo=t=>{if(!/^[a-z0-9]+(?:-[a-z0-9]+)*$/.test(t))throw new Error("Slug must contain only lowercase letters, numbers, and hyphens")},iR={async getAll(t={}){try{const{limit:e=50,offset:r=0,searchTerm:n,roleFilter:s,isActiveFilter:i}=t;let o=F.from("profiles").select("*",{count:"exact"}).order("created_at",{ascending:!1});n&&(o=o.or(`full_name.ilike.%${n}%,email.ilike.%${n}%`)),s&&(o=o.eq("role",s)),i!==void 0&&(o=o.eq("is_active",i)),o=o.range(r,r+e-1);const{data:a,error:c,count:l}=await o;if(c)throw c;return{users:(a==null?void 0:a.map(this.mapFromDB))||[],total:l||0}}catch(e){se(e,"Get users")}},async getById(t){try{const{data:e,error:r}=await F.from("profiles").select("*").eq("id",t).single();if(r)throw r;return e?this.mapFromDB(e):null}catch(e){se(e,"Get user by ID")}},async create(t){try{if(Gn(t,["email","name"]),bw(t.email),(await F.from("profiles").select("id").eq("email",t.email).single()).data)throw new Error("User with this email already exists");const{data:r,error:n}=await F.from("profiles").insert({email:t.email,full_name:t.name,role:t.role||"customer",avatar_url:t.avatar||null,phone:t.phone||null,date_of_birth:t.dateOfBirth||null,is_active:t.isActive!==void 0?t.isActive:!0,email_verified:t.emailVerified||!1,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(n)throw n;return this.mapFromDB(r)}catch(e){se(e,"Create user")}},async update(t,e){try{const r={updated_at:new Date().toISOString()};e.name!==void 0&&(r.full_name=e.name),e.avatar!==void 0&&(r.avatar_url=e.avatar),e.phone!==void 0&&(r.phone=e.phone),e.dateOfBirth!==void 0&&(r.date_of_birth=e.dateOfBirth),e.isActive!==void 0&&(r.is_active=e.isActive),e.emailVerified!==void 0&&(r.email_verified=e.emailVerified),e.role!==void 0&&(r.role=e.role);const{data:n,error:s}=await F.from("profiles").update(r).eq("id",t).select().single();if(s)throw s;return this.mapFromDB(n)}catch(r){se(r,"Update user")}},async delete(t){try{const e=["addresses","cart_items","wishlist_items","orders","reviews"];for(const n of e)await F.from(n).delete().eq("user_id",t);const{error:r}=await F.from("profiles").delete().eq("id",t);if(r)throw r;return!0}catch(e){se(e,"Delete user")}},mapFromDB(t){return{id:t.id,name:t.full_name||"",email:t.email,role:t.role,avatar:t.avatar_url,phone:t.phone,dateOfBirth:t.date_of_birth,isActive:t.is_active,emailVerified:t.email_verified,createdAt:new Date(t.created_at),updatedAt:t.updated_at?new Date(t.updated_at):void 0}}},oR={async getAll(){try{const{data:t,error:e}=await F.from("categories").select("*").eq("is_active",!0).order("sort_order");if(e)throw e;return(await Promise.all((t||[]).map(async n=>{const{count:s}=await F.from("products").select("*",{count:"exact",head:!0}).eq("category_id",n.id).eq("is_active",!0);return{...n,productCount:s||0}}))).map(this.mapFromDB)}catch(t){se(t,"Get categories")}},async getById(t){try{const{data:e,error:r}=await F.from("categories").select("*").eq("id",t).single();if(r)throw r;return e?this.mapFromDB(e):null}catch(e){se(e,"Get category by ID")}},async create(t){try{Gn(t,["name"]);const{data:e,error:r}=await F.from("categories").insert({name:t.name,slug:t.slug||t.name.toLowerCase().replace(/[^a-z0-9]+/g,"-"),description:t.description||null,image_url:t.image||null,parent_id:t.parentId||null,sort_order:t.sortOrder||0,is_active:t.isActive!==void 0?t.isActive:!0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(r)throw r;return this.mapFromDB(e)}catch(e){se(e,"Create category")}},async update(t,e){try{const r={updated_at:new Date().toISOString()};e.name!==void 0&&(r.name=e.name),e.slug!==void 0&&(r.slug=e.slug),e.description!==void 0&&(r.description=e.description),e.image!==void 0&&(r.image_url=e.image),e.parentId!==void 0&&(r.parent_id=e.parentId),e.sortOrder!==void 0&&(r.sort_order=e.sortOrder),e.isActive!==void 0&&(r.is_active=e.isActive);const{data:n,error:s}=await F.from("categories").update(r).eq("id",t).select().single();if(s)throw s;return this.mapFromDB(n)}catch(r){se(r,"Update category")}},async delete(t){try{const{count:e}=await F.from("products").select("*",{count:"exact",head:!0}).eq("category_id",t);if(e&&e>0)throw new Error("Cannot delete category with products. Please move or delete products first.");const{error:r}=await F.from("categories").delete().eq("id",t);if(r)throw r;return!0}catch(e){se(e,"Delete category")}},mapFromDB(t){return{id:t.id,name:t.name,slug:t.slug,description:t.description,image:t.image_url||"",parentId:t.parent_id,isActive:t.is_active,sortOrder:t.sort_order||0,productCount:t.productCount||0,createdAt:t.created_at?new Date(t.created_at):void 0,updatedAt:t.updated_at?new Date(t.updated_at):void 0}}},Xi={async getAll(t={}){try{const{limit:e=50,offset:r=0}=t;let n=F.from("products").select(`
          *,
          categories(id, name, slug),
          profiles(full_name)
        `).eq("is_active",t.isActive??!0);t.categoryId&&(n=n.eq("category_id",t.categoryId)),t.categorySlug&&(n=n.eq("categories.slug",t.categorySlug)),t.seller&&(n=n.eq("seller_id",t.seller)),t.featured&&(n=n.eq("is_featured",!0)),t.search&&(n=n.or(`name.ilike.%${t.search}%,description.ilike.%${t.search}%`)),n=n.order("created_at",{ascending:!1}).range(r,r+e-1);const{data:s,error:i}=await n;if(i)throw i;return(s==null?void 0:s.map(this.mapFromDB))||[]}catch(e){se(e,"Get products")}},async getById(t){try{const{data:e,error:r}=await F.from("products").select(`
          *,
          categories(name, slug),
          profiles(full_name),
          reviews(
            *,
            profiles(full_name, avatar_url)
          )
        `).eq("id",t).eq("is_active",!0).single();if(r)throw r;return e?this.mapFromDB(e):null}catch(e){se(e,"Get product by ID")}},async create(t){try{Gn(t,["name","price","categoryId"]),_w(t.price),t.stock!==void 0&&xw(t.stock);const e=t.slug||t.name.toLowerCase().replace(/[^a-z0-9]+/g,"-");if(qo(e),(await F.from("products").select("id").eq("slug",e).single()).data)throw new Error("Product with this slug already exists");const{data:n,error:s}=await F.from("products").insert({name:t.name,slug:e,description:t.description||"",short_description:t.shortDescription||null,price:t.price,original_price:t.originalPrice||null,category_id:t.categoryId,seller_id:t.sellerId,images:t.images||[],stock:t.stock||0,min_stock_level:t.minStockLevel||5,sku:t.sku||null,weight:t.weight||null,dimensions:t.dimensions||null,tags:t.tags||[],specifications:t.specifications||{},is_featured:t.featured||!1,is_active:t.isActive!==void 0?t.isActive:!0,meta_title:t.metaTitle||null,meta_description:t.metaDescription||null,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(s)throw s;return this.mapFromDB(n)}catch(e){se(e,"Create product")}},async update(t,e){try{const r={updated_at:new Date().toISOString()};e.name!==void 0&&(r.name=e.name),e.slug!==void 0&&(r.slug=e.slug),e.description!==void 0&&(r.description=e.description),e.shortDescription!==void 0&&(r.short_description=e.shortDescription),e.price!==void 0&&(r.price=e.price),e.originalPrice!==void 0&&(r.original_price=e.originalPrice),e.categoryId!==void 0&&(r.category_id=e.categoryId),e.images!==void 0&&(r.images=e.images),e.stock!==void 0&&(r.stock=e.stock),e.minStockLevel!==void 0&&(r.min_stock_level=e.minStockLevel),e.sku!==void 0&&(r.sku=e.sku),e.weight!==void 0&&(r.weight=e.weight),e.dimensions!==void 0&&(r.dimensions=e.dimensions),e.tags!==void 0&&(r.tags=e.tags),e.specifications!==void 0&&(r.specifications=e.specifications),e.featured!==void 0&&(r.is_featured=e.featured),e.isActive!==void 0&&(r.is_active=e.isActive),e.metaTitle!==void 0&&(r.meta_title=e.metaTitle),e.metaDescription!==void 0&&(r.meta_description=e.metaDescription);const{data:n,error:s}=await F.from("products").update(r).eq("id",t).select().single();if(s)throw s;return this.mapFromDB(n)}catch(r){se(r,"Update product")}},async delete(t){try{const{error:e}=await F.from("products").update({is_active:!1,updated_at:new Date().toISOString()}).eq("id",t);if(e)throw e;return!0}catch(e){se(e,"Delete product")}},mapFromDB(t){var r,n,s;const e=i=>{const o='data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="600" height="600"><rect width="100%25" height="100%25" fill="%23f3f4f6"/><text x="50%25" y="50%25" dominant-baseline="middle" text-anchor="middle" font-size="32" fill="%23999">No Image</text></svg>',c=(Array.isArray(i)?i:[]).map(l=>typeof l!="string"?"":l.includes("://example.com/")?o:l).filter(Boolean);return c.length?c:[o]};return{id:t.id,name:t.name,slug:t.slug,description:t.description||"",shortDescription:t.short_description,price:parseFloat(t.price),originalPrice:t.original_price?parseFloat(t.original_price):void 0,categoryId:t.category_id,category:((r=t.categories)==null?void 0:r.name)||"",images:e(t.images),stock:t.stock||0,minStockLevel:t.min_stock_level,sku:t.sku,weight:t.weight,dimensions:t.dimensions,rating:parseFloat(t.rating)||0,reviewCount:t.review_count||0,reviews:((n=t.reviews)==null?void 0:n.map(i=>{var o,a;return{id:i.id,productId:i.product_id,userId:i.user_id,rating:i.rating,title:i.title,comment:i.comment,images:i.images||[],isVerifiedPurchase:i.is_verified_purchase,isApproved:i.is_approved,helpfulCount:i.helpful_count,createdAt:new Date(i.created_at),updatedAt:i.updated_at?new Date(i.updated_at):void 0,profiles:{full_name:((o=i.profiles)==null?void 0:o.full_name)||"Anonymous",avatar_url:((a=i.profiles)==null?void 0:a.avatar_url)||""}}}))||[],sellerId:t.seller_id||"system",sellerName:((s=t.profiles)==null?void 0:s.full_name)||"Store",tags:t.tags||[],specifications:t.specifications||{},featured:t.is_featured||!1,isActive:t.is_active,metaTitle:t.meta_title,metaDescription:t.meta_description,createdAt:new Date(t.created_at),updatedAt:t.updated_at?new Date(t.updated_at):void 0}}},aR={async getAll(){try{const{data:t,error:e}=await F.from("collections").select(`
          *,
          collection_products(
            product_id,
            sort_order,
            products(id, name, price, images)
          )
        `).eq("is_active",!0).order("sort_order");if(e)throw e;return t||[]}catch(t){se(t,"Get collections")}},async create(t){try{Gn(t,["name","slug"]),qo(t.slug);const{data:e,error:r}=await F.from("collections").insert({name:t.name,slug:t.slug,description:t.description||"",image_url:t.imageUrl||null,is_active:t.isActive!==void 0?t.isActive:!0,sort_order:t.sortOrder||0,created_at:new Date().toISOString(),updated_at:new Date().toISOString()}).select().single();if(r)throw r;return e}catch(e){se(e,"Create collection")}},async update(t,e){try{e.slug&&qo(e.slug);const{data:r,error:n}=await F.from("collections").update({...e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return r}catch(r){se(r,"Update collection")}},async delete(t){try{const{error:e}=await F.from("collections").delete().eq("id",t);if(e)throw e;return!0}catch(e){se(e,"Delete collection")}},async addProduct(t,e,r=0){try{const{data:n,error:s}=await F.from("collection_products").insert({collection_id:t,product_id:e,sort_order:r}).select().single();if(s)throw s;return n}catch(n){se(n,"Add product to collection")}},async removeProduct(t,e){try{const{error:r}=await F.from("collection_products").delete().eq("collection_id",t).eq("product_id",e);if(r)throw r;return!0}catch(r){se(r,"Remove product from collection")}}},cR={async getAll(t={}){try{const{limit:e=50,offset:r=0,searchTerm:n,statusFilter:s,userId:i}=t;let o=F.from("orders").select(`
          *,
          profiles(id, full_name, email),
          order_items(
            id,
            quantity,
            price,
            products(id, name, images)
          )
        `,{count:"exact"}).order("created_at",{ascending:!1});n&&(o=o.or(`order_number.ilike.%${n}%,profiles.email.ilike.%${n}%`)),s&&(o=o.eq("status",s)),i&&(o=o.eq("user_id",i)),o=o.range(r,r+e-1);const{data:a,error:c,count:l}=await o;if(c)throw c;return{orders:(a==null?void 0:a.map(this.mapFromDB))||[],total:l||0}}catch(e){se(e,"Get orders")}},async getById(t){try{const{data:e,error:r}=await F.from("orders").select(`
          *,
          profiles(id, full_name, email),
          order_items(
            id,
            quantity,
            price,
            products(id, name, images, slug)
          )
        `).eq("id",t).single();if(r)throw r;return e?this.mapFromDB(e):null}catch(e){se(e,"Get order by ID")}},async updateStatus(t,e){try{const{data:r,error:n}=await F.from("orders").update({status:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return this.mapFromDB(r)}catch(r){se(r,"Update order status")}},async updatePaymentStatus(t,e){try{const{data:r,error:n}=await F.from("orders").update({payment_status:e,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(n)throw n;return this.mapFromDB(r)}catch(r){se(r,"Update order payment status")}},async delete(t){try{await F.from("order_items").delete().eq("order_id",t);const{error:e}=await F.from("orders").delete().eq("id",t);if(e)throw e;return!0}catch(e){se(e,"Delete order")}},mapFromDB(t){var e;return{id:t.id,orderNumber:t.order_number,userId:t.user_id,status:t.status,paymentStatus:t.payment_status,paymentMethod:t.payment_method,total:parseFloat(t.total_amount||0),subtotal:parseFloat(t.subtotal||0),taxAmount:parseFloat(t.tax_amount||0),shippingAmount:parseFloat(t.shipping_amount||0),discountAmount:parseFloat(t.discount_amount||0),currency:t.currency||"USD",shippingAddress:t.shipping_address,billingAddress:t.billing_address,notes:t.notes,trackingNumber:t.tracking_number,estimatedDelivery:t.estimated_delivery?new Date(t.estimated_delivery):void 0,createdAt:new Date(t.created_at),updatedAt:t.updated_at?new Date(t.updated_at):void 0,user:t.profiles?{id:t.profiles.id,name:t.profiles.full_name||"",email:t.profiles.email||""}:void 0,items:((e=t.order_items)==null?void 0:e.map(r=>({id:r.id,productId:r.product_id,quantity:r.quantity,price:parseFloat(r.price),product:r.products?{id:r.products.id,name:r.products.name,images:r.products.images||[],slug:r.products.slug}:void 0})))||[]}}};class Sw{constructor(){fe(this,"subscriptions",new Map)}subscribeToTable(e,r){const n=F.channel(`admin-${e}`).on("postgres_changes",{event:"*",schema:"public",table:e},r).subscribe();return this.subscriptions.set(e,n),n}unsubscribeFromTable(e){const r=this.subscriptions.get(e);r&&(r.unsubscribe(),this.subscriptions.delete(e))}unsubscribeAll(){this.subscriptions.forEach(e=>{e.unsubscribe()}),this.subscriptions.clear()}}class Ew{constructor(){fe(this,"realtimeService",new Sw)}async create(e,r,n=[]){try{n.length>0&&Gn(r,n);const s={...r,created_at:new Date().toISOString(),updated_at:new Date().toISOString()},{data:i,error:o}=await F.from(e).insert(s).select().single();if(o)throw o;return this.invalidateCache(e),i}catch(s){se(s,`Create ${e}`)}}async read(e,r={}){try{let n=F.from(e);if(r.select?n=n.select(r.select):n=n.select("*"),r.filters&&Object.entries(r.filters).forEach(([a,c])=>{c!=null&&(n=n.eq(a,c))}),r.orderBy&&(n=n.order(r.orderBy.column,{ascending:r.orderBy.ascending!==!1})),r.limit){const a=r.offset||0;n=n.range(a,a+r.limit-1)}const{data:s,error:i,count:o}=await n;if(i)throw i;return{data:s||[],count:o}}catch(n){se(n,`Read ${e}`)}}async update(e,r,n){try{const s={...n,updated_at:new Date().toISOString()},{data:i,error:o}=await F.from(e).update(s).eq("id",r).select().single();if(o)throw o;return this.invalidateCache(e),i}catch(s){se(s,`Update ${e}`)}}async delete(e,r){try{const{error:n}=await F.from(e).delete().eq("id",r);if(n)throw n;return this.invalidateCache(e),!0}catch(n){se(n,`Delete ${e}`)}}async bulkDelete(e,r){try{const{error:n}=await F.from(e).delete().in("id",r);if(n)throw n;return this.invalidateCache(e),!0}catch(n){se(n,`Bulk delete ${e}`)}}async bulkUpdate(e,r){try{const n=r.map(({id:i,data:o})=>this.update(e,i,o)),s=await Promise.all(n);return this.invalidateCache(e),s}catch(n){se(n,`Bulk update ${e}`)}}invalidateCache(e){switch(e){case"products":Is();break;case"categories":Ns();break}}subscribeToUpdates(e,r){return this.realtimeService.subscribeToTable(e,r)}cleanup(){this.realtimeService.unsubscribeAll()}}const Ji=new Ew;class Tw{constructor(){fe(this,"cache",{});fe(this,"requestQueue",{});fe(this,"CACHE_DURATION",300*1e3);fe(this,"REQUEST_TIMEOUT",1e4)}async deduplicateRequest(e,r){if(this.requestQueue[e])return console.log(` Deduplicating request: ${e}`),this.requestQueue[e];const n=this.getFromCache(e);if(n)return console.log(` Using cached data: ${e}`),n;const s=this.withTimeout(r(),this.REQUEST_TIMEOUT);this.requestQueue[e]=s;try{const i=await s;return this.setCache(e,i),i}catch(i){throw console.error(` Request failed: ${e}`,i),i}finally{delete this.requestQueue[e]}}async batchRequests(e){console.log(` Batching ${e.length} requests`);const r=e.map(({key:n,fn:s})=>this.deduplicateRequest(n,s));try{return await Promise.all(r)}catch(n){throw console.error(" Batch request failed:",n),n}}getFromCache(e){const r=this.cache[e];return r?Date.now()-r.timestamp>this.CACHE_DURATION?(delete this.cache[e],null):r.data:null}setCache(e,r){this.cache[e]={data:r,timestamp:Date.now()},this.cleanupCache()}cleanupCache(){const e=Date.now();Object.keys(this.cache).forEach(r=>{e-this.cache[r].timestamp>this.CACHE_DURATION&&delete this.cache[r]})}withTimeout(e,r){return Promise.race([e,new Promise((n,s)=>setTimeout(()=>s(new Error("Request timeout")),r))])}clearCache(){this.cache={},console.log(" Cache cleared")}clearCacheEntry(e){delete this.cache[e],console.log(` Cache entry cleared: ${e}`)}getCacheStats(){const e=Object.keys(this.cache).length,r=JSON.stringify(this.cache).length;return{entries:e,size:`${(r/1024).toFixed(2)} KB`}}async preloadData(e){console.log(` Preloading ${e.length} data requests`),e.forEach(({key:r,fn:n})=>{this.deduplicateRequest(r,n).catch(s=>{console.warn(` Preload failed for ${r}:`,s)})})}createOptimizedFetch(){return async(e,r)=>{const n=`fetch:${e}:${JSON.stringify(r)}`;return this.deduplicateRequest(n,async()=>{const s=await fetch(e,{...r,signal:AbortSignal.timeout(this.REQUEST_TIMEOUT)});if(!s.ok)throw new Error(`HTTP ${s.status}: ${s.statusText}`);return s.json()})}}async retryRequest(e,r=3,n=1e3){let s;for(let i=0;i<=r;i++)try{return await e()}catch(o){if(s=o,i===r)break;const a=n*Math.pow(2,i);console.log(` Retrying request in ${a}ms (attempt ${i+1}/${r+1})`),await new Promise(c=>setTimeout(c,a))}throw s}}const $e=new Tw,kw=$e.deduplicateRequest.bind($e),jw=$e.batchRequests.bind($e);$e.createOptimizedFetch();$e.retryRequest.bind($e);$e.clearCache.bind($e);$e.clearCacheEntry.bind($e);$e.getCacheStats.bind($e);$e.preloadData.bind($e);const Ch=E.createContext(void 0),Rh=()=>{const t=E.useContext(Ch);if(!t)throw new Error("useProducts must be used within a ProductProvider");return t},Aw=({children:t})=>{const[e,r]=E.useState([]),[n,s]=E.useState([]),[i,o]=E.useState([]),[a,c]=E.useState(!0),[l,u]=E.useState(!0),[h,f]=E.useState(!1),[p,m]=E.useState(!0),[y,x]=E.useState(!1),{setError:S}=Fa();E.useEffect(()=>{console.log("ProductProvider initialized");let I=!1;const M=setTimeout(()=>{I||(I=!0,Ji.subscribeToUpdates("products",D=>{console.log("Real-time product update:",D),setTimeout(()=>w(!0),1e3)}),Ji.subscribeToUpdates("categories",D=>{console.log("Real-time category update:",D),setTimeout(()=>_(),1e3)}))},3e3);return()=>{clearTimeout(M),Ji.cleanup()}},[]);const _=E.useCallback(async()=>{try{const I=Ki("categories"),R=ys.get(I);if(R){console.log("Using cached categories"),o(R);return}const M=await kl();console.log("Using database categories:",M.length),o(M),x(!1),ys.set(I,M)}catch(I){console.error("Error fetching categories:",I),S("Failed to load categories from database"),o([]),x(!1)}},[S]),b=E.useCallback(async(I=8)=>{try{m(!0);const R=await kw(`featured-products-${I}`,()=>F0(I));console.log("Using featured products:",R.length),s(R),x(!1)}catch(R){console.error("Error fetching featured products:",R),S("Failed to load featured products from database"),s([]),x(!1)}finally{m(!1)}},[S]),w=E.useCallback(async(I=!1)=>{if(a&&!I){console.log("Fetch already in progress, skipping...");return}c(!0),u(!0);try{const R=Ki("products-basic"),M=Ki("categories"),D=I?null:Gi.get(R),q=I?null:ys.get(M);if(D&&q){console.log("Using cached products and categories"),r(D),o(q),u(!1),c(!1),x(!1);return}console.log("Attempting to fetch products from database");const V=async(L,X=1e4)=>Promise.race([L,new Promise((re,he)=>setTimeout(()=>he(new Error("Request timeout")),X))]);try{const[L,X]=await jw([{key:"products-basic-20",fn:()=>$0({limit:20})},{key:"categories-all",fn:()=>kl()}]);console.log("Database fetch results:",{productsCount:L.length,categoriesCount:X.length}),r(L),Gi.set(R,L),o(X),ys.set(M,X),x(!1),u(!1),!I&&L.length>=20&&setTimeout(async()=>{try{f(!0);const re=await T0({limit:50,offset:20});re.length>0&&(r(he=>[...he,...re]),Gi.set("products-full",[...L,...re]))}catch(re){console.warn("Failed to fetch additional products:",re)}finally{f(!1)}},2e3)}catch(L){console.error("Database fetch error:",L),L instanceof Error&&L.message.includes("infinite recursion")?S("DATABASE SETUP ERROR: Your database security policies are causing an infinite loop. Please run the provided SQL script in your Supabase SQL Editor to fix it."):L instanceof Error&&L.message.includes("timeout")?S("Database connection timeout. Please check your internet connection."):S("Failed to load data from database. Please try refreshing the page."),r([]),o([]),x(!1)}}catch(R){console.error("Error in fetchProducts:",R),S("An unexpected error occurred while loading data."),r([]),o([]),x(!1)}finally{c(!1),u(!1)}},[S,a]);E.useEffect(()=>{let I=!0;return(async()=>{I&&await w()})(),()=>{I=!1}},[]),E.useEffect(()=>{let I=!0;return(async()=>{I&&await b()})(),()=>{I=!1}},[]);const N={products:e,featuredProducts:n,categories:i,addProduct:async I=>{try{const R=await Xi.create(I);R?(Is(),await w(!0),console.log(" Product created successfully:",R)):S("Failed to add product")}catch(R){console.error("Error adding product:",R),S("Error adding product: "+(R instanceof Error?R.message:"Unknown error"))}},updateProduct:async I=>{try{const R=await Xi.update(I.id,I);R?(Is(I.id),await w(!0),console.log(" Product updated successfully:",R)):S("Failed to update product")}catch(R){console.error("Error updating product:",R),S("Error updating product: "+(R instanceof Error?R.message:"Unknown error"))}},deleteProduct:async I=>{try{await Xi.delete(I)?(Is(I),await w(!0),console.log(" Product deleted successfully")):S("Failed to delete product")}catch(R){console.error("Error deleting product:",R),S("Error deleting product: "+(R instanceof Error?R.message:"Unknown error"))}},fetchReviewsForProduct:async I=>{try{const{data:R,error:M}=await F.from("reviews").select("*, profiles(full_name, avatar_url)").eq("product_id",I).order("created_at",{ascending:!1});return M?(console.error("Error fetching reviews:",M),[]):R}catch(R){return console.error("Error fetching reviews:",R),[]}},submitReview:async I=>{try{await U0(I.productId||I.product_id,I.rating,I.comment||"",I.title)||S("Failed to submit review")}catch(R){S("Error submitting review: "+(R instanceof Error?R.message:"Unknown error"))}},fetchProducts:w,fetchCategories:_,fetchFeaturedProducts:b,loading:a,basicLoading:l,detailsLoading:h,featuredLoading:p,isUsingMockData:y,addCategory:async I=>{try{return await B0(I)?(Ns(),await _(),Promise.resolve()):(S("Failed to add category"),Promise.reject(new Error("Failed to add category")))}catch(R){return console.error("Error adding category:",R),S("Error adding category: "+(R instanceof Error?R.message:"Unknown error")),Promise.reject(R)}},updateCategory:async I=>{try{return await V0(I)?(Ns(),await _(),Promise.resolve()):(S("Failed to update category"),Promise.reject(new Error("Failed to update category")))}catch(R){return console.error("Error updating category:",R),S("Error updating category: "+(R instanceof Error?R.message:"Unknown error")),Promise.reject(R)}},deleteCategory:async I=>{try{return await q0(I)?(Ns(),await _(),Promise.resolve()):(S("Failed to delete category - it may have products associated with it"),Promise.reject(new Error("Failed to delete category")))}catch(R){return console.error("Error deleting category:",R),S("Error deleting category: "+(R instanceof Error?R.message:"Unknown error")),Promise.reject(R)}}};return d.jsx(Ch.Provider,{value:N,children:t})},Ih=E.createContext(void 0),Pw=[{id:"1",name:"Royal Heritage Collection",slug:"royal-heritage",description:"Timeless fragrances inspired by royal traditions and ancient perfumery arts. Each bottle contains centuries of wisdom and craftsmanship, bringing you the essence of royal courts and majestic ceremonies.",shortDescription:"Royal-inspired luxury attars",image:"https://images.unsplash.com/photo-1541643600914-78b084683601?w=400",bannerImage:"https://images.unsplash.com/photo-1541643600914-78b084683601?w=800",type:"heritage",status:"active",price:299,originalPrice:399,discount:25,productIds:["1","2","3"],productCount:12,featured:!0,isExclusive:!0,launchDate:new Date("2024-01-15"),sortOrder:1,tags:["luxury","heritage","royal","exclusive"],metaTitle:"Royal Heritage Collection - Luxury Attars",metaDescription:"Discover our Royal Heritage Collection featuring timeless fragrances inspired by royal traditions.",createdAt:new Date("2024-01-01"),updatedAt:new Date("2024-01-15")},{id:"2",name:"Seasonal Blossoms",slug:"seasonal-blossoms",description:"Fresh floral compositions that capture the essence of each season. From spring cherry blossoms to autumn roses, experience nature's beauty in every drop.",shortDescription:"Seasonal floral fragrances",image:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=400",bannerImage:"https://images.unsplash.com/photo-1578662996442-48f60103fc96?w=800",type:"seasonal",status:"active",price:199,originalPrice:249,discount:20,productIds:["4","5","6"],productCount:8,featured:!0,isExclusive:!1,launchDate:new Date("2024-03-01"),endDate:new Date("2024-06-30"),sortOrder:2,tags:["floral","seasonal","fresh"],metaTitle:"Seasonal Blossoms Collection - Floral Attars",metaDescription:"Experience the beauty of seasonal flowers with our Seasonal Blossoms collection.",createdAt:new Date("2024-02-15"),updatedAt:new Date("2024-03-01")},{id:"3",name:"Limited Edition Oud",slug:"limited-oud",description:"Rare and precious oud compositions available for a limited time only. Sourced from the finest agarwood trees, these exclusive blends represent the pinnacle of oud craftsmanship.",shortDescription:"Exclusive limited oud collection",image:"https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?w=400",bannerImage:"https://images.unsplash.com/photo-1594736797933-d0401ba2fe65?w=800",type:"limited",status:"coming_soon",price:599,originalPrice:799,discount:25,productIds:["7","8"],productCount:5,featured:!0,isExclusive:!0,launchDate:new Date("2024-12-01"),endDate:new Date("2025-02-28"),sortOrder:3,tags:["oud","limited","premium","rare"],metaTitle:"Limited Edition Oud Collection - Rare Attars",metaDescription:"Discover our exclusive Limited Edition Oud collection featuring rare and precious compositions.",createdAt:new Date("2024-10-01"),updatedAt:new Date("2024-11-15")},{id:"4",name:"Modern Fusion",slug:"modern-fusion",description:"Contemporary blends that merge traditional attars with modern perfumery techniques. Innovation meets tradition in these groundbreaking compositions.",shortDescription:"Modern attar innovations",image:"https://images.unsplash.com/photo-1588405748880-12d1d2a59d32?w=400",bannerImage:"https://images.unsplash.com/photo-1588405748880-12d1d2a59d32?w=800",type:"modern",status:"active",price:249,originalPrice:299,discount:17,productIds:["9","10","11"],productCount:10,featured:!1,isExclusive:!1,sortOrder:4,tags:["modern","fusion","contemporary"],metaTitle:"Modern Fusion Collection - Contemporary Attars",metaDescription:"Experience the future of fragrance with our Modern Fusion collection.",createdAt:new Date("2024-05-01"),updatedAt:new Date("2024-06-15")},{id:"5",name:"Signature Classics",slug:"signature-classics",description:"Our most beloved and iconic fragrances that have defined our brand for generations. These timeless classics continue to captivate and inspire.",shortDescription:"Iconic signature fragrances",image:"https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?w=400",bannerImage:"https://images.unsplash.com/photo-1592945403244-b3fbafd7f539?w=800",type:"signature",status:"active",price:179,originalPrice:199,discount:10,productIds:["12","13","14","15"],productCount:15,featured:!0,isExclusive:!1,sortOrder:5,tags:["signature","classic","bestseller"],metaTitle:"Signature Classics Collection - Iconic Attars",metaDescription:"Discover our most beloved Signature Classics collection featuring iconic fragrances.",createdAt:new Date("2023-01-01"),updatedAt:new Date("2024-01-01")}],Cw=({children:t})=>{const[e,r]=E.useState([]),[n,s]=E.useState(!0),[i,o]=E.useState(null),{showNotification:a}=vr(),c=async()=>{try{s(!0),o(null);const{data:_,error:b}=await F.from("collections").select(`
          *,
          collection_products(
            product_id,
            products(id, name, price, images)
          )
        `).order("sort_order",{ascending:!0});if(b)throw b;const w=(_||[]).map(v=>{var g,k;return{id:v.id,name:v.name,slug:v.slug,description:v.description,shortDescription:v.short_description,image:v.image_url||"",bannerImage:v.banner_image_url,type:v.type,status:v.status,price:v.price,originalPrice:v.original_price,discount:v.discount_percentage,productIds:((g=v.collection_products)==null?void 0:g.map(T=>T.product_id))||[],productCount:((k=v.collection_products)==null?void 0:k.length)||0,featured:v.featured,isExclusive:v.is_exclusive,launchDate:v.launch_date?new Date(v.launch_date):void 0,endDate:v.end_date?new Date(v.end_date):void 0,sortOrder:v.sort_order,tags:v.tags||[],metaTitle:v.meta_title,metaDescription:v.meta_description,createdAt:new Date(v.created_at),updatedAt:new Date(v.updated_at)}});r(w)}catch(_){o("Failed to load collections"),console.error("Error loading collections:",_),r(Pw)}finally{s(!1)}};E.useEffect(()=>{c()},[]);const l=e.filter(_=>_.featured),u=e.filter(_=>_.status==="active"),h=_=>e.find(b=>b.id===_),S={collections:e,loading:n,error:i,featuredCollections:l,activeCollections:u,getCollectionById:h,getCollectionBySlug:_=>e.find(b=>b.slug===_),addCollection:async _=>{var b,w;try{const v={name:_.name,slug:_.slug||_.name.toLowerCase().replace(/[^a-z0-9]+/g,"-"),description:_.description,short_description:_.shortDescription,image_url:_.image,banner_image_url:_.bannerImage,type:_.type,status:_.status,price:_.price,original_price:_.originalPrice,discount_percentage:_.discount,featured:_.featured,is_exclusive:_.isExclusive,launch_date:(b=_.launchDate)==null?void 0:b.toISOString(),end_date:(w=_.endDate)==null?void 0:w.toISOString(),sort_order:_.sortOrder||0,tags:_.tags,meta_title:_.metaTitle,meta_description:_.metaDescription},{data:g,error:k}=await F.from("collections").insert(v).select().single();if(k)throw k;if(_.productIds.length>0){const j=_.productIds.map((C,A)=>({collection_id:g.id,product_id:C,sort_order:A})),{error:P}=await F.from("collection_products").insert(j);if(P)throw P}return a({type:"success",title:"Collection Created",message:`${g.name} has been successfully created.`}),await c(),{id:g.id,name:g.name,slug:g.slug,description:g.description,shortDescription:g.short_description,image:g.image_url||"",bannerImage:g.banner_image_url,type:g.type,status:g.status,price:g.price,originalPrice:g.original_price,discount:g.discount_percentage,productIds:_.productIds,productCount:_.productIds.length,featured:g.featured,isExclusive:g.is_exclusive,launchDate:g.launch_date?new Date(g.launch_date):void 0,endDate:g.end_date?new Date(g.end_date):void 0,sortOrder:g.sort_order,tags:g.tags||[],metaTitle:g.meta_title,metaDescription:g.meta_description,createdAt:new Date(g.created_at),updatedAt:new Date(g.updated_at)}}catch(v){console.error("Error creating collection:",v);const g="Failed to create collection";throw o(g),a({type:"error",title:"Creation Failed",message:g}),new Error(g)}},updateCollection:async(_,b)=>{try{const w=h(_);if(!w)throw new Error("Collection not found");const v={...w,...b,id:_,updatedAt:new Date};return await new Promise(g=>setTimeout(g,500)),r(g=>g.map(k=>k.id===_?v:k)),a({type:"success",title:"Collection Updated",message:`${v.name} has been successfully updated.`}),v}catch{const v="Failed to update collection";throw o(v),a({type:"error",title:"Update Failed",message:v}),new Error(v)}},deleteCollection:async _=>{try{const b=h(_);if(!b)throw new Error("Collection not found");await new Promise(w=>setTimeout(w,500)),r(w=>w.filter(v=>v.id!==_)),a({type:"success",title:"Collection Deleted",message:`${b.name} has been successfully deleted.`})}catch{const w="Failed to delete collection";throw o(w),a({type:"error",title:"Deletion Failed",message:w}),new Error(w)}},refreshCollections:async()=>{await c()}};return d.jsx(Ih.Provider,{value:S,children:t})},lR=()=>{const t=E.useContext(Ih);if(t===void 0)throw new Error("useCollections must be used within a CollectionProvider");return t},Nh=E.createContext(void 0),Rw=()=>{const t=E.useContext(Nh);if(!t)throw new Error("useCompare must be used within a CompareProvider");return t},Iw=({children:t})=>{const{user:e}=kt(),[r,n]=E.useState(()=>{const f=localStorage.getItem("compare");return f?JSON.parse(f):[]}),{showNotification:s}=vr(),[i,o]=E.useState(null);E.useEffect(()=>{localStorage.setItem("compare",JSON.stringify(r))},[r]),E.useEffect(()=>{i&&(s({type:"info",title:"Added to Compare",message:`${i.name} has been added to your compare list.`}),o(null))},[i,s]);const a=E.useCallback(f=>{if(!e){s({type:"info",title:"Authentication Required",message:"Please log in or create an account to compare products."});return}n(p=>p.find(m=>m.id===f.id)?p:p.length>=4?(s({type:"error",title:"Compare List Full",message:"You can only compare up to 4 products at a time."}),p):(o(f),[...p,f]))},[s,e]),c=E.useCallback(f=>{n(p=>p.filter(m=>m.id!==f))},[]),l=E.useCallback(f=>r.some(p=>p.id===f),[r]),u=E.useCallback(()=>{n([])},[]),h={items:r,addItem:a,removeItem:c,isInCompare:l,clearCompare:u};return d.jsx(Nh.Provider,{value:h,children:t})},Oh=E.createContext(void 0),uR=()=>{const t=E.useContext(Oh);if(!t)throw new Error("useOrders must be used within an OrderProvider");return t},Nw=({children:t})=>{const{user:e}=kt(),{showNotification:r}=vr(),[n,s]=E.useState([]),[i,o]=E.useState(!1),a=E.useCallback(async()=>{if(!e){s([]);return}o(!0);try{const p=await jl(e.id);s(p)}catch(p){console.error("Error fetching orders:",p),r({type:"error",title:"Error",message:"Failed to load orders. Please try again later."})}finally{o(!1)}},[e,r]);E.useEffect(()=>{a()},[a]);const f={orders:n,loading:i,createOrder:async(p,m,y,x="cash_on_delivery")=>{if(!e)return r({type:"error",title:"Authentication Required",message:"Please log in to place an order"}),null;o(!0);try{const S=await D0({items:p,shippingAddress:m,billingAddress:y,paymentMethod:x});return S?(r({type:"success",title:"Order Placed",message:"Your order has been placed successfully!"}),await a(),S):(r({type:"error",title:"Order Failed",message:"Failed to create order. Please try again."}),null)}catch(S){return console.error("Error creating order:",S),r({type:"error",title:"Order Failed",message:"An unexpected error occurred. Please try again."}),null}finally{o(!1)}},updateOrderStatus:async(p,m)=>{try{await H0(p,m)?(await a(),r({type:"success",title:"Status Updated",message:`Order status updated to ${m}`})):r({type:"error",title:"Update Failed",message:"Failed to update order status"})}catch(y){console.error("Error updating order status:",y),r({type:"error",title:"Update Failed",message:"Failed to update order status. Please try again later."})}},getOrderById:async p=>{try{return await P0(p)}catch(m){console.error("Error fetching order:",m);const y=n.find(x=>x.id===p);return y||null}},getUserOrders:async p=>{const m=p||(e==null?void 0:e.id);if(!m)return[];try{return await jl(m)}catch(y){return console.error("Error fetching user orders:",y),[]}}};return d.jsx(Oh.Provider,{value:f,children:t})},Dh=E.createContext(void 0),dR=()=>{const t=E.useContext(Dh);if(!t)throw new Error("useAddresses must be used within an AddressProvider");return t},Ow=({children:t})=>{const[e,r]=E.useState([]),[n,s]=E.useState(!1),{user:i}=kt(),{showNotification:o}=vr(),a=E.useCallback(async()=>{if(!i){r([]);return}s(!0);try{const p=await z0();r(p)}catch(p){console.error("Error fetching addresses:",p),o({type:"error",title:"Error",message:"Failed to fetch addresses"})}finally{s(!1)}},[i,o]);E.useEffect(()=>{a()},[a]);const f={addresses:e,addAddress:async p=>{if(!i){o({type:"error",title:"Authentication Required",message:"Please log in to add an address"});return}try{await W0(p)?(await a(),o({type:"success",title:"Address Added",message:"Your address has been added successfully"})):o({type:"error",title:"Error",message:"Failed to add address"})}catch(m){console.error("Error adding address:",m),o({type:"error",title:"Error",message:"Failed to add address"})}},updateAddress:async p=>{try{await L0(p)?(await a(),o({type:"success",title:"Address Updated",message:"Your address has been updated successfully"})):o({type:"error",title:"Error",message:"Failed to update address"})}catch(m){console.error("Error updating address:",m),o({type:"error",title:"Error",message:"Failed to update address"})}},deleteAddress:async p=>{try{await M0(p)?(await a(),o({type:"success",title:"Address Deleted",message:"Your address has been deleted successfully"})):o({type:"error",title:"Error",message:"Failed to delete address"})}catch(m){console.error("Error deleting address:",m),o({type:"error",title:"Error",message:"Failed to delete address"})}},setDefaultAddress:async(p,m)=>{try{await G0(p,m)?(await a(),o({type:"success",title:"Default Address Set",message:`Default ${m} address has been updated`})):o({type:"error",title:"Error",message:"Failed to set default address"})}catch(y){console.error("Error setting default address:",y),o({type:"error",title:"Error",message:"Failed to set default address"})}},fetchAddresses:a,loading:n};return d.jsx(Dh.Provider,{value:f,children:t})},gn="recentlyViewed",Dw=20;class Lw{constructor(){fe(this,"sessionId");this.sessionId=this.generateSessionId()}generateSessionId(){return`session_${Date.now()}_${Math.random().toString(36).substr(2,9)}`}addProduct(e){try{const n=this.getRecentlyViewed().filter(o=>o.productId!==e),i=[{productId:e,viewedAt:Date.now(),sessionId:this.sessionId},...n].slice(0,Dw);localStorage.setItem(gn,JSON.stringify(i)),window.dispatchEvent(new CustomEvent("recentlyViewedUpdated",{detail:{productId:e,items:i}}))}catch(r){console.error("Error adding product to recently viewed:",r)}}getRecentlyViewed(){try{const e=localStorage.getItem(gn);if(!e)return[];const r=JSON.parse(e),n=Date.now()-720*60*60*1e3,s=r.filter(i=>i.viewedAt>n);return s.length!==r.length&&localStorage.setItem(gn,JSON.stringify(s)),s}catch(e){return console.error("Error getting recently viewed products:",e),[]}}getRecentlyViewedIds(){return this.getRecentlyViewed().map(e=>e.productId)}removeProduct(e){try{const n=this.getRecentlyViewed().filter(s=>s.productId!==e);localStorage.setItem(gn,JSON.stringify(n)),window.dispatchEvent(new CustomEvent("recentlyViewedUpdated",{detail:{productId:e,items:n,action:"removed"}}))}catch(r){console.error("Error removing product from recently viewed:",r)}}clearAll(){try{localStorage.removeItem(gn),window.dispatchEvent(new CustomEvent("recentlyViewedUpdated",{detail:{items:[],action:"cleared"}}))}catch(e){console.error("Error clearing recently viewed products:",e)}}getRecentlyViewedProducts(e){return this.getRecentlyViewedIds().map(n=>e.find(s=>s.id===n)).filter(n=>n!==void 0)}getAnalytics(){const e=this.getRecentlyViewed(),r=new Set(e.map(o=>o.productId)).size,n=new Set(e.map(o=>o.sessionId)).size,s={};e.forEach(o=>{const a=new Date(o.viewedAt).getHours();s[a]=(s[a]||0)+1});const i=Object.entries(s).map(([o,a])=>({hour:parseInt(o),count:a})).sort((o,a)=>o.hour-a.hour);return{totalViewed:e.length,uniqueProducts:r,averageViewsPerSession:n>0?e.length/n:0,topViewedCategories:[],viewingPatterns:i}}getViewingBasedRecommendations(e,r=8){const n=this.getRecentlyViewedProducts(e);if(n.length===0)return e.filter(c=>c.featured||c.rating>=4).sort((c,l)=>l.rating-c.rating).slice(0,r);const s=[...new Set(n.map(c=>c.category))],i=[...new Set(n.map(c=>c.brand).filter(Boolean))],o=new Set(n.map(c=>c.id));return e.filter(c=>!o.has(c.id)).map(c=>{let l=0;s.includes(c.category)&&(l+=30),c.brand&&i.includes(c.brand)&&(l+=20),l+=c.rating*10,c.featured&&(l+=15);const u=n.reduce((f,p)=>f+p.price,0)/n.length;return Math.abs(c.price-u)/u<=.5&&(l+=10),{product:c,score:l}}).sort((c,l)=>l.score-c.score).slice(0,r).map(c=>c.product)}isRecentlyViewed(e){return this.getRecentlyViewedIds().includes(e)}getLastViewedTime(e){const n=this.getRecentlyViewed().find(s=>s.productId===e);return n?n.viewedAt:null}}const Ir=new Lw,Lh=E.createContext(void 0),Mw=({children:t})=>{const{products:e}=Rh(),[r,n]=E.useState({related:[],frequentlyBought:[],youMayLike:[],recentlyViewed:[],trending:[],newArrivals:[]}),[s,i]=E.useState(!1),[o,a]=E.useState(null),c=(v,g)=>{let k=0;if(v.category===g.category&&(k+=40),Math.abs(v.price-g.price)/Math.max(v.price,g.price)<=.3&&(k+=25),v.sellerName&&g.sellerName&&v.sellerName===g.sellerName&&(k+=20),Math.abs(v.rating-g.rating)<=.5&&(k+=10),v.tags&&g.tags){const P=v.tags.filter(C=>g.tags.includes(C));k+=P.length/Math.max(v.tags.length,g.tags.length)*5}return k},l=(v,g=4)=>{const k=e.find(T=>T.id===v);return k?e.filter(T=>T.id!==v).map(T=>({product:T,score:c(k,T)})).sort((T,j)=>j.score-T.score).slice(0,g).map(T=>T.product):[]},u=(v,g=3)=>{const k=e.find(j=>j.id===v);if(!k)return[];const T={"Oudh Attars":["Amber Attars","Sandalwood Attars","Musk Attars"],"Floral Attars":["Jasmine Attars","Rose Attars","Attar Blends"],"Musk Attars":["Oudh Attars","Amber Attars","Heritage Attars"],"Amber Attars":["Oudh Attars","Saffron Attars","Musk Attars"],"Saffron Attars":["Amber Attars","Heritage Attars","Attar Blends"],"Sandalwood Attars":["Oudh Attars","Musk Attars","Floral Attars"],"Jasmine Attars":["Floral Attars","Attar Blends","Seasonal Attars"],"Attar Blends":["Heritage Attars","Saffron Attars","Seasonal Attars"],"Seasonal Attars":["Attar Blends","Floral Attars","Jasmine Attars"],"Heritage Attars":["Oudh Attars","Saffron Attars","Attar Blends"]};return e.filter(j=>j.id!==v).map(j=>{var A;let P=0;k.category&&j.category&&((A=T[k.category])!=null&&A.includes(j.category))?P+=50:k.category===j.category&&(P+=30);const C=j.price/k.price;return C>=.1&&C<=.6&&(P+=30),P+=j.rating*10,j.stock>0&&(P+=10),{product:j,score:P}}).sort((j,P)=>P.score-j.score).slice(0,g).map(j=>j.product)},h=(v=8)=>{const g=Ir.getRecentlyViewedProducts(e);if(g.length===0)return e.filter(C=>C.featured||C.rating>=4).sort((C,A)=>C.featured&&!A.featured?-1:!C.featured&&A.featured?1:A.rating-C.rating).slice(0,v);const k=[...new Set(g.map(C=>C.category))],T=[...new Set(g.map(C=>C.sellerName).filter(Boolean))],j=g.reduce((C,A)=>C+A.price,0)/g.length,P=new Set(g.map(C=>C.id));return e.filter(C=>!P.has(C.id)).map(C=>{let A=0;return k.includes(C.category)&&(A+=30),C.sellerName&&T.includes(C.sellerName)&&(A+=20),A+=C.rating*5,C.featured&&(A+=10),Math.abs(C.price-j)/j<=.5&&(A+=10),C.stock>0&&(A+=5),A+=Math.random()*5,{product:C,score:A}}).sort((C,A)=>A.score-C.score).slice(0,v).map(C=>C.product)},f=(v=6)=>Ir.getRecentlyViewedProducts(e).slice(0,v),p=(v=8)=>e.map(g=>({product:g,score:g.rating*20+(g.featured?30:0)+Math.random()*50})).sort((g,k)=>k.score-g.score).slice(0,v).map(g=>g.product),m=(v=8)=>e.filter(g=>g.createdAt).sort((g,k)=>new Date(k.createdAt).getTime()-new Date(g.createdAt).getTime()).slice(0,v),y=v=>{Ir.addProduct(v),n(g=>({...g,recentlyViewed:f()}))},x=v=>{Ir.removeProduct(v),n(g=>({...g,recentlyViewed:f()}))},S=()=>{Ir.clearAll(),n(v=>({...v,recentlyViewed:[]}))},_=()=>({recentlyViewed:Ir.getAnalytics(),totalRecommendations:Object.values(r).flat().length,categoriesRepresented:[...new Set(Object.values(r).flat().map(v=>v.category))].length,averageRating:Object.values(r).flat().reduce((v,g)=>v+g.rating,0)/Object.values(r).flat().length||0}),b=v=>{i(!0),a(null);try{const g={related:v?l(v):[],frequentlyBought:v?u(v):[],youMayLike:h(),recentlyViewed:f(),trending:p(),newArrivals:m()};n(g)}catch(g){a(g instanceof Error?g.message:"Failed to load recommendations")}finally{i(!1)}};E.useEffect(()=>{e.length>0&&b()},[e]),E.useEffect(()=>{const v=()=>{n(g=>({...g,recentlyViewed:f(),youMayLike:h()}))};return window.addEventListener("recentlyViewedUpdated",v),()=>window.removeEventListener("recentlyViewedUpdated",v)},[e]);const w={recommendations:r,loading:s,error:o,getRelatedProducts:l,getFrequentlyBoughtTogether:u,getPersonalizedRecommendations:h,getRecentlyViewed:f,getTrendingProducts:p,getNewArrivals:m,addToRecentlyViewed:y,removeFromRecentlyViewed:x,clearRecentlyViewed:S,getRecommendationAnalytics:_,refreshRecommendations:b};return d.jsx(Lh.Provider,{value:w,children:t})},hR=()=>{const t=E.useContext(Lh);if(t===void 0)throw new Error("useRecommendations must be used within a RecommendationsProvider");return t},Fw=E.createContext(void 0),$w=({children:t})=>d.jsx(Fw.Provider,{value:{theme:"light",actualTheme:"light"},children:t}),Uw=({isOpen:t,onClose:e,initialMode:r="login"})=>{const[n,s]=E.useState(r),[i,o]=E.useState(!1),[a,c]=E.useState(!1),[l,u]=E.useState(!1),[h,f]=E.useState(1),[p,m]=E.useState(!1),{signIn:y,signUp:x}=kt(),{showNotification:S}=vr(),[_,b]=E.useState({email:"",password:"",confirmPassword:"",fullName:"",phone:"",dateOfBirth:"",address:"",agreeToTerms:!1,subscribeNewsletter:!0}),[w,v]=E.useState({});E.useEffect(()=>(t?(s(r),f(1),b({email:"",password:"",confirmPassword:"",fullName:"",phone:"",dateOfBirth:"",address:"",agreeToTerms:!1,subscribeNewsletter:!0}),v({}),document.body.style.overflow="hidden"):document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[t,r]);const g=A=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(A),k=A=>{const N=[];return A.length<8&&N.push("At least 8 characters"),/[A-Z]/.test(A)||N.push("One uppercase letter"),/[a-z]/.test(A)||N.push("One lowercase letter"),/\d/.test(A)||N.push("One number"),/[!@#$%^&*(),.?":{}|<>]/.test(A)||N.push("One special character"),{isValid:N.length===0,errors:N}},T=()=>{const A={};if(_.email?g(_.email)||(A.email="Please enter a valid email address"):A.email="Email is required",!_.password)A.password="Password is required";else if(n==="signup"){const N=k(_.password);N.isValid||(A.password=N.errors.join(", "))}return n==="signup"&&(h===1&&_.password!==_.confirmPassword&&(A.confirmPassword="Passwords do not match"),h===2&&(_.fullName.trim()||(A.fullName="Full name is required"),_.agreeToTerms||(A.agreeToTerms="You must agree to the terms and conditions"),_.phone&&!/^\+?[\d\s-()]+$/.test(_.phone)&&(A.phone="Please enter a valid phone number"),_.address.trim()||(A.address="Address is required"))),v(A),Object.keys(A).length===0},j=(A,N)=>{b(I=>({...I,[A]:N})),w[A]&&v(I=>{const R={...I};return delete R[A],R})},P=async A=>{if(A.preventDefault(),!!T()){u(!0);try{n==="login"?(await y(_.email,_.password),S({type:"success",title:"Welcome back!",message:"Successfully logged in."}),e()):n==="signup"?h===1?f(2):(await x(_.email,_.password,{fullName:_.fullName,phone:_.phone,dateOfBirth:_.dateOfBirth,address:_.address,subscribeNewsletter:_.subscribeNewsletter}),s("verify"),S({type:"success",title:"Account created!",message:"Please check your email to verify your account."})):n==="forgot"&&(S({type:"success",title:"Password reset link sent!",message:"Check your email for instructions."}),s("login"))}catch(N){const I=N instanceof Error?N.message:"An error occurred. Please try again.";S({type:"error",title:"Authentication Error",message:I})}finally{u(!1)}}},C=A=>{const N=k(A),I=Math.max(0,5-N.errors.length);return I===0?{strength:0,label:"Very Weak",color:"bg-red-500"}:I<=2?{strength:I*20,label:"Weak",color:"bg-orange-500"}:I<=3?{strength:I*20,label:"Fair",color:"bg-yellow-500"}:I<=4?{strength:I*20,label:"Good",color:"bg-blue-500"}:{strength:100,label:"Strong",color:"bg-green-500"}};return t?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-50 p-4 backdrop-blur-sm overflow-hidden",children:d.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-3xl max-h-[90vh] overflow-hidden border border-neutral-200 relative flex flex-col",children:[d.jsxs("div",{className:"relative bg-gradient-to-r from-purple-600 to-indigo-600 text-white p-6 flex-shrink-0",children:[d.jsx("button",{onClick:e,className:"absolute top-4 right-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors duration-200","aria-label":"Close",children:d.jsx(bt,{className:"h-5 w-5"})}),n!=="login"&&n!=="verify"&&d.jsx("button",{onClick:()=>{n==="signup"&&h===2?f(1):s("login")},className:"absolute top-4 left-4 p-2 hover:bg-white hover:bg-opacity-20 rounded-full transition-colors","aria-label":"Back",children:d.jsx(mh,{className:"h-5 w-5"})}),d.jsxs("div",{className:"text-center mt-6",children:[d.jsx("div",{className:"w-16 h-16 bg-white bg-opacity-20 rounded-full flex items-center justify-center mx-auto mb-4",children:n==="verify"?d.jsx(vi,{className:"h-8 w-8"}):n==="forgot"||n==="reset"?d.jsx(Bo,{className:"h-8 w-8"}):d.jsx(Nt,{className:"h-8 w-8"})}),d.jsxs("h2",{className:"text-2xl font-bold",children:[n==="login"&&"Welcome to S.Essences",n==="signup"&&(h===1?"Create Account":"Complete Profile"),n==="forgot"&&"Reset Password",n==="verify"&&"Check Your Email",n==="reset"&&"New Password"]}),d.jsxs("p",{className:"text-indigo-100 mt-2",children:[n==="login"&&"Sign in to discover premium attars",n==="signup"&&(h===1?"Join our community of fragrance lovers":"Tell us about yourself"),n==="forgot"&&"Enter your email to reset your password",n==="verify"&&"We sent a verification link to your email",n==="reset"&&"Enter your new password"]})]})]}),d.jsx("div",{className:"p-6 overflow-y-auto flex-grow",children:n==="verify"?d.jsxs("div",{className:"text-center space-y-4",children:[d.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto",children:d.jsx(In,{className:"h-10 w-10 text-green-600"})}),d.jsxs("div",{children:[d.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Verification Email Sent"}),d.jsxs("p",{className:"text-gray-600 mt-2",children:["We've sent a verification link to ",d.jsx("strong",{children:_.email})]}),d.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Didn't receive the email? Check your spam folder or"," ",d.jsx("button",{className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"resend verification email"})]})]}),d.jsx("button",{onClick:()=>s("login"),className:"w-full bg-indigo-600 text-white py-3 rounded-lg hover:bg-indigo-700 transition-colors font-medium",children:"Back to Login"})]}):d.jsxs("form",{onSubmit:P,className:"space-y-4",children:[(n==="login"||n==="signup"&&h===1)&&d.jsxs("div",{className:"text-center mb-6",children:[d.jsxs("div",{className:"inline-flex items-center justify-center space-x-2 bg-gradient-to-r from-purple-100 to-indigo-100 rounded-full px-4 py-2 mb-4",children:[d.jsx(Ha,{className:"h-5 w-5 text-purple-600"}),d.jsx("span",{className:"text-sm font-semibold text-purple-800",children:"Premium Attar Collection"}),d.jsx(yh,{className:"h-5 w-5 text-amber-500"})]}),d.jsx("p",{className:"text-sm text-gray-600",children:"Experience the finest natural perfumes from around the world"})]}),(n==="login"||n==="forgot"||n==="signup"&&h===1)&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-text-primary mb-3",children:"Email Address"}),d.jsxs("div",{className:"relative",children:[d.jsx(In,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-text-tertiary"}),d.jsx("input",{type:"email",value:_.email,onChange:A=>j("email",A.target.value),className:`input-field-luxury pl-10 ${w.email?"border-state-error focus:border-state-error focus:ring-state-error/20":""}`,placeholder:"Enter your email",disabled:l,required:!0})]}),w.email&&d.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),w.email]})]}),(n==="login"||n==="reset"||n==="signup"&&h===1)&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),d.jsx("input",{type:i?"text":"password",value:_.password,onChange:A=>j("password",A.target.value),className:`form-input pl-10 pr-12 ${w.password?"form-input-error":""}`,placeholder:"Enter your password",disabled:l,required:!0}),d.jsx("button",{type:"button",onClick:()=>o(!i),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200","aria-label":i?"Hide password":"Show password",children:i?d.jsx(Xs,{className:"h-5 w-5"}):d.jsx(Js,{className:"h-5 w-5"})})]}),w.password&&d.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),w.password]}),n==="signup"&&h===1&&_.password&&d.jsxs("div",{className:"mt-3",children:[d.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[d.jsx("span",{children:"Password Strength"}),d.jsx("span",{className:"font-medium",children:C(_.password).label})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:d.jsx("div",{className:`h-2 rounded-full ${C(_.password).color} transition-all duration-300`,style:{width:`${C(_.password).strength}%`}})}),d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Use 8+ characters with a mix of letters, numbers & symbols"})]})]}),n==="signup"&&h===1&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Confirm Password"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ys,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),d.jsx("input",{type:a?"text":"password",value:_.confirmPassword,onChange:A=>j("confirmPassword",A.target.value),className:`form-input pl-10 pr-12 ${w.confirmPassword?"form-input-error":""}`,placeholder:"Confirm your password",disabled:l,required:!0}),d.jsx("button",{type:"button",onClick:()=>c(!a),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-neutral-400 hover:text-neutral-600 transition-colors duration-200","aria-label":a?"Hide password":"Show password",children:a?d.jsx(Xs,{className:"h-5 w-5"}):d.jsx(Js,{className:"h-5 w-5"})})]}),w.confirmPassword&&d.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),w.confirmPassword]})]}),n==="signup"&&h===2&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Full Name"}),d.jsxs("div",{className:"relative",children:[d.jsx(Nt,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),d.jsx("input",{type:"text",value:_.fullName,onChange:A=>j("fullName",A.target.value),className:`form-input pl-10 ${w.fullName?"form-input-error":""}`,placeholder:"Enter your full name",disabled:l,required:!0})]}),w.fullName&&d.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),w.fullName]})]}),n==="signup"&&h===2&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Phone Number"}),d.jsxs("div",{className:"relative",children:[d.jsx(Ba,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),d.jsx("input",{type:"tel",value:_.phone,onChange:A=>j("phone",A.target.value),className:`form-input pl-10 ${w.phone?"form-input-error":""}`,placeholder:"Enter your phone number",disabled:l,required:!0})]}),w.phone&&d.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),w.phone]})]}),n==="signup"&&h===2&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Date of Birth"}),d.jsxs("div",{className:"relative",children:[d.jsx(gh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-neutral-400"}),d.jsx("input",{type:"date",value:_.dateOfBirth,onChange:A=>j("dateOfBirth",A.target.value),className:"form-input pl-10",disabled:l,required:!0})]})]}),n==="signup"&&h===2&&d.jsxs("div",{children:[d.jsx("label",{className:"block text-sm font-medium text-neutral-700 mb-3",children:"Address"}),d.jsxs("div",{className:"relative",children:[d.jsxs("svg",{className:"absolute left-3 top-3 h-5 w-5 text-neutral-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:[d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),d.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),d.jsx("textarea",{value:_.address,onChange:A=>j("address",A.target.value),className:"form-input pl-10",placeholder:"Enter your full address",disabled:l,rows:3,required:!0})]}),w.address&&d.jsxs("p",{className:"mt-2 text-sm text-state-error flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),w.address]})]}),n==="login"&&d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("input",{id:"remember-me",name:"remember-me",type:"checkbox",checked:p,onChange:A=>m(A.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:l}),d.jsx("label",{htmlFor:"remember-me",className:"ml-2 block text-sm text-gray-700",children:"Remember me"})]}),d.jsx("button",{type:"button",onClick:()=>s("forgot"),className:"text-sm font-medium text-indigo-600 hover:text-indigo-500",disabled:l,children:"Forgot password?"})]}),n==="signup"&&h===2&&d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"flex items-center h-5",children:d.jsx("input",{id:"subscribe-newsletter",name:"subscribe-newsletter",type:"checkbox",checked:_.subscribeNewsletter,onChange:A=>j("subscribeNewsletter",A.target.checked),className:"h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded",disabled:l})}),d.jsxs("div",{className:"ml-3 text-sm",children:[d.jsx("label",{htmlFor:"subscribe-newsletter",className:"font-medium text-gray-700",children:"Subscribe to our newsletter"}),d.jsx("p",{className:"text-gray-500",children:"Get updates on new arrivals and special offers"})]})]}),n==="signup"&&h===2&&d.jsxs("div",{className:"flex items-start",children:[d.jsx("div",{className:"flex items-center h-5",children:d.jsx("input",{id:"terms-agreement",name:"terms-agreement",type:"checkbox",checked:_.agreeToTerms,onChange:A=>j("agreeToTerms",A.target.checked),className:`h-4 w-4 text-indigo-600 focus:ring-indigo-500 border-gray-300 rounded ${w.agreeToTerms?"border-state-error":""}`,disabled:l,required:!0})}),d.jsxs("div",{className:"ml-3 text-sm",children:[d.jsxs("label",{htmlFor:"terms-agreement",className:"font-medium text-gray-700",children:["I agree to the ",d.jsx("a",{href:"#",className:"text-indigo-600 hover:text-indigo-500",children:"Terms and Conditions"})]}),w.agreeToTerms&&d.jsxs("p",{className:"mt-1 text-sm text-state-error flex items-center",children:[d.jsx(Le,{className:"h-4 w-4 mr-1"}),w.agreeToTerms]})]})]}),d.jsx("div",{children:d.jsx("button",{type:"submit",disabled:l,className:"w-full flex justify-center py-3 px-4 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:l?d.jsxs(d.Fragment,{children:[d.jsx(bh,{className:"mr-2 h-4 w-4 animate-spin"}),"Processing..."]}):n==="login"?"Sign In":n==="signup"&&h===1?"Continue":n==="signup"&&h===2?"Create Account":n==="forgot"?"Send Reset Link":"Submit"})}),d.jsx("div",{className:"text-center text-sm text-gray-600",children:n==="login"?d.jsxs("p",{children:["Don't have an account?"," ",d.jsx("button",{type:"button",onClick:()=>s("signup"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:l,children:"Sign up"})]}):n==="signup"?d.jsxs("p",{children:["Already have an account?"," ",d.jsx("button",{type:"button",onClick:()=>s("login"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:l,children:"Sign in"})]}):n==="forgot"?d.jsxs("p",{children:["Remember your password?"," ",d.jsx("button",{type:"button",onClick:()=>s("login"),className:"font-medium text-indigo-600 hover:text-indigo-500",disabled:l,children:"Sign in"})]}):null}),(n==="login"||n==="signup"&&h===1)&&d.jsx("div",{className:"pt-4 border-t border-gray-200",children:d.jsxs("div",{className:"flex items-center justify-center space-x-4 text-xs text-gray-500",children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx(Bo,{className:"h-4 w-4 mr-1 text-green-500"}),d.jsx("span",{children:"Secure"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(vh,{className:"h-4 w-4 mr-1 text-blue-500"}),d.jsx("span",{children:"Private"})]}),d.jsxs("div",{className:"flex items-center",children:[d.jsx(rv,{className:"h-4 w-4 mr-1 text-purple-500"}),d.jsx("span",{children:"Trusted"})]})]})})]})})]})}):null},Mh=E.createContext(void 0),fR=()=>{const t=E.useContext(Mh);if(!t)throw new Error("useAuthModal must be used within an AuthModalProvider");return t},Bw=({children:t})=>{const[e,r]=E.useState(!1),[n,s]=E.useState(null),[i,o]=E.useState(null),a=(h,f)=>{o(h),s(f),r(!0)},c=()=>{r(!1),s(null),o(null)},l=()=>{c()},u={showAuthModal:a,hideAuthModal:c,isModalOpen:e,modalAction:n,selectedProduct:i};return d.jsxs(Mh.Provider,{value:u,children:[t,e&&i&&lg.createPortal(d.jsx(Uw,{isOpen:e,onClose:l,initialMode:"login"}),document.body)]})},z=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ae=globalThis,lr="10.11.0";function wr(){return bi(ae),ae}function bi(t){const e=t.__SENTRY__=t.__SENTRY__||{};return e.version=e.version||lr,e[lr]=e[lr]||{}}function Kn(t,e,r=ae){const n=r.__SENTRY__=r.__SENTRY__||{},s=n[lr]=n[lr]||{};return s[t]||(s[t]=e())}const Vw=["debug","info","warn","error","log","assert","trace"],qw="Sentry Logger ",Zs={};function en(t){if(!("console"in ae))return t();const e=ae.console,r={},n=Object.keys(Zs);n.forEach(s=>{const i=Zs[s];r[s]=e[s],e[s]=i});try{return t()}finally{n.forEach(s=>{e[s]=r[s]})}}function Hw(){Ga().enabled=!0}function zw(){Ga().enabled=!1}function Fh(){return Ga().enabled}function Ww(...t){Wa("log",...t)}function Gw(...t){Wa("warn",...t)}function Kw(...t){Wa("error",...t)}function Wa(t,...e){z&&Fh()&&en(()=>{ae.console[t](`${qw}[${t}]:`,...e)})}function Ga(){return z?Kn("loggerSettings",()=>({enabled:!1})):{enabled:!1}}const B={enable:Hw,disable:zw,isEnabled:Fh,log:Ww,warn:Gw,error:Kw},$h=50,mr="?",Il=/\(error: (.*)\)/,Nl=/captureMessage|captureException/;function Uh(...t){const e=t.sort((r,n)=>r[0]-n[0]).map(r=>r[1]);return(r,n=0,s=0)=>{const i=[],o=r.split(`
`);for(let a=n;a<o.length;a++){let c=o[a];c.length>1024&&(c=c.slice(0,1024));const l=Il.test(c)?c.replace(Il,"$1"):c;if(!l.match(/\S*Error: /)){for(const u of e){const h=u(l);if(h){i.push(h);break}}if(i.length>=$h+s)break}}return Jw(i.slice(s))}}function Xw(t){return Array.isArray(t)?Uh(...t):t}function Jw(t){if(!t.length)return[];const e=Array.from(t);return/sentryWrapped/.test(vs(e).function||"")&&e.pop(),e.reverse(),Nl.test(vs(e).function||"")&&(e.pop(),Nl.test(vs(e).function||"")&&e.pop()),e.slice(0,$h).map(r=>({...r,filename:r.filename||vs(e).filename,function:r.function||mr}))}function vs(t){return t[t.length-1]||{}}const Yi="<anonymous>";function _t(t){try{return!t||typeof t!="function"?Yi:t.name||Yi}catch{return Yi}}function Ol(t){const e=t.exception;if(e){const r=[];try{return e.values.forEach(n=>{n.stacktrace.frames&&r.push(...n.stacktrace.frames)}),r}catch{return}}}const Os={},Dl={};function Wt(t,e){Os[t]=Os[t]||[],Os[t].push(e)}function Gt(t,e){if(!Dl[t]){Dl[t]=!0;try{e()}catch(r){z&&B.error(`Error while instrumenting ${t}`,r)}}}function Ye(t,e){const r=t&&Os[t];if(r)for(const n of r)try{n(e)}catch(s){z&&B.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${_t(n)}
Error:`,s)}}let Qi=null;function Bh(t){const e="error";Wt(e,t),Gt(e,Yw)}function Yw(){Qi=ae.onerror,ae.onerror=function(t,e,r,n,s){return Ye("error",{column:n,error:s,line:r,msg:t,url:e}),Qi?Qi.apply(this,arguments):!1},ae.onerror.__SENTRY_INSTRUMENTED__=!0}let Zi=null;function Vh(t){const e="unhandledrejection";Wt(e,t),Gt(e,Qw)}function Qw(){Zi=ae.onunhandledrejection,ae.onunhandledrejection=function(t){return Ye("unhandledrejection",t),Zi?Zi.apply(this,arguments):!0},ae.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const qh=Object.prototype.toString;function Ka(t){switch(qh.call(t)){case"[object Error]":case"[object Exception]":case"[object DOMException]":case"[object WebAssembly.Exception]":return!0;default:return xt(t,Error)}}function tn(t,e){return qh.call(t)===`[object ${e}]`}function Hh(t){return tn(t,"ErrorEvent")}function Ll(t){return tn(t,"DOMError")}function Zw(t){return tn(t,"DOMException")}function wt(t){return tn(t,"String")}function Xa(t){return typeof t=="object"&&t!==null&&"__sentry_template_string__"in t&&"__sentry_template_values__"in t}function Dn(t){return t===null||Xa(t)||typeof t!="object"&&typeof t!="function"}function Ln(t){return tn(t,"Object")}function _i(t){return typeof Event<"u"&&xt(t,Event)}function eb(t){return typeof Element<"u"&&xt(t,Element)}function tb(t){return tn(t,"RegExp")}function Xn(t){return!!(t!=null&&t.then&&typeof t.then=="function")}function rb(t){return Ln(t)&&"nativeEvent"in t&&"preventDefault"in t&&"stopPropagation"in t}function xt(t,e){try{return t instanceof e}catch{return!1}}function zh(t){return!!(typeof t=="object"&&t!==null&&(t.__isVue||t._isVue))}function Wh(t){return typeof Request<"u"&&xt(t,Request)}const Ja=ae,nb=80;function ft(t,e={}){if(!t)return"<unknown>";try{let r=t;const n=5,s=[];let i=0,o=0;const a=" > ",c=a.length;let l;const u=Array.isArray(e)?e:e.keyAttrs,h=!Array.isArray(e)&&e.maxStringLength||nb;for(;r&&i++<n&&(l=sb(r,u),!(l==="html"||i>1&&o+s.length*c+l.length>=h));)s.push(l),o+=l.length,r=r.parentNode;return s.reverse().join(a)}catch{return"<unknown>"}}function sb(t,e){const r=t,n=[];if(!(r!=null&&r.tagName))return"";if(Ja.HTMLElement&&r instanceof HTMLElement&&r.dataset){if(r.dataset.sentryComponent)return r.dataset.sentryComponent;if(r.dataset.sentryElement)return r.dataset.sentryElement}n.push(r.tagName.toLowerCase());const s=e!=null&&e.length?e.filter(o=>r.getAttribute(o)).map(o=>[o,r.getAttribute(o)]):null;if(s!=null&&s.length)s.forEach(o=>{n.push(`[${o[0]}="${o[1]}"]`)});else{r.id&&n.push(`#${r.id}`);const o=r.className;if(o&&wt(o)){const a=o.split(/\s+/);for(const c of a)n.push(`.${c}`)}}const i=["aria-label","type","name","title","alt"];for(const o of i){const a=r.getAttribute(o);a&&n.push(`[${o}="${a}"]`)}return n.join("")}function Jn(){try{return Ja.document.location.href}catch{return""}}function Gh(t){if(!Ja.HTMLElement)return null;let e=t;const r=5;for(let n=0;n<r;n++){if(!e)return null;if(e instanceof HTMLElement){if(e.dataset.sentryComponent)return e.dataset.sentryComponent;if(e.dataset.sentryElement)return e.dataset.sentryElement}e=e.parentNode}return null}function ei(t,e=0){return typeof t!="string"||e===0||t.length<=e?t:`${t.slice(0,e)}...`}function Ml(t,e){if(!Array.isArray(t))return"";const r=[];for(let n=0;n<t.length;n++){const s=t[n];try{zh(s)?r.push("[VueViewModel]"):r.push(String(s))}catch{r.push("[value cannot be serialized]")}}return r.join(e)}function Ds(t,e,r=!1){return wt(t)?tb(e)?e.test(t):wt(e)?r?t===e:t.includes(e):!1:!1}function Dt(t,e=[],r=!1){return e.some(n=>Ds(t,n,r))}function He(t,e,r){if(!(e in t))return;const n=t[e];if(typeof n!="function")return;const s=r(n);typeof s=="function"&&Kh(s,n);try{t[e]=s}catch{z&&B.log(`Failed to replace method "${e}" in object`,t)}}function ze(t,e,r){try{Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0})}catch{z&&B.log(`Failed to add non-enumerable property "${e}" to object`,t)}}function Kh(t,e){try{const r=e.prototype||{};t.prototype=e.prototype=r,ze(t,"__sentry_original__",e)}catch{}}function Ya(t){return t.__sentry_original__}function Xh(t){if(Ka(t))return{message:t.message,name:t.name,stack:t.stack,...$l(t)};if(_i(t)){const e={type:t.type,target:Fl(t.target),currentTarget:Fl(t.currentTarget),...$l(t)};return typeof CustomEvent<"u"&&xt(t,CustomEvent)&&(e.detail=t.detail),e}else return t}function Fl(t){try{return eb(t)?ft(t):Object.prototype.toString.call(t)}catch{return"<unknown>"}}function $l(t){if(typeof t=="object"&&t!==null){const e={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}else return{}}function ib(t,e=40){const r=Object.keys(Xh(t));r.sort();const n=r[0];if(!n)return"[object has no keys]";if(n.length>=e)return ei(n,e);for(let s=r.length;s>0;s--){const i=r.slice(0,s).join(", ");if(!(i.length>e))return s===r.length?i:ei(i,e)}return""}function ob(){const t=ae;return t.crypto||t.msCrypto}function Qe(t=ob()){let e=()=>Math.random()*16;try{if(t!=null&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t!=null&&t.getRandomValues&&(e=()=>{const r=new Uint8Array(1);return t.getRandomValues(r),r[0]})}catch{}return("10000000100040008000"+1e11).replace(/[018]/g,r=>(r^(e()&15)>>r/4).toString(16))}function Jh(t){var e,r;return(r=(e=t.exception)==null?void 0:e.values)==null?void 0:r[0]}function nr(t){const{message:e,event_id:r}=t;if(e)return e;const n=Jh(t);return n?n.type&&n.value?`${n.type}: ${n.value}`:n.type||n.value||r||"<unknown>":r||"<unknown>"}function Ho(t,e,r){const n=t.exception=t.exception||{},s=n.values=n.values||[],i=s[0]=s[0]||{};i.value||(i.value=e||""),i.type||(i.type="Error")}function zr(t,e){const r=Jh(t);if(!r)return;const n={type:"generic",handled:!0},s=r.mechanism;if(r.mechanism={...n,...s,...e},e&&"data"in e){const i={...s==null?void 0:s.data,...e.data};r.mechanism.data=i}}function Ul(t){if(ab(t))return!0;try{ze(t,"__sentry_captured__",!0)}catch{}return!1}function ab(t){try{return t.__sentry_captured__}catch{}}const Yh=1e3;function br(){return Date.now()/Yh}function cb(){const{performance:t}=ae;if(!(t!=null&&t.now)||!t.timeOrigin)return br;const e=t.timeOrigin;return()=>(e+t.now())/Yh}let Bl;function Re(){return(Bl??(Bl=cb()))()}let eo;function lb(){var u;const{performance:t}=ae;if(!(t!=null&&t.now))return[void 0,"none"];const e=3600*1e3,r=t.now(),n=Date.now(),s=t.timeOrigin?Math.abs(t.timeOrigin+r-n):e,i=s<e,o=(u=t.timing)==null?void 0:u.navigationStart,c=typeof o=="number"?Math.abs(o+r-n):e,l=c<e;return i||l?s<=c?[t.timeOrigin,"timeOrigin"]:[o,"navigationStart"]:[n,"dateNow"]}function We(){return eo||(eo=lb()),eo[0]}function ub(t){const e=Re(),r={sid:Qe(),init:!0,timestamp:e,started:e,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>hb(r)};return t&&Wr(r,t),r}function Wr(t,e={}){if(e.user&&(!t.ipAddress&&e.user.ip_address&&(t.ipAddress=e.user.ip_address),!t.did&&!e.did&&(t.did=e.user.id||e.user.email||e.user.username)),t.timestamp=e.timestamp||Re(),e.abnormal_mechanism&&(t.abnormal_mechanism=e.abnormal_mechanism),e.ignoreDuration&&(t.ignoreDuration=e.ignoreDuration),e.sid&&(t.sid=e.sid.length===32?e.sid:Qe()),e.init!==void 0&&(t.init=e.init),!t.did&&e.did&&(t.did=`${e.did}`),typeof e.started=="number"&&(t.started=e.started),t.ignoreDuration)t.duration=void 0;else if(typeof e.duration=="number")t.duration=e.duration;else{const r=t.timestamp-t.started;t.duration=r>=0?r:0}e.release&&(t.release=e.release),e.environment&&(t.environment=e.environment),!t.ipAddress&&e.ipAddress&&(t.ipAddress=e.ipAddress),!t.userAgent&&e.userAgent&&(t.userAgent=e.userAgent),typeof e.errors=="number"&&(t.errors=e.errors),e.status&&(t.status=e.status)}function db(t,e){let r={};t.status==="ok"&&(r={status:"exited"}),Wr(t,r)}function hb(t){return{sid:`${t.sid}`,init:t.init,started:new Date(t.started*1e3).toISOString(),timestamp:new Date(t.timestamp*1e3).toISOString(),status:t.status,errors:t.errors,did:typeof t.did=="number"||typeof t.did=="string"?`${t.did}`:void 0,duration:t.duration,abnormal_mechanism:t.abnormal_mechanism,attrs:{release:t.release,environment:t.environment,ip_address:t.ipAddress,user_agent:t.userAgent}}}function Yn(t,e,r=2){if(!e||typeof e!="object"||r<=0)return e;if(t&&Object.keys(e).length===0)return t;const n={...t};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=Yn(n[s],e[s],r-1));return n}function Lt(){return Qe()}function Qn(){return Qe().substring(16)}const zo="_sentrySpan";function Gr(t,e){e?ze(t,zo,e):delete t[zo]}function ti(t){return t[zo]}const fb=100;class pt{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext={traceId:Lt(),sampleRand:Math.random()}}clone(){const e=new pt;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},this._contexts.flags&&(e._contexts.flags={values:[...this._contexts.flags.values]}),e._user=this._user,e._level=this._level,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e._lastEventId=this._lastEventId,Gr(e,ti(this)),e}setClient(e){this._client=e}setLastEventId(e){this._lastEventId=e}getClient(){return this._client}lastEventId(){return this._lastEventId}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,username:void 0},this._session&&Wr(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,r){return this._tags={...this._tags,[e]:r},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,r){return this._extra={...this._extra,[e]:r},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,r){return r===null?delete this._contexts[e]:this._contexts[e]=r,this._notifyScopeListeners(),this}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const r=typeof e=="function"?e(this):e,n=r instanceof pt?r.getScopeData():Ln(r)?e:void 0,{tags:s,extra:i,user:o,contexts:a,level:c,fingerprint:l=[],propagationContext:u}=n||{};return this._tags={...this._tags,...s},this._extra={...this._extra,...i},this._contexts={...this._contexts,...a},o&&Object.keys(o).length&&(this._user=o),c&&(this._level=c),l.length&&(this._fingerprint=l),u&&(this._propagationContext=u),this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._session=void 0,Gr(this,void 0),this._attachments=[],this.setPropagationContext({traceId:Lt(),sampleRand:Math.random()}),this._notifyScopeListeners(),this}addBreadcrumb(e,r){var i;const n=typeof r=="number"?r:fb;if(n<=0)return this;const s={timestamp:br(),...e,message:e.message?ei(e.message,2048):e.message};return this._breadcrumbs.push(s),this._breadcrumbs.length>n&&(this._breadcrumbs=this._breadcrumbs.slice(-n),(i=this._client)==null||i.recordDroppedEvent("buffer_overflow","log_item")),this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}clearAttachments(){return this._attachments=[],this}getScopeData(){return{breadcrumbs:this._breadcrumbs,attachments:this._attachments,contexts:this._contexts,tags:this._tags,extra:this._extra,user:this._user,level:this._level,fingerprint:this._fingerprint||[],eventProcessors:this._eventProcessors,propagationContext:this._propagationContext,sdkProcessingMetadata:this._sdkProcessingMetadata,transactionName:this._transactionName,span:ti(this)}}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata=Yn(this._sdkProcessingMetadata,e,2),this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,r){const n=(r==null?void 0:r.event_id)||Qe();if(!this._client)return z&&B.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...r,event_id:n},this),n}captureMessage(e,r,n){const s=(n==null?void 0:n.event_id)||Qe();if(!this._client)return z&&B.warn("No client configured on scope - will not capture message!"),s;const i=new Error(e);return this._client.captureMessage(e,r,{originalException:e,syntheticException:i,...n,event_id:s},this),s}captureEvent(e,r){const n=(r==null?void 0:r.event_id)||Qe();return this._client?(this._client.captureEvent(e,{...r,event_id:n},this),n):(z&&B.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function pb(){return Kn("defaultCurrentScope",()=>new pt)}function mb(){return Kn("defaultIsolationScope",()=>new pt)}class gb{constructor(e,r){let n;e?n=e:n=new pt;let s;r?s=r:s=new pt,this._stack=[{scope:n}],this._isolationScope=s}withScope(e){const r=this._pushScope();let n;try{n=e(r)}catch(s){throw this._popScope(),s}return Xn(n)?n.then(s=>(this._popScope(),s),s=>{throw this._popScope(),s}):(this._popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStackTop(){return this._stack[this._stack.length-1]}_pushScope(){const e=this.getScope().clone();return this._stack.push({client:this.getClient(),scope:e}),e}_popScope(){return this._stack.length<=1?!1:!!this._stack.pop()}}function Kr(){const t=wr(),e=bi(t);return e.stack=e.stack||new gb(pb(),mb())}function yb(t){return Kr().withScope(t)}function vb(t,e){const r=Kr();return r.withScope(()=>(r.getStackTop().scope=t,e(t)))}function Vl(t){return Kr().withScope(()=>t(Kr().getIsolationScope()))}function wb(){return{withIsolationScope:Vl,withScope:yb,withSetScope:vb,withSetIsolationScope:(t,e)=>Vl(e),getCurrentScope:()=>Kr().getScope(),getIsolationScope:()=>Kr().getIsolationScope()}}function rn(t){const e=bi(t);return e.acs?e.acs:wb()}function ce(){const t=wr();return rn(t).getCurrentScope()}function jt(){const t=wr();return rn(t).getIsolationScope()}function bb(){return Kn("globalScope",()=>new pt)}function xi(...t){const e=wr(),r=rn(e);if(t.length===2){const[n,s]=t;return n?r.withSetScope(n,s):r.withScope(s)}return r.withScope(t[0])}function ie(){return ce().getClient()}function _b(t){const e=t.getPropagationContext(),{traceId:r,parentSpanId:n,propagationSpanId:s}=e,i={trace_id:r,span_id:s||Qn()};return n&&(i.parent_span_id=n),i}const lt="sentry.source",Qa="sentry.sample_rate",Qh="sentry.previous_trace_sample_rate",St="sentry.op",Te="sentry.origin",ri="sentry.idle_span_finish_reason",Zn="sentry.measurement_unit",es="sentry.measurement_value",ql="sentry.custom_span_name",Za="sentry.profile_id",nn="sentry.exclusive_time",xb="sentry.link.type",Sb=0,Zh=1,Ee=2;function Eb(t){if(t<400&&t>=100)return{code:Zh};if(t>=400&&t<500)switch(t){case 401:return{code:Ee,message:"unauthenticated"};case 403:return{code:Ee,message:"permission_denied"};case 404:return{code:Ee,message:"not_found"};case 409:return{code:Ee,message:"already_exists"};case 413:return{code:Ee,message:"failed_precondition"};case 429:return{code:Ee,message:"resource_exhausted"};case 499:return{code:Ee,message:"cancelled"};default:return{code:Ee,message:"invalid_argument"}}if(t>=500&&t<600)switch(t){case 501:return{code:Ee,message:"unimplemented"};case 503:return{code:Ee,message:"unavailable"};case 504:return{code:Ee,message:"deadline_exceeded"};default:return{code:Ee,message:"internal_error"}}return{code:Ee,message:"unknown_error"}}function ef(t,e){t.setAttribute("http.response.status_code",e);const r=Eb(e);r.message!=="unknown_error"&&t.setStatus(r)}const tf="_sentryScope",rf="_sentryIsolationScope";function Tb(t,e,r){t&&(ze(t,rf,r),ze(t,tf,e))}function ni(t){return{scope:t[tf],isolationScope:t[rf]}}const ec="sentry-",kb=/^sentry-/,jb=8192;function nf(t){const e=Pb(t);if(!e)return;const r=Object.entries(e).reduce((n,[s,i])=>{if(s.match(kb)){const o=s.slice(ec.length);n[o]=i}return n},{});if(Object.keys(r).length>0)return r}function Ab(t){if(!t)return;const e=Object.entries(t).reduce((r,[n,s])=>(s&&(r[`${ec}${n}`]=s),r),{});return Cb(e)}function Pb(t){if(!(!t||!wt(t)&&!Array.isArray(t)))return Array.isArray(t)?t.reduce((e,r)=>{const n=Hl(r);return Object.entries(n).forEach(([s,i])=>{e[s]=i}),e},{}):Hl(t)}function Hl(t){return t.split(",").map(e=>e.split("=").map(r=>{try{return decodeURIComponent(r.trim())}catch{return}})).reduce((e,[r,n])=>(r&&n&&(e[r]=n),e),{})}function Cb(t){if(Object.keys(t).length!==0)return Object.entries(t).reduce((e,[r,n],s)=>{const i=`${encodeURIComponent(r)}=${encodeURIComponent(n)}`,o=s===0?i:`${e},${i}`;return o.length>jb?(z&&B.warn(`Not adding key: ${r} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):o},"")}const Rb=/^o(\d+)\./,Ib=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function Nb(t){return t==="http"||t==="https"}function ts(t,e=!1){const{host:r,path:n,pass:s,port:i,projectId:o,protocol:a,publicKey:c}=t;return`${a}://${c}${e&&s?`:${s}`:""}@${r}${i?`:${i}`:""}/${n&&`${n}/`}${o}`}function Ob(t){const e=Ib.exec(t);if(!e){en(()=>{console.error(`Invalid Sentry Dsn: ${t}`)});return}const[r,n,s="",i="",o="",a=""]=e.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const h=l.match(/^\d+/);h&&(l=h[0])}return sf({host:i,pass:s,path:c,projectId:l,port:o,protocol:r,publicKey:n})}function sf(t){return{protocol:t.protocol,publicKey:t.publicKey||"",pass:t.pass||"",host:t.host,port:t.port||"",path:t.path||"",projectId:t.projectId}}function Db(t){if(!z)return!0;const{port:e,projectId:r,protocol:n}=t;return["protocol","publicKey","host","projectId"].find(o=>t[o]?!1:(B.error(`Invalid Sentry Dsn: ${o} missing`),!0))?!1:r.match(/^\d+$/)?Nb(n)?e&&isNaN(parseInt(e,10))?(B.error(`Invalid Sentry Dsn: Invalid port ${e}`),!1):!0:(B.error(`Invalid Sentry Dsn: Invalid protocol ${n}`),!1):(B.error(`Invalid Sentry Dsn: Invalid projectId ${r}`),!1)}function Lb(t){const e=t.match(Rb);return e==null?void 0:e[1]}function Mb(t){const e=t.getOptions(),{host:r}=t.getDsn()||{};let n;return e.orgId?n=String(e.orgId):r&&(n=Lb(r)),n}function Fb(t){const e=typeof t=="string"?Ob(t):sf(t);if(!(!e||!Db(e)))return e}function Mn(t){if(typeof t=="boolean")return Number(t);const e=typeof t=="string"?parseFloat(t):t;if(!(typeof e!="number"||isNaN(e)||e<0||e>1))return e}const of=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function af(t){if(!t)return;const e=t.match(of);if(!e)return;let r;return e[3]==="1"?r=!0:e[3]==="0"&&(r=!1),{traceId:e[1],parentSampled:r,parentSpanId:e[2]}}function $b(t,e){const r=af(t),n=nf(e);if(!(r!=null&&r.traceId))return{traceId:Lt(),sampleRand:Math.random()};const s=Ub(r,n);n&&(n.sample_rand=s.toString());const{traceId:i,parentSpanId:o,parentSampled:a}=r;return{traceId:i,parentSpanId:o,sampled:a,dsc:n||{},sampleRand:s}}function cf(t=Lt(),e=Qn(),r){let n="";return r!==void 0&&(n=r?"-1":"-0"),`${t}-${e}${n}`}function Ub(t,e){const r=Mn(e==null?void 0:e.sample_rand);if(r!==void 0)return r;const n=Mn(e==null?void 0:e.sample_rate);return n&&(t==null?void 0:t.parentSampled)!==void 0?t.parentSampled?Math.random()*n:n+Math.random()*(1-n):Math.random()}const lf=0,tc=1;let zl=!1;function Bb(t){const{spanId:e,traceId:r}=t.spanContext(),{data:n,op:s,parent_span_id:i,status:o,origin:a,links:c}=oe(t);return{parent_span_id:i,span_id:e,trace_id:r,data:n,op:s,status:o,origin:a,links:c}}function Vb(t){const{spanId:e,traceId:r,isRemote:n}=t.spanContext(),s=n?e:oe(t).parent_span_id,i=ni(t).scope,o=n?(i==null?void 0:i.getPropagationContext().propagationSpanId)||Qn():e;return{parent_span_id:s,span_id:o,trace_id:r}}function qb(t){const{traceId:e,spanId:r}=t.spanContext(),n=_r(t);return cf(e,r,n)}function uf(t){if(t&&t.length>0)return t.map(({context:{spanId:e,traceId:r,traceFlags:n,...s},attributes:i})=>({span_id:e,trace_id:r,sampled:n===tc,attributes:i,...s}))}function ur(t){return typeof t=="number"?Wl(t):Array.isArray(t)?t[0]+t[1]/1e9:t instanceof Date?Wl(t.getTime()):Re()}function Wl(t){return t>9999999999?t/1e3:t}function oe(t){var n;if(zb(t))return t.getSpanJSON();const{spanId:e,traceId:r}=t.spanContext();if(Hb(t)){const{attributes:s,startTime:i,name:o,endTime:a,status:c,links:l}=t,u="parentSpanId"in t?t.parentSpanId:"parentSpanContext"in t?(n=t.parentSpanContext)==null?void 0:n.spanId:void 0;return{span_id:e,trace_id:r,data:s,description:o,parent_span_id:u,start_timestamp:ur(i),timestamp:ur(a)||void 0,status:df(c),op:s[St],origin:s[Te],links:uf(l)}}return{span_id:e,trace_id:r,start_timestamp:0,data:{}}}function Hb(t){const e=t;return!!e.attributes&&!!e.startTime&&!!e.name&&!!e.endTime&&!!e.status}function zb(t){return typeof t.getSpanJSON=="function"}function _r(t){const{traceFlags:e}=t.spanContext();return e===tc}function df(t){if(!(!t||t.code===Sb))return t.code===Zh?"ok":t.message||"unknown_error"}const dr="_sentryChildSpans",Wo="_sentryRootSpan";function hf(t,e){const r=t[Wo]||t;ze(e,Wo,r),t[dr]?t[dr].add(e):ze(t,dr,new Set([e]))}function Wb(t,e){t[dr]&&t[dr].delete(e)}function Ls(t){const e=new Set;function r(n){if(!e.has(n)&&_r(n)){e.add(n);const s=n[dr]?Array.from(n[dr]):[];for(const i of s)r(i)}}return r(t),Array.from(e)}function Fe(t){return t[Wo]||t}function Ge(){const t=wr(),e=rn(t);return e.getActiveSpan?e.getActiveSpan():ti(ce())}function Go(){zl||(en(()=>{console.warn("[Sentry] Returning null from `beforeSendSpan` is disallowed. To drop certain spans, configure the respective integrations directly.")}),zl=!0)}let Gl=!1;function Gb(){if(Gl)return;function t(){const e=Ge(),r=e&&Fe(e);if(r){const n="internal_error";z&&B.log(`[Tracing] Root span: ${n} -> Global error occurred`),r.setStatus({code:Ee,message:n})}}t.tag="sentry_tracingErrorCallback",Gl=!0,Bh(t),Vh(t)}function Mt(t){var r;if(typeof __SENTRY_TRACING__=="boolean"&&!__SENTRY_TRACING__)return!1;const e=t||((r=ie())==null?void 0:r.getOptions());return!!e&&(e.tracesSampleRate!=null||!!e.tracesSampler)}const rc="production",ff="_frozenDsc";function Ms(t,e){ze(t,ff,e)}function pf(t,e){const r=e.getOptions(),{publicKey:n}=e.getDsn()||{},s={environment:r.environment||rc,release:r.release,public_key:n,trace_id:t,org_id:Mb(e)};return e.emit("createDsc",s),s}function mf(t,e){const r=e.getPropagationContext();return r.dsc||pf(r.traceId,t)}function Ft(t){var m;const e=ie();if(!e)return{};const r=Fe(t),n=oe(r),s=n.data,i=r.spanContext().traceState,o=(i==null?void 0:i.get("sentry.sample_rate"))??s[Qa]??s[Qh];function a(y){return(typeof o=="number"||typeof o=="string")&&(y.sample_rate=`${o}`),y}const c=r[ff];if(c)return a(c);const l=i==null?void 0:i.get("sentry.dsc"),u=l&&nf(l);if(u)return a(u);const h=pf(t.spanContext().traceId,e),f=s[lt],p=n.description;return f!=="url"&&p&&(h.transaction=p),Mt()&&(h.sampled=String(_r(r)),h.sample_rand=(i==null?void 0:i.get("sentry.sample_rand"))??((m=ni(r).scope)==null?void 0:m.getPropagationContext().sampleRand.toString())),a(h),e.emit("createDsc",h,r),h}class $t{constructor(e={}){this._traceId=e.traceId||Lt(),this._spanId=e.spanId||Qn()}spanContext(){return{spanId:this._spanId,traceId:this._traceId,traceFlags:lf}}end(e){}setAttribute(e,r){return this}setAttributes(e){return this}setStatus(e){return this}updateName(e){return this}isRecording(){return!1}addEvent(e,r,n){return this}addLink(e){return this}addLinks(e){return this}recordException(e,r){}}function vt(t,e=100,r=1/0){try{return Ko("",t,e,r)}catch(n){return{ERROR:`**non-serializable** (${n})`}}}function gf(t,e=3,r=100*1024){const n=vt(t,e);return Yb(n)>r?gf(t,e-1,r):n}function Ko(t,e,r=1/0,n=1/0,s=Qb()){const[i,o]=s;if(e==null||["boolean","string"].includes(typeof e)||typeof e=="number"&&Number.isFinite(e))return e;const a=Kb(t,e);if(!a.startsWith("[object "))return a;if(e.__sentry_skip_normalization__)return e;const c=typeof e.__sentry_override_normalization_depth__=="number"?e.__sentry_override_normalization_depth__:r;if(c===0)return a.replace("object ","");if(i(e))return"[Circular ~]";const l=e;if(l&&typeof l.toJSON=="function")try{const p=l.toJSON();return Ko("",p,c-1,n,s)}catch{}const u=Array.isArray(e)?[]:{};let h=0;const f=Xh(e);for(const p in f){if(!Object.prototype.hasOwnProperty.call(f,p))continue;if(h>=n){u[p]="[MaxProperties ~]";break}const m=f[p];u[p]=Ko(p,m,c-1,n,s),h++}return o(e),u}function Kb(t,e){try{if(t==="domain"&&e&&typeof e=="object"&&e._events)return"[Domain]";if(t==="domainEmitter")return"[DomainEmitter]";if(typeof global<"u"&&e===global)return"[Global]";if(typeof window<"u"&&e===window)return"[Window]";if(typeof document<"u"&&e===document)return"[Document]";if(zh(e))return"[VueViewModel]";if(rb(e))return"[SyntheticEvent]";if(typeof e=="number"&&!Number.isFinite(e))return`[${e}]`;if(typeof e=="function")return`[Function: ${_t(e)}]`;if(typeof e=="symbol")return`[${String(e)}]`;if(typeof e=="bigint")return`[BigInt: ${String(e)}]`;const r=Xb(e);return/^HTML(\w*)Element$/.test(r)?`[HTMLElement: ${r}]`:`[object ${r}]`}catch(r){return`**non-serializable** (${r})`}}function Xb(t){const e=Object.getPrototypeOf(t);return e!=null&&e.constructor?e.constructor.name:"null prototype"}function Jb(t){return~-encodeURI(t).split(/%..|./).length}function Yb(t){return Jb(JSON.stringify(t))}function Qb(){const t=new WeakSet;function e(n){return t.has(n)?!0:(t.add(n),!1)}function r(n){t.delete(n)}return[e,r]}function sn(t,e=[]){return[t,e]}function Zb(t,e){const[r,n]=t;return[r,[...n,e]]}function Kl(t,e){const r=t[1];for(const n of r){const s=n[0].type;if(e(n,s))return!0}return!1}function Xo(t){const e=bi(ae);return e.encodePolyfill?e.encodePolyfill(t):new TextEncoder().encode(t)}function e_(t){const[e,r]=t;let n=JSON.stringify(e);function s(i){typeof n=="string"?n=typeof i=="string"?n+i:[Xo(n),i]:n.push(typeof i=="string"?Xo(i):i)}for(const i of r){const[o,a]=i;if(s(`
${JSON.stringify(o)}
`),typeof a=="string"||a instanceof Uint8Array)s(a);else{let c;try{c=JSON.stringify(a)}catch{c=JSON.stringify(vt(a))}s(c)}}return typeof n=="string"?n:t_(n)}function t_(t){const e=t.reduce((s,i)=>s+i.length,0),r=new Uint8Array(e);let n=0;for(const s of t)r.set(s,n),n+=s.length;return r}function r_(t){return[{type:"span"},t]}function n_(t){const e=typeof t.data=="string"?Xo(t.data):t.data;return[{type:"attachment",length:e.length,filename:t.filename,content_type:t.contentType,attachment_type:t.attachmentType},e]}const s_={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",profile_chunk:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",raw_security:"security",log:"log_item"};function Xl(t){return s_[t]}function yf(t){if(!(t!=null&&t.sdk))return;const{name:e,version:r}=t.sdk;return{name:e,version:r}}function i_(t,e,r,n){var i;const s=(i=t.sdkProcessingMetadata)==null?void 0:i.dynamicSamplingContext;return{event_id:t.event_id,sent_at:new Date().toISOString(),...e&&{sdk:e},...!!r&&n&&{dsn:ts(n)},...s&&{trace:s}}}function Jo(t,e){if(!(e!=null&&e.length)||!t.description)return!1;for(const r of e){if(a_(r)){if(Ds(t.description,r))return!0;continue}if(!r.name&&!r.op)continue;const n=r.name?Ds(t.description,r.name):!0,s=r.op?t.op&&Ds(t.op,r.op):!0;if(n&&s)return!0}return!1}function o_(t,e){const r=e.parent_span_id,n=e.span_id;if(r)for(const s of t)s.parent_span_id===n&&(s.parent_span_id=r)}function a_(t){return typeof t=="string"||t instanceof RegExp}function c_(t,e){var n,s,i,o;if(!e)return t;const r=t.sdk||{};return t.sdk={...r,name:r.name||e.name,version:r.version||e.version,integrations:[...((n=t.sdk)==null?void 0:n.integrations)||[],...e.integrations||[]],packages:[...((s=t.sdk)==null?void 0:s.packages)||[],...e.packages||[]],settings:(i=t.sdk)!=null&&i.settings||e.settings?{...(o=t.sdk)==null?void 0:o.settings,...e.settings}:void 0},t}function l_(t,e,r,n){const s=yf(r),i={sent_at:new Date().toISOString(),...s&&{sdk:s},...!!n&&e&&{dsn:ts(e)}},o="aggregates"in t?[{type:"sessions"},t]:[{type:"session"},t.toJSON()];return sn(i,[o])}function u_(t,e,r,n){const s=yf(r),i=t.type&&t.type!=="replay_event"?t.type:"event";c_(t,r==null?void 0:r.sdk);const o=i_(t,s,n,e);return delete t.sdkProcessingMetadata,sn(o,[[{type:i},t]])}function d_(t,e){function r(p){return!!p.trace_id&&!!p.public_key}const n=Ft(t[0]),s=e==null?void 0:e.getDsn(),i=e==null?void 0:e.getOptions().tunnel,o={sent_at:new Date().toISOString(),...r(n)&&{trace:n},...!!i&&s&&{dsn:ts(s)}},{beforeSendSpan:a,ignoreSpans:c}=(e==null?void 0:e.getOptions())||{},l=c!=null&&c.length?t.filter(p=>!Jo(oe(p),c)):t,u=t.length-l.length;u&&(e==null||e.recordDroppedEvent("before_send","span",u));const h=a?p=>{const m=oe(p),y=a(m);return y||(Go(),m)}:oe,f=[];for(const p of l){const m=h(p);m&&f.push(r_(m))}return sn(o,f)}function h_(t){if(!z)return;const{description:e="< unknown name >",op:r="< unknown op >",parent_span_id:n}=oe(t),{spanId:s}=t.spanContext(),i=_r(t),o=Fe(t),a=o===t,c=`[Tracing] Starting ${i?"sampled":"unsampled"} ${a?"root ":""}span`,l=[`op: ${r}`,`name: ${e}`,`ID: ${s}`];if(n&&l.push(`parent ID: ${n}`),!a){const{op:u,description:h}=oe(o);l.push(`root ID: ${o.spanContext().spanId}`),u&&l.push(`root op: ${u}`),h&&l.push(`root description: ${h}`)}B.log(`${c}
  ${l.join(`
  `)}`)}function f_(t){if(!z)return;const{description:e="< unknown name >",op:r="< unknown op >"}=oe(t),{spanId:n}=t.spanContext(),i=Fe(t)===t,o=`[Tracing] Finishing "${r}" ${i?"root ":""}span "${e}" with ID ${n}`;B.log(o)}function p_(t,e,r,n=Ge()){const s=n&&Fe(n);s&&(z&&B.log(`[Measurement] Setting measurement on root span: ${t} = ${e} ${r}`),s.addEvent(t,{[es]:e,[Zn]:r}))}function Jl(t){if(!t||t.length===0)return;const e={};return t.forEach(r=>{const n=r.attributes||{},s=n[Zn],i=n[es];typeof s=="string"&&typeof i=="number"&&(e[r.name]={value:i,unit:s})}),e}const Yl=1e3;class Si{constructor(e={}){this._traceId=e.traceId||Lt(),this._spanId=e.spanId||Qn(),this._startTime=e.startTimestamp||Re(),this._links=e.links,this._attributes={},this.setAttributes({[Te]:"manual",[St]:e.op,...e.attributes}),this._name=e.name,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.endTimestamp&&(this._endTime=e.endTimestamp),this._events=[],this._isStandaloneSpan=e.isStandalone,this._endTime&&this._onSpanEnded()}addLink(e){return this._links?this._links.push(e):this._links=[e],this}addLinks(e){return this._links?this._links.push(...e):this._links=e,this}recordException(e,r){}spanContext(){const{_spanId:e,_traceId:r,_sampled:n}=this;return{spanId:e,traceId:r,traceFlags:n?tc:lf}}setAttribute(e,r){return r===void 0?delete this._attributes[e]:this._attributes[e]=r,this}setAttributes(e){return Object.keys(e).forEach(r=>this.setAttribute(r,e[r])),this}updateStartTime(e){this._startTime=ur(e)}setStatus(e){return this._status=e,this}updateName(e){return this._name=e,this.setAttribute(lt,"custom"),this}end(e){this._endTime||(this._endTime=ur(e),f_(this),this._onSpanEnded())}getSpanJSON(){return{data:this._attributes,description:this._name,op:this._attributes[St],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:df(this._status),timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[Te],profile_id:this._attributes[Za],exclusive_time:this._attributes[nn],measurements:Jl(this._events),is_segment:this._isStandaloneSpan&&Fe(this)===this||void 0,segment_id:this._isStandaloneSpan?Fe(this).spanContext().spanId:void 0,links:uf(this._links)}}isRecording(){return!this._endTime&&!!this._sampled}addEvent(e,r,n){z&&B.log("[Tracing] Adding an event to span:",e);const s=Ql(r)?r:n||Re(),i=Ql(r)?{}:r||{},o={name:e,time:ur(s),attributes:i};return this._events.push(o),this}isStandaloneSpan(){return!!this._isStandaloneSpan}_onSpanEnded(){const e=ie();if(e&&e.emit("spanEnd",this),!(this._isStandaloneSpan||this===Fe(this)))return;if(this._isStandaloneSpan){this._sampled?g_(d_([this],e)):(z&&B.log("[Tracing] Discarding standalone span because its trace was not chosen to be sampled."),e&&e.recordDroppedEvent("sample_rate","span"));return}const n=this._convertSpanToTransaction();n&&(ni(this).scope||ce()).captureEvent(n)}_convertSpanToTransaction(){var u;if(!Zl(oe(this)))return;this._name||(z&&B.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>");const{scope:e,isolationScope:r}=ni(this),n=(u=e==null?void 0:e.getScopeData().sdkProcessingMetadata)==null?void 0:u.normalizedRequest;if(this._sampled!==!0)return;const i=Ls(this).filter(h=>h!==this&&!m_(h)).map(h=>oe(h)).filter(Zl),o=this._attributes[lt];delete this._attributes[ql],i.forEach(h=>{delete h.data[ql]});const a={contexts:{trace:Bb(this)},spans:i.length>Yl?i.sort((h,f)=>h.start_timestamp-f.start_timestamp).slice(0,Yl):i,start_timestamp:this._startTime,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{capturedSpanScope:e,capturedSpanIsolationScope:r,dynamicSamplingContext:Ft(this)},request:n,...o&&{transaction_info:{source:o}}},c=Jl(this._events);return c&&Object.keys(c).length&&(z&&B.log("[Measurements] Adding measurements to transaction event",JSON.stringify(c,void 0,2)),a.measurements=c),a}}function Ql(t){return t&&typeof t=="number"||t instanceof Date||Array.isArray(t)}function Zl(t){return!!t.start_timestamp&&!!t.timestamp&&!!t.span_id&&!!t.trace_id}function m_(t){return t instanceof Si&&t.isStandaloneSpan()}function g_(t){const e=ie();if(!e)return;const r=t[1];if(!r||r.length===0){e.recordDroppedEvent("before_send","span");return}e.sendEnvelope(t)}function y_(t,e,r=()=>{}){let n;try{n=t()}catch(s){throw e(s),r(),s}return v_(n,e,r)}function v_(t,e,r){return Xn(t)?t.then(n=>(r(),n),n=>{throw e(n),r(),n}):(r(),t)}function w_(t,e,r){if(!Mt(t))return[!1];let n,s;typeof t.tracesSampler=="function"?(s=t.tracesSampler({...e,inheritOrSampleWith:a=>typeof e.parentSampleRate=="number"?e.parentSampleRate:typeof e.parentSampled=="boolean"?Number(e.parentSampled):a}),n=!0):e.parentSampled!==void 0?s=e.parentSampled:typeof t.tracesSampleRate<"u"&&(s=t.tracesSampleRate,n=!0);const i=Mn(s);if(i===void 0)return z&&B.warn(`[Tracing] Discarding root span because of invalid sample rate. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(s)} of type ${JSON.stringify(typeof s)}.`),[!1];if(!i)return z&&B.log(`[Tracing] Discarding transaction because ${typeof t.tracesSampler=="function"?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0"}`),[!1,i,n];const o=r<i;return o||z&&B.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),[o,i,n]}const vf="__SENTRY_SUPPRESS_TRACING__";function b_(t,e){const r=sc();if(r.startSpan)return r.startSpan(t,e);const n=bf(t),{forceTransaction:s,parentSpan:i,scope:o}=t,a=o==null?void 0:o.clone();return xi(a,()=>x_(i)(()=>{const l=ce(),u=_f(l,i),f=t.onlyIfParent&&!u?new $t:wf({parentSpan:u,spanArguments:n,forceTransaction:s,scope:l});return Gr(l,f),y_(()=>e(f),()=>{const{status:p}=oe(f);f.isRecording()&&(!p||p==="ok")&&f.setStatus({code:Ee,message:"internal_error"})},()=>{f.end()})}))}function on(t){const e=sc();if(e.startInactiveSpan)return e.startInactiveSpan(t);const r=bf(t),{forceTransaction:n,parentSpan:s}=t;return(t.scope?o=>xi(t.scope,o):s!==void 0?o=>nc(s,o):o=>o())(()=>{const o=ce(),a=_f(o,s);return t.onlyIfParent&&!a?new $t:wf({parentSpan:a,spanArguments:r,forceTransaction:n,scope:o})})}function nc(t,e){const r=sc();return r.withActiveSpan?r.withActiveSpan(t,e):xi(n=>(Gr(n,t||void 0),e(n)))}function wf({parentSpan:t,spanArguments:e,forceTransaction:r,scope:n}){if(!Mt()){const o=new $t;if(r||!t){const a={sampled:"false",sample_rate:"0",transaction:e.name,...Ft(o)};Ms(o,a)}return o}const s=jt();let i;if(t&&!r)i=__(t,n,e),hf(t,i);else if(t){const o=Ft(t),{traceId:a,spanId:c}=t.spanContext(),l=_r(t);i=eu({traceId:a,parentSpanId:c,...e},n,l),Ms(i,o)}else{const{traceId:o,dsc:a,parentSpanId:c,sampled:l}={...s.getPropagationContext(),...n.getPropagationContext()};i=eu({traceId:o,parentSpanId:c,...e},n,l),a&&Ms(i,a)}return h_(i),Tb(i,n,s),i}function bf(t){const r={isStandalone:(t.experimental||{}).standalone,...t};if(t.startTime){const n={...r};return n.startTimestamp=ur(t.startTime),delete n.startTime,n}return r}function sc(){const t=wr();return rn(t)}function eu(t,e,r){var m;const n=ie(),s=(n==null?void 0:n.getOptions())||{},{name:i=""}=t,o={spanAttributes:{...t.attributes},spanName:i,parentSampled:r};n==null||n.emit("beforeSampling",o,{decision:!1});const a=o.parentSampled??r,c=o.spanAttributes,l=e.getPropagationContext(),[u,h,f]=e.getScopeData().sdkProcessingMetadata[vf]?[!1]:w_(s,{name:i,parentSampled:a,attributes:c,parentSampleRate:Mn((m=l.dsc)==null?void 0:m.sample_rate)},l.sampleRand),p=new Si({...t,attributes:{[lt]:"custom",[Qa]:h!==void 0&&f?h:void 0,...c},sampled:u});return!u&&n&&(z&&B.log("[Tracing] Discarding root span because its trace was not chosen to be sampled."),n.recordDroppedEvent("sample_rate","transaction")),n&&n.emit("spanStart",p),p}function __(t,e,r){const{spanId:n,traceId:s}=t.spanContext(),i=e.getScopeData().sdkProcessingMetadata[vf]?!1:_r(t),o=i?new Si({...r,parentSpanId:n,traceId:s,sampled:i}):new $t({traceId:s});hf(t,o);const a=ie();return a&&(a.emit("spanStart",o),r.endTimestamp&&a.emit("spanEnd",o)),o}function _f(t,e){if(e)return e;if(e===null)return;const r=ti(t);if(!r)return;const n=ie();return(n?n.getOptions():{}).parentSpanIsAlwaysRootSpan?Fe(r):r}function x_(t){return t!==void 0?e=>nc(t,e):e=>e()}const Fs={idleTimeout:1e3,finalTimeout:3e4,childSpanTimeout:15e3},S_="heartbeatFailed",E_="idleTimeout",T_="finalTimeout",k_="externalFinish";function xf(t,e={}){const r=new Map;let n=!1,s,i=k_,o=!e.disableAutoFinish;const a=[],{idleTimeout:c=Fs.idleTimeout,finalTimeout:l=Fs.finalTimeout,childSpanTimeout:u=Fs.childSpanTimeout,beforeSpanEnd:h}=e,f=ie();if(!f||!Mt()){const g=new $t,k={sample_rate:"0",sampled:"false",...Ft(g)};return Ms(g,k),g}const p=ce(),m=Ge(),y=j_(t);y.end=new Proxy(y.end,{apply(g,k,T){if(h&&h(y),k instanceof $t)return;const[j,...P]=T,C=j||Re(),A=ur(C),N=Ls(y).filter(q=>q!==y);if(!N.length)return v(A),Reflect.apply(g,k,[A,...P]);const I=N.map(q=>oe(q).timestamp).filter(q=>!!q),R=I.length?Math.max(...I):void 0,M=oe(y).start_timestamp,D=Math.min(M?M+l/1e3:1/0,Math.max(M||-1/0,Math.min(A,R||1/0)));return v(D),Reflect.apply(g,k,[D,...P])}});function x(){s&&(clearTimeout(s),s=void 0)}function S(g){x(),s=setTimeout(()=>{!n&&r.size===0&&o&&(i=E_,y.end(g))},c)}function _(g){s=setTimeout(()=>{!n&&o&&(i=S_,y.end(g))},u)}function b(g){x(),r.set(g,!0);const k=Re();_(k+u/1e3)}function w(g){if(r.has(g)&&r.delete(g),r.size===0){const k=Re();S(k+c/1e3)}}function v(g){n=!0,r.clear(),a.forEach(A=>A()),Gr(p,m);const k=oe(y),{start_timestamp:T}=k;if(!T)return;k.data[ri]||y.setAttribute(ri,i),B.log(`[Tracing] Idle span "${k.op}" finished`);const P=Ls(y).filter(A=>A!==y);let C=0;P.forEach(A=>{A.isRecording()&&(A.setStatus({code:Ee,message:"cancelled"}),A.end(g),z&&B.log("[Tracing] Cancelling span since span ended early",JSON.stringify(A,void 0,2)));const N=oe(A),{timestamp:I=0,start_timestamp:R=0}=N,M=R<=g,D=(l+c)/1e3,q=I-R<=D;if(z){const V=JSON.stringify(A,void 0,2);M?q||B.log("[Tracing] Discarding span since it finished after idle span final timeout",V):B.log("[Tracing] Discarding span since it happened after idle span was finished",V)}(!q||!M)&&(Wb(y,A),C++)}),C>0&&y.setAttribute("sentry.idle_span_discarded_spans",C)}return a.push(f.on("spanStart",g=>{if(n||g===y||oe(g).timestamp||g instanceof Si&&g.isStandaloneSpan())return;Ls(y).includes(g)&&b(g.spanContext().spanId)})),a.push(f.on("spanEnd",g=>{n||w(g.spanContext().spanId)})),a.push(f.on("idleSpanEnableAutoFinish",g=>{g===y&&(o=!0,S(),r.size&&_())})),e.disableAutoFinish||S(),setTimeout(()=>{n||(y.setStatus({code:Ee,message:"deadline_exceeded"}),i=T_,y.end())},l),y}function j_(t){const e=on(t);return Gr(ce(),e),z&&B.log("[Tracing] Started span is an idle span"),e}const to=0,tu=1,ru=2;function gr(t){return new Ut(e=>{e(t)})}function si(t){return new Ut((e,r)=>{r(t)})}class Ut{constructor(e){this._state=to,this._handlers=[],this._runExecutor(e)}then(e,r){return new Ut((n,s)=>{this._handlers.push([!1,i=>{if(!e)n(i);else try{n(e(i))}catch(o){s(o)}},i=>{if(!r)s(i);else try{n(r(i))}catch(o){s(o)}}]),this._executeHandlers()})}catch(e){return this.then(r=>r,e)}finally(e){return new Ut((r,n)=>{let s,i;return this.then(o=>{i=!1,s=o,e&&e()},o=>{i=!0,s=o,e&&e()}).then(()=>{if(i){n(s);return}r(s)})})}_executeHandlers(){if(this._state===to)return;const e=this._handlers.slice();this._handlers=[],e.forEach(r=>{r[0]||(this._state===tu&&r[1](this._value),this._state===ru&&r[2](this._value),r[0]=!0)})}_runExecutor(e){const r=(i,o)=>{if(this._state===to){if(Xn(o)){o.then(n,s);return}this._state=i,this._value=o,this._executeHandlers()}},n=i=>{r(tu,i)},s=i=>{r(ru,i)};try{e(n,s)}catch(i){s(i)}}}function Yo(t,e,r,n=0){return new Ut((s,i)=>{const o=t[n];if(e===null||typeof o!="function")s(e);else{const a=o({...e},r);z&&o.id&&a===null&&B.log(`Event processor "${o.id}" dropped event`),Xn(a)?a.then(c=>Yo(t,c,r,n+1).then(s)).then(null,i):Yo(t,a,r,n+1).then(s).then(null,i)}})}function A_(t,e){const{fingerprint:r,span:n,breadcrumbs:s,sdkProcessingMetadata:i}=e;P_(t,e),n&&I_(t,n),N_(t,r),C_(t,s),R_(t,i)}function nu(t,e){const{extra:r,tags:n,user:s,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:h,propagationContext:f,transactionName:p,span:m}=e;ws(t,"extra",r),ws(t,"tags",n),ws(t,"user",s),ws(t,"contexts",i),t.sdkProcessingMetadata=Yn(t.sdkProcessingMetadata,a,2),o&&(t.level=o),p&&(t.transactionName=p),m&&(t.span=m),c.length&&(t.breadcrumbs=[...t.breadcrumbs,...c]),l.length&&(t.fingerprint=[...t.fingerprint,...l]),u.length&&(t.eventProcessors=[...t.eventProcessors,...u]),h.length&&(t.attachments=[...t.attachments,...h]),t.propagationContext={...t.propagationContext,...f}}function ws(t,e,r){t[e]=Yn(t[e],r,1)}function P_(t,e){const{extra:r,tags:n,user:s,contexts:i,level:o,transactionName:a}=e;Object.keys(r).length&&(t.extra={...r,...t.extra}),Object.keys(n).length&&(t.tags={...n,...t.tags}),Object.keys(s).length&&(t.user={...s,...t.user}),Object.keys(i).length&&(t.contexts={...i,...t.contexts}),o&&(t.level=o),a&&t.type!=="transaction"&&(t.transaction=a)}function C_(t,e){const r=[...t.breadcrumbs||[],...e];t.breadcrumbs=r.length?r:void 0}function R_(t,e){t.sdkProcessingMetadata={...t.sdkProcessingMetadata,...e}}function I_(t,e){t.contexts={trace:Vb(e),...t.contexts},t.sdkProcessingMetadata={dynamicSamplingContext:Ft(e),...t.sdkProcessingMetadata};const r=Fe(e),n=oe(r).description;n&&!t.transaction&&t.type==="transaction"&&(t.transaction=n)}function N_(t,e){t.fingerprint=t.fingerprint?Array.isArray(t.fingerprint)?t.fingerprint:[t.fingerprint]:[],e&&(t.fingerprint=t.fingerprint.concat(e)),t.fingerprint.length||delete t.fingerprint}let bs,su,_s;function O_(t){const e=ae._sentryDebugIds;if(!e)return{};const r=Object.keys(e);return _s&&r.length===su||(su=r.length,_s=r.reduce((n,s)=>{bs||(bs={});const i=bs[s];if(i)n[i[0]]=i[1];else{const o=t(s);for(let a=o.length-1;a>=0;a--){const c=o[a],l=c==null?void 0:c.filename,u=e[s];if(l&&u){n[l]=u,bs[s]=[l,u];break}}}return n},{})),_s}function D_(t,e,r,n,s,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=t,c={...e,event_id:e.event_id||r.event_id||Qe(),timestamp:e.timestamp||br()},l=r.integrations||t.integrations.map(x=>x.name);L_(c,t),$_(c,l),s&&s.emit("applyFrameMetadata",e),e.type===void 0&&M_(c,t.stackParser);const u=B_(n,r.captureContext);r.mechanism&&zr(c,r.mechanism);const h=s?s.getEventProcessors():[],f=bb().getScopeData();if(i){const x=i.getScopeData();nu(f,x)}if(u){const x=u.getScopeData();nu(f,x)}const p=[...r.attachments||[],...f.attachments];p.length&&(r.attachments=p),A_(c,f);const m=[...h,...f.eventProcessors];return Yo(m,c,r).then(x=>(x&&F_(x),typeof o=="number"&&o>0?U_(x,o,a):x))}function L_(t,e){const{environment:r,release:n,dist:s,maxValueLength:i=250}=e;t.environment=t.environment||r||rc,!t.release&&n&&(t.release=n),!t.dist&&s&&(t.dist=s);const o=t.request;o!=null&&o.url&&(o.url=ei(o.url,i))}function M_(t,e){var n,s;const r=O_(e);(s=(n=t.exception)==null?void 0:n.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.filename&&(c.debug_id=r[c.filename])})})}function F_(t){var n,s;const e={};if((s=(n=t.exception)==null?void 0:n.values)==null||s.forEach(i=>{var o,a;(a=(o=i.stacktrace)==null?void 0:o.frames)==null||a.forEach(c=>{c.debug_id&&(c.abs_path?e[c.abs_path]=c.debug_id:c.filename&&(e[c.filename]=c.debug_id),delete c.debug_id)})}),Object.keys(e).length===0)return;t.debug_meta=t.debug_meta||{},t.debug_meta.images=t.debug_meta.images||[];const r=t.debug_meta.images;Object.entries(e).forEach(([i,o])=>{r.push({type:"sourcemap",code_file:i,debug_id:o})})}function $_(t,e){e.length>0&&(t.sdk=t.sdk||{},t.sdk.integrations=[...t.sdk.integrations||[],...e])}function U_(t,e,r){var s,i;if(!t)return null;const n={...t,...t.breadcrumbs&&{breadcrumbs:t.breadcrumbs.map(o=>({...o,...o.data&&{data:vt(o.data,e,r)}}))},...t.user&&{user:vt(t.user,e,r)},...t.contexts&&{contexts:vt(t.contexts,e,r)},...t.extra&&{extra:vt(t.extra,e,r)}};return(s=t.contexts)!=null&&s.trace&&n.contexts&&(n.contexts.trace=t.contexts.trace,t.contexts.trace.data&&(n.contexts.trace.data=vt(t.contexts.trace.data,e,r))),t.spans&&(n.spans=t.spans.map(o=>({...o,...o.data&&{data:vt(o.data,e,r)}}))),(i=t.contexts)!=null&&i.flags&&n.contexts&&(n.contexts.flags=vt(t.contexts.flags,3,r)),n}function B_(t,e){if(!e)return t;const r=t?t.clone():new pt;return r.update(e),r}function V_(t){if(t)return q_(t)?{captureContext:t}:z_(t)?{captureContext:t}:t}function q_(t){return t instanceof pt||typeof t=="function"}const H_=["user","level","extra","contexts","tags","fingerprint","propagationContext"];function z_(t){return Object.keys(t).some(e=>H_.includes(e))}function Sf(t,e){return ce().captureException(t,V_(e))}function Ef(t,e){return ce().captureEvent(t,e)}function W_(t,e){jt().setContext(t,e)}function G_(t){jt().setUser(t)}function K_(){const t=ie();return(t==null?void 0:t.getOptions().enabled)!==!1&&!!(t!=null&&t.getTransport())}function iu(t){const e=jt(),r=ce(),{userAgent:n}=ae.navigator||{},s=ub({user:r.getUser()||e.getUser(),...n&&{userAgent:n},...t}),i=e.getSession();return(i==null?void 0:i.status)==="ok"&&Wr(i,{status:"exited"}),Tf(),e.setSession(s),s}function Tf(){const t=jt(),r=ce().getSession()||t.getSession();r&&db(r),kf(),t.setSession()}function kf(){const t=jt(),e=ie(),r=t.getSession();r&&e&&e.captureSession(r)}function ou(t=!1){if(t){Tf();return}kf()}const X_="7";function J_(t){const e=t.protocol?`${t.protocol}:`:"",r=t.port?`:${t.port}`:"";return`${e}//${t.host}${r}${t.path?`/${t.path}`:""}/api/`}function Y_(t){return`${J_(t)}${t.projectId}/envelope/`}function Q_(t,e){const r={sentry_version:X_};return t.publicKey&&(r.sentry_key=t.publicKey),e&&(r.sentry_client=`${e.name}/${e.version}`),new URLSearchParams(r).toString()}function Z_(t,e,r){return e||`${Y_(t)}?${Q_(t,r)}`}const au=[];function ex(t){const e={};return t.forEach(r=>{const{name:n}=r,s=e[n];s&&!s.isDefaultInstance&&r.isDefaultInstance||(e[n]=r)}),Object.values(e)}function tx(t){const e=t.defaultIntegrations||[],r=t.integrations;e.forEach(s=>{s.isDefaultInstance=!0});let n;if(Array.isArray(r))n=[...e,...r];else if(typeof r=="function"){const s=r(e);n=Array.isArray(s)?s:[s]}else n=e;return ex(n)}function rx(t,e){const r={};return e.forEach(n=>{n&&jf(t,n,r)}),r}function cu(t,e){for(const r of e)r!=null&&r.afterAllSetup&&r.afterAllSetup(t)}function jf(t,e,r){if(r[e.name]){z&&B.log(`Integration skipped because it was already installed: ${e.name}`);return}if(r[e.name]=e,au.indexOf(e.name)===-1&&typeof e.setupOnce=="function"&&(e.setupOnce(),au.push(e.name)),e.setup&&typeof e.setup=="function"&&e.setup(t),typeof e.preprocessEvent=="function"){const n=e.preprocessEvent.bind(e);t.on("preprocessEvent",(s,i)=>n(s,i,t))}if(typeof e.processEvent=="function"){const n=e.processEvent.bind(e),s=Object.assign((i,o)=>n(i,o,t),{id:e.name});t.addEventProcessor(s)}z&&B.log(`Integration installed: ${e.name}`)}function nx(t,e,r){const n=[{type:"client_report"},{timestamp:br(),discarded_events:t}];return sn(e?{dsn:e}:{},[n])}function Af(t){const e=[];t.message&&e.push(t.message);try{const r=t.exception.values[t.exception.values.length-1];r!=null&&r.value&&(e.push(r.value),r.type&&e.push(`${r.type}: ${r.value}`))}catch{}return e}function sx(t){var c;const{trace_id:e,parent_span_id:r,span_id:n,status:s,origin:i,data:o,op:a}=((c=t.contexts)==null?void 0:c.trace)??{};return{data:o??{},description:t.transaction,op:a,parent_span_id:r,span_id:n??"",start_timestamp:t.start_timestamp??0,status:s,timestamp:t.timestamp,trace_id:e??"",origin:i,profile_id:o==null?void 0:o[Za],exclusive_time:o==null?void 0:o[nn],measurements:t.measurements,is_segment:!0}}function ix(t){return{type:"transaction",timestamp:t.timestamp,start_timestamp:t.start_timestamp,transaction:t.description,contexts:{trace:{trace_id:t.trace_id,span_id:t.span_id,parent_span_id:t.parent_span_id,op:t.op,status:t.status,origin:t.origin,data:{...t.data,...t.profile_id&&{[Za]:t.profile_id},...t.exclusive_time&&{[nn]:t.exclusive_time}}}},measurements:t.measurements}}const lu="Not capturing exception because it's already been captured.",uu="Discarded session because of missing or non-string release",Pf=Symbol.for("SentryInternalError"),Cf=Symbol.for("SentryDoNotSendEventError");function $s(t){return{message:t,[Pf]:!0}}function ro(t){return{message:t,[Cf]:!0}}function du(t){return!!t&&typeof t=="object"&&Pf in t}function hu(t){return!!t&&typeof t=="object"&&Cf in t}class ox{constructor(e){if(this._options=e,this._integrations={},this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=Fb(e.dsn):z&&B.warn("No DSN provided, client will not send events."),this._dsn){const r=Z_(this._dsn,e.tunnel,e._metadata?e._metadata.sdk:void 0);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:r})}}captureException(e,r,n){const s=Qe();if(Ul(e))return z&&B.log(lu),s;const i={event_id:s,...r};return this._process(this.eventFromException(e,i).then(o=>this._captureEvent(o,i,n))),i.event_id}captureMessage(e,r,n,s){const i={event_id:Qe(),...n},o=Xa(e)?e:String(e),a=Dn(e)?this.eventFromMessage(o,r,i):this.eventFromException(e,i);return this._process(a.then(c=>this._captureEvent(c,i,s))),i.event_id}captureEvent(e,r,n){const s=Qe();if(r!=null&&r.originalException&&Ul(r.originalException))return z&&B.log(lu),s;const i={event_id:s,...r},o=e.sdkProcessingMetadata||{},a=o.capturedSpanScope,c=o.capturedSpanIsolationScope;return this._process(this._captureEvent(e,i,a||n,c)),i.event_id}captureSession(e){this.sendSession(e),Wr(e,{init:!1})}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const r=this._transport;return r?(this.emit("flush"),this._isClientDoneProcessing(e).then(n=>r.flush(e).then(s=>n&&s))):gr(!0)}close(e){return this.flush(e).then(r=>(this.getOptions().enabled=!1,this.emit("close"),r))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}init(){(this._isEnabled()||this._options.integrations.some(({name:e})=>e.startsWith("Spotlight")))&&this._setupIntegrations()}getIntegrationByName(e){return this._integrations[e]}addIntegration(e){const r=this._integrations[e.name];jf(this,e,this._integrations),r||cu(this,[e])}sendEvent(e,r={}){this.emit("beforeSendEvent",e,r);let n=u_(e,this._dsn,this._options._metadata,this._options.tunnel);for(const i of r.attachments||[])n=Zb(n,n_(i));const s=this.sendEnvelope(n);s&&s.then(i=>this.emit("afterSendEvent",e,i),null)}sendSession(e){const{release:r,environment:n=rc}=this._options;if("aggregates"in e){const i=e.attrs||{};if(!i.release&&!r){z&&B.warn(uu);return}i.release=i.release||r,i.environment=i.environment||n,e.attrs=i}else{if(!e.release&&!r){z&&B.warn(uu);return}e.release=e.release||r,e.environment=e.environment||n}this.emit("beforeSendSession",e);const s=l_(e,this._dsn,this._options._metadata,this._options.tunnel);this.sendEnvelope(s)}recordDroppedEvent(e,r,n=1){if(this._options.sendClientReports){const s=`${e}:${r}`;z&&B.log(`Recording outcome: "${s}"${n>1?` (${n} times)`:""}`),this._outcomes[s]=(this._outcomes[s]||0)+n}}on(e,r){const n=this._hooks[e]=this._hooks[e]||[];return n.push(r),()=>{const s=n.indexOf(r);s>-1&&n.splice(s,1)}}emit(e,...r){const n=this._hooks[e];n&&n.forEach(s=>s(...r))}sendEnvelope(e){return this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport?this._transport.send(e).then(null,r=>(z&&B.error("Error while sending envelope:",r),r)):(z&&B.error("Transport disabled"),gr({}))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=rx(this,e),cu(this,e)}_updateSessionFromEvent(e,r){var c;let n=r.level==="fatal",s=!1;const i=(c=r.exception)==null?void 0:c.values;if(i){s=!0;for(const l of i){const u=l.mechanism;if((u==null?void 0:u.handled)===!1){n=!0;break}}}const o=e.status==="ok";(o&&e.errors===0||o&&n)&&(Wr(e,{...n&&{status:"crashed"},errors:e.errors||Number(s||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Ut(r=>{let n=0;const s=1,i=setInterval(()=>{this._numProcessing==0?(clearInterval(i),r(!0)):(n+=s,e&&n>=e&&(clearInterval(i),r(!1)))},s)})}_isEnabled(){return this.getOptions().enabled!==!1&&this._transport!==void 0}_prepareEvent(e,r,n,s){const i=this.getOptions(),o=Object.keys(this._integrations);return!r.integrations&&(o!=null&&o.length)&&(r.integrations=o),this.emit("preprocessEvent",e,r),e.type||s.setLastEventId(e.event_id||r.event_id),D_(i,e,r,n,this,s).then(a=>{if(a===null)return a;this.emit("postprocessEvent",a,r),a.contexts={trace:_b(n),...a.contexts};const c=mf(this,n);return a.sdkProcessingMetadata={dynamicSamplingContext:c,...a.sdkProcessingMetadata},a})}_captureEvent(e,r={},n=ce(),s=jt()){return z&&Qo(e)&&B.log(`Captured error event \`${Af(e)[0]||"<unknown>"}\``),this._processEvent(e,r,n,s).then(i=>i.event_id,i=>{z&&(hu(i)?B.log(i.message):du(i)?B.warn(i.message):B.warn(i))})}_processEvent(e,r,n,s){const i=this.getOptions(),{sampleRate:o}=i,a=Rf(e),c=Qo(e),l=e.type||"error",u=`before send for type \`${l}\``,h=typeof o>"u"?void 0:Mn(o);if(c&&typeof h=="number"&&Math.random()>h)return this.recordDroppedEvent("sample_rate","error"),si(ro(`Discarding event because it's not included in the random sample (sampling rate = ${o})`));const f=l==="replay_event"?"replay":l;return this._prepareEvent(e,r,n,s).then(p=>{if(p===null)throw this.recordDroppedEvent("event_processor",f),ro("An event processor returned `null`, will not send event.");if(r.data&&r.data.__sentry__===!0)return p;const y=cx(this,i,p,r);return ax(y,u)}).then(p=>{var x;if(p===null){if(this.recordDroppedEvent("before_send",f),a){const _=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",_)}throw ro(`${u} returned \`null\`, will not send event.`)}const m=n.getSession()||s.getSession();if(c&&m&&this._updateSessionFromEvent(m,p),a){const S=((x=p.sdkProcessingMetadata)==null?void 0:x.spanCountBeforeProcessing)||0,_=p.spans?p.spans.length:0,b=S-_;b>0&&this.recordDroppedEvent("before_send","span",b)}const y=p.transaction_info;if(a&&y&&p.transaction!==e.transaction){const S="custom";p.transaction_info={...y,source:S}}return this.sendEvent(p,r),p}).then(null,p=>{throw hu(p)||du(p)?p:(this.captureException(p,{mechanism:{handled:!1,type:"internal"},data:{__sentry__:!0},originalException:p}),$s(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.
Reason: ${p}`))})}_process(e){this._numProcessing++,e.then(r=>(this._numProcessing--,r),r=>(this._numProcessing--,r))}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.entries(e).map(([r,n])=>{const[s,i]=r.split(":");return{reason:s,category:i,quantity:n}})}_flushOutcomes(){z&&B.log("Flushing outcomes...");const e=this._clearOutcomes();if(e.length===0){z&&B.log("No outcomes to send");return}if(!this._dsn){z&&B.log("No dsn provided, will not send outcomes");return}z&&B.log("Sending outcomes:",e);const r=nx(e,this._options.tunnel&&ts(this._dsn));this.sendEnvelope(r)}}function ax(t,e){const r=`${e} must return \`null\` or a valid event.`;if(Xn(t))return t.then(n=>{if(!Ln(n)&&n!==null)throw $s(r);return n},n=>{throw $s(`${e} rejected with ${n}`)});if(!Ln(t)&&t!==null)throw $s(r);return t}function cx(t,e,r,n){const{beforeSend:s,beforeSendTransaction:i,beforeSendSpan:o,ignoreSpans:a}=e;let c=r;if(Qo(c)&&s)return s(c,n);if(Rf(c)){if(o||a){const l=sx(c);if(a!=null&&a.length&&Jo(l,a))return null;if(o){const u=o(l);u?c=Yn(r,ix(u)):Go()}if(c.spans){const u=[],h=c.spans;for(const p of h){if(a!=null&&a.length&&Jo(p,a)){o_(h,p);continue}if(o){const m=o(p);m?u.push(m):(Go(),u.push(p))}else u.push(p)}const f=c.spans.length-u.length;f&&t.recordDroppedEvent("before_send","span",f),c.spans=u}}if(i){if(c.spans){const l=c.spans.length;c.sdkProcessingMetadata={...r.sdkProcessingMetadata,spanCountBeforeProcessing:l}}return i(c,n)}}return c}function Qo(t){return t.type===void 0}function Rf(t){return t.type==="transaction"}function lx(t){return[{type:"log",item_count:t.length,content_type:"application/vnd.sentry.items.log+json"},{items:t}]}function ux(t,e,r,n){const s={};return e!=null&&e.sdk&&(s.sdk={name:e.sdk.name,version:e.sdk.version}),r&&n&&(s.dsn=ts(n)),sn(s,[lx(t)])}function no(t,e){const r=dx(t)??[];if(r.length===0)return;const n=t.getOptions(),s=ux(r,n._metadata,n.tunnel,t.getDsn());If().set(t,[]),t.emit("flushLogs"),t.sendEnvelope(s)}function dx(t){return If().get(t)}function If(){return Kn("clientToLogBufferMap",()=>new WeakMap)}function hx(t,e){e.debug===!0&&(z?B.enable():en(()=>{console.warn("[Sentry] Cannot initialize SDK with `debug` option using a non-debug bundle.")})),ce().update(e.initialScope);const n=new t(e);return fx(n),n.init(),n}function fx(t){ce().setClient(t)}const Nf=Symbol.for("SentryBufferFullError");function px(t){const e=[];function r(){return t===void 0||e.length<t}function n(o){return e.splice(e.indexOf(o),1)[0]||Promise.resolve(void 0)}function s(o){if(!r())return si(Nf);const a=o();return e.indexOf(a)===-1&&e.push(a),a.then(()=>n(a)).then(null,()=>n(a).then(null,()=>{})),a}function i(o){return new Ut((a,c)=>{let l=e.length;if(!l)return a(!0);const u=setTimeout(()=>{o&&o>0&&a(!1)},o);e.forEach(h=>{gr(h).then(()=>{--l||(clearTimeout(u),a(!0))},c)})})}return{$:e,add:s,drain:i}}const mx=60*1e3;function gx(t,e=Date.now()){const r=parseInt(`${t}`,10);if(!isNaN(r))return r*1e3;const n=Date.parse(`${t}`);return isNaN(n)?mx:n-e}function yx(t,e){return t[e]||t.all||0}function vx(t,e,r=Date.now()){return yx(t,e)>r}function wx(t,{statusCode:e,headers:r},n=Date.now()){const s={...t},i=r==null?void 0:r["x-sentry-rate-limits"],o=r==null?void 0:r["retry-after"];if(i)for(const a of i.trim().split(",")){const[c,l,,,u]=a.split(":",5),h=parseInt(c,10),f=(isNaN(h)?60:h)*1e3;if(!l)s.all=n+f;else for(const p of l.split(";"))p==="metric_bucket"?(!u||u.split(";").includes("custom"))&&(s[p]=n+f):s[p]=n+f}else o?s.all=n+gx(o,n):e===429&&(s.all=n+60*1e3);return s}const bx=64;function _x(t,e,r=px(t.bufferSize||bx)){let n={};const s=o=>r.drain(o);function i(o){const a=[];if(Kl(o,(h,f)=>{const p=Xl(f);vx(n,p)?t.recordDroppedEvent("ratelimit_backoff",p):a.push(h)}),a.length===0)return gr({});const c=sn(o[0],a),l=h=>{Kl(c,(f,p)=>{t.recordDroppedEvent(h,Xl(p))})},u=()=>e({body:e_(c)}).then(h=>(h.statusCode!==void 0&&(h.statusCode<200||h.statusCode>=300)&&z&&B.warn(`Sentry responded with status code ${h.statusCode} to sent event.`),n=wx(n,h),h),h=>{throw l("network_error"),z&&B.error("Encountered error running transport request:",h),h});return r.add(u).then(h=>h,h=>{if(h===Nf)return z&&B.error("Skipped sending event because buffer is full."),l("queue_overflow"),gr({});throw h})}return{send:i,flush:s}}const xx="thismessage:/";function Of(t){return"isRelative"in t}function Df(t,e){const r=t.indexOf("://")<=0&&t.indexOf("//")!==0,n=r?xx:void 0;try{if("canParse"in URL&&!URL.canParse(t,n))return;const s=new URL(t,n);return r?{isRelative:r,pathname:s.pathname,search:s.search,hash:s.hash}:s}catch{}}function Sx(t){if(Of(t))return t.pathname;const e=new URL(t);return e.search="",e.hash="",["80","443"].includes(e.port)&&(e.port=""),e.password&&(e.password="%filtered%"),e.username&&(e.username="%filtered%"),e.toString()}function hr(t){if(!t)return{};const e=t.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!e)return{};const r=e[6]||"",n=e[8]||"";return{host:e[4],path:e[5],protocol:e[2],search:r,hash:n,relative:e[5]+r+n}}function Ex(t){return t.split(/[?#]/,1)[0]}function Tx(t){var e;"aggregates"in t?((e=t.attrs)==null?void 0:e.ip_address)===void 0&&(t.attrs={...t.attrs,ip_address:"{{auto}}"}):t.ipAddress===void 0&&(t.ipAddress="{{auto}}")}function Lf(t,e,r=[e],n="npm"){const s=t._metadata||{};s.sdk||(s.sdk={name:`sentry.javascript.${e}`,packages:r.map(i=>({name:`${n}:@sentry/${i}`,version:lr})),version:lr}),t._metadata=s}function Mf(t={}){const e=t.client||ie();if(!K_()||!e)return{};const r=wr(),n=rn(r);if(n.getTraceData)return n.getTraceData(t);const s=t.scope||ce(),i=t.span||Ge(),o=i?qb(i):kx(s),a=i?Ft(i):mf(e,s),c=Ab(a);if(!of.test(o))return B.warn("Invalid sentry-trace data. Cannot generate trace data"),{};const u={"sentry-trace":o,baggage:c};if(t.propagateTraceparent){const h=jx(o);h&&(u.traceparent=h)}return u}function kx(t){const{traceId:e,sampled:r,propagationSpanId:n}=t.getPropagationContext();return cf(e,n,r)}function jx(t){const{traceId:e,parentSpanId:r,parentSampled:n}=af(t)||{};if(!(!e||!r))return`00-${e}-${r}-${n?"01":"00"}`}const Ax=100;function Bt(t,e){const r=ie(),n=jt();if(!r)return;const{beforeBreadcrumb:s=null,maxBreadcrumbs:i=Ax}=r.getOptions();if(i<=0)return;const a={timestamp:br(),...t},c=s?en(()=>s(a,e)):a;c!==null&&(r.emit&&r.emit("beforeAddBreadcrumb",c,e),n.addBreadcrumb(c,i))}let fu;const Px="FunctionToString",pu=new WeakMap,Cx=(()=>({name:Px,setupOnce(){fu=Function.prototype.toString;try{Function.prototype.toString=function(...t){const e=Ya(this),r=pu.has(ie())&&e!==void 0?e:this;return fu.apply(r,t)}}catch{}},setup(t){pu.set(t,!0)}})),Rx=Cx,Ix=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/,/^Can't find variable: gmo$/,/^undefined is not an object \(evaluating 'a\.[A-Z]'\)$/,`can't redefine non-configurable property "solana"`,"vv().getRestrictions is not a function. (In 'vv().getRestrictions(1,a)', 'vv().getRestrictions' is undefined)","Can't find variable: _AutofillCallbackHandler",/^Non-Error promise rejection captured with value: Object Not Found Matching Id:\d+, MethodName:simulateEvent, ParamCount:\d+$/,/^Java exception was raised during method invocation$/],Nx="EventFilters",Ox=(t={})=>{let e;return{name:Nx,setup(r){const n=r.getOptions();e=mu(t,n)},processEvent(r,n,s){if(!e){const i=s.getOptions();e=mu(t,i)}return Lx(r,e)?null:r}}},Dx=((t={})=>({...Ox(t),name:"InboundFilters"}));function mu(t={},e={}){return{allowUrls:[...t.allowUrls||[],...e.allowUrls||[]],denyUrls:[...t.denyUrls||[],...e.denyUrls||[]],ignoreErrors:[...t.ignoreErrors||[],...e.ignoreErrors||[],...t.disableErrorDefaults?[]:Ix],ignoreTransactions:[...t.ignoreTransactions||[],...e.ignoreTransactions||[]]}}function Lx(t,e){if(t.type){if(t.type==="transaction"&&Fx(t,e.ignoreTransactions))return z&&B.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.
Event: ${nr(t)}`),!0}else{if(Mx(t,e.ignoreErrors))return z&&B.warn(`Event dropped due to being matched by \`ignoreErrors\` option.
Event: ${nr(t)}`),!0;if(Vx(t))return z&&B.warn(`Event dropped due to not having an error message, error type or stacktrace.
Event: ${nr(t)}`),!0;if($x(t,e.denyUrls))return z&&B.warn(`Event dropped due to being matched by \`denyUrls\` option.
Event: ${nr(t)}.
Url: ${ii(t)}`),!0;if(!Ux(t,e.allowUrls))return z&&B.warn(`Event dropped due to not being matched by \`allowUrls\` option.
Event: ${nr(t)}.
Url: ${ii(t)}`),!0}return!1}function Mx(t,e){return e!=null&&e.length?Af(t).some(r=>Dt(r,e)):!1}function Fx(t,e){if(!(e!=null&&e.length))return!1;const r=t.transaction;return r?Dt(r,e):!1}function $x(t,e){if(!(e!=null&&e.length))return!1;const r=ii(t);return r?Dt(r,e):!1}function Ux(t,e){if(!(e!=null&&e.length))return!0;const r=ii(t);return r?Dt(r,e):!0}function Bx(t=[]){for(let e=t.length-1;e>=0;e--){const r=t[e];if(r&&r.filename!=="<anonymous>"&&r.filename!=="[native code]")return r.filename||null}return null}function ii(t){var e,r;try{const n=[...((e=t.exception)==null?void 0:e.values)??[]].reverse().find(i=>{var o,a,c;return((o=i.mechanism)==null?void 0:o.parent_id)===void 0&&((c=(a=i.stacktrace)==null?void 0:a.frames)==null?void 0:c.length)}),s=(r=n==null?void 0:n.stacktrace)==null?void 0:r.frames;return s?Bx(s):null}catch{return z&&B.error(`Cannot extract url for event ${nr(t)}`),null}}function Vx(t){var e,r;return(r=(e=t.exception)==null?void 0:e.values)!=null&&r.length?!t.message&&!t.exception.values.some(n=>n.stacktrace||n.type&&n.type!=="Error"||n.value):!1}function qx(t,e,r,n,s,i){var a;if(!((a=s.exception)!=null&&a.values)||!i||!xt(i.originalException,Error))return;const o=s.exception.values.length>0?s.exception.values[s.exception.values.length-1]:void 0;o&&(s.exception.values=Zo(t,e,n,i.originalException,r,s.exception.values,o,0))}function Zo(t,e,r,n,s,i,o,a){if(i.length>=r+1)return i;let c=[...i];if(xt(n[s],Error)){gu(o,a);const l=t(e,n[s]),u=c.length;yu(l,s,u,a),c=Zo(t,e,r,n[s],s,[l,...c],l,u)}return Array.isArray(n.errors)&&n.errors.forEach((l,u)=>{if(xt(l,Error)){gu(o,a);const h=t(e,l),f=c.length;yu(h,`errors[${u}]`,f,a),c=Zo(t,e,r,l,s,[h,...c],h,f)}}),c}function gu(t,e){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,...t.type==="AggregateError"&&{is_exception_group:!0},exception_id:e}}function yu(t,e,r,n){t.mechanism=t.mechanism||{type:"generic",handled:!0},t.mechanism={...t.mechanism,type:"chained",source:e,exception_id:r,parent_id:n}}function Hx(t){const e="console";Wt(e,t),Gt(e,zx)}function zx(){"console"in ae&&Vw.forEach(function(t){t in ae.console&&He(ae.console,t,function(e){return Zs[t]=e,function(...r){Ye("console",{args:r,level:t});const s=Zs[t];s==null||s.apply(ae.console,r)}})})}function Wx(t){return t==="warn"?"warning":["fatal","error","warning","log","info","debug"].includes(t)?t:"log"}const Gx="Dedupe",Kx=(()=>{let t;return{name:Gx,processEvent(e){if(e.type)return e;try{if(Jx(e,t))return z&&B.warn("Event dropped due to being a duplicate of previously captured event."),null}catch{}return t=e}}}),Xx=Kx;function Jx(t,e){return e?!!(Yx(t,e)||Qx(t,e)):!1}function Yx(t,e){const r=t.message,n=e.message;return!(!r&&!n||r&&!n||!r&&n||r!==n||!$f(t,e)||!Ff(t,e))}function Qx(t,e){const r=vu(e),n=vu(t);return!(!r||!n||r.type!==n.type||r.value!==n.value||!$f(t,e)||!Ff(t,e))}function Ff(t,e){let r=Ol(t),n=Ol(e);if(!r&&!n)return!0;if(r&&!n||!r&&n||(r=r,n=n,n.length!==r.length))return!1;for(let s=0;s<n.length;s++){const i=n[s],o=r[s];if(i.filename!==o.filename||i.lineno!==o.lineno||i.colno!==o.colno||i.function!==o.function)return!1}return!0}function $f(t,e){let r=t.fingerprint,n=e.fingerprint;if(!r&&!n)return!0;if(r&&!n||!r&&n)return!1;r=r,n=n;try{return r.join("")===n.join("")}catch{return!1}}function vu(t){var e,r;return(r=(e=t.exception)==null?void 0:e.values)==null?void 0:r[0]}function Zx(t,e,r,n,s){if(!t.fetchData)return;const{method:i,url:o}=t.fetchData,a=Mt()&&e(o);if(t.endTimestamp&&a){const p=t.fetchData.__span;if(!p)return;const m=n[p];m&&(tS(m,t),delete n[p]);return}const{spanOrigin:c="auto.http.browser",propagateTraceparent:l=!1}=typeof s=="object"?s:{spanOrigin:s},u=!!Ge(),h=a&&u?on(nS(o,i,c)):new $t;if(t.fetchData.__span=h.spanContext().spanId,n[h.spanContext().spanId]=h,r(t.fetchData.url)){const p=t.args[0],m=t.args[1]||{},y=eS(p,m,Mt()&&u?h:void 0,l);y&&(t.args[1]=m,m.headers=y)}const f=ie();if(f){const p={input:t.args,response:t.response,startTimestamp:t.startTimestamp,endTimestamp:t.endTimestamp};f.emit("beforeOutgoingRequestSpan",h,p)}return h}function eS(t,e,r,n){const s=Mf({span:r,propagateTraceparent:n}),i=s["sentry-trace"],o=s.baggage,a=s.traceparent;if(!i)return;const c=e.headers||(Wh(t)?t.headers:void 0);if(c)if(rS(c)){const l=new Headers(c);if(l.get("sentry-trace")||l.set("sentry-trace",i),n&&a&&!l.get("traceparent")&&l.set("traceparent",a),o){const u=l.get("baggage");u?xs(u)||l.set("baggage",`${u},${o}`):l.set("baggage",o)}return l}else if(Array.isArray(c)){const l=[...c];c.find(h=>h[0]==="sentry-trace")||l.push(["sentry-trace",i]),n&&a&&!c.find(h=>h[0]==="traceparent")&&l.push(["traceparent",a]);const u=c.find(h=>h[0]==="baggage"&&xs(h[1]));return o&&!u&&l.push(["baggage",o]),l}else{const l="sentry-trace"in c?c["sentry-trace"]:void 0,u="traceparent"in c?c.traceparent:void 0,h="baggage"in c?c.baggage:void 0,f=h?Array.isArray(h)?[...h]:[h]:[],p=h&&(Array.isArray(h)?h.find(y=>xs(y)):xs(h));o&&!p&&f.push(o);const m={...c,"sentry-trace":l??i,baggage:f.length>0?f.join(","):void 0};return n&&a&&!u&&(m.traceparent=a),m}else return{...s}}function tS(t,e){var r,n;if(e.response){ef(t,e.response.status);const s=(n=(r=e.response)==null?void 0:r.headers)==null?void 0:n.get("content-length");if(s){const i=parseInt(s);i>0&&t.setAttribute("http.response_content_length",i)}}else e.error&&t.setStatus({code:Ee,message:"internal_error"});t.end()}function xs(t){return t.split(",").some(e=>e.trim().startsWith(ec))}function rS(t){return typeof Headers<"u"&&xt(t,Headers)}function nS(t,e,r){const n=Df(t);return{name:n?`${e} ${Sx(n)}`:e,attributes:sS(t,n,e,r)}}function sS(t,e,r,n){const s={url:t,type:"fetch","http.method":r,[Te]:n,[St]:"http.client"};return e&&(Of(e)||(s["http.url"]=e.href,s["server.address"]=e.host),e.search&&(s["http.query"]=e.search),e.hash&&(s["http.fragment"]=e.hash)),s}function Uf(t){if(t!==void 0)return t>=400&&t<500?"warning":t>=500?"error":void 0}const Fn=ae;function iS(){return"history"in Fn&&!!Fn.history}function oS(){if(!("fetch"in Fn))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch{return!1}}function ea(t){return t&&/^function\s+\w+\(\)\s+\{\s+\[native code\]\s+\}$/.test(t.toString())}function aS(){var r;if(typeof EdgeRuntime=="string")return!0;if(!oS())return!1;if(ea(Fn.fetch))return!0;let t=!1;const e=Fn.document;if(e&&typeof e.createElement=="function")try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n),(r=n.contentWindow)!=null&&r.fetch&&(t=ea(n.contentWindow.fetch)),e.head.removeChild(n)}catch(n){z&&B.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return t}function Bf(t,e){const r="fetch";Wt(r,t),Gt(r,()=>Vf(void 0,e))}function cS(t){const e="fetch-body-resolved";Wt(e,t),Gt(e,()=>Vf(uS))}function Vf(t,e=!1){e&&!aS()||He(ae,"fetch",function(r){return function(...n){const s=new Error,{method:i,url:o}=dS(n),a={args:n,fetchData:{method:i,url:o},startTimestamp:Re()*1e3,virtualError:s,headers:hS(n)};return t||Ye("fetch",{...a}),r.apply(ae,n).then(async c=>(t?t(c):Ye("fetch",{...a,endTimestamp:Re()*1e3,response:c}),c),c=>{if(Ye("fetch",{...a,endTimestamp:Re()*1e3,error:c}),Ka(c)&&c.stack===void 0&&(c.stack=s.stack,ze(c,"framesToPop",1)),c instanceof TypeError&&(c.message==="Failed to fetch"||c.message==="Load failed"||c.message==="NetworkError when attempting to fetch resource."))try{const l=new URL(a.fetchData.url);c.message=`${c.message} (${l.host})`}catch{}throw c})}})}async function lS(t,e){if(t!=null&&t.body){const r=t.body,n=r.getReader(),s=setTimeout(()=>{r.cancel().then(null,()=>{})},90*1e3);let i=!0;for(;i;){let o;try{o=setTimeout(()=>{r.cancel().then(null,()=>{})},5e3);const{done:a}=await n.read();clearTimeout(o),a&&(e(),i=!1)}catch{i=!1}finally{clearTimeout(o)}}clearTimeout(s),n.releaseLock(),r.cancel().then(null,()=>{})}}function uS(t){let e;try{e=t.clone()}catch{return}lS(e,()=>{Ye("fetch-body-resolved",{endTimestamp:Re()*1e3,response:t})})}function ta(t,e){return!!t&&typeof t=="object"&&!!t[e]}function wu(t){return typeof t=="string"?t:t?ta(t,"url")?t.url:t.toString?t.toString():"":""}function dS(t){if(t.length===0)return{method:"GET",url:""};if(t.length===2){const[r,n]=t;return{url:wu(r),method:ta(n,"method")?String(n.method).toUpperCase():"GET"}}const e=t[0];return{url:wu(e),method:ta(e,"method")?String(e.method).toUpperCase():"GET"}}function hS(t){const[e,r]=t;try{if(typeof r=="object"&&r!==null&&"headers"in r&&r.headers)return new Headers(r.headers);if(Wh(e))return new Headers(e.headers)}catch{}}function fS(){return"npm"}const ne=ae;let ra=0;function qf(){return ra>0}function pS(){ra++,setTimeout(()=>{ra--})}function Xr(t,e={}){function r(s){return typeof s=="function"}if(!r(t))return t;try{const s=t.__sentry_wrapped__;if(s)return typeof s=="function"?s:t;if(Ya(t))return t}catch{return t}const n=function(...s){try{const i=s.map(o=>Xr(o,e));return t.apply(this,i)}catch(i){throw pS(),xi(o=>{o.addEventProcessor(a=>(e.mechanism&&(Ho(a,void 0),zr(a,e.mechanism)),a.extra={...a.extra,arguments:s},a)),Sf(i)}),i}};try{for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(n[s]=t[s])}catch{}Kh(n,t),ze(t,"__sentry_wrapped__",n);try{Object.getOwnPropertyDescriptor(n,"name").configurable&&Object.defineProperty(n,"name",{get(){return t.name}})}catch{}return n}function ic(){const t=Jn(),{referrer:e}=ne.document||{},{userAgent:r}=ne.navigator||{},n={...e&&{Referer:e},...r&&{"User-Agent":r}};return{url:t,headers:n}}function oc(t,e){const r=ac(t,e),n={type:wS(e),value:bS(e)};return r.length&&(n.stacktrace={frames:r}),n.type===void 0&&n.value===""&&(n.value="Unrecoverable error caught"),n}function mS(t,e,r,n){const s=ie(),i=s==null?void 0:s.getOptions().normalizeDepth,o=TS(e),a={__serialized__:gf(e,i)};if(o)return{exception:{values:[oc(t,o)]},extra:a};const c={exception:{values:[{type:_i(e)?e.constructor.name:n?"UnhandledRejection":"Error",value:SS(e,{isUnhandledRejection:n})}]},extra:a};if(r){const l=ac(t,r);l.length&&(c.exception.values[0].stacktrace={frames:l})}return c}function so(t,e){return{exception:{values:[oc(t,e)]}}}function ac(t,e){const r=e.stacktrace||e.stack||"",n=yS(e),s=vS(e);try{return t(r,n,s)}catch{}return[]}const gS=/Minified React error #\d+;/i;function yS(t){return t&&gS.test(t.message)?1:0}function vS(t){return typeof t.framesToPop=="number"?t.framesToPop:0}function Hf(t){return typeof WebAssembly<"u"&&typeof WebAssembly.Exception<"u"?t instanceof WebAssembly.Exception:!1}function wS(t){const e=t==null?void 0:t.name;return!e&&Hf(t)?t.message&&Array.isArray(t.message)&&t.message.length==2?t.message[0]:"WebAssembly.Exception":e}function bS(t){const e=t==null?void 0:t.message;return Hf(t)?Array.isArray(t.message)&&t.message.length==2?t.message[1]:"wasm exception":e?e.error&&typeof e.error.message=="string"?e.error.message:e:"No error message"}function _S(t,e,r,n){const s=(r==null?void 0:r.syntheticException)||void 0,i=cc(t,e,s,n);return zr(i),i.level="error",r!=null&&r.event_id&&(i.event_id=r.event_id),gr(i)}function xS(t,e,r="info",n,s){const i=(n==null?void 0:n.syntheticException)||void 0,o=na(t,e,i,s);return o.level=r,n!=null&&n.event_id&&(o.event_id=n.event_id),gr(o)}function cc(t,e,r,n,s){let i;if(Hh(e)&&e.error)return so(t,e.error);if(Ll(e)||Zw(e)){const o=e;if("stack"in e)i=so(t,e);else{const a=o.name||(Ll(o)?"DOMError":"DOMException"),c=o.message?`${a}: ${o.message}`:a;i=na(t,c,r,n),Ho(i,c)}return"code"in o&&(i.tags={...i.tags,"DOMException.code":`${o.code}`}),i}return Ka(e)?so(t,e):Ln(e)||_i(e)?(i=mS(t,e,r,s),zr(i,{synthetic:!0}),i):(i=na(t,e,r,n),Ho(i,`${e}`),zr(i,{synthetic:!0}),i)}function na(t,e,r,n){const s={};if(n&&r){const i=ac(t,r);i.length&&(s.exception={values:[{value:e,stacktrace:{frames:i}}]}),zr(s,{synthetic:!0})}if(Xa(e)){const{__sentry_template_string__:i,__sentry_template_values__:o}=e;return s.logentry={message:i,params:o},s}return s.message=e,s}function SS(t,{isUnhandledRejection:e}){const r=ib(t),n=e?"promise rejection":"exception";return Hh(t)?`Event \`ErrorEvent\` captured as ${n} with message \`${t.message}\``:_i(t)?`Event \`${ES(t)}\` (type=${t.type}) captured as ${n}`:`Object captured as ${n} with keys: ${r}`}function ES(t){try{const e=Object.getPrototypeOf(t);return e?e.constructor.name:void 0}catch{}}function TS(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e)){const r=t[e];if(r instanceof Error)return r}}const kS=5e3;class jS extends ox{constructor(e){var a;const r=AS(e),n=ne.SENTRY_SDK_SOURCE||fS();Lf(r,"browser",["browser"],n),(a=r._metadata)!=null&&a.sdk&&(r._metadata.sdk.settings={infer_ip:r.sendDefaultPii?"auto":"never",...r._metadata.sdk.settings}),super(r);const{sendDefaultPii:s,sendClientReports:i,enableLogs:o}=this._options;ne.document&&(i||o)&&ne.document.addEventListener("visibilitychange",()=>{ne.document.visibilityState==="hidden"&&(i&&this._flushOutcomes(),o&&no(this))}),o&&(this.on("flush",()=>{no(this)}),this.on("afterCaptureLog",()=>{this._logFlushIdleTimeout&&clearTimeout(this._logFlushIdleTimeout),this._logFlushIdleTimeout=setTimeout(()=>{no(this)},kS)})),s&&this.on("beforeSendSession",Tx)}eventFromException(e,r){return _S(this._options.stackParser,e,r,this._options.attachStacktrace)}eventFromMessage(e,r="info",n){return xS(this._options.stackParser,e,r,n,this._options.attachStacktrace)}_prepareEvent(e,r,n,s){return e.platform=e.platform||"javascript",super._prepareEvent(e,r,n,s)}}function AS(t){var e;return{release:typeof __SENTRY_RELEASE__=="string"?__SENTRY_RELEASE__:(e=ne.SENTRY_RELEASE)==null?void 0:e.id,sendClientReports:!0,parentSpanIsAlwaysRootSpan:!0,...t}}const Ei=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,Y=ae,PS=(t,e)=>t>e[1]?"poor":t>e[0]?"needs-improvement":"good",rs=(t,e,r,n)=>{let s,i;return o=>{e.value>=0&&(o||n)&&(i=e.value-(s??0),(i||s===void 0)&&(s=e.value,e.delta=i,e.rating=PS(e.value,r),t(e)))}},CS=()=>`v5-${Date.now()}-${Math.floor(Math.random()*(9e12-1))+1e12}`,ns=(t=!0)=>{var r,n;const e=(n=(r=Y.performance)==null?void 0:r.getEntriesByType)==null?void 0:n.call(r,"navigation")[0];if(!t||e&&e.responseStart>0&&e.responseStart<performance.now())return e},an=()=>{const t=ns();return(t==null?void 0:t.activationStart)??0},ss=(t,e=-1)=>{var i,o;const r=ns();let n="navigate";return r&&((i=Y.document)!=null&&i.prerendering||an()>0?n="prerender":(o=Y.document)!=null&&o.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:CS(),navigationType:n}},io=new WeakMap;function lc(t,e){return io.get(t)||io.set(t,new e),io.get(t)}class oi{constructor(){oi.prototype.__init.call(this),oi.prototype.__init2.call(this)}__init(){this._sessionValue=0}__init2(){this._sessionEntries=[]}_processEntry(e){var s;if(e.hadRecentInput)return;const r=this._sessionEntries[0],n=this._sessionEntries[this._sessionEntries.length-1];this._sessionValue&&r&&n&&e.startTime-n.startTime<1e3&&e.startTime-r.startTime<5e3?(this._sessionValue+=e.value,this._sessionEntries.push(e)):(this._sessionValue=e.value,this._sessionEntries=[e]),(s=this._onAfterProcessingUnexpectedShift)==null||s.call(this,e)}}const cn=(t,e,r={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const n=new PerformanceObserver(s=>{Promise.resolve().then(()=>{e(s.getEntries())})});return n.observe({type:t,buffered:!0,...r}),n}}catch{}},uc=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let Sn=-1;const RS=()=>{var t,e;return((t=Y.document)==null?void 0:t.visibilityState)==="hidden"&&!((e=Y.document)!=null&&e.prerendering)?0:1/0},ai=t=>{Y.document.visibilityState==="hidden"&&Sn>-1&&(Sn=t.type==="visibilitychange"?t.timeStamp:0,NS())},IS=()=>{addEventListener("visibilitychange",ai,!0),addEventListener("prerenderingchange",ai,!0)},NS=()=>{removeEventListener("visibilitychange",ai,!0),removeEventListener("prerenderingchange",ai,!0)},dc=()=>{var t;if(Y.document&&Sn<0){const e=an();Sn=(Y.document.prerendering||(t=globalThis.performance.getEntriesByType("visibility-state").filter(n=>n.name==="hidden"&&n.startTime>e)[0])==null?void 0:t.startTime)??RS(),IS()}return{get firstHiddenTime(){return Sn}}},Ti=t=>{var e;(e=Y.document)!=null&&e.prerendering?addEventListener("prerenderingchange",()=>t(),!0):t()},OS=[1800,3e3],DS=(t,e={})=>{Ti(()=>{const r=dc(),n=ss("FCP");let s;const o=cn("paint",a=>{for(const c of a)c.name==="first-contentful-paint"&&(o.disconnect(),c.startTime<r.firstHiddenTime&&(n.value=Math.max(c.startTime-an(),0),n.entries.push(c),s(!0)))});o&&(s=rs(t,n,OS,e.reportAllChanges))})},LS=[.1,.25],MS=(t,e={})=>{DS(uc(()=>{var a,c;const r=ss("CLS",0);let n;const s=lc(e,oi),i=l=>{for(const u of l)s._processEntry(u);s._sessionValue>r.value&&(r.value=s._sessionValue,r.entries=s._sessionEntries,n())},o=cn("layout-shift",i);o&&(n=rs(t,r,LS,e.reportAllChanges),(a=Y.document)==null||a.addEventListener("visibilitychange",()=>{var l;((l=Y.document)==null?void 0:l.visibilityState)==="hidden"&&(i(o.takeRecords()),n(!0))}),(c=Y==null?void 0:Y.setTimeout)==null||c.call(Y,n))}))};let zf=0,oo=1/0,Ss=0;const FS=t=>{t.forEach(e=>{e.interactionId&&(oo=Math.min(oo,e.interactionId),Ss=Math.max(Ss,e.interactionId),zf=Ss?(Ss-oo)/7+1:0)})};let sa;const Wf=()=>sa?zf:performance.interactionCount||0,$S=()=>{"interactionCount"in performance||sa||(sa=cn("event",FS,{type:"event",buffered:!0,durationThreshold:0}))},ao=10;let Gf=0;const US=()=>Wf()-Gf;class ci{constructor(){ci.prototype.__init.call(this),ci.prototype.__init2.call(this)}__init(){this._longestInteractionList=[]}__init2(){this._longestInteractionMap=new Map}_resetInteractions(){Gf=Wf(),this._longestInteractionList.length=0,this._longestInteractionMap.clear()}_estimateP98LongestInteraction(){const e=Math.min(this._longestInteractionList.length-1,Math.floor(US()/50));return this._longestInteractionList[e]}_processEntry(e){var s,i;if((s=this._onBeforeProcessingEntry)==null||s.call(this,e),!(e.interactionId||e.entryType==="first-input"))return;const r=this._longestInteractionList.at(-1);let n=this._longestInteractionMap.get(e.interactionId);if(n||this._longestInteractionList.length<ao||e.duration>r._latency){if(n?e.duration>n._latency?(n.entries=[e],n._latency=e.duration):e.duration===n._latency&&e.startTime===n.entries[0].startTime&&n.entries.push(e):(n={id:e.interactionId,entries:[e],_latency:e.duration},this._longestInteractionMap.set(n.id,n),this._longestInteractionList.push(n)),this._longestInteractionList.sort((o,a)=>a._latency-o._latency),this._longestInteractionList.length>ao){const o=this._longestInteractionList.splice(ao);for(const a of o)this._longestInteractionMap.delete(a.id)}(i=this._onAfterProcessingINPCandidate)==null||i.call(this,n)}}}const hc=t=>{const e=r=>{var n;(r.type==="pagehide"||((n=Y.document)==null?void 0:n.visibilityState)==="hidden")&&t(r)};Y.document&&(addEventListener("visibilitychange",e,!0),addEventListener("pagehide",e,!0))},Kf=t=>{var r;const e=Y.requestIdleCallback||Y.setTimeout;((r=Y.document)==null?void 0:r.visibilityState)==="hidden"?t():(t=uc(t),e(t),hc(t))},BS=[200,500],VS=40,qS=(t,e={})=>{globalThis.PerformanceEventTiming&&"interactionId"in PerformanceEventTiming.prototype&&Ti(()=>{$S();const r=ss("INP");let n;const s=lc(e,ci),i=a=>{Kf(()=>{for(const l of a)s._processEntry(l);const c=s._estimateP98LongestInteraction();c&&c._latency!==r.value&&(r.value=c._latency,r.entries=c.entries,n())})},o=cn("event",i,{durationThreshold:e.durationThreshold??VS});n=rs(t,r,BS,e.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),hc(()=>{i(o.takeRecords()),n(!0)}))})};class HS{_processEntry(e){var r;(r=this._onBeforeProcessingEntry)==null||r.call(this,e)}}const zS=[2500,4e3],WS=(t,e={})=>{Ti(()=>{const r=dc(),n=ss("LCP");let s;const i=lc(e,HS),o=c=>{e.reportAllChanges||(c=c.slice(-1));for(const l of c)i._processEntry(l),l.startTime<r.firstHiddenTime&&(n.value=Math.max(l.startTime-an(),0),n.entries=[l],s())},a=cn("largest-contentful-paint",o);if(a){s=rs(t,n,zS,e.reportAllChanges);const c=uc(()=>{o(a.takeRecords()),a.disconnect(),s(!0)});for(const l of["keydown","click","visibilitychange"])Y.document&&addEventListener(l,()=>Kf(c),{capture:!0,once:!0})}})},GS=[800,1800],ia=t=>{var e,r;(e=Y.document)!=null&&e.prerendering?Ti(()=>ia(t)):((r=Y.document)==null?void 0:r.readyState)!=="complete"?addEventListener("load",()=>ia(t),!0):setTimeout(t)},KS=(t,e={})=>{const r=ss("TTFB"),n=rs(t,r,GS,e.reportAllChanges);ia(()=>{const s=ns();s&&(r.value=Math.max(s.responseStart-an(),0),r.entries=[s],n(!0))})},En={},li={};let Xf,Jf,Yf,Qf;function Zf(t,e=!1){return ki("cls",t,YS,Xf,e)}function ep(t,e=!1){return ki("lcp",t,QS,Jf,e)}function XS(t){return ki("ttfb",t,ZS,Yf)}function JS(t){return ki("inp",t,eE,Qf)}function Jr(t,e){return tp(t,e),li[t]||(tE(t),li[t]=!0),rp(t,e)}function is(t,e){const r=En[t];if(r!=null&&r.length)for(const n of r)try{n(e)}catch(s){Ei&&B.error(`Error while triggering instrumentation handler.
Type: ${t}
Name: ${_t(n)}
Error:`,s)}}function YS(){return MS(t=>{is("cls",{metric:t}),Xf=t},{reportAllChanges:!0})}function QS(){return WS(t=>{is("lcp",{metric:t}),Jf=t},{reportAllChanges:!0})}function ZS(){return KS(t=>{is("ttfb",{metric:t}),Yf=t})}function eE(){return qS(t=>{is("inp",{metric:t}),Qf=t})}function ki(t,e,r,n,s=!1){tp(t,e);let i;return li[t]||(i=r(),li[t]=!0),n&&e({metric:n}),rp(t,e,s?i:void 0)}function tE(t){const e={};t==="event"&&(e.durationThreshold=0),cn(t,r=>{is(t,{entries:r})},e)}function tp(t,e){En[t]=En[t]||[],En[t].push(e)}function rp(t,e,r){return()=>{r&&r();const n=En[t];if(!n)return;const s=n.indexOf(e);s!==-1&&n.splice(s,1)}}function rE(t){return"duration"in t}function co(t){return typeof t=="number"&&isFinite(t)}function Vt(t,e,r,{...n}){const s=oe(t).start_timestamp;return s&&s>e&&typeof t.updateStartTime=="function"&&t.updateStartTime(e),nc(t,()=>{const i=on({startTime:e,...n});return i&&i.end(r),i})}function fc(t){var x;const e=ie();if(!e)return;const{name:r,transaction:n,attributes:s,startTime:i}=t,{release:o,environment:a,sendDefaultPii:c}=e.getOptions(),l=e.getIntegrationByName("Replay"),u=l==null?void 0:l.getReplayId(),h=ce(),f=h.getUser(),p=f!==void 0?f.email||f.id||f.ip_address:void 0;let m;try{m=h.getScopeData().contexts.profile.profile_id}catch{}const y={release:o,environment:a,user:p||void 0,profile_id:m||void 0,replay_id:u||void 0,transaction:n,"user_agent.original":(x=Y.navigator)==null?void 0:x.userAgent,"client.address":c?"{{auto}}":void 0,...s};return on({name:r,attributes:y,startTime:i,experimental:{standalone:!0}})}function ji(){return Y.addEventListener&&Y.performance}function ye(t){return t/1e3}function np(t){let e="unknown",r="unknown",n="";for(const s of t){if(s==="/"){[e,r]=t.split("/");break}if(!isNaN(Number(s))){e=n==="h"?"http":n,r=t.split(n)[1];break}n+=s}return n===t&&(e=n),{name:e,version:r}}function sp(t){try{return PerformanceObserver.supportedEntryTypes.includes(t)}catch{return!1}}function ip(t,e){let r,n=!1;function s(a){!n&&r&&e(a,r),n=!0}hc(()=>{s("pagehide")});const i=t.on("beforeStartNavigationSpan",(a,c)=>{c!=null&&c.isRedirect||(s("navigation"),bu(i,o))}),o=t.on("afterStartPageLoadSpan",a=>{r=a.spanContext().spanId,bu(o)})}function bu(...t){t.forEach(e=>e&&setTimeout(e,0))}function nE(t){let e=0,r;if(!sp("layout-shift"))return;const n=Zf(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(e=s.value,r=i)},!0);ip(t,(s,i)=>{sE(e,r,i,s),n()})}function sE(t,e,r,n){var l;Ei&&B.log(`Sending CLS span (${t})`);const s=ye((We()||0)+((e==null?void 0:e.startTime)||0)),i=ce().getScopeData().transactionName,o=e?ft((l=e.sources[0])==null?void 0:l.node):"Layout shift",a={[Te]:"auto.http.browser.cls",[St]:"ui.webvital.cls",[nn]:(e==null?void 0:e.duration)||0,"sentry.pageload.span_id":r,"sentry.report_event":n};e!=null&&e.sources&&e.sources.forEach((u,h)=>{a[`cls.source.${h+1}`]=ft(u.node)});const c=fc({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("cls",{[Zn]:"",[es]:t}),c.end(s))}function iE(t){let e=0,r;if(!sp("largest-contentful-paint"))return;const n=ep(({metric:s})=>{const i=s.entries[s.entries.length-1];i&&(e=s.value,r=i)},!0);ip(t,(s,i)=>{oE(e,r,i,s),n()})}function oE(t,e,r,n){Ei&&B.log(`Sending LCP span (${t})`);const s=ye((We()||0)+((e==null?void 0:e.startTime)||0)),i=ce().getScopeData().transactionName,o=e?ft(e.element):"Largest contentful paint",a={[Te]:"auto.http.browser.lcp",[St]:"ui.webvital.lcp",[nn]:0,"sentry.pageload.span_id":r,"sentry.report_event":n};e&&(e.element&&(a["lcp.element"]=ft(e.element)),e.id&&(a["lcp.id"]=e.id),e.url&&(a["lcp.url"]=e.url.trim().slice(0,200)),e.loadTime!=null&&(a["lcp.loadTime"]=e.loadTime),e.renderTime!=null&&(a["lcp.renderTime"]=e.renderTime),e.size!=null&&(a["lcp.size"]=e.size));const c=fc({name:o,transaction:i,attributes:a,startTime:s});c&&(c.addEvent("lcp",{[Zn]:"millisecond",[es]:t}),c.end(s))}const aE=2147483647;let _u=0,ot={},Ue,Lr;function cE({recordClsStandaloneSpans:t,recordLcpStandaloneSpans:e,client:r}){const n=ji();if(n&&We()){n.mark&&Y.performance.mark("sentry-tracing-init");const s=e?iE(r):fE(),i=pE(),o=t?nE(r):hE();return()=>{s==null||s(),i(),o==null||o()}}return()=>{}}function lE(){Jr("longtask",({entries:t})=>{const e=Ge();if(!e)return;const{op:r,start_timestamp:n}=oe(e);for(const s of t){const i=ye(We()+s.startTime),o=ye(s.duration);r==="navigation"&&n&&i<n||Vt(e,i,i+o,{name:"Main UI thread blocked",op:"ui.long-task",attributes:{[Te]:"auto.ui.browser.metrics"}})}})}function uE(){new PerformanceObserver(e=>{const r=Ge();if(r)for(const n of e.getEntries()){if(!n.scripts[0])continue;const s=ye(We()+n.startTime),{start_timestamp:i,op:o}=oe(r);if(o==="navigation"&&i&&s<i)continue;const a=ye(n.duration),c={[Te]:"auto.ui.browser.metrics"},l=n.scripts[0],{invoker:u,invokerType:h,sourceURL:f,sourceFunctionName:p,sourceCharPosition:m}=l;c["browser.script.invoker"]=u,c["browser.script.invoker_type"]=h,f&&(c["code.filepath"]=f),p&&(c["code.function"]=p),m!==-1&&(c["browser.script.source_char_position"]=m),Vt(r,s,s+a,{name:"Main UI thread blocked",op:"ui.long-animation-frame",attributes:c})}}).observe({type:"long-animation-frame",buffered:!0})}function dE(){Jr("event",({entries:t})=>{const e=Ge();if(e){for(const r of t)if(r.name==="click"){const n=ye(We()+r.startTime),s=ye(r.duration),i={name:ft(r.target),op:`ui.interaction.${r.name}`,startTime:n,attributes:{[Te]:"auto.ui.browser.metrics"}},o=Gh(r.target);o&&(i.attributes["ui.component_name"]=o),Vt(e,n,n+s,i)}}})}function hE(){return Zf(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(ot.cls={value:t.value,unit:""},Lr=e)},!0)}function fE(){return ep(({metric:t})=>{const e=t.entries[t.entries.length-1];e&&(ot.lcp={value:t.value,unit:"millisecond"},Ue=e)},!0)}function pE(){return XS(({metric:t})=>{t.entries[t.entries.length-1]&&(ot.ttfb={value:t.value,unit:"millisecond"})})}function mE(t,e){const r=ji(),n=We();if(!(r!=null&&r.getEntries)||!n)return;const s=ye(n),i=r.getEntries(),{op:o,start_timestamp:a}=oe(t);i.slice(_u).forEach(c=>{const l=ye(c.startTime),u=ye(Math.max(0,c.duration));if(!(o==="navigation"&&a&&s+l<a))switch(c.entryType){case"navigation":{vE(t,c,s);break}case"mark":case"paint":case"measure":{gE(t,c,l,u,s,e.ignorePerformanceApiSpans);const h=dc(),f=c.startTime<h.firstHiddenTime;c.name==="first-paint"&&f&&(ot.fp={value:c.startTime,unit:"millisecond"}),c.name==="first-contentful-paint"&&f&&(ot.fcp={value:c.startTime,unit:"millisecond"});break}case"resource":{_E(t,c,c.name,l,u,s,e.ignoreResourceSpans);break}}}),_u=Math.max(i.length-1,0),xE(t),o==="pageload"&&(EE(ot),e.recordClsOnPageloadSpan||delete ot.cls,e.recordLcpOnPageloadSpan||delete ot.lcp,Object.entries(ot).forEach(([c,l])=>{p_(c,l.value,l.unit)}),t.setAttribute("performance.timeOrigin",s),t.setAttribute("performance.activationStart",an()),SE(t,e)),Ue=void 0,Lr=void 0,ot={}}function gE(t,e,r,n,s,i){if(["mark","measure"].includes(e.entryType)&&Dt(e.name,i))return;const o=ns(!1),a=ye(o?o.requestStart:0),c=s+Math.max(r,a),l=s+r,u=l+n,h={[Te]:"auto.resource.browser.metrics"};c!==l&&(h["sentry.browser.measure_happened_before_request"]=!0,h["sentry.browser.measure_start_time"]=c),yE(h,e),c<=u&&Vt(t,c,u,{name:e.name,op:e.entryType,attributes:h})}function yE(t,e){try{const r=e.detail;if(!r)return;if(typeof r=="object"){for(const[n,s]of Object.entries(r))if(s&&Dn(s))t[`sentry.browser.measure.detail.${n}`]=s;else if(s!==void 0)try{t[`sentry.browser.measure.detail.${n}`]=JSON.stringify(s)}catch{}return}if(Dn(r)){t["sentry.browser.measure.detail"]=r;return}try{t["sentry.browser.measure.detail"]=JSON.stringify(r)}catch{}}catch{}}function vE(t,e,r){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(n=>{Es(t,e,n,r)}),Es(t,e,"secureConnection",r,"TLS/SSL"),Es(t,e,"fetch",r,"cache"),Es(t,e,"domainLookup",r,"DNS"),bE(t,e,r)}function Es(t,e,r,n,s=r){const i=wE(r),o=e[i],a=e[`${r}Start`];!a||!o||Vt(t,n+ye(a),n+ye(o),{op:`browser.${s}`,name:e.name,attributes:{[Te]:"auto.ui.browser.metrics",...r==="redirect"&&e.redirectCount!=null?{"http.redirect_count":e.redirectCount}:{}}})}function wE(t){return t==="secureConnection"?"connectEnd":t==="fetch"?"domainLookupStart":`${t}End`}function bE(t,e,r){const n=r+ye(e.requestStart),s=r+ye(e.responseEnd),i=r+ye(e.responseStart);e.responseEnd&&(Vt(t,n,s,{op:"browser.request",name:e.name,attributes:{[Te]:"auto.ui.browser.metrics"}}),Vt(t,i,s,{op:"browser.response",name:e.name,attributes:{[Te]:"auto.ui.browser.metrics"}}))}function _E(t,e,r,n,s,i,o){if(e.initiatorType==="xmlhttprequest"||e.initiatorType==="fetch")return;const a=e.initiatorType?`resource.${e.initiatorType}`:"resource.other";if(o!=null&&o.includes(a))return;const c=hr(r),l={[Te]:"auto.resource.browser.metrics"};lo(l,e,"transferSize","http.response_transfer_size"),lo(l,e,"encodedBodySize","http.response_content_length"),lo(l,e,"decodedBodySize","http.decoded_response_content_length");const u=e.deliveryType;u!=null&&(l["http.response_delivery_type"]=u);const h=e.renderBlockingStatus;if(h&&(l["resource.render_blocking_status"]=h),c.protocol&&(l["url.scheme"]=c.protocol.split(":").pop()),c.host&&(l["server.address"]=c.host),l["url.same_origin"]=r.includes(Y.location.origin),e.nextHopProtocol!=null){const{name:m,version:y}=np(e.nextHopProtocol);l["network.protocol.name"]=m,l["network.protocol.version"]=y}const f=i+n,p=f+s;Vt(t,f,p,{name:r.replace(Y.location.origin,""),op:a,attributes:l})}function xE(t){const e=Y.navigator;if(!e)return;const r=e.connection;r&&(r.effectiveType&&t.setAttribute("effectiveConnectionType",r.effectiveType),r.type&&t.setAttribute("connectionType",r.type),co(r.rtt)&&(ot["connection.rtt"]={value:r.rtt,unit:"millisecond"})),co(e.deviceMemory)&&t.setAttribute("deviceMemory",`${e.deviceMemory} GB`),co(e.hardwareConcurrency)&&t.setAttribute("hardwareConcurrency",String(e.hardwareConcurrency))}function SE(t,e){Ue&&e.recordLcpOnPageloadSpan&&(Ue.element&&t.setAttribute("lcp.element",ft(Ue.element)),Ue.id&&t.setAttribute("lcp.id",Ue.id),Ue.url&&t.setAttribute("lcp.url",Ue.url.trim().slice(0,200)),Ue.loadTime!=null&&t.setAttribute("lcp.loadTime",Ue.loadTime),Ue.renderTime!=null&&t.setAttribute("lcp.renderTime",Ue.renderTime),t.setAttribute("lcp.size",Ue.size)),Lr!=null&&Lr.sources&&e.recordClsOnPageloadSpan&&Lr.sources.forEach((r,n)=>t.setAttribute(`cls.source.${n+1}`,ft(r.node)))}function lo(t,e,r,n){const s=e[r];s!=null&&s<aE&&(t[n]=s)}function EE(t){const e=ns(!1);if(!e)return;const{responseStart:r,requestStart:n}=e;n<=r&&(t["ttfb.requestTime"]={value:r-n,unit:"millisecond"})}function TE(){return ji()&&We()?Jr("element",kE):()=>{}}const kE=({entries:t})=>{const e=Ge(),r=e?Fe(e):void 0,n=r?oe(r).description:ce().getScopeData().transactionName;t.forEach(s=>{var p,m;const i=s;if(!i.identifier)return;const o=i.name,a=i.renderTime,c=i.loadTime,[l,u]=c?[ye(c),"load-time"]:a?[ye(a),"render-time"]:[Re(),"entry-emission"],h=o==="image-paint"?ye(Math.max(0,(a??0)-(c??0))):0,f={[Te]:"auto.ui.browser.elementtiming",[St]:"ui.elementtiming",[lt]:"component","sentry.span_start_time_source":u,"sentry.transaction_name":n,"element.id":i.id,"element.type":((m=(p=i.element)==null?void 0:p.tagName)==null?void 0:m.toLowerCase())||"unknown","element.size":i.naturalWidth&&i.naturalHeight?`${i.naturalWidth}x${i.naturalHeight}`:void 0,"element.render_time":a,"element.load_time":c,"element.url":i.url||void 0,"element.identifier":i.identifier,"element.paint_type":o};b_({name:`element[${i.identifier}]`,attributes:f,startTime:l,onlyIfParent:!0},y=>{y.end(l+h)})})},jE=1e3;let xu,oa,aa;function AE(t){Wt("dom",t),Gt("dom",PE)}function PE(){if(!Y.document)return;const t=Ye.bind(null,"dom"),e=Su(t,!0);Y.document.addEventListener("click",e,!1),Y.document.addEventListener("keypress",e,!1),["EventTarget","Node"].forEach(r=>{var i,o;const s=(i=Y[r])==null?void 0:i.prototype;(o=s==null?void 0:s.hasOwnProperty)!=null&&o.call(s,"addEventListener")&&(He(s,"addEventListener",function(a){return function(c,l,u){if(c==="click"||c=="keypress")try{const h=this.__sentry_instrumentation_handlers__=this.__sentry_instrumentation_handlers__||{},f=h[c]=h[c]||{refCount:0};if(!f.handler){const p=Su(t);f.handler=p,a.call(this,c,p,u)}f.refCount++}catch{}return a.call(this,c,l,u)}}),He(s,"removeEventListener",function(a){return function(c,l,u){if(c==="click"||c=="keypress")try{const h=this.__sentry_instrumentation_handlers__||{},f=h[c];f&&(f.refCount--,f.refCount<=0&&(a.call(this,c,f.handler,u),f.handler=void 0,delete h[c]),Object.keys(h).length===0&&delete this.__sentry_instrumentation_handlers__)}catch{}return a.call(this,c,l,u)}}))})}function CE(t){if(t.type!==oa)return!1;try{if(!t.target||t.target._sentryId!==aa)return!1}catch{}return!0}function RE(t,e){return t!=="keypress"?!1:e!=null&&e.tagName?!(e.tagName==="INPUT"||e.tagName==="TEXTAREA"||e.isContentEditable):!0}function Su(t,e=!1){return r=>{if(!r||r._sentryCaptured)return;const n=IE(r);if(RE(r.type,n))return;ze(r,"_sentryCaptured",!0),n&&!n._sentryId&&ze(n,"_sentryId",Qe());const s=r.type==="keypress"?"input":r.type;CE(r)||(t({event:r,name:s,global:e}),oa=r.type,aa=n?n._sentryId:void 0),clearTimeout(xu),xu=Y.setTimeout(()=>{aa=void 0,oa=void 0},jE)}}function IE(t){try{return t.target}catch{return null}}let Ts;function pc(t){const e="history";Wt(e,t),Gt(e,NE)}function NE(){if(Y.addEventListener("popstate",()=>{const e=Y.location.href,r=Ts;if(Ts=e,r===e)return;Ye("history",{from:r,to:e})}),!iS())return;function t(e){return function(...r){const n=r.length>2?r[2]:void 0;if(n){const s=Ts,i=OE(String(n));if(Ts=i,s===i)return e.apply(this,r);Ye("history",{from:s,to:i})}return e.apply(this,r)}}He(Y.history,"pushState",t),He(Y.history,"replaceState",t)}function OE(t){try{return new URL(t,Y.location.origin).toString()}catch{return t}}const Us={};function DE(t){const e=Us[t];if(e)return e;let r=Y[t];if(ea(r))return Us[t]=r.bind(Y);const n=Y.document;if(n&&typeof n.createElement=="function")try{const s=n.createElement("iframe");s.hidden=!0,n.head.appendChild(s);const i=s.contentWindow;i!=null&&i[t]&&(r=i[t]),n.head.removeChild(s)}catch(s){Ei&&B.warn(`Could not create sandbox iframe for ${t} check, bailing to window.${t}: `,s)}return r&&(Us[t]=r.bind(Y))}function Eu(t){Us[t]=void 0}const Mr="__sentry_xhr_v3__";function op(t){Wt("xhr",t),Gt("xhr",LE)}function LE(){if(!Y.XMLHttpRequest)return;const t=XMLHttpRequest.prototype;t.open=new Proxy(t.open,{apply(e,r,n){const s=new Error,i=Re()*1e3,o=wt(n[0])?n[0].toUpperCase():void 0,a=ME(n[1]);if(!o||!a)return e.apply(r,n);r[Mr]={method:o,url:a,request_headers:{}},o==="POST"&&a.match(/sentry_key/)&&(r.__sentry_own_request__=!0);const c=()=>{const l=r[Mr];if(l&&r.readyState===4){try{l.status_code=r.status}catch{}const u={endTimestamp:Re()*1e3,startTimestamp:i,xhr:r,virtualError:s};Ye("xhr",u)}};return"onreadystatechange"in r&&typeof r.onreadystatechange=="function"?r.onreadystatechange=new Proxy(r.onreadystatechange,{apply(l,u,h){return c(),l.apply(u,h)}}):r.addEventListener("readystatechange",c),r.setRequestHeader=new Proxy(r.setRequestHeader,{apply(l,u,h){const[f,p]=h,m=u[Mr];return m&&wt(f)&&wt(p)&&(m.request_headers[f.toLowerCase()]=p),l.apply(u,h)}}),e.apply(r,n)}}),t.send=new Proxy(t.send,{apply(e,r,n){const s=r[Mr];if(!s)return e.apply(r,n);n[0]!==void 0&&(s.body=n[0]);const i={startTimestamp:Re()*1e3,xhr:r};return Ye("xhr",i),e.apply(r,n)}})}function ME(t){if(wt(t))return t;try{return t.toString()}catch{}}const uo=[],Bs=new Map,FE=60;function $E(){if(ji()&&We()){const e=UE();return()=>{e()}}return()=>{}}const Tu={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function UE(){return JS(BE)}const BE=({metric:t})=>{if(t.value==null)return;const e=ye(t.value);if(e>FE)return;const r=t.entries.find(m=>m.duration===t.value&&Tu[m.name]);if(!r)return;const{interactionId:n}=r,s=Tu[r.name],i=ye(We()+r.startTime),o=Ge(),a=o?Fe(o):void 0,l=(n!=null?Bs.get(n):void 0)||a,u=l?oe(l).description:ce().getScopeData().transactionName,h=ft(r.target),f={[Te]:"auto.http.browser.inp",[St]:`ui.interaction.${s}`,[nn]:r.duration},p=fc({name:h,transaction:u,attributes:f,startTime:i});p&&(p.addEvent("inp",{[Zn]:"millisecond",[es]:t.value}),p.end(i+e))};function VE(){const t=({entries:e})=>{const r=Ge(),n=r&&Fe(r);e.forEach(s=>{if(!rE(s)||!n)return;const i=s.interactionId;if(i!=null&&!Bs.has(i)){if(uo.length>10){const o=uo.shift();Bs.delete(o)}uo.push(i),Bs.set(i,n)}})};Jr("event",t),Jr("first-input",t)}function qE(t,e=DE("fetch")){let r=0,n=0;function s(i){const o=i.body.length;r+=o,n++;const a={body:i.body,method:"POST",referrerPolicy:"strict-origin",headers:t.headers,keepalive:r<=6e4&&n<15,...t.fetchOptions};if(!e)return Eu("fetch"),si("No fetch implementation available");try{return e(t.url,a).then(c=>(r-=o,n--,{statusCode:c.status,headers:{"x-sentry-rate-limits":c.headers.get("X-Sentry-Rate-Limits"),"retry-after":c.headers.get("Retry-After")}}))}catch(c){return Eu("fetch"),r-=o,n--,si(c)}}return _x(t,s)}const HE=30,zE=50;function ca(t,e,r,n){const s={filename:t,function:e==="<anonymous>"?mr:e,in_app:!0};return r!==void 0&&(s.lineno=r),n!==void 0&&(s.colno=n),s}const WE=/^\s*at (\S+?)(?::(\d+))(?::(\d+))\s*$/i,GE=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,KE=/\((\S*)(?::(\d+))(?::(\d+))\)/,XE=/at (.+?) ?\(data:(.+?),/,JE=t=>{const e=t.match(XE);if(e)return{filename:`<data:${e[2]}>`,function:e[1]};const r=WE.exec(t);if(r){const[,s,i,o]=r;return ca(s,mr,+i,+o)}const n=GE.exec(t);if(n){if(n[2]&&n[2].indexOf("eval")===0){const a=KE.exec(n[2]);a&&(n[2]=a[1],n[3]=a[2],n[4]=a[3])}const[i,o]=ap(n[1]||mr,n[2]);return ca(o,i,n[3]?+n[3]:void 0,n[4]?+n[4]:void 0)}},YE=[HE,JE],QE=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,ZE=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,eT=t=>{const e=QE.exec(t);if(e){if(e[3]&&e[3].indexOf(" > eval")>-1){const i=ZE.exec(e[3]);i&&(e[1]=e[1]||"eval",e[3]=i[1],e[4]=i[2],e[5]="")}let n=e[3],s=e[1]||mr;return[s,n]=ap(s,n),ca(n,s,e[4]?+e[4]:void 0,e[5]?+e[5]:void 0)}},tT=[zE,eT],rT=[YE,tT],nT=Uh(...rT),ap=(t,e)=>{const r=t.indexOf("safari-extension")!==-1,n=t.indexOf("safari-web-extension")!==-1;return r||n?[t.indexOf("@")!==-1?t.split("@")[0]:mr,r?`safari-extension:${e}`:`safari-web-extension:${e}`]:[t,e]},et=typeof __SENTRY_DEBUG__>"u"||__SENTRY_DEBUG__,ks=1024,sT="Breadcrumbs",iT=((t={})=>{const e={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...t};return{name:sT,setup(r){e.console&&Hx(lT(r)),e.dom&&AE(cT(r,e.dom)),e.xhr&&op(uT(r)),e.fetch&&Bf(dT(r)),e.history&&pc(hT(r)),e.sentry&&r.on("beforeSendEvent",aT(r))}}}),oT=iT;function aT(t){return function(r){ie()===t&&Bt({category:`sentry.${r.type==="transaction"?"transaction":"event"}`,event_id:r.event_id,level:r.level,message:nr(r)},{event:r})}}function cT(t,e){return function(n){if(ie()!==t)return;let s,i,o=typeof e=="object"?e.serializeAttribute:void 0,a=typeof e=="object"&&typeof e.maxStringLength=="number"?e.maxStringLength:void 0;a&&a>ks&&(et&&B.warn(`\`dom.maxStringLength\` cannot exceed ${ks}, but a value of ${a} was configured. Sentry will use ${ks} instead.`),a=ks),typeof o=="string"&&(o=[o]);try{const l=n.event,u=fT(l)?l.target:l;s=ft(u,{keyAttrs:o,maxStringLength:a}),i=Gh(u)}catch{s="<unknown>"}if(s.length===0)return;const c={category:`ui.${n.name}`,message:s};i&&(c.data={"ui.component_name":i}),Bt(c,{event:n.event,name:n.name,global:n.global})}}function lT(t){return function(r){if(ie()!==t)return;const n={category:"console",data:{arguments:r.args,logger:"console"},level:Wx(r.level),message:Ml(r.args," ")};if(r.level==="assert")if(r.args[0]===!1)n.message=`Assertion failed: ${Ml(r.args.slice(1)," ")||"console.assert"}`,n.data.arguments=r.args.slice(1);else return;Bt(n,{input:r.args,level:r.level})}}function uT(t){return function(r){if(ie()!==t)return;const{startTimestamp:n,endTimestamp:s}=r,i=r.xhr[Mr];if(!n||!s||!i)return;const{method:o,url:a,status_code:c,body:l}=i,u={method:o,url:a,status_code:c},h={xhr:r.xhr,input:l,startTimestamp:n,endTimestamp:s},f={category:"xhr",data:u,type:"http",level:Uf(c)};t.emit("beforeOutgoingRequestBreadcrumb",f,h),Bt(f,h)}}function dT(t){return function(r){if(ie()!==t)return;const{startTimestamp:n,endTimestamp:s}=r;if(s&&!(r.fetchData.url.match(/sentry_key/)&&r.fetchData.method==="POST"))if(r.fetchData.method,r.fetchData.url,r.error){const i=r.fetchData,o={data:r.error,input:r.args,startTimestamp:n,endTimestamp:s},a={category:"fetch",data:i,level:"error",type:"http"};t.emit("beforeOutgoingRequestBreadcrumb",a,o),Bt(a,o)}else{const i=r.response,o={...r.fetchData,status_code:i==null?void 0:i.status};r.fetchData.request_body_size,r.fetchData.response_body_size,i==null||i.status;const a={input:r.args,response:i,startTimestamp:n,endTimestamp:s},c={category:"fetch",data:o,type:"http",level:Uf(o.status_code)};t.emit("beforeOutgoingRequestBreadcrumb",c,a),Bt(c,a)}}}function hT(t){return function(r){if(ie()!==t)return;let n=r.from,s=r.to;const i=hr(ne.location.href);let o=n?hr(n):void 0;const a=hr(s);o!=null&&o.path||(o=i),i.protocol===a.protocol&&i.host===a.host&&(s=a.relative),i.protocol===o.protocol&&i.host===o.host&&(n=o.relative),Bt({category:"navigation",data:{from:n,to:s}})}}function fT(t){return!!t&&!!t.target}const pT=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],mT="BrowserApiErrors",gT=((t={})=>{const e={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,unregisterOriginalCallbacks:!1,...t};return{name:mT,setupOnce(){e.setTimeout&&He(ne,"setTimeout",ku),e.setInterval&&He(ne,"setInterval",ku),e.requestAnimationFrame&&He(ne,"requestAnimationFrame",vT),e.XMLHttpRequest&&"XMLHttpRequest"in ne&&He(XMLHttpRequest.prototype,"send",wT);const r=e.eventTarget;r&&(Array.isArray(r)?r:pT).forEach(s=>bT(s,e))}}}),yT=gT;function ku(t){return function(...e){const r=e[0];return e[0]=Xr(r,{mechanism:{handled:!1,type:`auto.browser.browserapierrors.${_t(t)}`}}),t.apply(this,e)}}function vT(t){return function(e){return t.apply(this,[Xr(e,{mechanism:{data:{handler:_t(t)},handled:!1,type:"auto.browser.browserapierrors.requestAnimationFrame"}})])}}function wT(t){return function(...e){const r=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(s=>{s in r&&typeof r[s]=="function"&&He(r,s,function(i){const o={mechanism:{data:{handler:_t(i)},handled:!1,type:`auto.browser.browserapierrors.xhr.${s}`}},a=Ya(i);return a&&(o.mechanism.data.handler=_t(a)),Xr(i,o)})}),t.apply(this,e)}}function bT(t,e){var s,i;const n=(s=ne[t])==null?void 0:s.prototype;(i=n==null?void 0:n.hasOwnProperty)!=null&&i.call(n,"addEventListener")&&(He(n,"addEventListener",function(o){return function(a,c,l){try{_T(c)&&(c.handleEvent=Xr(c.handleEvent,{mechanism:{data:{handler:_t(c),target:t},handled:!1,type:"auto.browser.browserapierrors.handleEvent"}}))}catch{}return e.unregisterOriginalCallbacks&&xT(this,a,c),o.apply(this,[a,Xr(c,{mechanism:{data:{handler:_t(c),target:t},handled:!1,type:"auto.browser.browserapierrors.addEventListener"}}),l])}}),He(n,"removeEventListener",function(o){return function(a,c,l){try{const u=c.__sentry_wrapped__;u&&o.call(this,a,u,l)}catch{}return o.call(this,a,c,l)}}))}function _T(t){return typeof t.handleEvent=="function"}function xT(t,e,r){t&&typeof t=="object"&&"removeEventListener"in t&&typeof t.removeEventListener=="function"&&t.removeEventListener(e,r)}const ST=()=>({name:"BrowserSession",setupOnce(){if(typeof ne.document>"u"){et&&B.warn("Using the `browserSessionIntegration` in non-browser environments is not supported.");return}iu({ignoreDuration:!0}),ou(),pc(({from:t,to:e})=>{t!==void 0&&t!==e&&(iu({ignoreDuration:!0}),ou())})}}),ET="GlobalHandlers",TT=((t={})=>{const e={onerror:!0,onunhandledrejection:!0,...t};return{name:ET,setupOnce(){Error.stackTraceLimit=50},setup(r){e.onerror&&(jT(r),ju("onerror")),e.onunhandledrejection&&(AT(r),ju("onunhandledrejection"))}}}),kT=TT;function jT(t){Bh(e=>{const{stackParser:r,attachStacktrace:n}=cp();if(ie()!==t||qf())return;const{msg:s,url:i,line:o,column:a,error:c}=e,l=RT(cc(r,c||s,void 0,n,!1),i,o,a);l.level="error",Ef(l,{originalException:c,mechanism:{handled:!1,type:"auto.browser.global_handlers.onerror"}})})}function AT(t){Vh(e=>{const{stackParser:r,attachStacktrace:n}=cp();if(ie()!==t||qf())return;const s=PT(e),i=Dn(s)?CT(s):cc(r,s,void 0,n,!0);i.level="error",Ef(i,{originalException:s,mechanism:{handled:!1,type:"auto.browser.global_handlers.onunhandledrejection"}})})}function PT(t){if(Dn(t))return t;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch{}return t}function CT(t){return{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(t)}`}]}}}function RT(t,e,r,n){const s=t.exception=t.exception||{},i=s.values=s.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],l=n,u=r,h=IT(e)??Jn();return c.length===0&&c.push({colno:l,filename:h,function:mr,in_app:!0,lineno:u}),t}function ju(t){et&&B.log(`Global Handler attached: ${t}`)}function cp(){const t=ie();return(t==null?void 0:t.getOptions())||{stackParser:()=>[],attachStacktrace:!1}}function IT(t){if(!(!wt(t)||t.length===0)){if(t.startsWith("data:")){const e=t.match(/^data:([^;]+)/),r=e?e[1]:"text/javascript",n=t.includes("base64,");return`<data:${r}${n?",base64":""}>`}return t.slice(0,1024)}}const NT=()=>({name:"HttpContext",preprocessEvent(t){var n;if(!ne.navigator&&!ne.location&&!ne.document)return;const e=ic(),r={...e.headers,...(n=t.request)==null?void 0:n.headers};t.request={...e,...t.request,headers:r}}}),OT="cause",DT=5,LT="LinkedErrors",MT=((t={})=>{const e=t.limit||DT,r=t.key||OT;return{name:LT,preprocessEvent(n,s,i){const o=i.getOptions();qx(oc,o.stackParser,r,e,n,s)}}}),FT=MT;function $T(){return UT()?(et&&en(()=>{console.error("[Sentry] You cannot use Sentry.init() in a browser extension, see: https://docs.sentry.io/platforms/javascript/best-practices/browser-extensions/")}),!0):!1}function UT(){var i;if(typeof ne.window>"u")return!1;const t=ne;if(t.nw)return!1;const e=t.chrome||t.browser;if(!((i=e==null?void 0:e.runtime)!=null&&i.id))return!1;const r=Jn(),n=["chrome-extension","moz-extension","ms-browser-extension","safari-web-extension"];return!(ne===ne.top&&n.some(o=>r.startsWith(`${o}://`)))}function BT(t){return[Dx(),Rx(),yT(),oT(),kT(),FT(),Xx(),NT(),ST()]}function VT(t={}){const e=!t.skipBrowserExtensionCheck&&$T(),r={...t,enabled:e?!1:t.enabled,stackParser:Xw(t.stackParser||nT),integrations:tx({integrations:t.integrations,defaultIntegrations:t.defaultIntegrations==null?BT():t.defaultIntegrations}),transport:t.transport||qE};return hx(jS,r)}function at(t=0){return((We()||performance.timeOrigin)+t)/1e3}function qT(t){const e=[];if(t.nextHopProtocol!=null){const{name:r,version:n}=np(t.nextHopProtocol);e.push(["network.protocol.version",n],["network.protocol.name",r])}return We()?[...e,["http.request.redirect_start",at(t.redirectStart)],["http.request.fetch_start",at(t.fetchStart)],["http.request.domain_lookup_start",at(t.domainLookupStart)],["http.request.domain_lookup_end",at(t.domainLookupEnd)],["http.request.connect_start",at(t.connectStart)],["http.request.secure_connection_start",at(t.secureConnectionStart)],["http.request.connection_end",at(t.connectEnd)],["http.request.request_start",at(t.requestStart)],["http.request.response_start",at(t.responseStart)],["http.request.response_end",at(t.responseEnd)]]:e}const Au=new WeakMap,ho=new Map,lp={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,trackFetchStreamPerformance:!1};function HT(t,e){const{traceFetch:r,traceXHR:n,trackFetchStreamPerformance:s,shouldCreateSpanForRequest:i,enableHTTPTimings:o,tracePropagationTargets:a,onRequestSpanStart:c}={...lp,...e},l=typeof i=="function"?i:p=>!0,u=p=>WT(p,a),h={},f=t.getOptions().propagateTraceparent;r&&(t.addEventProcessor(p=>(p.type==="transaction"&&p.spans&&p.spans.forEach(m=>{if(m.op==="http.client"){const y=ho.get(m.span_id);y&&(m.timestamp=y/1e3,ho.delete(m.span_id))}}),p)),s&&cS(p=>{if(p.response){const m=Au.get(p.response);m&&p.endTimestamp&&ho.set(m,p.endTimestamp)}}),Bf(p=>{const m=Zx(p,l,u,h,{propagateTraceparent:f});if(p.response&&p.fetchData.__span&&Au.set(p.response,p.fetchData.__span),m){const y=up(p.fetchData.url),x=y?hr(y).host:void 0;m.setAttributes({"http.url":y,"server.address":x}),o&&Pu(m),c==null||c(m,{headers:p.headers})}})),n&&op(p=>{var y;const m=GT(p,l,u,h,f);if(m){o&&Pu(m);let x;try{x=new Headers((y=p.xhr.__sentry_xhr_v3__)==null?void 0:y.request_headers)}catch{}c==null||c(m,{headers:x})}})}function zT(t){return t.entryType==="resource"&&"initiatorType"in t&&typeof t.nextHopProtocol=="string"&&(t.initiatorType==="fetch"||t.initiatorType==="xmlhttprequest")}function Pu(t){const{url:e}=oe(t).data;if(!e||typeof e!="string")return;const r=Jr("resource",({entries:n})=>{n.forEach(s=>{zT(s)&&s.name.endsWith(e)&&(qT(s).forEach(o=>t.setAttribute(...o)),setTimeout(r))})})}function WT(t,e){const r=Jn();if(r){let n,s;try{n=new URL(t,r),s=new URL(r).origin}catch{return!1}const i=n.origin===s;return e?Dt(n.toString(),e)||i&&Dt(n.pathname,e):i}else{const n=!!t.match(/^\/(?!\/)/);return e?Dt(t,e):n}}function GT(t,e,r,n,s){const i=t.xhr,o=i==null?void 0:i[Mr];if(!i||i.__sentry_own_request__||!o)return;const{url:a,method:c}=o,l=Mt()&&e(a);if(t.endTimestamp&&l){const x=i.__sentry_xhr_span_id__;if(!x)return;const S=n[x];S&&o.status_code!==void 0&&(ef(S,o.status_code),S.end(),delete n[x]);return}const u=up(a),h=hr(u||a),f=Ex(a),p=!!Ge(),m=l&&p?on({name:`${c} ${f}`,attributes:{url:a,type:"xhr","http.method":c,"http.url":u,"server.address":h==null?void 0:h.host,[Te]:"auto.http.browser",[St]:"http.client",...(h==null?void 0:h.search)&&{"http.query":h==null?void 0:h.search},...(h==null?void 0:h.hash)&&{"http.fragment":h==null?void 0:h.hash}}}):new $t;i.__sentry_xhr_span_id__=m.spanContext().spanId,n[i.__sentry_xhr_span_id__]=m,r(a)&&KT(i,Mt()&&p?m:void 0,s);const y=ie();return y&&y.emit("beforeOutgoingRequestSpan",m,t),m}function KT(t,e,r){const{"sentry-trace":n,baggage:s,traceparent:i}=Mf({span:e,propagateTraceparent:r});n&&XT(t,n,s,i)}function XT(t,e,r,n){var i;const s=(i=t.__sentry_xhr_v3__)==null?void 0:i.request_headers;if(!(s!=null&&s["sentry-trace"]||!t.setRequestHeader))try{if(t.setRequestHeader("sentry-trace",e),n&&!(s!=null&&s.traceparent)&&t.setRequestHeader("traceparent",n),r){const o=s==null?void 0:s.baggage;(!o||!JT(o))&&t.setRequestHeader("baggage",r)}}catch{}}function JT(t){return t.split(",").some(e=>e.trim().startsWith("sentry-"))}function up(t){try{return new URL(t,ne.location.origin).href}catch{return}}function YT(){ne.document?ne.document.addEventListener("visibilitychange",()=>{const t=Ge();if(!t)return;const e=Fe(t);if(ne.document.hidden&&e){const r="cancelled",{op:n,status:s}=oe(e);et&&B.log(`[Tracing] Transaction: ${r} -> since tab moved to the background, op: ${n}`),s||e.setStatus({code:Ee,message:r}),e.setAttribute("sentry.cancellation_reason","document.hidden"),e.end()}}):et&&B.warn("[Tracing] Could not set up background tab detection due to lack of global document")}const QT=3600,dp="sentry_previous_trace",ZT="sentry.previous_trace";function ek(t,{linkPreviousTrace:e,consistentTraceSampling:r}){const n=e==="session-storage";let s=n?nk():void 0;t.on("spanStart",o=>{if(Fe(o)!==o)return;const a=ce().getPropagationContext();s=tk(s,o,a),n&&rk(s)});let i=!0;r&&t.on("beforeSampling",o=>{if(!s)return;const a=ce(),c=a.getPropagationContext();if(i&&c.parentSpanId){i=!1;return}a.setPropagationContext({...c,dsc:{...c.dsc,sample_rate:String(s.sampleRate),sampled:String(la(s.spanContext))},sampleRand:s.sampleRand}),o.parentSampled=la(s.spanContext),o.parentSampleRate=s.sampleRate,o.spanAttributes={...o.spanAttributes,[Qh]:s.sampleRate}})}function tk(t,e,r){const n=oe(e);function s(){var a,c;try{return Number((a=r.dsc)==null?void 0:a.sample_rate)??Number((c=n.data)==null?void 0:c[Qa])}catch{return 0}}const i={spanContext:e.spanContext(),startTimestamp:n.start_timestamp,sampleRate:s(),sampleRand:r.sampleRand};if(!t)return i;const o=t.spanContext;return o.traceId===n.trace_id?t:(Date.now()/1e3-t.startTimestamp<=QT&&(et&&B.log(`Adding previous_trace ${o} link to span ${{op:n.op,...e.spanContext()}}`),e.addLink({context:o,attributes:{[xb]:"previous_trace"}}),e.setAttribute(ZT,`${o.traceId}-${o.spanId}-${la(o)?1:0}`)),i)}function rk(t){try{ne.sessionStorage.setItem(dp,JSON.stringify(t))}catch(e){et&&B.warn("Could not store previous trace in sessionStorage",e)}}function nk(){var t;try{const e=(t=ne.sessionStorage)==null?void 0:t.getItem(dp);return JSON.parse(e)}catch{return}}function la(t){return t.traceFlags===1}const sk="BrowserTracing",ik={...Fs,instrumentNavigation:!0,instrumentPageLoad:!0,markBackgroundSpan:!0,enableLongTask:!0,enableLongAnimationFrame:!0,enableInp:!0,enableElementTiming:!0,ignoreResourceSpans:[],ignorePerformanceApiSpans:[],detectRedirects:!0,linkPreviousTrace:"in-memory",consistentTraceSampling:!1,_experiments:{},...lp},ok=((t={})=>{const e={name:void 0,source:void 0},r=ne.document,{enableInp:n,enableElementTiming:s,enableLongTask:i,enableLongAnimationFrame:o,_experiments:{enableInteractions:a,enableStandaloneClsSpans:c,enableStandaloneLcpSpans:l},beforeStartSpan:u,idleTimeout:h,finalTimeout:f,childSpanTimeout:p,markBackgroundSpan:m,traceFetch:y,traceXHR:x,trackFetchStreamPerformance:S,shouldCreateSpanForRequest:_,enableHTTPTimings:b,ignoreResourceSpans:w,ignorePerformanceApiSpans:v,instrumentPageLoad:g,instrumentNavigation:k,detectRedirects:T,linkPreviousTrace:j,consistentTraceSampling:P,onRequestSpanStart:C}={...ik,...t};let A,N;function I(R,M,D=!0){const q=M.op==="pageload",V=M.name,L=u?u(M):M,X=L.attributes||{};if(V!==L.name&&(X[lt]="custom",L.attributes=X),!D){const Pe=br();on({...L,startTime:Pe}).end(Pe);return}e.name=L.name,e.source=X[lt];const re=xf(L,{idleTimeout:h,finalTimeout:f,childSpanTimeout:p,disableAutoFinish:q,beforeSpanEnd:Pe=>{A==null||A(),mE(Pe,{recordClsOnPageloadSpan:!c,recordLcpOnPageloadSpan:!l,ignoreResourceSpans:w,ignorePerformanceApiSpans:v}),Ru(R,void 0);const ke=ce(),tt=ke.getPropagationContext();ke.setPropagationContext({...tt,traceId:re.spanContext().traceId,sampled:_r(re),dsc:Ft(Pe)})}});Ru(R,re);function he(){r&&["interactive","complete"].includes(r.readyState)&&R.emit("idleSpanEnableAutoFinish",re)}q&&r&&(r.addEventListener("readystatechange",()=>{he()}),he())}return{name:sk,setup(R){if(Gb(),A=cE({recordClsStandaloneSpans:c||!1,recordLcpStandaloneSpans:l||!1,client:R}),n&&$E(),s&&TE(),o&&ae.PerformanceObserver&&PerformanceObserver.supportedEntryTypes&&PerformanceObserver.supportedEntryTypes.includes("long-animation-frame")?uE():i&&lE(),a&&dE(),T&&r){const D=()=>{N=Re()};addEventListener("click",D,{capture:!0}),addEventListener("keydown",D,{capture:!0,passive:!0})}function M(){const D=$n(R);D&&!oe(D).timestamp&&(et&&B.log(`[Tracing] Finishing current active span with op: ${oe(D).op}`),D.setAttribute(ri,"cancelled"),D.end())}R.on("startNavigationSpan",(D,q)=>{if(ie()!==R)return;if(q!=null&&q.isRedirect){et&&B.warn("[Tracing] Detected redirect, navigation span will not be the root span, but a child span."),I(R,{op:"navigation.redirect",...D},!1);return}N=void 0,M(),jt().setPropagationContext({traceId:Lt(),sampleRand:Math.random()});const V=ce();V.setPropagationContext({traceId:Lt(),sampleRand:Math.random()}),V.setSDKProcessingMetadata({normalizedRequest:void 0}),I(R,{op:"navigation",...D})}),R.on("startPageLoadSpan",(D,q={})=>{if(ie()!==R)return;M();const V=q.sentryTrace||Cu("sentry-trace"),L=q.baggage||Cu("baggage"),X=$b(V,L),re=ce();re.setPropagationContext(X),re.setSDKProcessingMetadata({normalizedRequest:ic()}),I(R,{op:"pageload",...D})})},afterAllSetup(R){let M=Jn();if(j!=="off"&&ek(R,{linkPreviousTrace:j,consistentTraceSampling:P}),ne.location){if(g){const D=We();ak(R,{name:ne.location.pathname,startTime:D?D/1e3:void 0,attributes:{[lt]:"url",[Te]:"auto.pageload.browser"}})}k&&pc(({to:D,from:q})=>{if(q===void 0&&(M==null?void 0:M.indexOf(D))!==-1){M=void 0;return}M=void 0;const V=Df(D),L=$n(R),X=L&&T&&uk(L,N);ck(R,{name:(V==null?void 0:V.pathname)||ne.location.pathname,attributes:{[lt]:"url",[Te]:"auto.navigation.browser"}},{url:D,isRedirect:X})})}m&&YT(),a&&lk(R,h,f,p,e),n&&VE(),HT(R,{traceFetch:y,traceXHR:x,trackFetchStreamPerformance:S,tracePropagationTargets:R.getOptions().tracePropagationTargets,shouldCreateSpanForRequest:_,enableHTTPTimings:b,onRequestSpanStart:C})}}});function ak(t,e,r){t.emit("startPageLoadSpan",e,r),ce().setTransactionName(e.name);const n=$n(t);return n&&t.emit("afterStartPageLoadSpan",n),n}function ck(t,e,r){const{url:n,isRedirect:s}=r||{};t.emit("beforeStartNavigationSpan",e,{isRedirect:s}),t.emit("startNavigationSpan",e,{isRedirect:s});const i=ce();return i.setTransactionName(e.name),n&&!s&&i.setSDKProcessingMetadata({normalizedRequest:{...ic(),url:n}}),$n(t)}function Cu(t){const e=ne.document,r=e==null?void 0:e.querySelector(`meta[name=${t}]`);return(r==null?void 0:r.getAttribute("content"))||void 0}function lk(t,e,r,n,s){const i=ne.document;let o;const a=()=>{const c="ui.action.click",l=$n(t);if(l){const u=oe(l).op;if(["navigation","pageload"].includes(u)){et&&B.warn(`[Tracing] Did not create ${c} span because a pageload or navigation span is in progress.`);return}}if(o&&(o.setAttribute(ri,"interactionInterrupted"),o.end(),o=void 0),!s.name){et&&B.warn(`[Tracing] Did not create ${c} transaction because _latestRouteName is missing.`);return}o=xf({name:s.name,op:c,attributes:{[lt]:s.source||"url"}},{idleTimeout:e,finalTimeout:r,childSpanTimeout:n})};i&&addEventListener("click",a,{capture:!0})}const hp="_sentry_idleSpan";function $n(t){return t[hp]}function Ru(t,e){ze(t,hp,e)}const Iu=1.5;function uk(t,e){const r=oe(t),n=br(),s=r.start_timestamp;return!(n-s>Iu||e&&n-e<=Iu)}function dk(t){const e={...t};return Lf(e,"react"),W_("react",{version:E.version}),VT(e)}var Vs={exports:{}},hk=Vs.exports,Nu;function fk(){return Nu||(Nu=1,(function(t,e){(function(n,s){t.exports=s()})(hk,function(){return(function(){var r={"./packages/@logrocket/console/src/index.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(c("./packages/@logrocket/console/src/registerConsole.js")),h=u.default;a.default=h}),"./packages/@logrocket/console/src/registerConsole.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var u=l(c("./node_modules/@babel/runtime/helpers/typeof.js")),h=l(c("./packages/@logrocket/utils/src/enhanceFunc.ts")),f=c("./packages/@logrocket/exceptions/src/index.js");function p(m){var y=[],x=["log","warn","info","error","debug"];return x.forEach(function(S){y.push((0,h.default)(console,S,function(){for(var _=arguments.length,b=new Array(_),w=0;w<_;w++)b[w]=arguments[w];m.addEvent("lr.core.LogEvent",function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},g=v.isEnabled;if((0,u.default)(g)==="object"&&g[S]===!1||g===!1)return null;if(S==="error"&&v.shouldAggregateConsoleErrors)if(b&&b.length>=2&&b[0]==="ERROR"){var k="";try{k=" ".concat(b[1])}catch{}f.Capture.captureMessage(m,"".concat(b[0]).concat(k),b,{},!0)}else f.Capture.captureMessage(m,b[0],b,{},!0);return{logLevel:S.toUpperCase(),args:b}})}))}),function(){y.forEach(function(S){return S()})}}}),"./packages/@logrocket/exceptions/src/Capture.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.captureMessage=p,a.captureException=m;var u=c("./packages/@logrocket/utils/src/scrubException.ts"),h=l(c("./packages/@logrocket/utils/src/TraceKit.js")),f=l(c("./packages/@logrocket/exceptions/src/stackTraceFromError.js"));function p(y,x,S){var _=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,w={exceptionType:b?"CONSOLE":"MESSAGE",message:x,messageArgs:S,browserHref:window.location?window.location.href:""};(0,u.scrubException)(w,_),y.addEvent("lr.core.Exception",function(){return w})}function m(y,x){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},_=arguments.length>3&&arguments[3]!==void 0?arguments[3]:null,b=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"WINDOW",w=_||h.default.computeStackTrace(x),v={exceptionType:b,errorType:w.name,message:w.message,browserHref:window.location?window.location.href:""};(0,u.scrubException)(v,S);var g={_stackTrace:(0,f.default)(w)};y.addEvent("lr.core.Exception",function(){return v},g)}}),"./packages/@logrocket/exceptions/src/index.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=c("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"registerExceptions",{enumerable:!0,get:function(){return h.default}}),a.Capture=void 0;var h=l(c("./packages/@logrocket/exceptions/src/registerExceptions.js")),f=m(c("./packages/@logrocket/exceptions/src/Capture.js"));a.Capture=f;function p(y){if(typeof WeakMap!="function")return null;var x=new WeakMap,S=new WeakMap;return(p=function(b){return b?S:x})(y)}function m(y,x){if(y&&y.__esModule)return y;if(y===null||u(y)!=="object"&&typeof y!="function")return{default:y};var S=p(x);if(S&&S.has(y))return S.get(y);var _={},b=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var w in y)if(w!=="default"&&Object.prototype.hasOwnProperty.call(y,w)){var v=b?Object.getOwnPropertyDescriptor(y,w):null;v&&(v.get||v.set)?Object.defineProperty(_,w,v):_[w]=y[w]}return _.default=y,S&&S.set(y,_),_}}),"./packages/@logrocket/exceptions/src/raven/raven.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(c("./node_modules/@babel/runtime/helpers/classCallCheck.js")),h=l(c("./node_modules/@babel/runtime/helpers/createClass.js")),f=l(c("./packages/@logrocket/utils/src/TraceKit.js")),p=Object.prototype;function m(w){return w===void 0}function y(w){return typeof w=="function"}function x(w,v){return p.hasOwnProperty.call(w,v)}function S(w,v,g,k){var T=w[v];w[v]=g(T),k&&k.push([w,v,T])}var _=typeof window<"u"?window:typeof c.g<"u"?c.g:typeof self<"u"?self:{};_.document;var b=(function(){function w(v){var g=v.captureException;(0,u.default)(this,w),this._errorHandler=this._errorHandler.bind(this),this._ignoreOnError=0,this._wrappedBuiltIns=[],this.captureException=g,f.default.report.subscribe(this._errorHandler),this._instrumentTryCatch()}return(0,h.default)(w,[{key:"uninstall",value:function(){f.default.report.unsubscribe(this._errorHandler);for(var g;this._wrappedBuiltIns.length;){g=this._wrappedBuiltIns.shift();var k=g[0],T=g[1],j=g[2];k[T]=j}}},{key:"_errorHandler",value:function(g){this._ignoreOnError||this.captureException(g)}},{key:"_ignoreNextOnError",value:function(){var g=this;this._ignoreOnError+=1,setTimeout(function(){g._ignoreOnError-=1})}},{key:"context",value:function(g,k,T){return y(g)&&(T=k||[],k=g,g=void 0),this.wrap(g,k).apply(this,T)}},{key:"wrap",value:function(g,k,T){var j=this;if(m(k)&&!y(g))return g;if(y(g)&&(k=g,g=void 0),!y(k))return k;try{if(k.__lr__)return k;if(k.__lr_wrapper__)return k.__lr_wrapper__;if(!Object.isExtensible(k))return k}catch{return k}function P(){var A=[],N=arguments.length,I=!g||g&&g.deep!==!1;for(T&&y(T)&&T.apply(this,arguments);N--;)A[N]=I?j.wrap(g,arguments[N]):arguments[N];try{return k.apply(this,A)}catch(R){throw j._ignoreNextOnError(),j.captureException(f.default.computeStackTrace(R),g),R}}for(var C in k)x(k,C)&&(P[C]=k[C]);return P.prototype=k.prototype,k.__lr_wrapper__=P,P.__lr__=!0,P.__inner__=k,P}},{key:"_instrumentTryCatch",value:function(){var g=this,k=g._wrappedBuiltIns;function T(N){return function(I,R){for(var M=new Array(arguments.length),D=0;D<M.length;++D)M[D]=arguments[D];var q=M[0];return y(q)&&(M[0]=g.wrap(q)),N.apply?N.apply(this,M):N(M[0],M[1])}}function j(N){var I=_[N]&&_[N].prototype;I&&I.hasOwnProperty&&I.hasOwnProperty("addEventListener")&&(S(I,"addEventListener",function(R){return function(M,D,q,V){try{D&&D.handleEvent&&(D.handleEvent=g.wrap(D.handleEvent))}catch{}var L;return R.call(this,M,g.wrap(D,void 0,L),q,V)}},k),S(I,"removeEventListener",function(R){return function(M,D,q,V){try{var L=D==null?void 0:D.__lr_wrapper__;L&&R.call(this,M,L,q,V)}catch{}return R.call(this,M,D,q,V)}},void 0))}S(_,"setTimeout",T,k),S(_,"setInterval",T,k),_.requestAnimationFrame&&S(_,"requestAnimationFrame",function(N){return function(I){return N(g.wrap(I))}},k);for(var P=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],C=0;C<P.length;C++)j(P[C]);var A=_.jQuery||_.$;A&&A.fn&&A.fn.ready&&S(A.fn,"ready",function(N){return function(I){return N.call(this,g.wrap(I))}},k)}}]),w})();a.default=b}),"./packages/@logrocket/exceptions/src/registerExceptions.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js"),u=c("./node_modules/@babel/runtime/helpers/typeof.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var h=l(c("./packages/@logrocket/exceptions/src/raven/raven.js")),f=m(c("./packages/@logrocket/exceptions/src/Capture.js"));function p(x){if(typeof WeakMap!="function")return null;var S=new WeakMap,_=new WeakMap;return(p=function(w){return w?_:S})(x)}function m(x,S){if(x&&x.__esModule)return x;if(x===null||u(x)!=="object"&&typeof x!="function")return{default:x};var _=p(S);if(_&&_.has(x))return _.get(x);var b={},w=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var v in x)if(v!=="default"&&Object.prototype.hasOwnProperty.call(x,v)){var g=w?Object.getOwnPropertyDescriptor(x,v):null;g&&(g.get||g.set)?Object.defineProperty(b,v,g):b[v]=x[v]}return b.default=x,_&&_.set(x,b),b}function y(x){var S=new h.default({captureException:function(w){f.captureException(x,null,null,w)}}),_=function(w){w.reason instanceof Error?f.captureException(x,w.reason,null,null,"UNHANDLED_REJECTION"):x.addEvent("lr.core.Exception",function(){return{exceptionType:"UNHANDLED_REJECTION",message:w.reason||"Unhandled Promise rejection"}})};return window.addEventListener("unhandledrejection",_),function(){window.removeEventListener("unhandledrejection",_),S.uninstall()}}}),"./packages/@logrocket/exceptions/src/stackTraceFromError.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;function c(l){function u(h){return h===null?void 0:h}return l.stack?l.stack.map(function(h){return{lineNumber:u(h.line),columnNumber:u(h.column),fileName:u(h.url),functionName:u(h.func)}}):void 0}}),"./packages/@logrocket/network/src/fetchIntercept.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var u=l(c("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),h=c("./packages/@logrocket/network/src/registerXHR.js"),f=[];function p(S,_){for(var b=f.reduce(function(T,j){return[j].concat(T)},[]),w=arguments.length,v=new Array(w>2?w-2:0),g=2;g<w;g++)v[g-2]=arguments[g];var k=Promise.resolve(v);return b.forEach(function(T){var j=T.request,P=T.requestError;(j||P)&&(k=k.then(function(C){return j.apply(void 0,[_].concat((0,u.default)(C)))},function(C){return P.apply(void 0,[_].concat((0,u.default)(C)))}))}),k=k.then(function(T){(0,h.setActive)(!1);var j,P;try{j=S.apply(void 0,(0,u.default)(T))}catch(C){P=C}if((0,h.setActive)(!0),P)throw P;return j}),b.forEach(function(T){var j=T.response,P=T.responseError;(j||P)&&(k=k.then(function(C){return j(_,C)},function(C){return P&&P(_,C)}))}),k}function m(S){if(!(!S.fetch||!S.Promise)){var _=S.fetch.polyfill;S.fetch=(function(b){var w=0;return function(){for(var v=arguments.length,g=new Array(v),k=0;k<v;k++)g[k]=arguments[k];return p.apply(void 0,[b,w++].concat(g))}})(S.fetch),_&&(S.fetch.polyfill=_)}}var y=!1,x={register:function(_){return y||(y=!0,m(window)),f.push(_),function(){var b=f.indexOf(_);b>=0&&f.splice(b,1)}},clear:function(){f=[]}};a.default=x}),"./packages/@logrocket/network/src/index.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=b;var u=l(c("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=l(c("./node_modules/@babel/runtime/helpers/typeof.js")),f=l(c("./packages/@logrocket/network/src/registerFetch.js")),p=c("./packages/@logrocket/network/src/registerIonic.ts"),m=l(c("./packages/@logrocket/network/src/registerNetworkInformation.js")),y=l(c("./packages/@logrocket/network/src/registerXHR.js")),x=l(c("./packages/@logrocket/utils/src/mapValues.ts"));function S(w,v){var g=Object.keys(w);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(w);v&&(k=k.filter(function(T){return Object.getOwnPropertyDescriptor(w,T).enumerable})),g.push.apply(g,k)}return g}function _(w){for(var v=1;v<arguments.length;v++){var g=arguments[v]!=null?arguments[v]:{};v%2?S(Object(g),!0).forEach(function(k){(0,u.default)(w,k,g[k])}):Object.getOwnPropertyDescriptors?Object.defineProperties(w,Object.getOwnPropertyDescriptors(g)):S(Object(g)).forEach(function(k){Object.defineProperty(w,k,Object.getOwnPropertyDescriptor(g,k))})}return w}function b(w){var v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{isReactNative:!1,isDisabled:!1};if((v==null?void 0:v.isDisabled)===!0)return function(){};var g=v.isReactNative,k=v.shouldAugmentNPS,T=v.shouldParseXHRBlob,j={},P=function(V){var L=4096e3,X=V;if((0,h.default)(V)==="object"&&V!=null){var re=Object.getPrototypeOf(V);(re===Object.prototype||re===null)&&(X=JSON.stringify(V))}if(X&&X.length&&X.length>L&&typeof X=="string"){var he=X.substring(0,1e3);return"".concat(he,` ... LogRocket truncating to first 1000 characters.
      Keep data under 4MB to prevent truncation. https://docs.logrocket.com/reference/network`)}return V},C=function(V,L){var X=L.method;w.addEvent("lr.network.RequestEvent",function(){var re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},he=re.isEnabled,Pe=he===void 0?!0:he,ke=re.requestSanitizer,tt=ke===void 0?function(O){return O}:ke;if(!Pe)return null;var Q=null;try{Q=tt(_(_({},L),{},{reqId:V}))}catch(O){console.error(O)}if(Q){var te=Q.url;if(typeof document<"u"&&typeof document.createElement=="function"){var W=document.createElement("a");W.href=Q.url,te=W.href}return{reqId:V,url:te,headers:(0,x.default)(Q.headers,function(O){return"".concat(O)}),body:P(Q.body),method:X,referrer:Q.referrer||void 0,mode:Q.mode||void 0,credentials:Q.credentials||void 0}}return j[V]=!0,null})},A=function(V,L){var X=L.method,re=L.status,he=L.responseType;w.addEvent("lr.network.ResponseEvent",function(){var Pe=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},ke=Pe.isEnabled,tt=ke===void 0?!0:ke,Q=Pe.responseSanitizer,te=Q===void 0?function(O){return O}:Q;if(tt){if(j[V])return delete j[V],null}else return null;var W=null;try{W=te(_(_({},L),{},{reqId:V}))}catch(O){console.error(O)}return W?{reqId:V,responseType:he,status:W.status,headers:(0,x.default)(W.headers,function(O){return"".concat(O)}),body:P(W.body),method:X}:{reqId:V,responseType:he,status:re,headers:{},body:null,method:X}})},N=function(V){return w.isDisabled||j[V]===!0},I=(0,f.default)({addRequest:C,addResponse:A,isIgnored:N}),R=(0,y.default)({addRequest:C,addResponse:A,isIgnored:N,logger:w,shouldAugmentNPS:k,shouldParseXHRBlob:T}),M=(0,p.registerIonic)({addRequest:C,addResponse:A,isIgnored:N}),D=g?function(){}:(0,m.default)(w);return function(){D(),I(),R(),M()}}}),"./packages/@logrocket/network/src/registerFetch.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=_;var u=l(c("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=l(c("./packages/@logrocket/utils/src/mapValues.ts")),f=l(c("./packages/@logrocket/network/src/fetchIntercept.js"));function p(b,w){var v=Object.keys(b);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(b);w&&(g=g.filter(function(k){return Object.getOwnPropertyDescriptor(b,k).enumerable})),v.push.apply(v,g)}return v}function m(b){for(var w=1;w<arguments.length;w++){var v=arguments[w]!=null?arguments[w]:{};w%2?p(Object(v),!0).forEach(function(g){(0,u.default)(b,g,v[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(v)):p(Object(v)).forEach(function(g){Object.defineProperty(b,g,Object.getOwnPropertyDescriptor(v,g))})}return b}function y(b){if(b==null||typeof b.forEach!="function")return b;var w={};return b.forEach(function(v,g){w[g]?w[g]="".concat(w[g],",").concat(v):w[g]="".concat(v)}),w}var x=function(w){return(0,h.default)(y(w),function(v){return"".concat(v)})};function S(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return{url:b.url,headers:x(b.headers),method:b.method&&b.method.toUpperCase(),referrer:b.referrer||void 0,mode:b.mode||void 0,credentials:b.credentials||void 0}}function _(b){var w=b.addRequest,v=b.addResponse,g=b.isIgnored,k="fetch-",T={},j=f.default.register({request:function(C){for(var A=arguments.length,N=new Array(A>1?A-1:0),I=1;I<A;I++)N[I-1]=arguments[I];var R;if(typeof Request<"u"&&N[0]instanceof Request){var M;try{M=N[0].clone().text()}catch(D){M=Promise.resolve("LogRocket fetch error: ".concat(D.message))}R=M.then(function(D){return m(m({},S(N[0])),{},{body:D})},function(D){return m(m({},S(N[0])),{},{body:"LogRocket fetch error: ".concat(D.message)})})}else R=Promise.resolve(m(m({},S(N[1])),{},{url:"".concat(N[0]),body:(N[1]||{}).body}));return R.then(function(D){return T[C]=D.method,w("".concat(k).concat(C),D),N})},requestError:function(C,A){return Promise.reject(A)},response:function(C,A){var N,I;if(g("".concat(k).concat(C)))return A;if(A.headers.get("content-type")==="text/event-stream")I=Promise.resolve("LogRocket skipped consuming an event-stream body.");else{try{N=A.clone()}catch(V){var R={url:A.url,responseType:A.type.toUpperCase(),status:A.status,headers:x(A.headers),body:"LogRocket fetch error: ".concat(V.message),method:T[C]};return delete T[C],v("".concat(k).concat(C),R),A}try{if(window.TextDecoder&&N.body){var M=N.body.getReader(),D=new window.TextDecoder("utf-8"),q="";I=M.read().then(function V(L){var X=L.done,re=L.value;if(X)return q;var he=re?D.decode(re,{stream:!0}):"";return q+=he,M.read().then(V)})}else I=N.text()}catch(V){I=Promise.resolve("LogRocket error reading body: ".concat(V.message))}}return I.catch(function(V){if(!(V.name==="AbortError"&&V instanceof DOMException))return"LogRocket error reading body: ".concat(V.message)}).then(function(V){var L={url:A.url,responseType:A.type.toUpperCase(),status:A.status,headers:x(A.headers),body:V,method:T[C]};delete T[C],v("".concat(k).concat(C),L)}),A},responseError:function(C,A){var N={url:void 0,status:0,headers:{},body:"".concat(A)};return v("".concat(k).concat(C),N),Promise.reject(A)}});return j}}),"./packages/@logrocket/network/src/registerIonic.ts":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.mergeHeaders=M,a.serializeQueryParams=re,a.appendQueryParamsString=he,a.processData=tt,a.registerIonic=W;var u=l(c("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=l(c("./node_modules/@babel/runtime/helpers/typeof.js")),f=l(c("./node_modules/@babel/runtime/helpers/toConsumableArray.js")),p=l(c("./packages/@logrocket/utils/src/protectFunc.ts"));function m(O,U){var $=typeof Symbol<"u"&&O[Symbol.iterator]||O["@@iterator"];if(!$){if(Array.isArray(O)||($=y(O))||U){$&&(O=$);var H=0,G=function(){};return{s:G,n:function(){return H>=O.length?{done:!0}:{done:!1,value:O[H++]}},e:function(rt){throw rt},f:G}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var ue=!0,Oe=!1,Ve;return{s:function(){$=$.call(O)},n:function(){var rt=$.next();return ue=rt.done,rt},e:function(rt){Oe=!0,Ve=rt},f:function(){try{!ue&&$.return!=null&&$.return()}finally{if(Oe)throw Ve}}}}function y(O,U){if(O){if(typeof O=="string")return x(O,U);var $=Object.prototype.toString.call(O).slice(8,-1);if($==="Object"&&O.constructor&&($=O.constructor.name),$==="Map"||$==="Set")return Array.from(O);if($==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test($))return x(O,U)}}function x(O,U){(U==null||U>O.length)&&(U=O.length);for(var $=0,H=new Array(U);$<U;$++)H[$]=O[$];return H}function S(O,U){var $=Object.keys(O);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(O);U&&(H=H.filter(function(G){return Object.getOwnPropertyDescriptor(O,G).enumerable})),$.push.apply($,H)}return $}function _(O){for(var U=1;U<arguments.length;U++){var $=arguments[U]!=null?arguments[U]:{};U%2?S(Object($),!0).forEach(function(H){(0,u.default)(O,H,$[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(O,Object.getOwnPropertyDescriptors($)):S(Object($)).forEach(function(H){Object.defineProperty(O,H,Object.getOwnPropertyDescriptor($,H))})}return O}var b=new Set(["get","put","post","patch","head","delete","options","upload","download"]),w=new Set(["urlencoded","json","utf8"]),v=new Set(["raw","multipart"]),g="ionic-",k=new Set(["desktop","mobileweb","pwa"]),T=new Set(["FormData"]),j=new Set,P=new Set(["string"]),C=new Set(["string","array"]),A={utf8:P,urlencoded:new Set(["object"]),json:new Set(["array","object"]),raw:new Set(["Uint8Array","ArrayBuffer"]),default:j};function N(O,U,$){if(typeof U!="string")throw new Error("".concat($," must be one of: ").concat((0,f.default)(O).join(", ")));if(U=U.trim().toLowerCase(),!O.has(U))throw new Error("".concat($," must be one of: ").concat((0,f.default)(O).join(", ")));return U}function I(O,U,$){if((0,h.default)(O)!=="object")throw new Error($);for(var H=0,G=Object.keys(O);H<G.length;H++){var ue=G[H];if(!U.has((0,h.default)(O[ue])))throw new Error($)}return O}function R(O,U){var $=new URL(O),H=$.host;return U.getHeaders(H)||null}function M(O,U){return _(_({},O),U)}function D(O,U,$){var H=$.getHeaders("*")||{},G=R(O,$)||{};return M(M(H,G),U)}function q(O,U){return U?encodeURIComponent(O):O}function V(O,U,$){return O.length?$?"".concat(encodeURIComponent(O),"[").concat(encodeURIComponent(U),"]"):"".concat(O,"[").concat(U,"]"):$?encodeURIComponent(U):U}function L(O,U,$){var H=[],G=m(U),ue;try{for(G.s();!(ue=G.n()).done;){var Oe=ue.value;if(Array.isArray(Oe)){H.push(L("".concat(O,"[]"),Oe,$));continue}else if((0,h.default)(Oe)==="object"){H.push(X("".concat(O,"[]").concat(Oe),$,void 0));continue}H.push("".concat(V(O,"",$),"=").concat(q(Oe,$)))}}catch(Ve){G.e(Ve)}finally{G.f()}return H.join("&")}function X(O,U,$){var H=[];for(var G in U)if(U.hasOwnProperty(G)){var ue=O.length?"".concat(O,"[").concat(G,"]"):G;if(Array.isArray(U[G])){H.push(L(ue,U[G],$));continue}else if((0,h.default)(U[G])==="object"&&U[G]!==null){H.push(X(ue,U[G],$));continue}H.push("".concat(V(O,G,$),"=").concat(q(U[G],$)))}return H.join("&")}function re(O,U){return X("",O,U)}function he(O,U){if(!O.length||!U.length)return O;var $=new URL(O),H=$.host,G=$.pathname,ue=$.search,Oe=$.hash,Ve=$.protocol;return"".concat(Ve,"//").concat(H).concat(G).concat(ue.length?"".concat(ue,"&").concat(U):"?".concat(U)).concat(Oe)}function Pe(O){return A[O]||A.default}function ke(O){return O==="multipart"?T:j}function tt(O,U){var $=(0,h.default)(O),H=Pe(U),G=ke(U);if(G.size>0){var ue=!1;if(G.forEach(function(Oe){c.g[Oe]&&O instanceof c.g[Oe]&&(ue=!0)}),!ue)throw new Error("INSTANCE_TYPE_MISMATCH_DATA ".concat((0,f.default)(G).join(", ")))}if(G.size===0&&!H.has($))throw new Error("TYPE_MISMATCH_DATA ".concat((0,f.default)(H).join(", ")));switch(U){case"utf8":return O;default:return JSON.stringify(O,void 0,2)}}function Q(O,U){O=O||{};var $,H=O.data;try{$=N(w,O.serializer||U.getDataSerializer(),"serializer / data payload type")}catch{$=N(v,O.serializer||U.getDataSerializer(),"serializer / data payload type"),H={}}return{data:H,filePath:O.filePath,followRedirect:O.followRedirect,headers:I(O.headers||{},P,"Invalid header type, must be string"),method:N(b,O.method||b[0],"method"),name:O.name,params:I(O.params||{},C,"Invalid param, must be of type string or array"),responseType:O.responseType,serializer:$,connectTimeout:O.connectTimeout,readTimeout:O.readTimeout,timeout:O.timeout}}var te=0;function W(O){var U,$,H,G=O.addRequest,ue=O.addResponse,Oe=O.isIgnored,Ve=(U=window.cordova)===null||U===void 0||($=U.plugin)===null||$===void 0?void 0:$.http,qe={},rt=!1;if(typeof Ve>"u")return function(){};var Ni=(H=window.ionic)===null||H===void 0?void 0:H.platforms;if(typeof Ni<"u"&&typeof Ni.some=="function"&&Ni.some(function(be){return k.has(be)}))return function(){};var Xc=Ve.sendRequest,Jc=(0,p.default)(function(be,hn,Xt){if(!Oe("".concat(g).concat(Xt)))try{var Oi={url:be.url||"",status:be.status<600&&be.status>=100?be.status:0,headers:be.headers||{},body:hn?be.data:be.error,method:qe[Xt].toUpperCase()};ue("".concat(g).concat(Xt),Oi)}catch(Di){var mt={url:be.url||"",status:be.status<600&&be.status>=100?be.status:0,headers:be.headers||{},body:"LogRocket fetch error: ".concat(Di.message),method:qe[Xt].toUpperCase()};ue("".concat(g).concat(Xt),mt)}});return Ve.sendRequest=function(be,hn,Xt,Oi){var mt=++te,Di=function(pn){rt||(Jc(pn,!0,mt),delete qe[mt]),Xt(pn)},Qm=function(pn){rt||(Jc(pn,!1,mt),delete qe[mt]),Oi(pn)};if(!rt)try{var fn=Q(hn,Ve),Zm=he(be,X("",fn.params,!0)),eg=D(be,fn.headers,Ve),Yc=fn.method||"get";qe[mt]=Yc;var tg={url:Zm,method:Yc.toUpperCase(),headers:eg||{},body:tt(fn.data||{},fn.serializer)};G("".concat(g).concat(mt),tg)}catch(Li){var rg={url:be,method:(hn.method||"get").toUpperCase(),headers:{},body:"LogRocket fetch error: ".concat(Li.message)};G("".concat(g).concat(mt),rg)}return Xc(be,hn,Di,Qm)},function(){rt=!0,Ve.sendRequest=Xc,qe={}}}}),"./packages/@logrocket/network/src/registerNetworkInformation.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=l;var c={"slow-2g":"SLOW2G","2g":"TWOG","3g":"THREEG","4g":"FOURG"};function l(u){var h=void 0;function f(){var p={online:window.navigator.onLine,effectiveType:"UNKOWN"};window.navigator.onLine?window.navigator.connection&&window.navigator.connection.effectiveType&&(p.effectiveType=c[window.navigator.connection.effectiveType]||"UNKNOWN"):p.effectiveType="NONE",!(h&&p.online===h.online&&p.effectiveType===h.effectiveType)&&(h=p,u.addEvent("lr.network.NetworkStatusEvent",function(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},y=m.isEnabled,x=y===void 0?!0:y;return x?p:null}))}return setTimeout(f),window.navigator.connection&&typeof window.navigator.connection.addEventListener=="function"&&window.navigator.connection.addEventListener("change",f),window.addEventListener("online",f),window.addEventListener("offline",f),function(){window.removeEventListener("offline",f),window.removeEventListener("online",f),window.navigator.connection&&typeof window.navigator.connection.removeEventListener=="function"&&window.navigator.connection.removeEventListener("change",f)}}}),"./packages/@logrocket/network/src/registerXHR.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.setActive=S,a.default=b;var u=l(c("./packages/@logrocket/utils/src/mapValues.ts")),h=l(c("./packages/@logrocket/utils/src/enhanceFunc.ts")),f=l(c("./packages/@logrocket/utils/src/protectFunc.ts")),p=l(c("./packages/@logrocket/utils/src/startsWith.js")),m=c("./packages/@logrocket/utils/src/constants/nps.js"),y=c("./packages/@logrocket/utils/src/constants/statusCodes.ts"),x=!0;function S(w){x=w}var _=0;function b(w){var v=w.addRequest,g=w.addResponse,k=w.isIgnored,T=w.logger,j=w.shouldAugmentNPS,P=j===void 0?!0:j,C=w.shouldParseXHRBlob,A=C===void 0?!1:C,N=XMLHttpRequest,I=new WeakMap,R=!1,M="xhr-";return window._lrXMLHttpRequest=XMLHttpRequest,XMLHttpRequest=function(q,V){var L=new N(q,V);if(!x)return L;I.set(L,{xhrId:++_,requestHeaders:{},sent:!1,done:!1});var X=L.open;function re(){for(var Q=arguments.length,te=new Array(Q),W=0;W<Q;W++)te[W]=arguments[W];try{var O=te[1];if(window.URL&&typeof window.URL=="function"&&O.search(m.WOOTRIC_RESPONSES_REGEX)===0){var U=new window.URL(T.recordingURL);U.searchParams.set("nps","wootric");var $=new window.URL(O),H=$.searchParams.get("response[text]"),G=H?"".concat(H,`

`):"";$.searchParams.set("response[text]","".concat(G,"<").concat(U.href,"|View LogRocket session>")),te[1]=$.href}}catch{}return X.apply(this,te)}var he=L.send;function Pe(){for(var Q=arguments.length,te=new Array(Q),W=0;W<Q;W++)te[W]=arguments[W];try{var O=I.get(L);if(window.URL&&typeof window.URL=="function"&&O&&O.url&&O.url.search(m.DELIGHTED_RESPONSES_REGEX)===0&&te.length&&te[0].indexOf(m.DELIGHTED_FEEDBACK_PREFIX)!==-1){var U=new window.URL(T.recordingURL);U.searchParams.set("nps","delighted");var $=encodeURIComponent(U.href),H=te[0].split("&").map(function(G){if((0,p.default)(G,m.DELIGHTED_FEEDBACK_PREFIX)){var ue=G===m.DELIGHTED_FEEDBACK_PREFIX;return"".concat(G).concat(ue?"":`

`,"<").concat($,"|View LogRocket session>")}return G}).join("&");te[0]=H}}catch{}return he.apply(this,te)}P&&(L.open=re,L.send=Pe);var ke=function(){var te;if(!R){var W=I.get(L);if(!(!W||k("".concat(M).concat(W.xhrId)))&&!(!W.sent||!W.done)){var O=W.status||y.XHR_CUSTOM_STATUS_CODES.error;O===y.XHR_CUSTOM_STATUS_CODES.error&&((te=window.navigator)===null||te===void 0?void 0:te.onLine)===!1&&(O=y.XHR_CUSTOM_STATUS_CODES.offline);var U={url:W.url,status:O,headers:W.responseHeaders,body:W.responseBody,method:(W.method||"").toUpperCase()};if(A&&U.body instanceof Blob){var $=new FileReader;$.readAsText(U.body),$.onload=function(){try{U.body=JSON.parse($.result)}catch{}g("".concat(M).concat(W.xhrId),U)}}else g("".concat(M).concat(W.xhrId),U)}}};(0,h.default)(L,"open",(0,f.default)(function(Q,te){if(!R){var W=I.get(L);W.method=Q,W.url=te}})),(0,h.default)(L,"send",(0,f.default)(function(Q){if(!R){var te=I.get(L);if(te){var W={url:te.url,method:te.method&&te.method.toUpperCase(),headers:(0,u.default)(te.requestHeaders||{},function(O){return O.join(", ")}),body:Q};v("".concat(M).concat(te.xhrId),W),te.sent=!0,ke()}}})),(0,h.default)(L,"setRequestHeader",(0,f.default)(function(Q,te){if(!R){var W=I.get(L);W&&(W.requestHeaders=W.requestHeaders||{},W.requestHeaders[Q]=W.requestHeaders[Q]||[],W.requestHeaders[Q].push(te))}}));var tt={readystatechange:(0,f.default)(function(){if(!R&&L.readyState===4){var Q=I.get(L);if(!Q||k("".concat(M).concat(Q.xhrId)))return;var te=L.getAllResponseHeaders()||"";Q.responseHeaders=te.split(/[\r\n]+/).reduce(function(O,U){var $=O,H=U.split(": ");if(H.length>0){var G=H.shift(),ue=H.join(": ");O[G]?$[G]+=", ".concat(ue):$[G]=ue}return $},{});var W;try{switch(L.responseType){case"json":W=T._shouldCloneResponse?JSON.parse(JSON.stringify(L.response)):L.response;break;case"arraybuffer":case"blob":{W=L.response;break}case"document":{W=L.responseXML;break}case"text":case"":{W=L.responseText;break}default:W=""}}catch{W="LogRocket: Error accessing response."}Q.responseBody=W,Q.status=L.status,Q.done=!0}}),abort:(0,f.default)(function(){var Q=I.get(L);Q&&(Q.status=y.XHR_CUSTOM_STATUS_CODES.aborted)}),timeout:(0,f.default)(function(){var Q=I.get(L);Q&&(Q.status=y.XHR_CUSTOM_STATUS_CODES.timeout)}),loadend:(0,f.default)(function(){ke()})};return Object.keys(tt).forEach(function(Q){L.addEventListener(Q,tt[Q])}),L},XMLHttpRequest.prototype=N.prototype,["UNSENT","OPENED","HEADERS_RECEIVED","LOADING","DONE"].forEach(function(D){XMLHttpRequest[D]=N[D]}),function(){R=!0,XMLHttpRequest=N}}}),"./packages/@logrocket/now/src/index.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=Date.now.bind(Date),l=c(),u=typeof performance<"u"&&performance.now?performance.now.bind(performance):function(){return c()-l};a.default=u}),"./packages/@logrocket/redux/src/createEnhancer.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=y;var u=l(c("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=l(c("./packages/@logrocket/now/src/index.js"));function f(x,S){var _=Object.keys(x);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(x);S&&(b=b.filter(function(w){return Object.getOwnPropertyDescriptor(x,w).enumerable})),_.push.apply(_,b)}return _}function p(x){for(var S=1;S<arguments.length;S++){var _=arguments[S]!=null?arguments[S]:{};S%2?f(Object(_),!0).forEach(function(b){(0,u.default)(x,b,_[b])}):Object.getOwnPropertyDescriptors?Object.defineProperties(x,Object.getOwnPropertyDescriptors(_)):f(Object(_)).forEach(function(b){Object.defineProperty(x,b,Object.getOwnPropertyDescriptor(_,b))})}return x}var m=0;function y(x){var S=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_=S.stateSanitizer,b=_===void 0?function(g){return g}:_,w=S.actionSanitizer,v=w===void 0?function(g){return g}:w;return function(g){return function(k,T,j){var P=g(k,T,j),C=P.dispatch,A=m++;x.addEvent("lr.redux.InitialState",function(){var I;try{I=b(P.getState())}catch(R){console.error(R.toString())}return{state:I,storeId:A}});var N=function(R){var M=(0,h.default)(),D,q;try{q=C(R)}catch(L){D=L}finally{var V=(0,h.default)()-M;x.addEvent("lr.redux.ReduxAction",function(){var L=null,X=null;try{L=b(P.getState()),X=v(R)}catch(re){console.error(re.toString())}return L&&X?{storeId:A,action:X,duration:V,stateDelta:L}:null})}if(D)throw D;return q};return p(p({},P),{},{dispatch:N})}}}}),"./packages/@logrocket/redux/src/createMiddleware.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=f;var u=l(c("./packages/@logrocket/now/src/index.js")),h=0;function f(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},y=m.stateSanitizer,x=y===void 0?function(b){return b}:y,S=m.actionSanitizer,_=S===void 0?function(b){return b}:S;return function(b){var w=h++;return p.addEvent("lr.redux.InitialState",function(){var v;try{v=x(b.getState())}catch(g){console.error(g.toString())}return{state:v,storeId:w}}),function(v){return function(g){var k=(0,u.default)(),T,j;try{j=v(g)}catch(C){T=C}finally{var P=(0,u.default)()-k;p.addEvent("lr.redux.ReduxAction",function(){var C=null,A=null;try{C=x(b.getState()),A=_(g)}catch(N){console.error(N.toString())}return C&&A?{storeId:w,action:A,duration:P,stateDelta:C}:null})}if(T)throw T;return j}}}}}),"./packages/@logrocket/redux/src/index.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),Object.defineProperty(a,"createEnhancer",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(a,"createMiddleware",{enumerable:!0,get:function(){return h.default}});var u=l(c("./packages/@logrocket/redux/src/createEnhancer.js")),h=l(c("./packages/@logrocket/redux/src/createMiddleware.js"))}),"./packages/@logrocket/utils/src/TraceKit.js":(function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l={collectWindowErrors:!0,debug:!1},u=typeof window<"u"?window:typeof c.g<"u"?c.g:typeof self<"u"?self:{},h=[].slice,f="?",p=/^(?:Uncaught (?:exception: )?)?((?:Eval|Internal|Range|Reference|Syntax|Type|URI)Error): ?(.*)$/;function m(){return typeof document>"u"||typeof document.location>"u"?"":document.location.href}l.report=(function(){var S=[],_=null,b=null,w=null;function v(M){A(),S.push(M)}function g(M){for(var D=S.length-1;D>=0;--D)S[D]===M&&S.splice(D,1)}function k(){N(),S=[]}function T(M,D){var q=null;if(!(D&&!l.collectWindowErrors)){for(var V in S)if(S.hasOwnProperty(V))try{S[V].apply(null,[M].concat(h.call(arguments,2)))}catch(L){q=L}if(q)throw q}}var j,P;function C(M,D,q,V,L){var X=null;if(w)l.computeStackTrace.augmentStackTraceWithInitialElement(w,D,q,M),I();else if(L)X=l.computeStackTrace(L),T(X,!0);else{var re={url:D,line:q,column:V},he=void 0,Pe=M,ke;if({}.toString.call(M)==="[object String]"){var ke=M.match(p);ke&&(he=ke[1],Pe=ke[2])}re.func=f,X={name:he,message:Pe,url:m(),stack:[re]},T(X,!0)}return j?j.apply(this,arguments):!1}function A(){P||(j=u.onerror,u.onerror=C,P=!0)}function N(){P&&(u.onerror=j,P=!1,j=void 0)}function I(){var M=w,D=_;_=null,w=null,b=null,T.apply(null,[M,!1].concat(D))}function R(M,D){var q=h.call(arguments,1);if(w){if(b===M)return;I()}var V=l.computeStackTrace(M);if(w=V,b=M,_=q,setTimeout(function(){b===M&&I()},V.incomplete?2e3:0),D!==!1)throw M}return R.subscribe=v,R.unsubscribe=g,R.uninstall=k,R})(),l.computeStackTrace=(function(){function S(v){if(!(typeof v.stack>"u"||!v.stack)){var g=/^\s*at (.*?) ?\(((?:file|https?|blob|chrome-extension|native|eval|<anonymous>).*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,k=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)((?:file|https?|blob|chrome|resource|\[native).*?)(?::(\d+))?(?::(\d+))?\s*$/i,T=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:file|ms-appx|https?|blob):.*?):(\d+)(?::(\d+))?\)?\s*$/i,j=v.stack.split(`
`),P=[],C,A;/^(.*) is undefined$/.exec(v.message);for(var N=0,I=j.length;N<I;++N){if(C=g.exec(j[N])){var R=C[2]&&C[2].indexOf("native")!==-1;A={url:R?null:C[2],func:C[1]||f,args:R?[C[2]]:[],line:C[3]?+C[3]:null,column:C[4]?+C[4]:null}}else if(C=T.exec(j[N]))A={url:C[2],func:C[1]||f,args:[],line:+C[3],column:C[4]?+C[4]:null};else if(C=k.exec(j[N]))A={url:C[3],func:C[1]||f,args:C[2]?C[2].split(","):[],line:C[4]?+C[4]:null,column:C[5]?+C[5]:null};else continue;!A.func&&A.line&&(A.func=f),P.push(A)}return P.length?(!P[0].column&&typeof v.columnNumber<"u"&&(P[0].column=v.columnNumber+1),{name:v.name,message:v.message,url:m(),stack:P}):null}}function _(v,g,k,T){var j={url:g,line:k};if(j.url&&j.line){if(v.incomplete=!1,j.func||(j.func=f),v.stack.length>0&&v.stack[0].url===j.url){if(v.stack[0].line===j.line)return!1;if(!v.stack[0].line&&v.stack[0].func===j.func)return v.stack[0].line=j.line,!1}return v.stack.unshift(j),v.partial=!0,!0}else v.incomplete=!0;return!1}function b(v,g){for(var k=/function\s+([_$a-zA-Z\xA0-\uFFFF][_$a-zA-Z0-9\xA0-\uFFFF]*)?\s*\(/i,T=[],j={},P=!1,C,A,N=b.caller;N&&!P;N=N.caller)if(!(N===w||N===l.report)){if(A={url:null,func:f,line:null,column:null},N.name?A.func=N.name:(C=k.exec(N.toString()))&&(A.func=C[1]),typeof A.func>"u")try{A.func=C.input.substring(0,C.input.indexOf("{"))}catch{}j[""+N]?P=!0:j[""+N]=!0,T.push(A)}g&&T.splice(0,g);var I={name:v.name,message:v.message,url:m(),stack:T};return _(I,v.sourceURL||v.fileName,v.line||v.lineNumber,v.message||v.description),I}function w(v,g){var k=null;g=g==null?0:+g;try{if(k=S(v),k)return k}catch(T){if(l.debug)throw T}try{if(k=b(v,g+1),k)return k}catch(T){if(l.debug)throw T}return{name:v.name,message:v.message,url:m()}}return w.augmentStackTraceWithInitialElement=_,w.computeStackTraceFromStackProp=S,w})();var y=l;a.default=y}),"./packages/@logrocket/utils/src/constants/nps.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.DELIGHTED_FEEDBACK_PREFIX=a.DELIGHTED_RESPONSES_REGEX=a.WOOTRIC_RESPONSES_REGEX=void 0;var c=/^https:\/\/production.wootric.com\/responses/;a.WOOTRIC_RESPONSES_REGEX=c;var l=/^https:\/\/web.delighted.com\/e\/[a-zA-Z-]*\/c/;a.DELIGHTED_RESPONSES_REGEX=l;var u="comment=";a.DELIGHTED_FEEDBACK_PREFIX=u}),"./packages/@logrocket/utils/src/constants/statusCodes.ts":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.getStatusText=y,a.XHR_CUSTOM_FAILURE_STATUSES=a.XHR_CUSTOM_STATUS_CODES=a.STATUS_CODES=void 0;var u=l(c("./node_modules/@babel/runtime/helpers/defineProperty.js")),h,f={0:"",100:"Continue",101:"Switching Protocol",102:"Processing",103:"Early Hints",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",207:"Multi-Status",208:"Already Reported",226:"IM Used",300:"Multiple Choices",301:"Moved Permanently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",306:"unused",307:"Temporary Redirect",308:"Permanent Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Payload Too Large",414:"URI Too Long",415:"Unsupported Media Type",416:"Range Not Satisfiable",417:"Expectation Failed",418:"I'm a teapot",421:"Misdirected Request",422:"Unprocessable Entity",423:"Locked",424:"Failed Dependency",425:"Too Early",426:"Upgrade Required",428:"Precondition Required",429:"Too Many Requests",431:"Request Header Fields Too Large",451:"Unavailable For Legal Reasons",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported",506:"Variant Also Negotiates",507:"Insufficient Storage",508:"Loop Detected",510:"Not Extended",511:"Network Authentication Required"};a.STATUS_CODES=f;var p={error:0,timeout:444,aborted:499,offline:1001};a.XHR_CUSTOM_STATUS_CODES=p;var m=(h={},(0,u.default)(h,p.error,"Error"),(0,u.default)(h,p.timeout,"Timeout"),(0,u.default)(h,p.aborted,"Aborted"),(0,u.default)(h,p.offline,"Offline"),h);a.XHR_CUSTOM_FAILURE_STATUSES=m;function y(x){return f[String(x)]}}),"./packages/@logrocket/utils/src/createUnsubListener.ts":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.createUnsubListener=p,a.Handler=void 0;var u=l(c("./node_modules/@babel/runtime/helpers/classCallCheck.js")),h=l(c("./node_modules/@babel/runtime/helpers/createClass.js")),f=(function(){function m(y){(0,u.default)(this,m),this._value=void 0,this._value=y}return(0,h.default)(m,[{key:"get",value:function(){return this._value}},{key:"clear",value:function(){this._value=void 0}}]),m})();a.Handler=f;function p(m){return function(){m.clear()}}}),"./packages/@logrocket/utils/src/enhanceFunc.ts":(function(o,a,c){Object.defineProperty(a,"__esModule",{value:!0}),a.default=h;var l=c("./packages/@logrocket/utils/src/createUnsubListener.ts"),u=function(){};function h(f,p,m){if(typeof f[p]!="function")return u;try{var y=function(){for(var b,w=arguments.length,v=new Array(w),g=0;g<w;g++)v[g]=arguments[g];var k=x.apply(this,v);return(b=S.get())===null||b===void 0||b.apply(this,v),k},x=f[p],S=new l.Handler(m);return f[p]=y,function(){S.clear(),f[p]===y&&(f[p]=x)}}catch{return u}}}),"./packages/@logrocket/utils/src/logError.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var c=typeof console<"u"&&console.error&&console.error.bind,l=c?console.error.bind(console):function(){},u=l;a.default=u}),"./packages/@logrocket/utils/src/mapValues.ts":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;function c(l,u){if(l==null)return{};var h={};return Object.keys(l).forEach(function(f){h[f]=u(l[f])}),h}}),"./packages/@logrocket/utils/src/protectFunc.ts":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=f;var u=l(c("./packages/@logrocket/utils/src/sendTelemetryData.js")),h=l(c("./packages/@logrocket/utils/src/logError.js"));function f(p){var m=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){};return function(){var y;try{y=p.apply(void 0,arguments)}catch(S){if(typeof window<"u"&&window._lrdebug)throw S;var x=m(S);(0,h.default)("LogRocket",S),(0,u.default)(S,x)}return y}}}),"./packages/@logrocket/utils/src/scrubException.ts":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.scrubException=S;var u=l(c("./node_modules/@babel/runtime/helpers/typeof.js"));function h(_,b){var w=typeof Symbol<"u"&&_[Symbol.iterator]||_["@@iterator"];if(!w){if(Array.isArray(_)||(w=f(_))||b){w&&(_=w);var v=0,g=function(){};return{s:g,n:function(){return v>=_.length?{done:!0}:{done:!1,value:_[v++]}},e:function(C){throw C},f:g}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var k=!0,T=!1,j;return{s:function(){w=w.call(_)},n:function(){var C=w.next();return k=C.done,C},e:function(C){T=!0,j=C},f:function(){try{!k&&w.return!=null&&w.return()}finally{if(T)throw j}}}}function f(_,b){if(_){if(typeof _=="string")return p(_,b);var w=Object.prototype.toString.call(_).slice(8,-1);if(w==="Object"&&_.constructor&&(w=_.constructor.name),w==="Map"||w==="Set")return Array.from(_);if(w==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(w))return p(_,b)}}function p(_,b){(b==null||b>_.length)&&(b=_.length);for(var w=0,v=new Array(b);w<b;w++)v[w]=_[w];return v}function m(_){return/boolean|number|string/.test((0,u.default)(_))}var y=["level","logger"],x=["tags","extra"];function S(_,b){if(b){var w=h(y),v;try{for(w.s();!(v=w.n()).done;){var g=v.value,k=b[g];m(k)&&(_[g]=k.toString())}}catch(D){w.e(D)}finally{w.f()}var T=h(x),j;try{for(T.s();!(j=T.n()).done;){for(var P=j.value,C=b[P]||{},A={},N=0,I=Object.keys(C);N<I.length;N++){var R=I[N],M=C[R];m(M)&&(A[R.toString()]=M.toString())}_[P]=A}}catch(D){T.e(D)}finally{T.f()}}}}),"./packages/@logrocket/utils/src/sendTelemetryData.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.sendTelemetry=S,a.default=_;var u=l(c("./node_modules/@babel/runtime/helpers/defineProperty.js")),h=l(c("./packages/@logrocket/utils/src/logError.js")),f=l(c("./packages/@logrocket/utils/src/TraceKit.js"));function p(b,w){var v=Object.keys(b);if(Object.getOwnPropertySymbols){var g=Object.getOwnPropertySymbols(b);w&&(g=g.filter(function(k){return Object.getOwnPropertyDescriptor(b,k).enumerable})),v.push.apply(v,g)}return v}function m(b){for(var w=1;w<arguments.length;w++){var v=arguments[w]!=null?arguments[w]:{};w%2?p(Object(v),!0).forEach(function(g){(0,u.default)(b,g,v[g])}):Object.getOwnPropertyDescriptors?Object.defineProperties(b,Object.getOwnPropertyDescriptors(v)):p(Object(v)).forEach(function(g){Object.defineProperty(b,g,Object.getOwnPropertyDescriptor(v,g))})}return b}var y="8304d923ee86bbba88df4d491ccbc1c75ecfbe70";function x(b){try{var w,v,g=b.message,k="https://e.logrocket.com/api/3/store/?sentry_version=7&sentry_client=http%2F3.8.0&sentry_key=b64162b4187a4c5caae8a68a7e291793",T=JSON.stringify(m({message:g,logger:"javascript",platform:"javascript",request:{headers:{"User-Agent":typeof navigator<"u"&&navigator.userAgent},url:typeof location<"u"&&location.href},release:y,environment:((w=window)===null||w===void 0||(v=w.__SDKCONFIG__)===null||v===void 0?void 0:v.scriptEnv)||"prod"},b));if(typeof window<"u"){var j=window._lrXMLHttpRequest||XMLHttpRequest,P=new j;P.open("POST",k),P.send(T)}else typeof fetch<"u"&&fetch(k,{method:"POST",body:T}).catch(function(C){(0,h.default)("Failed to send via fetch",C)})}catch(C){(0,h.default)("Failed to send",C)}}function S(b,w){if(typeof window<"u"&&window._lrdebug)return void(0,h.default)(b);w&&w.extra&&w.extra.appID&&typeof w.extra.appID.indexOf=="function"&&w.extra.appID.indexOf("au2drp/")===0&&Math.random()>=.25||x(m({message:b},w))}function _(b,w){try{var v=b.message,g;try{g=JSON.stringify(w).slice(0,1e3)}catch{try{g="Could not stringify payload: ".concat(Object.prototype.toString.call(w))}catch{}}var k;try{k=f.default.computeStackTrace(b).stack.map(function(T){return{filename:T.url,lineno:T.line,colno:T.column,function:T.func||"?"}})}catch{}x({message:v,extra:{stringPayload:g},exception:{values:[{type:b.type,value:v,stacktrace:{frames:k}}]}})}catch(T){(0,h.default)("Failed to send",T)}}}),"./packages/@logrocket/utils/src/startsWith.js":(function(o,a){Object.defineProperty(a,"__esModule",{value:!0}),a.default=c;function c(l,u){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0;return l&&u&&l.substring(h,h+u.length)===u}}),"./packages/logrocket/src/LogRocket.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=a.MAX_QUEUE_SIZE=void 0;var u=l(c("./node_modules/@babel/runtime/helpers/classCallCheck.js")),h=l(c("./node_modules/@babel/runtime/helpers/createClass.js")),f=l(c("./node_modules/@babel/runtime/helpers/defineProperty.js")),p=l(c("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),m=l(c("./packages/@logrocket/network/src/index.js")),y=c("./packages/@logrocket/exceptions/src/index.js"),x=l(c("./packages/@logrocket/console/src/index.js")),S=c("./packages/@logrocket/redux/src/index.js");function _(k,T){var j=Object.keys(k);if(Object.getOwnPropertySymbols){var P=Object.getOwnPropertySymbols(k);T&&(P=P.filter(function(C){return Object.getOwnPropertyDescriptor(k,C).enumerable})),j.push.apply(j,P)}return j}function b(k){for(var T=1;T<arguments.length;T++){var j=arguments[T]!=null?arguments[T]:{};T%2?_(Object(j),!0).forEach(function(P){(0,f.default)(k,P,j[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(k,Object.getOwnPropertyDescriptors(j)):_(Object(j)).forEach(function(P){Object.defineProperty(k,P,Object.getOwnPropertyDescriptor(j,P))})}return k}var w=1e3;a.MAX_QUEUE_SIZE=w;var v=function(){var T=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},j=T.ingestServer,P=(0,p.default)(T,["ingestServer"]);return j?b({serverURL:"".concat(j,"/i"),statsURL:"".concat(j,"/s")},P):P},g=(function(){function k(){var T=this;(0,u.default)(this,k),this._buffer=[],["log","info","warn","error","debug"].forEach(function(j){T[j]=function(){for(var P=arguments.length,C=new Array(P),A=0;A<P;A++)C[A]=arguments[A];T.addEvent("lr.core.LogEvent",function(){var N=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return j==="error"&&N.shouldAggregateConsoleErrors&&y.Capture.captureMessage(T,C[0],C,{},!0),{logLevel:j.toUpperCase(),args:C}},{shouldCaptureStackTrace:!0})}}),this._isInitialized=!1,this._installed=[],window._lr_surl_cb=this.getSessionURL.bind(this)}return(0,h.default)(k,[{key:"addEvent",value:function(j,P){var C=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},A=Date.now();this._run(function(N){N.addEvent(j,P,b(b({},C),{},{timeOverride:A}))})}},{key:"onLogger",value:function(j){for(this._logger=j;this._buffer.length>0;){var P=this._buffer.shift();P(this._logger)}}},{key:"_run",value:function(j){if(!this._isDisabled)if(this._logger)j(this._logger);else{if(this._buffer.length>=w){this._isDisabled=!0,console.warn("LogRocket: script did not load. Check that you have a valid network connection."),this.uninstall();return}this._buffer.push(j.bind(this))}}},{key:"init",value:function(j){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!this._isInitialized){var C,A=P.shouldAugmentNPS,N=A===void 0?!0:A,I=P.shouldParseXHRBlob,R=I===void 0?!1:I,M=P.shouldDetectExceptions,D=M===void 0?!0:M;D&&this._installed.push((0,y.registerExceptions)(this)),this._installed.push((0,m.default)(this,{shouldAugmentNPS:!!N,shouldParseXHRBlob:!!R,isDisabled:(P==null||(C=P.network)===null||C===void 0?void 0:C.isEnabled)===!1})),this._installed.push((0,x.default)(this)),this._isInitialized=!0,this._run(function(q){q.init(j,v(P))})}}},{key:"start",value:function(){this._run(function(j){j.start()})}},{key:"uninstall",value:function(){this._installed.forEach(function(j){return j()}),this._buffer=[],this._run(function(j){j.uninstall()})}},{key:"identify",value:function(j,P){this._run(function(C){C.identify(j,P)})}},{key:"startNewSession",value:function(){this._run(function(j){j.startNewSession()})}},{key:"track",value:function(j,P){this._run(function(C){C.track(j,P)})}},{key:"getSessionURL",value:function(j){if(typeof j!="function")throw new Error("LogRocket: must pass callback to getSessionURL()");this._run(function(P){P.getSessionURL?P.getSessionURL(j):j(P.recordingURL)})}},{key:"trackScrollEvent",value:function(j){this._logger&&this._logger.trackScrollEvent(j)}},{key:"getVersion",value:function(j){this._run(function(P){j(P.version)})}},{key:"captureMessage",value:function(j){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y.Capture.captureMessage(this,j,[j],P)}},{key:"captureException",value:function(j){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};y.Capture.captureException(this,j,P)}},{key:"version",get:function(){return this._logger&&this._logger.version}},{key:"sessionURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingURL",get:function(){return this._logger&&this._logger.recordingURL}},{key:"recordingID",get:function(){return this._logger&&this._logger.recordingID}},{key:"threadID",get:function(){return this._logger&&this._logger.threadID}},{key:"tabID",get:function(){return this._logger&&this._logger.tabID}},{key:"reduxEnhancer",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,S.createEnhancer)(this,j)}},{key:"reduxMiddleware",value:function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return(0,S.createMiddleware)(this,j)}},{key:"isDisabled",get:function(){return!!(this._isDisabled||this._logger&&this._logger._isDisabled)}}]),k})();a.default=g}),"./packages/logrocket/src/makeLogRocket.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.default=p;var u=l(c("./packages/logrocket/src/LogRocket.js")),h="LogRocket on React Native requires the LogRocket React Native specific SDK. See setup guide here https://docs.logrocket.com/reference/react-native.",f=function(){return{init:function(){},uninstall:function(){},log:function(){},info:function(){},warn:function(){},error:function(){},debug:function(){},addEvent:function(){},identify:function(){},start:function(){},get threadID(){return null},get recordingID(){return null},get recordingURL(){return null},reduxEnhancer:function(){return function(x){return function(){return x.apply(void 0,arguments)}}},reduxMiddleware:function(){return function(){return function(x){return function(S){return x(S)}}}},track:function(){},getSessionURL:function(){},getVersion:function(){},startNewSession:function(){},onLogger:function(){},setClock:function(){},captureMessage:function(){},captureException:function(){}}};function p(){var m=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(){},y=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f,x=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return new u.default};if(typeof navigator<"u"&&navigator.product==="ReactNative")throw new Error(h);if(typeof window<"u"){if(window._disableLogRocket)return y();if(window.MutationObserver&&window.WeakMap){window._lrMutationObserver=window.MutationObserver;var S=x();return m(S),S}}return f()}}),"./packages/logrocket/src/setup.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(a,"__esModule",{value:!0}),a.getDomainsAndEnv=m,a.setupBaseSDKCONFIG=y,a.default=x;var u=l(c("./node_modules/@babel/runtime/helpers/objectWithoutProperties.js")),h=l(c("./packages/logrocket/src/makeLogRocket.js")),f={"cdn.logrocket.com":"https://r.logrocket.io","cdn.logrocket.io":"https://r.logrocket.io","cdn.lr-ingest.io":"https://r.lr-ingest.io","cdn.lr-in.com":"https://r.lr-in.com","cdn.lr-in-prod.com":"https://r.lr-in-prod.com","cdn.lr-ingest.com":"https://r.lr-ingest.com","cdn.ingest-lr.com":"https://r.ingest-lr.com","cdn.lr-intake.com":"https://r.lr-intake.com","cdn.intake-lr.com":"https://r.intake-lr.com","cdn.logr-ingest.com":"https://r.logr-ingest.com","cdn.lrkt-in.com":"https://r.lrkt-in.com","cdn.lgrckt-in.com":"https://r.lgrckt-in.com","cdn-staging.logrocket.io":"https://staging-i.logrocket.io","cdn-staging.lr-ingest.io":"https://staging-i.lr-ingest.io","cdn-staging.lr-in.com":"https://staging-i.lr-in.com","cdn-staging.lr-in-prod.com":"https://staging-i.lr-in-prod.com","cdn-staging.lr-ingest.com":"https://staging-i.lr-ingest.com","cdn-staging.ingest-lr.com":"https://staging-i.ingest-lr.com","cdn-staging.lr-intake.com":"https://staging-i.lr-intake.com","cdn-staging.intake-lr.com":"https://staging-i.intake-lr.com","cdn-staging.logr-ingest.com":"https://staging-i.logr-ingest.com","cdn-staging.lrkt-in.com":"https://staging-i.lrkt-in.com","cdn-staging.lgrckt-in.com":"https://staging-i.lgrckt-in.com"};function p(S){return S.startsWith("cdn-staging")?"staging":S.startsWith("localhost")?"development":"prod"}function m(S){if(S==="script"||S==="shopify-pixel"){try{var _=document.currentScript,b=_.src.match(/^(https?:\/\/([^\\]+))\/.+$/),w=b&&b[2];if(w&&f[w])return{scriptEnv:p(w),scriptOrigin:b&&b[1],scriptIngest:f[w]}}catch{}return{scriptEnv:"prod",scriptOrigin:"https://cdn.logrocket.io"}}else return{scriptEnv:void 0,scriptOrigin:"https://cdn.lgrckt-in.com",scriptIngest:"https://r.lgrckt-in.com"}}function y(S){typeof window.__SDKCONFIG__>"u"&&(window.__SDKCONFIG__={}),window.__SDKCONFIG__.serverURL="".concat(S,"/i"),window.__SDKCONFIG__.statsURL="".concat(S,"/s")}function x(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},_=S.enterpriseServer,b=S.sdkVersion,w=b===void 0?"10.1.0":b,v=(0,u.default)(S,["enterpriseServer","sdkVersion"]),g=m(w),k=g.scriptEnv,T=g.scriptOrigin,j=g.scriptIngest,P=v.sdkServer||_,C=v.ingestServer||_||j,A=(0,h.default)(function(){var N=document.createElement("script");C&&(y(C),window.__SDKCONFIG__.scriptEnv=k),P?N.src="".concat(P,"/logger.min.js"):window.__SDKCONFIG__&&window.__SDKCONFIG__.loggerURL?N.src=window.__SDKCONFIG__.loggerURL:window._lrAsyncScript?N.src=window._lrAsyncScript:N.src="".concat(T,"/logger-1.min.js"),N.async=!0,document.head.appendChild(N),N.onload=function(){typeof window._LRLogger=="function"?setTimeout(function(){A.onLogger(new window._LRLogger({sdkVersion:w}))}):(console.warn("LogRocket: script execution has been blocked by a product or service."),A.uninstall())},N.onerror=function(){console.warn("LogRocket: script could not load. Check that you have a valid network connection."),A.uninstall()}});return A}}),"./node_modules/@babel/runtime/helpers/arrayLikeToArray.js":(function(o){function a(c,l){(l==null||l>c.length)&&(l=c.length);for(var u=0,h=new Array(l);u<l;u++)h[u]=c[u];return h}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function u(h){if(Array.isArray(h))return l(h)}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/classCallCheck.js":(function(o){function a(c,l){if(!(c instanceof l))throw new TypeError("Cannot call a class as a function")}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/createClass.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function u(f,p){for(var m=0;m<p.length;m++){var y=p[m];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(f,l(y.key),y)}}function h(f,p,m){return p&&u(f.prototype,p),m&&u(f,m),Object.defineProperty(f,"prototype",{writable:!1}),f}o.exports=h,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/defineProperty.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/toPropertyKey.js");function u(h,f,p){return f=l(f),f in h?Object.defineProperty(h,f,{value:p,enumerable:!0,configurable:!0,writable:!0}):h[f]=p,h}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/interopRequireDefault.js":(function(o){function a(c){return c&&c.__esModule?c:{default:c}}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/iterableToArray.js":(function(o){function a(c){if(typeof Symbol<"u"&&c[Symbol.iterator]!=null||c["@@iterator"]!=null)return Array.from(c)}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/nonIterableSpread.js":(function(o){function a(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/objectWithoutProperties.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js");function u(h,f){if(h==null)return{};var p=l(h,f),m,y;if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(h);for(y=0;y<x.length;y++)m=x[y],!(f.indexOf(m)>=0)&&Object.prototype.propertyIsEnumerable.call(h,m)&&(p[m]=h[m])}return p}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/objectWithoutPropertiesLoose.js":(function(o){function a(c,l){if(c==null)return{};var u={},h=Object.keys(c),f,p;for(p=0;p<h.length;p++)f=h[p],!(l.indexOf(f)>=0)&&(u[f]=c[f]);return u}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/toConsumableArray.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js"),u=c("./node_modules/@babel/runtime/helpers/iterableToArray.js"),h=c("./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js"),f=c("./node_modules/@babel/runtime/helpers/nonIterableSpread.js");function p(m){return l(m)||u(m)||h(m)||f()}o.exports=p,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/toPrimitive.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/typeof.js").default;function u(h,f){if(l(h)!=="object"||h===null)return h;var p=h[Symbol.toPrimitive];if(p!==void 0){var m=p.call(h,f||"default");if(l(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return(f==="string"?String:Number)(h)}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/toPropertyKey.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/typeof.js").default,u=c("./node_modules/@babel/runtime/helpers/toPrimitive.js");function h(f){var p=u(f,"string");return l(p)==="symbol"?p:String(p)}o.exports=h,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/typeof.js":(function(o){function a(c){"@babel/helpers - typeof";return o.exports=a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(l){return typeof l}:function(l){return l&&typeof Symbol=="function"&&l.constructor===Symbol&&l!==Symbol.prototype?"symbol":typeof l},o.exports.__esModule=!0,o.exports.default=o.exports,a(c)}o.exports=a,o.exports.__esModule=!0,o.exports.default=o.exports}),"./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js":(function(o,a,c){var l=c("./node_modules/@babel/runtime/helpers/arrayLikeToArray.js");function u(h,f){if(h){if(typeof h=="string")return l(h,f);var p=Object.prototype.toString.call(h).slice(8,-1);if(p==="Object"&&h.constructor&&(p=h.constructor.name),p==="Map"||p==="Set")return Array.from(h);if(p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p))return l(h,f)}}o.exports=u,o.exports.__esModule=!0,o.exports.default=o.exports})},n={};function s(o){var a=n[o];if(a!==void 0)return a.exports;var c=n[o]={exports:{}};return r[o](c,c.exports,s),c.exports}(function(){s.g=(function(){if(typeof globalThis=="object")return globalThis;try{return this||new Function("return this")()}catch{if(typeof window=="object")return window}})()})();var i={};return(function(){var o=i;/*!**********************************************!*\
  !*** ./packages/logrocket/src/module-npm.js ***!
  \**********************************************/var a=s("./node_modules/@babel/runtime/helpers/interopRequireDefault.js");Object.defineProperty(o,"__esModule",{value:!0}),o.default=void 0;var c=a(s("./packages/logrocket/src/setup.js")),l=(0,c.default)(),u=l;o.default=u})(),i=i.default,i})()})})(Vs)),Vs.exports}var Ai=fk();const fp=t=>{if(!(t!=null&&t.dsn)){console.warn("Sentry DSN not provided. Sentry will not be initialized.");return}dk({dsn:t.dsn,environment:t.environment,release:t.release,integrations:[ok()],tracesSampleRate:t.tracesSampleRate,replaysSessionSampleRate:.1,replaysOnErrorSampleRate:1}),console.log(" Sentry initialized for error tracking and performance monitoring")},pp=t=>{if(!(t!=null&&t.appId)){console.warn("LogRocket App ID not provided. LogRocket will not be initialized.");return}Ai.init(t.appId),console.log(" LogRocket initialized for session replay and user behavior tracking")},ui=(t,e)=>{var r;try{console.error("Application Error:",t,e)}catch{if(typeof window<"u"&&((r=window.wrappedJSObject)!=null&&r.console))try{window.wrappedJSObject.console.error("Application Error:",t,e)}catch{}}try{if(ie()){const n=e?JSON.parse(JSON.stringify(e)):{};Sf(t,{contexts:{app:n}})}}catch(n){console.warn("XrayWrapper: Sentry error reporting failed:",n)}try{if(window.LogRocket){const n={message:String(t.message||"Unknown error"),stack:String(t.stack||"No stack trace"),...e?JSON.parse(JSON.stringify(e)):{}};Ai.log("Application Error",n)}}catch(n){console.warn("XrayWrapper: LogRocket error reporting failed:",n)}},mp=(t,e)=>{try{if(window.LogRocket){const r=JSON.parse(JSON.stringify(e));Ai.identify(String(t),r)}}catch(r){console.warn("XrayWrapper: LogRocket identify failed:",r)}try{if(ie()){const r=JSON.parse(JSON.stringify(e));G_({id:String(t),...r})}}catch(r){console.warn("XrayWrapper: Sentry setUser failed:",r)}},gp=(t,e)=>{ie()&&Bt({category:"user-action",message:t,data:e,level:"info"}),window.LogRocket&&Ai.track(t,e)},yp=async()=>{try{const t=!!ie(),e=!!window.LogRocket;return{status:t&&e?"healthy":"unhealthy",details:{sentry:t,logRocket:e}}}catch(t){return console.error("Health check failed:",t),{status:"unhealthy",details:{error:t.message}}}},vp=t=>{console.log(" Initializing monitoring services...");try{t.sentry&&fp(t.sentry),t.logRocket&&pp(t.logRocket),window.addEventListener("error",e=>{var r,n,s,i;if((n=(r=e.error)==null?void 0:r.message)!=null&&n.includes("XrayWrapper")||(i=(s=e.error)==null?void 0:s.message)!=null&&i.includes("cross-origin object")){console.warn("XrayWrapper error detected and handled:",e.error);return}try{ui(e.error,{type:"unhandled-error",filename:String(e.filename||"unknown"),lineno:Number(e.lineno||0),colno:Number(e.colno||0)})}catch(o){console.warn("Error handler failed:",o)}}),window.addEventListener("unhandledrejection",e=>{var r,n,s,i;if((n=(r=e.reason)==null?void 0:r.message)!=null&&n.includes("XrayWrapper")||(i=(s=e.reason)==null?void 0:s.message)!=null&&i.includes("cross-origin object")){console.warn("XrayWrapper promise rejection detected and handled:",e.reason),e.preventDefault();return}try{ui(e.reason,{type:"unhandled-promise-rejection"})}catch(o){console.warn("Promise rejection handler failed:",o)}}),console.log(" Monitoring services initialized successfully")}catch(e){console.error(" Failed to initialize monitoring services:",e)}},pk=Object.freeze(Object.defineProperty({__proto__:null,healthCheck:yp,identifyUser:mp,initLogRocket:pp,initMonitoring:vp,initSentry:fp,reportError:ui,trackEvent:gp},Symbol.toStringTag,{value:"Module"})),mk=E.createContext(void 0),gk=({children:t})=>{const[e,r]=E.useState(!1),[n,s]=E.useState(null),[i,o]=E.useState(null),[a,c]=E.useState(null),l=f=>{try{vp(f),s(f),r(!0),o(null)}catch(p){console.error("Failed to initialize monitoring:",p),o(p),r(!1)}},u=async()=>{try{const f=await yp();c(f)}catch(f){c({status:"unhealthy",details:{error:f.message}})}};E.useEffect(()=>{if(e){u();const f=setInterval(u,3e4);return()=>clearInterval(f)}},[e]);const h={isInitialized:e,config:n,error:i,initialize:l,reportError:ui,identifyUser:mp,trackEvent:gp,healthStatus:a};return d.jsx(mk.Provider,{value:h,children:t})},mc=E.createContext({});function gc(t){const e=E.useRef(null);return e.current===null&&(e.current=t()),e.current}const yc=typeof window<"u",wp=yc?E.useLayoutEffect:E.useEffect,Pi=E.createContext(null);function vc(t,e){t.indexOf(e)===-1&&t.push(e)}function wc(t,e){const r=t.indexOf(e);r>-1&&t.splice(r,1)}const Et=(t,e,r)=>r>e?e:r<t?t:r;let bc=()=>{};const Tt={},bp=t=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(t);function _p(t){return typeof t=="object"&&t!==null}const xp=t=>/^0[^.\s]+$/u.test(t);function _c(t){let e;return()=>(e===void 0&&(e=t()),e)}const Ze=t=>t,yk=(t,e)=>r=>e(t(r)),os=(...t)=>t.reduce(yk),Un=(t,e,r)=>{const n=e-t;return n===0?1:(r-t)/n};class xc{constructor(){this.subscriptions=[]}add(e){return vc(this.subscriptions,e),()=>wc(this.subscriptions,e)}notify(e,r,n){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](e,r,n);else for(let i=0;i<s;i++){const o=this.subscriptions[i];o&&o(e,r,n)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ut=t=>t*1e3,dt=t=>t/1e3;function Sp(t,e){return e?t*(1e3/e):0}const Ep=(t,e,r)=>(((1-3*r+3*e)*t+(3*r-6*e))*t+3*e)*t,vk=1e-7,wk=12;function bk(t,e,r,n,s){let i,o,a=0;do o=e+(r-e)/2,i=Ep(o,n,s)-t,i>0?r=o:e=o;while(Math.abs(i)>vk&&++a<wk);return o}function as(t,e,r,n){if(t===e&&r===n)return Ze;const s=i=>bk(i,0,1,t,r);return i=>i===0||i===1?i:Ep(s(i),e,n)}const Tp=t=>e=>e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2,kp=t=>e=>1-t(1-e),jp=as(.33,1.53,.69,.99),Sc=kp(jp),Ap=Tp(Sc),Pp=t=>(t*=2)<1?.5*Sc(t):.5*(2-Math.pow(2,-10*(t-1))),Ec=t=>1-Math.sin(Math.acos(t)),Cp=kp(Ec),Rp=Tp(Ec),_k=as(.42,0,1,1),xk=as(0,0,.58,1),Ip=as(.42,0,.58,1),Sk=t=>Array.isArray(t)&&typeof t[0]!="number",Np=t=>Array.isArray(t)&&typeof t[0]=="number",Ek={linear:Ze,easeIn:_k,easeInOut:Ip,easeOut:xk,circIn:Ec,circInOut:Rp,circOut:Cp,backIn:Sc,backInOut:Ap,backOut:jp,anticipate:Pp},Tk=t=>typeof t=="string",Ou=t=>{if(Np(t)){bc(t.length===4);const[e,r,n,s]=t;return as(e,r,n,s)}else if(Tk(t))return Ek[t];return t},js=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function kk(t,e){let r=new Set,n=new Set,s=!1,i=!1;const o=new WeakSet;let a={delta:0,timestamp:0,isProcessing:!1};function c(u){o.has(u)&&(l.schedule(u),t()),u(a)}const l={schedule:(u,h=!1,f=!1)=>{const m=f&&s?r:n;return h&&o.add(u),m.has(u)||m.add(u),u},cancel:u=>{n.delete(u),o.delete(u)},process:u=>{if(a=u,s){i=!0;return}s=!0,[r,n]=[n,r],r.forEach(c),r.clear(),s=!1,i&&(i=!1,l.process(u))}};return l}const jk=40;function Op(t,e){let r=!1,n=!0;const s={delta:0,timestamp:0,isProcessing:!1},i=()=>r=!0,o=js.reduce((b,w)=>(b[w]=kk(i),b),{}),{setup:a,read:c,resolveKeyframes:l,preUpdate:u,update:h,preRender:f,render:p,postRender:m}=o,y=()=>{const b=Tt.useManualTiming?s.timestamp:performance.now();r=!1,Tt.useManualTiming||(s.delta=n?1e3/60:Math.max(Math.min(b-s.timestamp,jk),1)),s.timestamp=b,s.isProcessing=!0,a.process(s),c.process(s),l.process(s),u.process(s),h.process(s),f.process(s),p.process(s),m.process(s),s.isProcessing=!1,r&&e&&(n=!1,t(y))},x=()=>{r=!0,n=!0,s.isProcessing||t(y)};return{schedule:js.reduce((b,w)=>{const v=o[w];return b[w]=(g,k=!1,T=!1)=>(r||x(),v.schedule(g,k,T)),b},{}),cancel:b=>{for(let w=0;w<js.length;w++)o[js[w]].cancel(b)},state:s,steps:o}}const{schedule:pe,cancel:qt,state:Ce,steps:fo}=Op(typeof requestAnimationFrame<"u"?requestAnimationFrame:Ze,!0);let qs;function Ak(){qs=void 0}const Be={now:()=>(qs===void 0&&Be.set(Ce.isProcessing||Tt.useManualTiming?Ce.timestamp:performance.now()),qs),set:t=>{qs=t,queueMicrotask(Ak)}},Dp=t=>e=>typeof e=="string"&&e.startsWith(t),Tc=Dp("--"),Pk=Dp("var(--"),kc=t=>Pk(t)?Ck.test(t.split("/*")[0].trim()):!1,Ck=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,ln={test:t=>typeof t=="number",parse:parseFloat,transform:t=>t},Bn={...ln,transform:t=>Et(0,1,t)},As={...ln,default:1},Tn=t=>Math.round(t*1e5)/1e5,jc=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Rk(t){return t==null}const Ik=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,Ac=(t,e)=>r=>!!(typeof r=="string"&&Ik.test(r)&&r.startsWith(t)||e&&!Rk(r)&&Object.prototype.hasOwnProperty.call(r,e)),Lp=(t,e,r)=>n=>{if(typeof n!="string")return n;const[s,i,o,a]=n.match(jc);return{[t]:parseFloat(s),[e]:parseFloat(i),[r]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Nk=t=>Et(0,255,t),po={...ln,transform:t=>Math.round(Nk(t))},ar={test:Ac("rgb","red"),parse:Lp("red","green","blue"),transform:({red:t,green:e,blue:r,alpha:n=1})=>"rgba("+po.transform(t)+", "+po.transform(e)+", "+po.transform(r)+", "+Tn(Bn.transform(n))+")"};function Ok(t){let e="",r="",n="",s="";return t.length>5?(e=t.substring(1,3),r=t.substring(3,5),n=t.substring(5,7),s=t.substring(7,9)):(e=t.substring(1,2),r=t.substring(2,3),n=t.substring(3,4),s=t.substring(4,5),e+=e,r+=r,n+=n,s+=s),{red:parseInt(e,16),green:parseInt(r,16),blue:parseInt(n,16),alpha:s?parseInt(s,16)/255:1}}const ua={test:Ac("#"),parse:Ok,transform:ar.transform},cs=t=>({test:e=>typeof e=="string"&&e.endsWith(t)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${t}`}),Ct=cs("deg"),ht=cs("%"),K=cs("px"),Dk=cs("vh"),Lk=cs("vw"),Du={...ht,parse:t=>ht.parse(t)/100,transform:t=>ht.transform(t*100)},Fr={test:Ac("hsl","hue"),parse:Lp("hue","saturation","lightness"),transform:({hue:t,saturation:e,lightness:r,alpha:n=1})=>"hsla("+Math.round(t)+", "+ht.transform(Tn(e))+", "+ht.transform(Tn(r))+", "+Tn(Bn.transform(n))+")"},we={test:t=>ar.test(t)||ua.test(t)||Fr.test(t),parse:t=>ar.test(t)?ar.parse(t):Fr.test(t)?Fr.parse(t):ua.parse(t),transform:t=>typeof t=="string"?t:t.hasOwnProperty("red")?ar.transform(t):Fr.transform(t),getAnimatableNone:t=>{const e=we.parse(t);return e.alpha=0,we.transform(e)}},Mk=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Fk(t){var e,r;return isNaN(t)&&typeof t=="string"&&(((e=t.match(jc))==null?void 0:e.length)||0)+(((r=t.match(Mk))==null?void 0:r.length)||0)>0}const Mp="number",Fp="color",$k="var",Uk="var(",Lu="${}",Bk=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Vn(t){const e=t.toString(),r=[],n={color:[],number:[],var:[]},s=[];let i=0;const a=e.replace(Bk,c=>(we.test(c)?(n.color.push(i),s.push(Fp),r.push(we.parse(c))):c.startsWith(Uk)?(n.var.push(i),s.push($k),r.push(c)):(n.number.push(i),s.push(Mp),r.push(parseFloat(c))),++i,Lu)).split(Lu);return{values:r,split:a,indexes:n,types:s}}function $p(t){return Vn(t).values}function Up(t){const{split:e,types:r}=Vn(t),n=e.length;return s=>{let i="";for(let o=0;o<n;o++)if(i+=e[o],s[o]!==void 0){const a=r[o];a===Mp?i+=Tn(s[o]):a===Fp?i+=we.transform(s[o]):i+=s[o]}return i}}const Vk=t=>typeof t=="number"?0:we.test(t)?we.getAnimatableNone(t):t;function qk(t){const e=$p(t);return Up(t)(e.map(Vk))}const Ht={test:Fk,parse:$p,createTransformer:Up,getAnimatableNone:qk};function mo(t,e,r){return r<0&&(r+=1),r>1&&(r-=1),r<1/6?t+(e-t)*6*r:r<1/2?e:r<2/3?t+(e-t)*(2/3-r)*6:t}function Hk({hue:t,saturation:e,lightness:r,alpha:n}){t/=360,e/=100,r/=100;let s=0,i=0,o=0;if(!e)s=i=o=r;else{const a=r<.5?r*(1+e):r+e-r*e,c=2*r-a;s=mo(c,a,t+1/3),i=mo(c,a,t),o=mo(c,a,t-1/3)}return{red:Math.round(s*255),green:Math.round(i*255),blue:Math.round(o*255),alpha:n}}function di(t,e){return r=>r>0?e:t}const me=(t,e,r)=>t+(e-t)*r,go=(t,e,r)=>{const n=t*t,s=r*(e*e-n)+n;return s<0?0:Math.sqrt(s)},zk=[ua,ar,Fr],Wk=t=>zk.find(e=>e.test(t));function Mu(t){const e=Wk(t);if(!e)return!1;let r=e.parse(t);return e===Fr&&(r=Hk(r)),r}const Fu=(t,e)=>{const r=Mu(t),n=Mu(e);if(!r||!n)return di(t,e);const s={...r};return i=>(s.red=go(r.red,n.red,i),s.green=go(r.green,n.green,i),s.blue=go(r.blue,n.blue,i),s.alpha=me(r.alpha,n.alpha,i),ar.transform(s))},da=new Set(["none","hidden"]);function Gk(t,e){return da.has(t)?r=>r<=0?t:e:r=>r>=1?e:t}function Kk(t,e){return r=>me(t,e,r)}function Pc(t){return typeof t=="number"?Kk:typeof t=="string"?kc(t)?di:we.test(t)?Fu:Yk:Array.isArray(t)?Bp:typeof t=="object"?we.test(t)?Fu:Xk:di}function Bp(t,e){const r=[...t],n=r.length,s=t.map((i,o)=>Pc(i)(i,e[o]));return i=>{for(let o=0;o<n;o++)r[o]=s[o](i);return r}}function Xk(t,e){const r={...t,...e},n={};for(const s in r)t[s]!==void 0&&e[s]!==void 0&&(n[s]=Pc(t[s])(t[s],e[s]));return s=>{for(const i in n)r[i]=n[i](s);return r}}function Jk(t,e){const r=[],n={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const i=e.types[s],o=t.indexes[i][n[i]],a=t.values[o]??0;r[s]=a,n[i]++}return r}const Yk=(t,e)=>{const r=Ht.createTransformer(e),n=Vn(t),s=Vn(e);return n.indexes.var.length===s.indexes.var.length&&n.indexes.color.length===s.indexes.color.length&&n.indexes.number.length>=s.indexes.number.length?da.has(t)&&!s.values.length||da.has(e)&&!n.values.length?Gk(t,e):os(Bp(Jk(n,s),s.values),r):di(t,e)};function Vp(t,e,r){return typeof t=="number"&&typeof e=="number"&&typeof r=="number"?me(t,e,r):Pc(t)(t,e)}const Qk=t=>{const e=({timestamp:r})=>t(r);return{start:(r=!0)=>pe.update(e,r),stop:()=>qt(e),now:()=>Ce.isProcessing?Ce.timestamp:Be.now()}},qp=(t,e,r=10)=>{let n="";const s=Math.max(Math.round(e/r),2);for(let i=0;i<s;i++)n+=Math.round(t(i/(s-1))*1e4)/1e4+", ";return`linear(${n.substring(0,n.length-2)})`},hi=2e4;function Cc(t){let e=0;const r=50;let n=t.next(e);for(;!n.done&&e<hi;)e+=r,n=t.next(e);return e>=hi?1/0:e}function Zk(t,e=100,r){const n=r({...t,keyframes:[0,e]}),s=Math.min(Cc(n),hi);return{type:"keyframes",ease:i=>n.next(s*i).value/e,duration:dt(s)}}const e1=5;function Hp(t,e,r){const n=Math.max(e-e1,0);return Sp(r-t(n),e-n)}const ge={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},yo=.001;function t1({duration:t=ge.duration,bounce:e=ge.bounce,velocity:r=ge.velocity,mass:n=ge.mass}){let s,i,o=1-e;o=Et(ge.minDamping,ge.maxDamping,o),t=Et(ge.minDuration,ge.maxDuration,dt(t)),o<1?(s=l=>{const u=l*o,h=u*t,f=u-r,p=ha(l,o),m=Math.exp(-h);return yo-f/p*m},i=l=>{const h=l*o*t,f=h*r+r,p=Math.pow(o,2)*Math.pow(l,2)*t,m=Math.exp(-h),y=ha(Math.pow(l,2),o);return(-s(l)+yo>0?-1:1)*((f-p)*m)/y}):(s=l=>{const u=Math.exp(-l*t),h=(l-r)*t+1;return-yo+u*h},i=l=>{const u=Math.exp(-l*t),h=(r-l)*(t*t);return u*h});const a=5/t,c=n1(s,i,a);if(t=ut(t),isNaN(c))return{stiffness:ge.stiffness,damping:ge.damping,duration:t};{const l=Math.pow(c,2)*n;return{stiffness:l,damping:o*2*Math.sqrt(n*l),duration:t}}}const r1=12;function n1(t,e,r){let n=r;for(let s=1;s<r1;s++)n=n-t(n)/e(n);return n}function ha(t,e){return t*Math.sqrt(1-e*e)}const s1=["duration","bounce"],i1=["stiffness","damping","mass"];function $u(t,e){return e.some(r=>t[r]!==void 0)}function o1(t){let e={velocity:ge.velocity,stiffness:ge.stiffness,damping:ge.damping,mass:ge.mass,isResolvedFromDuration:!1,...t};if(!$u(t,i1)&&$u(t,s1))if(t.visualDuration){const r=t.visualDuration,n=2*Math.PI/(r*1.2),s=n*n,i=2*Et(.05,1,1-(t.bounce||0))*Math.sqrt(s);e={...e,mass:ge.mass,stiffness:s,damping:i}}else{const r=t1(t);e={...e,...r,mass:ge.mass},e.isResolvedFromDuration=!0}return e}function fi(t=ge.visualDuration,e=ge.bounce){const r=typeof t!="object"?{visualDuration:t,keyframes:[0,1],bounce:e}:t;let{restSpeed:n,restDelta:s}=r;const i=r.keyframes[0],o=r.keyframes[r.keyframes.length-1],a={done:!1,value:i},{stiffness:c,damping:l,mass:u,duration:h,velocity:f,isResolvedFromDuration:p}=o1({...r,velocity:-dt(r.velocity||0)}),m=f||0,y=l/(2*Math.sqrt(c*u)),x=o-i,S=dt(Math.sqrt(c/u)),_=Math.abs(x)<5;n||(n=_?ge.restSpeed.granular:ge.restSpeed.default),s||(s=_?ge.restDelta.granular:ge.restDelta.default);let b;if(y<1){const v=ha(S,y);b=g=>{const k=Math.exp(-y*S*g);return o-k*((m+y*S*x)/v*Math.sin(v*g)+x*Math.cos(v*g))}}else if(y===1)b=v=>o-Math.exp(-S*v)*(x+(m+S*x)*v);else{const v=S*Math.sqrt(y*y-1);b=g=>{const k=Math.exp(-y*S*g),T=Math.min(v*g,300);return o-k*((m+y*S*x)*Math.sinh(T)+v*x*Math.cosh(T))/v}}const w={calculatedDuration:p&&h||null,next:v=>{const g=b(v);if(p)a.done=v>=h;else{let k=v===0?m:0;y<1&&(k=v===0?ut(m):Hp(b,v,g));const T=Math.abs(k)<=n,j=Math.abs(o-g)<=s;a.done=T&&j}return a.value=a.done?o:g,a},toString:()=>{const v=Math.min(Cc(w),hi),g=qp(k=>w.next(v*k).value,v,30);return v+"ms "+g},toTransition:()=>{}};return w}fi.applyToOptions=t=>{const e=Zk(t,100,fi);return t.ease=e.ease,t.duration=ut(e.duration),t.type="keyframes",t};function fa({keyframes:t,velocity:e=0,power:r=.8,timeConstant:n=325,bounceDamping:s=10,bounceStiffness:i=500,modifyTarget:o,min:a,max:c,restDelta:l=.5,restSpeed:u}){const h=t[0],f={done:!1,value:h},p=T=>a!==void 0&&T<a||c!==void 0&&T>c,m=T=>a===void 0?c:c===void 0||Math.abs(a-T)<Math.abs(c-T)?a:c;let y=r*e;const x=h+y,S=o===void 0?x:o(x);S!==x&&(y=S-h);const _=T=>-y*Math.exp(-T/n),b=T=>S+_(T),w=T=>{const j=_(T),P=b(T);f.done=Math.abs(j)<=l,f.value=f.done?S:P};let v,g;const k=T=>{p(f.value)&&(v=T,g=fi({keyframes:[f.value,m(f.value)],velocity:Hp(b,T,f.value),damping:s,stiffness:i,restDelta:l,restSpeed:u}))};return k(0),{calculatedDuration:null,next:T=>{let j=!1;return!g&&v===void 0&&(j=!0,w(T),k(T)),v!==void 0&&T>=v?g.next(T-v):(!j&&w(T),f)}}}function a1(t,e,r){const n=[],s=r||Tt.mix||Vp,i=t.length-1;for(let o=0;o<i;o++){let a=s(t[o],t[o+1]);if(e){const c=Array.isArray(e)?e[o]||Ze:e;a=os(c,a)}n.push(a)}return n}function c1(t,e,{clamp:r=!0,ease:n,mixer:s}={}){const i=t.length;if(bc(i===e.length),i===1)return()=>e[0];if(i===2&&e[0]===e[1])return()=>e[1];const o=t[0]===t[1];t[0]>t[i-1]&&(t=[...t].reverse(),e=[...e].reverse());const a=a1(e,n,s),c=a.length,l=u=>{if(o&&u<t[0])return e[0];let h=0;if(c>1)for(;h<t.length-2&&!(u<t[h+1]);h++);const f=Un(t[h],t[h+1],u);return a[h](f)};return r?u=>l(Et(t[0],t[i-1],u)):l}function l1(t,e){const r=t[t.length-1];for(let n=1;n<=e;n++){const s=Un(0,e,n);t.push(me(r,1,s))}}function u1(t){const e=[0];return l1(e,t.length-1),e}function d1(t,e){return t.map(r=>r*e)}function h1(t,e){return t.map(()=>e||Ip).splice(0,t.length-1)}function kn({duration:t=300,keyframes:e,times:r,ease:n="easeInOut"}){const s=Sk(n)?n.map(Ou):Ou(n),i={done:!1,value:e[0]},o=d1(r&&r.length===e.length?r:u1(e),t),a=c1(o,e,{ease:Array.isArray(s)?s:h1(e,s)});return{calculatedDuration:t,next:c=>(i.value=a(c),i.done=c>=t,i)}}const f1=t=>t!==null;function Rc(t,{repeat:e,repeatType:r="loop"},n,s=1){const i=t.filter(f1),a=s<0||e&&r!=="loop"&&e%2===1?0:i.length-1;return!a||n===void 0?i[a]:n}const p1={decay:fa,inertia:fa,tween:kn,keyframes:kn,spring:fi};function zp(t){typeof t.type=="string"&&(t.type=p1[t.type])}class Ic{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(e=>{this.resolve=e})}notifyFinished(){this.resolve()}then(e,r){return this.finished.then(e,r)}}const m1=t=>t/100;class Nc extends Ic{constructor(e){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{var n,s;const{motionValue:r}=this.options;r&&r.updatedAt!==Be.now()&&this.tick(Be.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),(s=(n=this.options).onStop)==null||s.call(n))},this.options=e,this.initAnimation(),this.play(),e.autoplay===!1&&this.pause()}initAnimation(){const{options:e}=this;zp(e);const{type:r=kn,repeat:n=0,repeatDelay:s=0,repeatType:i,velocity:o=0}=e;let{keyframes:a}=e;const c=r||kn;c!==kn&&typeof a[0]!="number"&&(this.mixKeyframes=os(m1,Vp(a[0],a[1])),a=[0,100]);const l=c({...e,keyframes:a});i==="mirror"&&(this.mirroredGenerator=c({...e,keyframes:[...a].reverse(),velocity:-o})),l.calculatedDuration===null&&(l.calculatedDuration=Cc(l));const{calculatedDuration:u}=l;this.calculatedDuration=u,this.resolvedDuration=u+s,this.totalDuration=this.resolvedDuration*(n+1)-s,this.generator=l}updateTime(e){const r=Math.round(e-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=r}tick(e,r=!1){const{generator:n,totalDuration:s,mixKeyframes:i,mirroredGenerator:o,resolvedDuration:a,calculatedDuration:c}=this;if(this.startTime===null)return n.next(0);const{delay:l=0,keyframes:u,repeat:h,repeatType:f,repeatDelay:p,type:m,onUpdate:y,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-s/this.speed,this.startTime)),r?this.currentTime=e:this.updateTime(e);const S=this.currentTime-l*(this.playbackSpeed>=0?1:-1),_=this.playbackSpeed>=0?S<0:S>s;this.currentTime=Math.max(S,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let b=this.currentTime,w=n;if(h){const T=Math.min(this.currentTime,s)/a;let j=Math.floor(T),P=T%1;!P&&T>=1&&(P=1),P===1&&j--,j=Math.min(j,h+1),!!(j%2)&&(f==="reverse"?(P=1-P,p&&(P-=p/a)):f==="mirror"&&(w=o)),b=Et(0,1,P)*a}const v=_?{done:!1,value:u[0]}:w.next(b);i&&(v.value=i(v.value));let{done:g}=v;!_&&c!==null&&(g=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const k=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&g);return k&&m!==fa&&(v.value=Rc(u,this.options,x,this.speed)),y&&y(v.value),k&&this.finish(),v}then(e,r){return this.finished.then(e,r)}get duration(){return dt(this.calculatedDuration)}get time(){return dt(this.currentTime)}set time(e){var r;e=ut(e),this.currentTime=e,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.playbackSpeed),(r=this.driver)==null||r.start(!1)}get speed(){return this.playbackSpeed}set speed(e){this.updateTime(Be.now());const r=this.playbackSpeed!==e;this.playbackSpeed=e,r&&(this.time=dt(this.currentTime))}play(){var s,i;if(this.isStopped)return;const{driver:e=Qk,startTime:r}=this.options;this.driver||(this.driver=e(o=>this.tick(o))),(i=(s=this.options).onPlay)==null||i.call(s);const n=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=n):this.holdTime!==null?this.startTime=n-this.holdTime:this.startTime||(this.startTime=r??n),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Be.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){var e,r;this.notifyFinished(),this.teardown(),this.state="finished",(r=(e=this.options).onComplete)==null||r.call(e)}cancel(){var e,r;this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),(r=(e=this.options).onCancel)==null||r.call(e)}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}attachTimeline(e){var r;return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),(r=this.driver)==null||r.stop(),e.observe(this)}}function g1(t){for(let e=1;e<t.length;e++)t[e]??(t[e]=t[e-1])}const cr=t=>t*180/Math.PI,pa=t=>{const e=cr(Math.atan2(t[1],t[0]));return ma(e)},y1={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:t=>(Math.abs(t[0])+Math.abs(t[3]))/2,rotate:pa,rotateZ:pa,skewX:t=>cr(Math.atan(t[1])),skewY:t=>cr(Math.atan(t[2])),skew:t=>(Math.abs(t[1])+Math.abs(t[2]))/2},ma=t=>(t=t%360,t<0&&(t+=360),t),Uu=pa,Bu=t=>Math.sqrt(t[0]*t[0]+t[1]*t[1]),Vu=t=>Math.sqrt(t[4]*t[4]+t[5]*t[5]),v1={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:Bu,scaleY:Vu,scale:t=>(Bu(t)+Vu(t))/2,rotateX:t=>ma(cr(Math.atan2(t[6],t[5]))),rotateY:t=>ma(cr(Math.atan2(-t[2],t[0]))),rotateZ:Uu,rotate:Uu,skewX:t=>cr(Math.atan(t[4])),skewY:t=>cr(Math.atan(t[1])),skew:t=>(Math.abs(t[1])+Math.abs(t[4]))/2};function ga(t){return t.includes("scale")?1:0}function ya(t,e){if(!t||t==="none")return ga(e);const r=t.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let n,s;if(r)n=v1,s=r;else{const a=t.match(/^matrix\(([-\d.e\s,]+)\)$/u);n=y1,s=a}if(!s)return ga(e);const i=n[e],o=s[1].split(",").map(b1);return typeof i=="function"?i(o):o[i]}const w1=(t,e)=>{const{transform:r="none"}=getComputedStyle(t);return ya(r,e)};function b1(t){return parseFloat(t.trim())}const un=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],dn=new Set(un),qu=t=>t===ln||t===K,_1=new Set(["x","y","z"]),x1=un.filter(t=>!_1.has(t));function S1(t){const e=[];return x1.forEach(r=>{const n=t.getValue(r);n!==void 0&&(e.push([r,n.get()]),n.set(r.startsWith("scale")?1:0))}),e}const fr={width:({x:t},{paddingLeft:e="0",paddingRight:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),height:({y:t},{paddingTop:e="0",paddingBottom:r="0"})=>t.max-t.min-parseFloat(e)-parseFloat(r),top:(t,{top:e})=>parseFloat(e),left:(t,{left:e})=>parseFloat(e),bottom:({y:t},{top:e})=>parseFloat(e)+(t.max-t.min),right:({x:t},{left:e})=>parseFloat(e)+(t.max-t.min),x:(t,{transform:e})=>ya(e,"x"),y:(t,{transform:e})=>ya(e,"y")};fr.translateX=fr.x;fr.translateY=fr.y;const pr=new Set;let va=!1,wa=!1,ba=!1;function Wp(){if(wa){const t=Array.from(pr).filter(n=>n.needsMeasurement),e=new Set(t.map(n=>n.element)),r=new Map;e.forEach(n=>{const s=S1(n);s.length&&(r.set(n,s),n.render())}),t.forEach(n=>n.measureInitialState()),e.forEach(n=>{n.render();const s=r.get(n);s&&s.forEach(([i,o])=>{var a;(a=n.getValue(i))==null||a.set(o)})}),t.forEach(n=>n.measureEndState()),t.forEach(n=>{n.suspendedScrollY!==void 0&&window.scrollTo(0,n.suspendedScrollY)})}wa=!1,va=!1,pr.forEach(t=>t.complete(ba)),pr.clear()}function Gp(){pr.forEach(t=>{t.readKeyframes(),t.needsMeasurement&&(wa=!0)})}function E1(){ba=!0,Gp(),Wp(),ba=!1}class Oc{constructor(e,r,n,s,i,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...e],this.onComplete=r,this.name=n,this.motionValue=s,this.element=i,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(pr.add(this),va||(va=!0,pe.read(Gp),pe.resolveKeyframes(Wp))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:r,element:n,motionValue:s}=this;if(e[0]===null){const i=s==null?void 0:s.get(),o=e[e.length-1];if(i!==void 0)e[0]=i;else if(n&&r){const a=n.readValue(r,o);a!=null&&(e[0]=a)}e[0]===void 0&&(e[0]=o),s&&i===void 0&&s.set(e[0])}g1(e)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(e=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,e),pr.delete(this)}cancel(){this.state==="scheduled"&&(pr.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const T1=t=>t.startsWith("--");function k1(t,e,r){T1(e)?t.style.setProperty(e,r):t.style[e]=r}const j1=_c(()=>window.ScrollTimeline!==void 0),A1={};function P1(t,e){const r=_c(t);return()=>A1[e]??r()}const Kp=P1(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wn=([t,e,r,n])=>`cubic-bezier(${t}, ${e}, ${r}, ${n})`,Hu={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:wn([0,.65,.55,1]),circOut:wn([.55,0,1,.45]),backIn:wn([.31,.01,.66,-.59]),backOut:wn([.33,1.53,.69,.99])};function Xp(t,e){if(t)return typeof t=="function"?Kp()?qp(t,e):"ease-out":Np(t)?wn(t):Array.isArray(t)?t.map(r=>Xp(r,e)||Hu.easeOut):Hu[t]}function C1(t,e,r,{delay:n=0,duration:s=300,repeat:i=0,repeatType:o="loop",ease:a="easeOut",times:c}={},l=void 0){const u={[e]:r};c&&(u.offset=c);const h=Xp(a,s);Array.isArray(h)&&(u.easing=h);const f={delay:n,duration:s,easing:Array.isArray(h)?"linear":h,fill:"both",iterations:i+1,direction:o==="reverse"?"alternate":"normal"};return l&&(f.pseudoElement=l),t.animate(u,f)}function Jp(t){return typeof t=="function"&&"applyToOptions"in t}function R1({type:t,...e}){return Jp(t)&&Kp()?t.applyToOptions(e):(e.duration??(e.duration=300),e.ease??(e.ease="easeOut"),e)}class I1 extends Ic{constructor(e){if(super(),this.finishedTime=null,this.isStopped=!1,!e)return;const{element:r,name:n,keyframes:s,pseudoElement:i,allowFlatten:o=!1,finalKeyframe:a,onComplete:c}=e;this.isPseudoElement=!!i,this.allowFlatten=o,this.options=e,bc(typeof e.type!="string");const l=R1(e);this.animation=C1(r,n,s,l,i),l.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!i){const u=Rc(s,this.options,a,this.speed);this.updateMotionValue?this.updateMotionValue(u):k1(r,n,u),this.animation.cancel()}c==null||c(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){var e,r;(r=(e=this.animation).finish)==null||r.call(e)}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:e}=this;e==="idle"||e==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){var e,r;this.isPseudoElement||(r=(e=this.animation).commitStyles)==null||r.call(e)}get duration(){var r,n;const e=((n=(r=this.animation.effect)==null?void 0:r.getComputedTiming)==null?void 0:n.call(r).duration)||0;return dt(Number(e))}get time(){return dt(Number(this.animation.currentTime)||0)}set time(e){this.finishedTime=null,this.animation.currentTime=ut(e)}get speed(){return this.animation.playbackRate}set speed(e){e<0&&(this.finishedTime=null),this.animation.playbackRate=e}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(e){this.animation.startTime=e}attachTimeline({timeline:e,observe:r}){var n;return this.allowFlatten&&((n=this.animation.effect)==null||n.updateTiming({easing:"linear"})),this.animation.onfinish=null,e&&j1()?(this.animation.timeline=e,Ze):r(this)}}const Yp={anticipate:Pp,backInOut:Ap,circInOut:Rp};function N1(t){return t in Yp}function O1(t){typeof t.ease=="string"&&N1(t.ease)&&(t.ease=Yp[t.ease])}const zu=10;class D1 extends I1{constructor(e){O1(e),zp(e),super(e),e.startTime&&(this.startTime=e.startTime),this.options=e}updateMotionValue(e){const{motionValue:r,onUpdate:n,onComplete:s,element:i,...o}=this.options;if(!r)return;if(e!==void 0){r.set(e);return}const a=new Nc({...o,autoplay:!1}),c=ut(this.finishedTime??this.time);r.setWithVelocity(a.sample(c-zu).value,a.sample(c).value,zu),a.stop()}}const Wu=(t,e)=>e==="zIndex"?!1:!!(typeof t=="number"||Array.isArray(t)||typeof t=="string"&&(Ht.test(t)||t==="0")&&!t.startsWith("url("));function L1(t){const e=t[0];if(t.length===1)return!0;for(let r=0;r<t.length;r++)if(t[r]!==e)return!0}function M1(t,e,r,n){const s=t[0];if(s===null)return!1;if(e==="display"||e==="visibility")return!0;const i=t[t.length-1],o=Wu(s,e),a=Wu(i,e);return!o||!a?!1:L1(t)||(r==="spring"||Jp(r))&&n}function _a(t){t.duration=0,t.type}const F1=new Set(["opacity","clipPath","filter","transform"]),$1=_c(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function U1(t){var u;const{motionValue:e,name:r,repeatDelay:n,repeatType:s,damping:i,type:o}=t;if(!(((u=e==null?void 0:e.owner)==null?void 0:u.current)instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:l}=e.owner.getProps();return $1()&&r&&F1.has(r)&&(r!=="transform"||!l)&&!c&&!n&&s!=="mirror"&&i!==0&&o!=="inertia"}const B1=40;class V1 extends Ic{constructor({autoplay:e=!0,delay:r=0,type:n="keyframes",repeat:s=0,repeatDelay:i=0,repeatType:o="loop",keyframes:a,name:c,motionValue:l,element:u,...h}){var m;super(),this.stop=()=>{var y,x;this._animation&&(this._animation.stop(),(y=this.stopTimeline)==null||y.call(this)),(x=this.keyframeResolver)==null||x.cancel()},this.createdAt=Be.now();const f={autoplay:e,delay:r,type:n,repeat:s,repeatDelay:i,repeatType:o,name:c,motionValue:l,element:u,...h},p=(u==null?void 0:u.KeyframeResolver)||Oc;this.keyframeResolver=new p(a,(y,x,S)=>this.onKeyframesResolved(y,x,f,!S),c,l,u),(m=this.keyframeResolver)==null||m.scheduleResolve()}onKeyframesResolved(e,r,n,s){this.keyframeResolver=void 0;const{name:i,type:o,velocity:a,delay:c,isHandoff:l,onUpdate:u}=n;this.resolvedAt=Be.now(),M1(e,i,o,a)||((Tt.instantAnimations||!c)&&(u==null||u(Rc(e,n,r))),e[0]=e[e.length-1],_a(n),n.repeat=0);const f={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>B1?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:r,...n,keyframes:e},p=!l&&U1(f)?new D1({...f,element:f.motionValue.owner.current}):new Nc(f);p.finished.then(()=>this.notifyFinished()).catch(Ze),this.pendingTimeline&&(this.stopTimeline=p.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=p}get finished(){return this._animation?this.animation.finished:this._finished}then(e,r){return this.finished.finally(e).then(()=>{})}get animation(){var e;return this._animation||((e=this.keyframeResolver)==null||e.resume(),E1()),this._animation}get duration(){return this.animation.duration}get time(){return this.animation.time}set time(e){this.animation.time=e}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(e){this.animation.speed=e}get startTime(){return this.animation.startTime}attachTimeline(e){return this._animation?this.stopTimeline=this.animation.attachTimeline(e):this.pendingTimeline=e,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){var e;this._animation&&this.animation.cancel(),(e=this.keyframeResolver)==null||e.cancel()}}const q1=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function H1(t){const e=q1.exec(t);if(!e)return[,];const[,r,n,s]=e;return[`--${r??n}`,s]}function Qp(t,e,r=1){const[n,s]=H1(t);if(!n)return;const i=window.getComputedStyle(e).getPropertyValue(n);if(i){const o=i.trim();return bp(o)?parseFloat(o):o}return kc(s)?Qp(s,e,r+1):s}function Dc(t,e){return(t==null?void 0:t[e])??(t==null?void 0:t.default)??t}const Zp=new Set(["width","height","top","left","right","bottom",...un]),z1={test:t=>t==="auto",parse:t=>t},em=t=>e=>e.test(t),tm=[ln,K,ht,Ct,Lk,Dk,z1],Gu=t=>tm.find(em(t));function W1(t){return typeof t=="number"?t===0:t!==null?t==="none"||t==="0"||xp(t):!0}const G1=new Set(["brightness","contrast","saturate","opacity"]);function K1(t){const[e,r]=t.slice(0,-1).split("(");if(e==="drop-shadow")return t;const[n]=r.match(jc)||[];if(!n)return t;const s=r.replace(n,"");let i=G1.has(e)?1:0;return n!==r&&(i*=100),e+"("+i+s+")"}const X1=/\b([a-z-]*)\(.*?\)/gu,xa={...Ht,getAnimatableNone:t=>{const e=t.match(X1);return e?e.map(K1).join(" "):t}},Ku={...ln,transform:Math.round},J1={rotate:Ct,rotateX:Ct,rotateY:Ct,rotateZ:Ct,scale:As,scaleX:As,scaleY:As,scaleZ:As,skew:Ct,skewX:Ct,skewY:Ct,distance:K,translateX:K,translateY:K,translateZ:K,x:K,y:K,z:K,perspective:K,transformPerspective:K,opacity:Bn,originX:Du,originY:Du,originZ:K},Lc={borderWidth:K,borderTopWidth:K,borderRightWidth:K,borderBottomWidth:K,borderLeftWidth:K,borderRadius:K,radius:K,borderTopLeftRadius:K,borderTopRightRadius:K,borderBottomRightRadius:K,borderBottomLeftRadius:K,width:K,maxWidth:K,height:K,maxHeight:K,top:K,right:K,bottom:K,left:K,padding:K,paddingTop:K,paddingRight:K,paddingBottom:K,paddingLeft:K,margin:K,marginTop:K,marginRight:K,marginBottom:K,marginLeft:K,backgroundPositionX:K,backgroundPositionY:K,...J1,zIndex:Ku,fillOpacity:Bn,strokeOpacity:Bn,numOctaves:Ku},Y1={...Lc,color:we,backgroundColor:we,outlineColor:we,fill:we,stroke:we,borderColor:we,borderTopColor:we,borderRightColor:we,borderBottomColor:we,borderLeftColor:we,filter:xa,WebkitFilter:xa},rm=t=>Y1[t];function nm(t,e){let r=rm(t);return r!==xa&&(r=Ht),r.getAnimatableNone?r.getAnimatableNone(e):void 0}const Q1=new Set(["auto","none","0"]);function Z1(t,e,r){let n=0,s;for(;n<t.length&&!s;){const i=t[n];typeof i=="string"&&!Q1.has(i)&&Vn(i).values.length&&(s=t[n]),n++}if(s&&r)for(const i of e)t[i]=nm(r,s)}class ej extends Oc{constructor(e,r,n,s,i){super(e,r,n,s,i,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:r,name:n}=this;if(!r||!r.current)return;super.readKeyframes();for(let c=0;c<e.length;c++){let l=e[c];if(typeof l=="string"&&(l=l.trim(),kc(l))){const u=Qp(l,r.current);u!==void 0&&(e[c]=u),c===e.length-1&&(this.finalKeyframe=l)}}if(this.resolveNoneKeyframes(),!Zp.has(n)||e.length!==2)return;const[s,i]=e,o=Gu(s),a=Gu(i);if(o!==a)if(qu(o)&&qu(a))for(let c=0;c<e.length;c++){const l=e[c];typeof l=="string"&&(e[c]=parseFloat(l))}else fr[n]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:r}=this,n=[];for(let s=0;s<e.length;s++)(e[s]===null||W1(e[s]))&&n.push(s);n.length&&Z1(e,n,r)}measureInitialState(){const{element:e,unresolvedKeyframes:r,name:n}=this;if(!e||!e.current)return;n==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=fr[n](e.measureViewportBox(),window.getComputedStyle(e.current)),r[0]=this.measuredOrigin;const s=r[r.length-1];s!==void 0&&e.getValue(n,s).jump(s,!1)}measureEndState(){var a;const{element:e,name:r,unresolvedKeyframes:n}=this;if(!e||!e.current)return;const s=e.getValue(r);s&&s.jump(this.measuredOrigin,!1);const i=n.length-1,o=n[i];n[i]=fr[r](e.measureViewportBox(),window.getComputedStyle(e.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),(a=this.removedTransforms)!=null&&a.length&&this.removedTransforms.forEach(([c,l])=>{e.getValue(c).set(l)}),this.resolveNoneKeyframes()}}function tj(t,e,r){if(t instanceof EventTarget)return[t];if(typeof t=="string"){let n=document;const s=(r==null?void 0:r[t])??n.querySelectorAll(t);return s?Array.from(s):[]}return Array.from(t)}const sm=(t,e)=>e&&typeof t=="number"?e.transform(t):t;function im(t){return _p(t)&&"offsetHeight"in t}const Xu=30,rj=t=>!isNaN(parseFloat(t));class nj{constructor(e,r={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=n=>{var i;const s=Be.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(n),this.current!==this.prev&&((i=this.events.change)==null||i.notify(this.current),this.dependents))for(const o of this.dependents)o.dirty()},this.hasAnimated=!1,this.setCurrent(e),this.owner=r.owner}setCurrent(e){this.current=e,this.updatedAt=Be.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=rj(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,r){this.events[e]||(this.events[e]=new xc);const n=this.events[e].add(r);return e==="change"?()=>{n(),pe.read(()=>{this.events.change.getSize()||this.stop()})}:n}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,r){this.passiveEffect=e,this.stopPassiveEffect=r}set(e){this.passiveEffect?this.passiveEffect(e,this.updateAndNotify):this.updateAndNotify(e)}setWithVelocity(e,r,n){this.set(r),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-n}jump(e,r=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,r&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){var e;(e=this.events.change)==null||e.notify(this.current)}addDependent(e){this.dependents||(this.dependents=new Set),this.dependents.add(e)}removeDependent(e){this.dependents&&this.dependents.delete(e)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=Be.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>Xu)return 0;const r=Math.min(this.updatedAt-this.prevUpdatedAt,Xu);return Sp(parseFloat(this.current)-parseFloat(this.prevFrameValue),r)}start(e){return this.stop(),new Promise(r=>{this.hasAnimated=!0,this.animation=e(r),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){var e,r;(e=this.dependents)==null||e.clear(),(r=this.events.destroy)==null||r.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function Yr(t,e){return new nj(t,e)}const{schedule:Mc}=Op(queueMicrotask,!1),st={x:!1,y:!1};function om(){return st.x||st.y}function sj(t){return t==="x"||t==="y"?st[t]?null:(st[t]=!0,()=>{st[t]=!1}):st.x||st.y?null:(st.x=st.y=!0,()=>{st.x=st.y=!1})}function am(t,e){const r=tj(t),n=new AbortController,s={passive:!0,...e,signal:n.signal};return[r,s,()=>n.abort()]}function Ju(t){return!(t.pointerType==="touch"||om())}function ij(t,e,r={}){const[n,s,i]=am(t,r),o=a=>{if(!Ju(a))return;const{target:c}=a,l=e(c,a);if(typeof l!="function"||!c)return;const u=h=>{Ju(h)&&(l(h),c.removeEventListener("pointerleave",u))};c.addEventListener("pointerleave",u,s)};return n.forEach(a=>{a.addEventListener("pointerenter",o,s)}),i}const cm=(t,e)=>e?t===e?!0:cm(t,e.parentElement):!1,Fc=t=>t.pointerType==="mouse"?typeof t.button!="number"||t.button<=0:t.isPrimary!==!1,oj=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function aj(t){return oj.has(t.tagName)||t.tabIndex!==-1}const Hs=new WeakSet;function Yu(t){return e=>{e.key==="Enter"&&t(e)}}function vo(t,e){t.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const cj=(t,e)=>{const r=t.currentTarget;if(!r)return;const n=Yu(()=>{if(Hs.has(r))return;vo(r,"down");const s=Yu(()=>{vo(r,"up")}),i=()=>vo(r,"cancel");r.addEventListener("keyup",s,e),r.addEventListener("blur",i,e)});r.addEventListener("keydown",n,e),r.addEventListener("blur",()=>r.removeEventListener("keydown",n),e)};function Qu(t){return Fc(t)&&!om()}function lj(t,e,r={}){const[n,s,i]=am(t,r),o=a=>{const c=a.currentTarget;if(!Qu(a))return;Hs.add(c);const l=e(c,a),u=(p,m)=>{window.removeEventListener("pointerup",h),window.removeEventListener("pointercancel",f),Hs.has(c)&&Hs.delete(c),Qu(p)&&typeof l=="function"&&l(p,{success:m})},h=p=>{u(p,c===window||c===document||r.useGlobalTarget||cm(c,p.target))},f=p=>{u(p,!1)};window.addEventListener("pointerup",h,s),window.addEventListener("pointercancel",f,s)};return n.forEach(a=>{(r.useGlobalTarget?window:a).addEventListener("pointerdown",o,s),im(a)&&(a.addEventListener("focus",l=>cj(l,s)),!aj(a)&&!a.hasAttribute("tabindex")&&(a.tabIndex=0))}),i}function lm(t){return _p(t)&&"ownerSVGElement"in t}function uj(t){return lm(t)&&t.tagName==="svg"}const Ne=t=>!!(t&&t.getVelocity),dj=[...tm,we,Ht],hj=t=>dj.find(em(t)),$c=E.createContext({transformPagePoint:t=>t,isStatic:!1,reducedMotion:"never"});class fj extends E.Component{getSnapshotBeforeUpdate(e){const r=this.props.childRef.current;if(r&&e.isPresent&&!this.props.isPresent){const n=r.offsetParent,s=im(n)&&n.offsetWidth||0,i=this.props.sizeRef.current;i.height=r.offsetHeight||0,i.width=r.offsetWidth||0,i.top=r.offsetTop,i.left=r.offsetLeft,i.right=s-i.width-i.left}return null}componentDidUpdate(){}render(){return this.props.children}}function pj({children:t,isPresent:e,anchorX:r,root:n}){const s=E.useId(),i=E.useRef(null),o=E.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:a}=E.useContext($c);return E.useInsertionEffect(()=>{const{width:c,height:l,top:u,left:h,right:f}=o.current;if(e||!i.current||!c||!l)return;const p=r==="left"?`left: ${h}`:`right: ${f}`;i.current.dataset.motionPopId=s;const m=document.createElement("style");a&&(m.nonce=a);const y=n??document.head;return y.appendChild(m),m.sheet&&m.sheet.insertRule(`
          [data-motion-pop-id="${s}"] {
            position: absolute !important;
            width: ${c}px !important;
            height: ${l}px !important;
            ${p}px !important;
            top: ${u}px !important;
          }
        `),()=>{y.contains(m)&&y.removeChild(m)}},[e]),d.jsx(fj,{isPresent:e,childRef:i,sizeRef:o,children:E.cloneElement(t,{ref:i})})}const mj=({children:t,initial:e,isPresent:r,onExitComplete:n,custom:s,presenceAffectsLayout:i,mode:o,anchorX:a,root:c})=>{const l=gc(gj),u=E.useId();let h=!0,f=E.useMemo(()=>(h=!1,{id:u,initial:e,isPresent:r,custom:s,onExitComplete:p=>{l.set(p,!0);for(const m of l.values())if(!m)return;n&&n()},register:p=>(l.set(p,!1),()=>l.delete(p))}),[r,l,n]);return i&&h&&(f={...f}),E.useMemo(()=>{l.forEach((p,m)=>l.set(m,!1))},[r]),E.useEffect(()=>{!r&&!l.size&&n&&n()},[r]),o==="popLayout"&&(t=d.jsx(pj,{isPresent:r,anchorX:a,root:c,children:t})),d.jsx(Pi.Provider,{value:f,children:t})};function gj(){return new Map}function um(t=!0){const e=E.useContext(Pi);if(e===null)return[!0,null];const{isPresent:r,onExitComplete:n,register:s}=e,i=E.useId();E.useEffect(()=>{if(t)return s(i)},[t]);const o=E.useCallback(()=>t&&n&&n(i),[i,n,t]);return!r&&n?[!1,o]:[!0]}const Ps=t=>t.key||"";function Zu(t){const e=[];return E.Children.forEach(t,r=>{E.isValidElement(r)&&e.push(r)}),e}const ed=({children:t,custom:e,initial:r=!0,onExitComplete:n,presenceAffectsLayout:s=!0,mode:i="sync",propagate:o=!1,anchorX:a="left",root:c})=>{const[l,u]=um(o),h=E.useMemo(()=>Zu(t),[t]),f=o&&!l?[]:h.map(Ps),p=E.useRef(!0),m=E.useRef(h),y=gc(()=>new Map),[x,S]=E.useState(h),[_,b]=E.useState(h);wp(()=>{p.current=!1,m.current=h;for(let g=0;g<_.length;g++){const k=Ps(_[g]);f.includes(k)?y.delete(k):y.get(k)!==!0&&y.set(k,!1)}},[_,f.length,f.join("-")]);const w=[];if(h!==x){let g=[...h];for(let k=0;k<_.length;k++){const T=_[k],j=Ps(T);f.includes(j)||(g.splice(k,0,T),w.push(T))}return i==="wait"&&w.length&&(g=w),b(Zu(g)),S(h),null}const{forceRender:v}=E.useContext(mc);return d.jsx(d.Fragment,{children:_.map(g=>{const k=Ps(g),T=o&&!l?!1:h===_||f.includes(k),j=()=>{if(y.has(k))y.set(k,!0);else return;let P=!0;y.forEach(C=>{C||(P=!1)}),P&&(v==null||v(),b(m.current),o&&(u==null||u()),n&&n())};return d.jsx(mj,{isPresent:T,initial:!p.current||r?void 0:!1,custom:e,presenceAffectsLayout:s,mode:i,root:c,onExitComplete:T?void 0:j,anchorX:a,children:g},k)})})},dm=E.createContext({strict:!1}),td={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Qr={};for(const t in td)Qr[t]={isEnabled:e=>td[t].some(r=>!!e[r])};function yj(t){for(const e in t)Qr[e]={...Qr[e],...t[e]}}const vj=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pi(t){return t.startsWith("while")||t.startsWith("drag")&&t!=="draggable"||t.startsWith("layout")||t.startsWith("onTap")||t.startsWith("onPan")||t.startsWith("onLayout")||vj.has(t)}let hm=t=>!pi(t);function wj(t){typeof t=="function"&&(hm=e=>e.startsWith("on")?!pi(e):t(e))}try{wj(require("@emotion/is-prop-valid").default)}catch{}function bj(t,e,r){const n={};for(const s in t)s==="values"&&typeof t.values=="object"||(hm(s)||r===!0&&pi(s)||!e&&!pi(s)||t.draggable&&s.startsWith("onDrag"))&&(n[s]=t[s]);return n}const Ci=E.createContext({});function Ri(t){return t!==null&&typeof t=="object"&&typeof t.start=="function"}function qn(t){return typeof t=="string"||Array.isArray(t)}const Uc=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],Bc=["initial",...Uc];function Ii(t){return Ri(t.animate)||Bc.some(e=>qn(t[e]))}function fm(t){return!!(Ii(t)||t.variants)}function _j(t,e){if(Ii(t)){const{initial:r,animate:n}=t;return{initial:r===!1||qn(r)?r:void 0,animate:qn(n)?n:void 0}}return t.inherit!==!1?e:{}}function xj(t){const{initial:e,animate:r}=_j(t,E.useContext(Ci));return E.useMemo(()=>({initial:e,animate:r}),[rd(e),rd(r)])}function rd(t){return Array.isArray(t)?t.join(" "):t}const Hn={};function Sj(t){for(const e in t)Hn[e]=t[e],Tc(e)&&(Hn[e].isCSSVariable=!0)}function pm(t,{layout:e,layoutId:r}){return dn.has(t)||t.startsWith("origin")||(e||r!==void 0)&&(!!Hn[t]||t==="opacity")}const Ej={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Tj=un.length;function kj(t,e,r){let n="",s=!0;for(let i=0;i<Tj;i++){const o=un[i],a=t[o];if(a===void 0)continue;let c=!0;if(typeof a=="number"?c=a===(o.startsWith("scale")?1:0):c=parseFloat(a)===0,!c||r){const l=sm(a,Lc[o]);if(!c){s=!1;const u=Ej[o]||o;n+=`${u}(${l}) `}r&&(e[o]=l)}}return n=n.trim(),r?n=r(e,s?"":n):s&&(n="none"),n}function Vc(t,e,r){const{style:n,vars:s,transformOrigin:i}=t;let o=!1,a=!1;for(const c in e){const l=e[c];if(dn.has(c)){o=!0;continue}else if(Tc(c)){s[c]=l;continue}else{const u=sm(l,Lc[c]);c.startsWith("origin")?(a=!0,i[c]=u):n[c]=u}}if(e.transform||(o||r?n.transform=kj(e,t.transform,r):n.transform&&(n.transform="none")),a){const{originX:c="50%",originY:l="50%",originZ:u=0}=i;n.transformOrigin=`${c} ${l} ${u}`}}const qc=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function mm(t,e,r){for(const n in e)!Ne(e[n])&&!pm(n,r)&&(t[n]=e[n])}function jj({transformTemplate:t},e){return E.useMemo(()=>{const r=qc();return Vc(r,e,t),Object.assign({},r.vars,r.style)},[e])}function Aj(t,e){const r=t.style||{},n={};return mm(n,r,t),Object.assign(n,jj(t,e)),n}function Pj(t,e){const r={},n=Aj(t,e);return t.drag&&t.dragListener!==!1&&(r.draggable=!1,n.userSelect=n.WebkitUserSelect=n.WebkitTouchCallout="none",n.touchAction=t.drag===!0?"none":`pan-${t.drag==="x"?"y":"x"}`),t.tabIndex===void 0&&(t.onTap||t.onTapStart||t.whileTap)&&(r.tabIndex=0),r.style=n,r}const Cj={offset:"stroke-dashoffset",array:"stroke-dasharray"},Rj={offset:"strokeDashoffset",array:"strokeDasharray"};function Ij(t,e,r=1,n=0,s=!0){t.pathLength=1;const i=s?Cj:Rj;t[i.offset]=K.transform(-n);const o=K.transform(e),a=K.transform(r);t[i.array]=`${o} ${a}`}function gm(t,{attrX:e,attrY:r,attrScale:n,pathLength:s,pathSpacing:i=1,pathOffset:o=0,...a},c,l,u){if(Vc(t,a,l),c){t.style.viewBox&&(t.attrs.viewBox=t.style.viewBox);return}t.attrs=t.style,t.style={};const{attrs:h,style:f}=t;h.transform&&(f.transform=h.transform,delete h.transform),(f.transform||h.transformOrigin)&&(f.transformOrigin=h.transformOrigin??"50% 50%",delete h.transformOrigin),f.transform&&(f.transformBox=(u==null?void 0:u.transformBox)??"fill-box",delete h.transformBox),e!==void 0&&(h.x=e),r!==void 0&&(h.y=r),n!==void 0&&(h.scale=n),s!==void 0&&Ij(h,s,i,o,!1)}const ym=()=>({...qc(),attrs:{}}),vm=t=>typeof t=="string"&&t.toLowerCase()==="svg";function Nj(t,e,r,n){const s=E.useMemo(()=>{const i=ym();return gm(i,e,vm(n),t.transformTemplate,t.style),{...i.attrs,style:{...i.style}}},[e]);if(t.style){const i={};mm(i,t.style,t),s.style={...i,...s.style}}return s}const Oj=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function Hc(t){return typeof t!="string"||t.includes("-")?!1:!!(Oj.indexOf(t)>-1||/[A-Z]/u.test(t))}function Dj(t,e,r,{latestValues:n},s,i=!1){const a=(Hc(t)?Nj:Pj)(e,n,s,t),c=bj(e,typeof t=="string",i),l=t!==E.Fragment?{...c,...a,ref:r}:{},{children:u}=e,h=E.useMemo(()=>Ne(u)?u.get():u,[u]);return E.createElement(t,{...l,children:h})}function nd(t){const e=[{},{}];return t==null||t.values.forEach((r,n)=>{e[0][n]=r.get(),e[1][n]=r.getVelocity()}),e}function zc(t,e,r,n){if(typeof e=="function"){const[s,i]=nd(n);e=e(r!==void 0?r:t.custom,s,i)}if(typeof e=="string"&&(e=t.variants&&t.variants[e]),typeof e=="function"){const[s,i]=nd(n);e=e(r!==void 0?r:t.custom,s,i)}return e}function zs(t){return Ne(t)?t.get():t}function Lj({scrapeMotionValuesFromProps:t,createRenderState:e},r,n,s){return{latestValues:Mj(r,n,s,t),renderState:e()}}function Mj(t,e,r,n){const s={},i=n(t,{});for(const f in i)s[f]=zs(i[f]);let{initial:o,animate:a}=t;const c=Ii(t),l=fm(t);e&&l&&!c&&t.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=r?r.initial===!1:!1;u=u||o===!1;const h=u?a:o;if(h&&typeof h!="boolean"&&!Ri(h)){const f=Array.isArray(h)?h:[h];for(let p=0;p<f.length;p++){const m=zc(t,f[p]);if(m){const{transitionEnd:y,transition:x,...S}=m;for(const _ in S){let b=S[_];if(Array.isArray(b)){const w=u?b.length-1:0;b=b[w]}b!==null&&(s[_]=b)}for(const _ in y)s[_]=y[_]}}}return s}const wm=t=>(e,r)=>{const n=E.useContext(Ci),s=E.useContext(Pi),i=()=>Lj(t,e,n,s);return r?i():gc(i)};function Wc(t,e,r){var i;const{style:n}=t,s={};for(const o in n)(Ne(n[o])||e.style&&Ne(e.style[o])||pm(o,t)||((i=r==null?void 0:r.getValue(o))==null?void 0:i.liveStyle)!==void 0)&&(s[o]=n[o]);return s}const Fj=wm({scrapeMotionValuesFromProps:Wc,createRenderState:qc});function bm(t,e,r){const n=Wc(t,e,r);for(const s in t)if(Ne(t[s])||Ne(e[s])){const i=un.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;n[i]=t[s]}return n}const $j=wm({scrapeMotionValuesFromProps:bm,createRenderState:ym}),Uj=Symbol.for("motionComponentSymbol");function $r(t){return t&&typeof t=="object"&&Object.prototype.hasOwnProperty.call(t,"current")}function Bj(t,e,r){return E.useCallback(n=>{n&&t.onMount&&t.onMount(n),e&&(n?e.mount(n):e.unmount()),r&&(typeof r=="function"?r(n):$r(r)&&(r.current=n))},[e])}const Gc=t=>t.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Vj="framerAppearId",_m="data-"+Gc(Vj),xm=E.createContext({});function qj(t,e,r,n,s){var y,x;const{visualElement:i}=E.useContext(Ci),o=E.useContext(dm),a=E.useContext(Pi),c=E.useContext($c).reducedMotion,l=E.useRef(null);n=n||o.renderer,!l.current&&n&&(l.current=n(t,{visualState:e,parent:i,props:r,presenceContext:a,blockInitialAnimation:a?a.initial===!1:!1,reducedMotionConfig:c}));const u=l.current,h=E.useContext(xm);u&&!u.projection&&s&&(u.type==="html"||u.type==="svg")&&Hj(l.current,r,s,h);const f=E.useRef(!1);E.useInsertionEffect(()=>{u&&f.current&&u.update(r,a)});const p=r[_m],m=E.useRef(!!p&&!((y=window.MotionHandoffIsComplete)!=null&&y.call(window,p))&&((x=window.MotionHasOptimisedAnimation)==null?void 0:x.call(window,p)));return wp(()=>{u&&(f.current=!0,window.MotionIsMounted=!0,u.updateFeatures(),u.scheduleRenderMicrotask(),m.current&&u.animationState&&u.animationState.animateChanges())}),E.useEffect(()=>{u&&(!m.current&&u.animationState&&u.animationState.animateChanges(),m.current&&(queueMicrotask(()=>{var S;(S=window.MotionHandoffMarkAsComplete)==null||S.call(window,p)}),m.current=!1),u.enteringChildren=void 0)}),u}function Hj(t,e,r,n){const{layoutId:s,layout:i,drag:o,dragConstraints:a,layoutScroll:c,layoutRoot:l,layoutCrossfade:u}=e;t.projection=new r(t.latestValues,e["data-framer-portal-id"]?void 0:Sm(t.parent)),t.projection.setOptions({layoutId:s,layout:i,alwaysMeasureLayout:!!o||a&&$r(a),visualElement:t,animationType:typeof i=="string"?i:"both",initialPromotionConfig:n,crossfade:u,layoutScroll:c,layoutRoot:l})}function Sm(t){if(t)return t.options.allowProjection!==!1?t.projection:Sm(t.parent)}function wo(t,{forwardMotionProps:e=!1}={},r,n){r&&yj(r);const s=Hc(t)?$j:Fj;function i(a,c){let l;const u={...E.useContext($c),...a,layoutId:zj(a)},{isStatic:h}=u,f=xj(a),p=s(a,h);if(!h&&yc){Wj();const m=Gj(u);l=m.MeasureLayout,f.visualElement=qj(t,p,u,n,m.ProjectionNode)}return d.jsxs(Ci.Provider,{value:f,children:[l&&f.visualElement?d.jsx(l,{visualElement:f.visualElement,...u}):null,Dj(t,a,Bj(p,f.visualElement,c),p,h,e)]})}i.displayName=`motion.${typeof t=="string"?t:`create(${t.displayName??t.name??""})`}`;const o=E.forwardRef(i);return o[Uj]=t,o}function zj({layoutId:t}){const e=E.useContext(mc).id;return e&&t!==void 0?e+"-"+t:t}function Wj(t,e){E.useContext(dm).strict}function Gj(t){const{drag:e,layout:r}=Qr;if(!e&&!r)return{};const n={...e,...r};return{MeasureLayout:e!=null&&e.isEnabled(t)||r!=null&&r.isEnabled(t)?n.MeasureLayout:void 0,ProjectionNode:n.ProjectionNode}}function Kj(t,e){if(typeof Proxy>"u")return wo;const r=new Map,n=(i,o)=>wo(i,o,t,e),s=(i,o)=>n(i,o);return new Proxy(s,{get:(i,o)=>o==="create"?n:(r.has(o)||r.set(o,wo(o,void 0,t,e)),r.get(o))})}function Em({top:t,left:e,right:r,bottom:n}){return{x:{min:e,max:r},y:{min:t,max:n}}}function Xj({x:t,y:e}){return{top:e.min,right:t.max,bottom:e.max,left:t.min}}function Jj(t,e){if(!e)return t;const r=e({x:t.left,y:t.top}),n=e({x:t.right,y:t.bottom});return{top:r.y,left:r.x,bottom:n.y,right:n.x}}function bo(t){return t===void 0||t===1}function Sa({scale:t,scaleX:e,scaleY:r}){return!bo(t)||!bo(e)||!bo(r)}function tr(t){return Sa(t)||Tm(t)||t.z||t.rotate||t.rotateX||t.rotateY||t.skewX||t.skewY}function Tm(t){return sd(t.x)||sd(t.y)}function sd(t){return t&&t!=="0%"}function mi(t,e,r){const n=t-r,s=e*n;return r+s}function id(t,e,r,n,s){return s!==void 0&&(t=mi(t,s,n)),mi(t,r,n)+e}function Ea(t,e=0,r=1,n,s){t.min=id(t.min,e,r,n,s),t.max=id(t.max,e,r,n,s)}function km(t,{x:e,y:r}){Ea(t.x,e.translate,e.scale,e.originPoint),Ea(t.y,r.translate,r.scale,r.originPoint)}const od=.999999999999,ad=1.0000000000001;function Yj(t,e,r,n=!1){const s=r.length;if(!s)return;e.x=e.y=1;let i,o;for(let a=0;a<s;a++){i=r[a],o=i.projectionDelta;const{visualElement:c}=i.options;c&&c.props.style&&c.props.style.display==="contents"||(n&&i.options.layoutScroll&&i.scroll&&i!==i.root&&Br(t,{x:-i.scroll.offset.x,y:-i.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,km(t,o)),n&&tr(i.latestValues)&&Br(t,i.latestValues))}e.x<ad&&e.x>od&&(e.x=1),e.y<ad&&e.y>od&&(e.y=1)}function Ur(t,e){t.min=t.min+e,t.max=t.max+e}function cd(t,e,r,n,s=.5){const i=me(t.min,t.max,s);Ea(t,e,r,i,n)}function Br(t,e){cd(t.x,e.x,e.scaleX,e.scale,e.originX),cd(t.y,e.y,e.scaleY,e.scale,e.originY)}function jm(t,e){return Em(Jj(t.getBoundingClientRect(),e))}function Qj(t,e,r){const n=jm(t,r),{scroll:s}=e;return s&&(Ur(n.x,s.offset.x),Ur(n.y,s.offset.y)),n}const ld=()=>({translate:0,scale:1,origin:0,originPoint:0}),Vr=()=>({x:ld(),y:ld()}),ud=()=>({min:0,max:0}),ve=()=>({x:ud(),y:ud()}),Ta={current:null},Am={current:!1};function Zj(){if(Am.current=!0,!!yc)if(window.matchMedia){const t=window.matchMedia("(prefers-reduced-motion)"),e=()=>Ta.current=t.matches;t.addEventListener("change",e),e()}else Ta.current=!1}const eA=new WeakMap;function tA(t,e,r){for(const n in e){const s=e[n],i=r[n];if(Ne(s))t.addValue(n,s);else if(Ne(i))t.addValue(n,Yr(s,{owner:t}));else if(i!==s)if(t.hasValue(n)){const o=t.getValue(n);o.liveStyle===!0?o.jump(s):o.hasAnimated||o.set(s)}else{const o=t.getStaticValue(n);t.addValue(n,Yr(o!==void 0?o:s,{owner:t}))}}for(const n in r)e[n]===void 0&&t.removeValue(n);return e}const dd=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class rA{scrapeMotionValuesFromProps(e,r,n){return{}}constructor({parent:e,props:r,presenceContext:n,reducedMotionConfig:s,blockInitialAnimation:i,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=Oc,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const f=Be.now();this.renderScheduledAt<f&&(this.renderScheduledAt=f,pe.render(this.render,!1,!0))};const{latestValues:c,renderState:l}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=r.initial?{...c}:{},this.renderState=l,this.parent=e,this.props=r,this.presenceContext=n,this.depth=e?e.depth+1:0,this.reducedMotionConfig=s,this.options=a,this.blockInitialAnimation=!!i,this.isControllingVariants=Ii(r),this.isVariantNode=fm(r),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...h}=this.scrapeMotionValuesFromProps(r,{},this);for(const f in h){const p=h[f];c[f]!==void 0&&Ne(p)&&p.set(c[f])}}mount(e){var r;this.current=e,eA.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,s)=>this.bindToMotionValue(s,n)),Am.current||Zj(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:Ta.current,(r=this.parent)==null||r.addChild(this),this.update(this.props,this.presenceContext)}unmount(){var e;this.projection&&this.projection.unmount(),qt(this.notifyUpdate),qt(this.render),this.valueSubscriptions.forEach(r=>r()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),(e=this.parent)==null||e.removeChild(this);for(const r in this.events)this.events[r].clear();for(const r in this.features){const n=this.features[r];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(e){this.children.add(e),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(e)}removeChild(e){this.children.delete(e),this.enteringChildren&&this.enteringChildren.delete(e)}bindToMotionValue(e,r){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const n=dn.has(e);n&&this.onBindTransform&&this.onBindTransform();const s=r.on("change",o=>{this.latestValues[e]=o,this.props.onUpdate&&pe.preRender(this.notifyUpdate),n&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let i;window.MotionCheckAppearSync&&(i=window.MotionCheckAppearSync(this,e,r)),this.valueSubscriptions.set(e,()=>{s(),i&&i(),r.owner&&r.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in Qr){const r=Qr[e];if(!r)continue;const{isEnabled:n,Feature:s}=r;if(!this.features[e]&&s&&n(this.props)&&(this.features[e]=new s(this)),this.features[e]){const i=this.features[e];i.isMounted?i.update():(i.mount(),i.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ve()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,r){this.latestValues[e]=r}update(e,r){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=r;for(let n=0;n<dd.length;n++){const s=dd[n];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const i="on"+s,o=e[i];o&&(this.propEventSubscriptions[s]=this.on(s,o))}this.prevMotionValues=tA(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const r=this.getClosestVariantNode();if(r)return r.variantChildren&&r.variantChildren.add(e),()=>r.variantChildren.delete(e)}addValue(e,r){const n=this.values.get(e);r!==n&&(n&&this.removeValue(e),this.bindToMotionValue(e,r),this.values.set(e,r),this.latestValues[e]=r.get())}removeValue(e){this.values.delete(e);const r=this.valueSubscriptions.get(e);r&&(r(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,r){if(this.props.values&&this.props.values[e])return this.props.values[e];let n=this.values.get(e);return n===void 0&&r!==void 0&&(n=Yr(r===null?void 0:r,{owner:this}),this.addValue(e,n)),n}readValue(e,r){let n=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:this.getBaseTargetFromProps(this.props,e)??this.readValueFromInstance(this.current,e,this.options);return n!=null&&(typeof n=="string"&&(bp(n)||xp(n))?n=parseFloat(n):!hj(n)&&Ht.test(r)&&(n=nm(e,r)),this.setBaseTarget(e,Ne(n)?n.get():n)),Ne(n)?n.get():n}setBaseTarget(e,r){this.baseTarget[e]=r}getBaseTarget(e){var i;const{initial:r}=this.props;let n;if(typeof r=="string"||typeof r=="object"){const o=zc(this.props,r,(i=this.presenceContext)==null?void 0:i.custom);o&&(n=o[e])}if(r&&n!==void 0)return n;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Ne(s)?s:this.initialValues[e]!==void 0&&n===void 0?void 0:this.baseTarget[e]}on(e,r){return this.events[e]||(this.events[e]=new xc),this.events[e].add(r)}notify(e,...r){this.events[e]&&this.events[e].notify(...r)}scheduleRenderMicrotask(){Mc.render(this.render)}}class Pm extends rA{constructor(){super(...arguments),this.KeyframeResolver=ej}sortInstanceNodePosition(e,r){return e.compareDocumentPosition(r)&2?1:-1}getBaseTargetFromProps(e,r){return e.style?e.style[r]:void 0}removeValueFromRenderState(e,{vars:r,style:n}){delete r[e],delete n[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Ne(e)&&(this.childSubscription=e.on("change",r=>{this.current&&(this.current.textContent=`${r}`)}))}}function Cm(t,{style:e,vars:r},n,s){const i=t.style;let o;for(o in e)i[o]=e[o];s==null||s.applyProjectionStyles(i,n);for(o in r)i.setProperty(o,r[o])}function nA(t){return window.getComputedStyle(t)}class sA extends Pm{constructor(){super(...arguments),this.type="html",this.renderInstance=Cm}readValueFromInstance(e,r){var n;if(dn.has(r))return(n=this.projection)!=null&&n.isProjecting?ga(r):w1(e,r);{const s=nA(e),i=(Tc(r)?s.getPropertyValue(r):s[r])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(e,{transformPagePoint:r}){return jm(e,r)}build(e,r,n){Vc(e,r,n.transformTemplate)}scrapeMotionValuesFromProps(e,r,n){return Wc(e,r,n)}}const Rm=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function iA(t,e,r,n){Cm(t,e,void 0,n);for(const s in e.attrs)t.setAttribute(Rm.has(s)?s:Gc(s),e.attrs[s])}class oA extends Pm{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ve}getBaseTargetFromProps(e,r){return e[r]}readValueFromInstance(e,r){if(dn.has(r)){const n=rm(r);return n&&n.default||0}return r=Rm.has(r)?r:Gc(r),e.getAttribute(r)}scrapeMotionValuesFromProps(e,r,n){return bm(e,r,n)}build(e,r,n){gm(e,r,this.isSVGTag,n.transformTemplate,n.style)}renderInstance(e,r,n,s){iA(e,r,n,s)}mount(e){this.isSVGTag=vm(e.tagName),super.mount(e)}}const aA=(t,e)=>Hc(t)?new oA(e):new sA(e,{allowProjection:t!==E.Fragment});function qr(t,e,r){const n=t.getProps();return zc(n,e,r!==void 0?r:n.custom,t)}const ka=t=>Array.isArray(t);function cA(t,e,r){t.hasValue(e)?t.getValue(e).set(r):t.addValue(e,Yr(r))}function lA(t){return ka(t)?t[t.length-1]||0:t}function uA(t,e){const r=qr(t,e);let{transitionEnd:n={},transition:s={},...i}=r||{};i={...i,...n};for(const o in i){const a=lA(i[o]);cA(t,o,a)}}function dA(t){return!!(Ne(t)&&t.add)}function ja(t,e){const r=t.getValue("willChange");if(dA(r))return r.add(e);if(!r&&Tt.WillChange){const n=new Tt.WillChange("auto");t.addValue("willChange",n),n.add(e)}}function Im(t){return t.props[_m]}const hA=t=>t!==null;function fA(t,{repeat:e,repeatType:r="loop"},n){const s=t.filter(hA),i=e&&r!=="loop"&&e%2===1?0:s.length-1;return s[i]}const pA={type:"spring",stiffness:500,damping:25,restSpeed:10},mA=t=>({type:"spring",stiffness:550,damping:t===0?2*Math.sqrt(550):30,restSpeed:10}),gA={type:"keyframes",duration:.8},yA={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},vA=(t,{keyframes:e})=>e.length>2?gA:dn.has(t)?t.startsWith("scale")?mA(e[1]):pA:yA;function wA({when:t,delay:e,delayChildren:r,staggerChildren:n,staggerDirection:s,repeat:i,repeatType:o,repeatDelay:a,from:c,elapsed:l,...u}){return!!Object.keys(u).length}const Kc=(t,e,r,n={},s,i)=>o=>{const a=Dc(n,t)||{},c=a.delay||n.delay||0;let{elapsed:l=0}=n;l=l-ut(c);const u={keyframes:Array.isArray(r)?r:[null,r],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-l,onUpdate:f=>{e.set(f),a.onUpdate&&a.onUpdate(f)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:t,motionValue:e,element:i?void 0:s};wA(a)||Object.assign(u,vA(t,u)),u.duration&&(u.duration=ut(u.duration)),u.repeatDelay&&(u.repeatDelay=ut(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let h=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(_a(u),u.delay===0&&(h=!0)),(Tt.instantAnimations||Tt.skipAnimations)&&(h=!0,_a(u),u.delay=0),u.allowFlatten=!a.type&&!a.ease,h&&!i&&e.get()!==void 0){const f=fA(u.keyframes,a);if(f!==void 0){pe.update(()=>{u.onUpdate(f),u.onComplete()});return}}return a.isSync?new Nc(u):new V1(u)};function bA({protectedKeys:t,needsAnimating:e},r){const n=t.hasOwnProperty(r)&&e[r]!==!0;return e[r]=!1,n}function Nm(t,e,{delay:r=0,transitionOverride:n,type:s}={}){let{transition:i=t.getDefaultTransition(),transitionEnd:o,...a}=e;n&&(i=n);const c=[],l=s&&t.animationState&&t.animationState.getState()[s];for(const u in a){const h=t.getValue(u,t.latestValues[u]??null),f=a[u];if(f===void 0||l&&bA(l,u))continue;const p={delay:r,...Dc(i||{},u)},m=h.get();if(m!==void 0&&!h.isAnimating&&!Array.isArray(f)&&f===m&&!p.velocity)continue;let y=!1;if(window.MotionHandoffAnimation){const S=Im(t);if(S){const _=window.MotionHandoffAnimation(S,u,pe);_!==null&&(p.startTime=_,y=!0)}}ja(t,u),h.start(Kc(u,h,f,t.shouldReduceMotion&&Zp.has(u)?{type:!1}:p,t,y));const x=h.animation;x&&c.push(x)}return o&&Promise.all(c).then(()=>{pe.update(()=>{o&&uA(t,o)})}),c}function Om(t,e,r,n=0,s=1){const i=Array.from(t).sort((l,u)=>l.sortNodePosition(u)).indexOf(e),o=t.size,a=(o-1)*n;return typeof r=="function"?r(i,o):s===1?i*n:a-i*n}function Aa(t,e,r={}){var c;const n=qr(t,e,r.type==="exit"?(c=t.presenceContext)==null?void 0:c.custom:void 0);let{transition:s=t.getDefaultTransition()||{}}=n||{};r.transitionOverride&&(s=r.transitionOverride);const i=n?()=>Promise.all(Nm(t,n,r)):()=>Promise.resolve(),o=t.variantChildren&&t.variantChildren.size?(l=0)=>{const{delayChildren:u=0,staggerChildren:h,staggerDirection:f}=s;return _A(t,e,l,u,h,f,r)}:()=>Promise.resolve(),{when:a}=s;if(a){const[l,u]=a==="beforeChildren"?[i,o]:[o,i];return l().then(()=>u())}else return Promise.all([i(),o(r.delay)])}function _A(t,e,r=0,n=0,s=0,i=1,o){const a=[];for(const c of t.variantChildren)c.notify("AnimationStart",e),a.push(Aa(c,e,{...o,delay:r+(typeof n=="function"?0:n)+Om(t.variantChildren,c,n,s,i)}).then(()=>c.notify("AnimationComplete",e)));return Promise.all(a)}function xA(t,e,r={}){t.notify("AnimationStart",e);let n;if(Array.isArray(e)){const s=e.map(i=>Aa(t,i,r));n=Promise.all(s)}else if(typeof e=="string")n=Aa(t,e,r);else{const s=typeof e=="function"?qr(t,e,r.custom):e;n=Promise.all(Nm(t,s,r))}return n.then(()=>{t.notify("AnimationComplete",e)})}function Dm(t,e){if(!Array.isArray(e))return!1;const r=e.length;if(r!==t.length)return!1;for(let n=0;n<r;n++)if(e[n]!==t[n])return!1;return!0}const SA=Bc.length;function Lm(t){if(!t)return;if(!t.isControllingVariants){const r=t.parent?Lm(t.parent)||{}:{};return t.props.initial!==void 0&&(r.initial=t.props.initial),r}const e={};for(let r=0;r<SA;r++){const n=Bc[r],s=t.props[n];(qn(s)||s===!1)&&(e[n]=s)}return e}const EA=[...Uc].reverse(),TA=Uc.length;function kA(t){return e=>Promise.all(e.map(({animation:r,options:n})=>xA(t,r,n)))}function jA(t){let e=kA(t),r=hd(),n=!0;const s=c=>(l,u)=>{var f;const h=qr(t,u,c==="exit"?(f=t.presenceContext)==null?void 0:f.custom:void 0);if(h){const{transition:p,transitionEnd:m,...y}=h;l={...l,...y,...m}}return l};function i(c){e=c(t)}function o(c){const{props:l}=t,u=Lm(t.parent)||{},h=[],f=new Set;let p={},m=1/0;for(let x=0;x<TA;x++){const S=EA[x],_=r[S],b=l[S]!==void 0?l[S]:u[S],w=qn(b),v=S===c?_.isActive:null;v===!1&&(m=x);let g=b===u[S]&&b!==l[S]&&w;if(g&&n&&t.manuallyAnimateOnMount&&(g=!1),_.protectedKeys={...p},!_.isActive&&v===null||!b&&!_.prevProp||Ri(b)||typeof b=="boolean")continue;const k=AA(_.prevProp,b);let T=k||S===c&&_.isActive&&!g&&w||x>m&&w,j=!1;const P=Array.isArray(b)?b:[b];let C=P.reduce(s(S),{});v===!1&&(C={});const{prevResolvedValues:A={}}=_,N={...A,...C},I=D=>{T=!0,f.has(D)&&(j=!0,f.delete(D)),_.needsAnimating[D]=!0;const q=t.getValue(D);q&&(q.liveStyle=!1)};for(const D in N){const q=C[D],V=A[D];if(p.hasOwnProperty(D))continue;let L=!1;ka(q)&&ka(V)?L=!Dm(q,V):L=q!==V,L?q!=null?I(D):f.add(D):q!==void 0&&f.has(D)?I(D):_.protectedKeys[D]=!0}_.prevProp=b,_.prevResolvedValues=C,_.isActive&&(p={...p,...C}),n&&t.blockInitialAnimation&&(T=!1);const R=g&&k;T&&(!R||j)&&h.push(...P.map(D=>{const q={type:S};if(typeof D=="string"&&n&&!R&&t.manuallyAnimateOnMount&&t.parent){const{parent:V}=t,L=qr(V,D);if(V.enteringChildren&&L){const{delayChildren:X}=L.transition||{};q.delay=Om(V.enteringChildren,t,X)}}return{animation:D,options:q}}))}if(f.size){const x={};if(typeof l.initial!="boolean"){const S=qr(t,Array.isArray(l.initial)?l.initial[0]:l.initial);S&&S.transition&&(x.transition=S.transition)}f.forEach(S=>{const _=t.getBaseTarget(S),b=t.getValue(S);b&&(b.liveStyle=!0),x[S]=_??null}),h.push({animation:x})}let y=!!h.length;return n&&(l.initial===!1||l.initial===l.animate)&&!t.manuallyAnimateOnMount&&(y=!1),n=!1,y?e(h):Promise.resolve()}function a(c,l){var h;if(r[c].isActive===l)return Promise.resolve();(h=t.variantChildren)==null||h.forEach(f=>{var p;return(p=f.animationState)==null?void 0:p.setActive(c,l)}),r[c].isActive=l;const u=o(c);for(const f in r)r[f].protectedKeys={};return u}return{animateChanges:o,setActive:a,setAnimateFunction:i,getState:()=>r,reset:()=>{r=hd(),n=!0}}}function AA(t,e){return typeof e=="string"?e!==t:Array.isArray(e)?!Dm(e,t):!1}function Qt(t=!1){return{isActive:t,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function hd(){return{animate:Qt(!0),whileInView:Qt(),whileHover:Qt(),whileTap:Qt(),whileDrag:Qt(),whileFocus:Qt(),exit:Qt()}}class Kt{constructor(e){this.isMounted=!1,this.node=e}update(){}}class PA extends Kt{constructor(e){super(e),e.animationState||(e.animationState=jA(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Ri(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:r}=this.node.prevProps||{};e!==r&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)==null||e.call(this)}}let CA=0;class RA extends Kt{constructor(){super(...arguments),this.id=CA++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:r}=this.node.presenceContext,{isPresent:n}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===n)return;const s=this.node.animationState.setActive("exit",!e);r&&!e&&s.then(()=>{r(this.id)})}mount(){const{register:e,onExitComplete:r}=this.node.presenceContext||{};r&&r(this.id),e&&(this.unmount=e(this.id))}unmount(){}}const IA={animation:{Feature:PA},exit:{Feature:RA}};function zn(t,e,r,n={passive:!0}){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r)}function ls(t){return{point:{x:t.pageX,y:t.pageY}}}const NA=t=>e=>Fc(e)&&t(e,ls(e));function jn(t,e,r,n){return zn(t,e,NA(r),n)}const Mm=1e-4,OA=1-Mm,DA=1+Mm,Fm=.01,LA=0-Fm,MA=0+Fm;function Me(t){return t.max-t.min}function FA(t,e,r){return Math.abs(t-e)<=r}function fd(t,e,r,n=.5){t.origin=n,t.originPoint=me(e.min,e.max,t.origin),t.scale=Me(r)/Me(e),t.translate=me(r.min,r.max,t.origin)-t.originPoint,(t.scale>=OA&&t.scale<=DA||isNaN(t.scale))&&(t.scale=1),(t.translate>=LA&&t.translate<=MA||isNaN(t.translate))&&(t.translate=0)}function An(t,e,r,n){fd(t.x,e.x,r.x,n?n.originX:void 0),fd(t.y,e.y,r.y,n?n.originY:void 0)}function pd(t,e,r){t.min=r.min+e.min,t.max=t.min+Me(e)}function $A(t,e,r){pd(t.x,e.x,r.x),pd(t.y,e.y,r.y)}function md(t,e,r){t.min=e.min-r.min,t.max=t.min+Me(e)}function Pn(t,e,r){md(t.x,e.x,r.x),md(t.y,e.y,r.y)}function Xe(t){return[t("x"),t("y")]}const $m=({current:t})=>t?t.ownerDocument.defaultView:null,gd=(t,e)=>Math.abs(t-e);function UA(t,e){const r=gd(t.x,e.x),n=gd(t.y,e.y);return Math.sqrt(r**2+n**2)}class Um{constructor(e,r,{transformPagePoint:n,contextWindow:s=window,dragSnapToOrigin:i=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=xo(this.lastMoveEventInfo,this.history),p=this.startEvent!==null,m=UA(f.offset,{x:0,y:0})>=this.distanceThreshold;if(!p&&!m)return;const{point:y}=f,{timestamp:x}=Ce;this.history.push({...y,timestamp:x});const{onStart:S,onMove:_}=this.handlers;p||(S&&S(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),_&&_(this.lastMoveEvent,f)},this.handlePointerMove=(f,p)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=_o(p,this.transformPagePoint),pe.update(this.updatePoint,!0)},this.handlePointerUp=(f,p)=>{this.end();const{onEnd:m,onSessionEnd:y,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const S=xo(f.type==="pointercancel"?this.lastMoveEventInfo:_o(p,this.transformPagePoint),this.history);this.startEvent&&m&&m(f,S),y&&y(f,S)},!Fc(e))return;this.dragSnapToOrigin=i,this.handlers=r,this.transformPagePoint=n,this.distanceThreshold=o,this.contextWindow=s||window;const a=ls(e),c=_o(a,this.transformPagePoint),{point:l}=c,{timestamp:u}=Ce;this.history=[{...l,timestamp:u}];const{onSessionStart:h}=r;h&&h(e,xo(c,this.history)),this.removeListeners=os(jn(this.contextWindow,"pointermove",this.handlePointerMove),jn(this.contextWindow,"pointerup",this.handlePointerUp),jn(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),qt(this.updatePoint)}}function _o(t,e){return e?{point:e(t.point)}:t}function yd(t,e){return{x:t.x-e.x,y:t.y-e.y}}function xo({point:t},e){return{point:t,delta:yd(t,Bm(e)),offset:yd(t,BA(e)),velocity:VA(e,.1)}}function BA(t){return t[0]}function Bm(t){return t[t.length-1]}function VA(t,e){if(t.length<2)return{x:0,y:0};let r=t.length-1,n=null;const s=Bm(t);for(;r>=0&&(n=t[r],!(s.timestamp-n.timestamp>ut(e)));)r--;if(!n)return{x:0,y:0};const i=dt(s.timestamp-n.timestamp);if(i===0)return{x:0,y:0};const o={x:(s.x-n.x)/i,y:(s.y-n.y)/i};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function qA(t,{min:e,max:r},n){return e!==void 0&&t<e?t=n?me(e,t,n.min):Math.max(t,e):r!==void 0&&t>r&&(t=n?me(r,t,n.max):Math.min(t,r)),t}function vd(t,e,r){return{min:e!==void 0?t.min+e:void 0,max:r!==void 0?t.max+r-(t.max-t.min):void 0}}function HA(t,{top:e,left:r,bottom:n,right:s}){return{x:vd(t.x,r,s),y:vd(t.y,e,n)}}function wd(t,e){let r=e.min-t.min,n=e.max-t.max;return e.max-e.min<t.max-t.min&&([r,n]=[n,r]),{min:r,max:n}}function zA(t,e){return{x:wd(t.x,e.x),y:wd(t.y,e.y)}}function WA(t,e){let r=.5;const n=Me(t),s=Me(e);return s>n?r=Un(e.min,e.max-n,t.min):n>s&&(r=Un(t.min,t.max-s,e.min)),Et(0,1,r)}function GA(t,e){const r={};return e.min!==void 0&&(r.min=e.min-t.min),e.max!==void 0&&(r.max=e.max-t.min),r}const Pa=.35;function KA(t=Pa){return t===!1?t=0:t===!0&&(t=Pa),{x:bd(t,"left","right"),y:bd(t,"top","bottom")}}function bd(t,e,r){return{min:_d(t,e),max:_d(t,r)}}function _d(t,e){return typeof t=="number"?t:t[e]||0}const XA=new WeakMap;class JA{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ve(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=e}start(e,{snapToCursor:r=!1,distanceThreshold:n}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const i=h=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),r&&this.snapToCursor(ls(h).point)},o=(h,f)=>{const{drag:p,dragPropagation:m,onDragStart:y}=this.getProps();if(p&&!m&&(this.openDragLock&&this.openDragLock(),this.openDragLock=sj(p),!this.openDragLock))return;this.latestPointerEvent=h,this.latestPanInfo=f,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Xe(S=>{let _=this.getAxisMotionValue(S).get()||0;if(ht.test(_)){const{projection:b}=this.visualElement;if(b&&b.layout){const w=b.layout.layoutBox[S];w&&(_=Me(w)*(parseFloat(_)/100))}}this.originPoint[S]=_}),y&&pe.postRender(()=>y(h,f)),ja(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},a=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f;const{dragPropagation:p,dragDirectionLock:m,onDirectionLock:y,onDrag:x}=this.getProps();if(!p&&!this.openDragLock)return;const{offset:S}=f;if(m&&this.currentDirection===null){this.currentDirection=YA(S),this.currentDirection!==null&&y&&y(this.currentDirection);return}this.updateAxis("x",f.point,S),this.updateAxis("y",f.point,S),this.visualElement.render(),x&&x(h,f)},c=(h,f)=>{this.latestPointerEvent=h,this.latestPanInfo=f,this.stop(h,f),this.latestPointerEvent=null,this.latestPanInfo=null},l=()=>Xe(h=>{var f;return this.getAnimationState(h)==="paused"&&((f=this.getAxisMotionValue(h).animation)==null?void 0:f.play())}),{dragSnapToOrigin:u}=this.getProps();this.panSession=new Um(e,{onSessionStart:i,onStart:o,onMove:a,onSessionEnd:c,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:u,distanceThreshold:n,contextWindow:$m(this.visualElement)})}stop(e,r){const n=e||this.latestPointerEvent,s=r||this.latestPanInfo,i=this.isDragging;if(this.cancel(),!i||!s||!n)return;const{velocity:o}=s;this.startAnimation(o);const{onDragEnd:a}=this.getProps();a&&pe.postRender(()=>a(n,s))}cancel(){this.isDragging=!1;const{projection:e,animationState:r}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:n}=this.getProps();!n&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),r&&r.setActive("whileDrag",!1)}updateAxis(e,r,n){const{drag:s}=this.getProps();if(!n||!Cs(e,s,this.currentDirection))return;const i=this.getAxisMotionValue(e);let o=this.originPoint[e]+n[e];this.constraints&&this.constraints[e]&&(o=qA(o,this.constraints[e],this.elastic[e])),i.set(o)}resolveConstraints(){var i;const{dragConstraints:e,dragElastic:r}=this.getProps(),n=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(i=this.visualElement.projection)==null?void 0:i.layout,s=this.constraints;e&&$r(e)?this.constraints||(this.constraints=this.resolveRefConstraints()):e&&n?this.constraints=HA(n.layoutBox,e):this.constraints=!1,this.elastic=KA(r),s!==this.constraints&&n&&this.constraints&&!this.hasMutatedConstraints&&Xe(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=GA(n.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:r}=this.getProps();if(!e||!$r(e))return!1;const n=e.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const i=Qj(n,s.root,this.visualElement.getTransformPagePoint());let o=zA(s.layout.layoutBox,i);if(r){const a=r(Xj(o));this.hasMutatedConstraints=!!a,a&&(o=Em(a))}return o}startAnimation(e){const{drag:r,dragMomentum:n,dragElastic:s,dragTransition:i,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),c=this.constraints||{},l=Xe(u=>{if(!Cs(u,r,this.currentDirection))return;let h=c&&c[u]||{};o&&(h={min:0,max:0});const f=s?200:1e6,p=s?40:1e7,m={type:"inertia",velocity:n?e[u]:0,bounceStiffness:f,bounceDamping:p,timeConstant:750,restDelta:1,restSpeed:10,...i,...h};return this.startAxisValueAnimation(u,m)});return Promise.all(l).then(a)}startAxisValueAnimation(e,r){const n=this.getAxisMotionValue(e);return ja(this.visualElement,e),n.start(Kc(e,n,0,r,this.visualElement,!1))}stopAnimation(){Xe(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Xe(e=>{var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.pause()})}getAnimationState(e){var r;return(r=this.getAxisMotionValue(e).animation)==null?void 0:r.state}getAxisMotionValue(e){const r=`_drag${e.toUpperCase()}`,n=this.visualElement.getProps(),s=n[r];return s||this.visualElement.getValue(e,(n.initial?n.initial[e]:void 0)||0)}snapToCursor(e){Xe(r=>{const{drag:n}=this.getProps();if(!Cs(r,n,this.currentDirection))return;const{projection:s}=this.visualElement,i=this.getAxisMotionValue(r);if(s&&s.layout){const{min:o,max:a}=s.layout.layoutBox[r];i.set(e[r]-me(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:r}=this.getProps(),{projection:n}=this.visualElement;if(!$r(r)||!n||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};Xe(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const c=a.get();s[o]=WA({min:c,max:c},this.constraints[o])}});const{transformTemplate:i}=this.visualElement.getProps();this.visualElement.current.style.transform=i?i({},""):"none",n.root&&n.root.updateScroll(),n.updateLayout(),this.resolveConstraints(),Xe(o=>{if(!Cs(o,e,null))return;const a=this.getAxisMotionValue(o),{min:c,max:l}=this.constraints[o];a.set(me(c,l,s[o]))})}addListeners(){if(!this.visualElement.current)return;XA.set(this.visualElement,this);const e=this.visualElement.current,r=jn(e,"pointerdown",c=>{const{drag:l,dragListener:u=!0}=this.getProps();l&&u&&this.start(c)}),n=()=>{const{dragConstraints:c}=this.getProps();$r(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,i=s.addEventListener("measure",n);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),pe.read(n);const o=zn(window,"resize",()=>this.scalePositionWithinConstraints()),a=s.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:l})=>{this.isDragging&&l&&(Xe(u=>{const h=this.getAxisMotionValue(u);h&&(this.originPoint[u]+=c[u].translate,h.set(h.get()+c[u].translate))}),this.visualElement.render())}));return()=>{o(),r(),i(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:r=!1,dragDirectionLock:n=!1,dragPropagation:s=!1,dragConstraints:i=!1,dragElastic:o=Pa,dragMomentum:a=!0}=e;return{...e,drag:r,dragDirectionLock:n,dragPropagation:s,dragConstraints:i,dragElastic:o,dragMomentum:a}}}function Cs(t,e,r){return(e===!0||e===t)&&(r===null||r===t)}function YA(t,e=10){let r=null;return Math.abs(t.y)>e?r="y":Math.abs(t.x)>e&&(r="x"),r}class QA extends Kt{constructor(e){super(e),this.removeGroupControls=Ze,this.removeListeners=Ze,this.controls=new JA(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Ze}unmount(){this.removeGroupControls(),this.removeListeners()}}const xd=t=>(e,r)=>{t&&pe.postRender(()=>t(e,r))};class ZA extends Kt{constructor(){super(...arguments),this.removePointerDownListener=Ze}onPointerDown(e){this.session=new Um(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:$m(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:r,onPan:n,onPanEnd:s}=this.node.getProps();return{onSessionStart:xd(e),onStart:xd(r),onMove:n,onEnd:(i,o)=>{delete this.session,s&&pe.postRender(()=>s(i,o))}}}mount(){this.removePointerDownListener=jn(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Ws={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Sd(t,e){return e.max===e.min?0:t/(e.max-e.min)*100}const yn={correct:(t,e)=>{if(!e.target)return t;if(typeof t=="string")if(K.test(t))t=parseFloat(t);else return t;const r=Sd(t,e.target.x),n=Sd(t,e.target.y);return`${r}% ${n}%`}},eP={correct:(t,{treeScale:e,projectionDelta:r})=>{const n=t,s=Ht.parse(t);if(s.length>5)return n;const i=Ht.createTransformer(t),o=typeof s[0]!="number"?1:0,a=r.x.scale*e.x,c=r.y.scale*e.y;s[0+o]/=a,s[1+o]/=c;const l=me(a,c,.5);return typeof s[2+o]=="number"&&(s[2+o]/=l),typeof s[3+o]=="number"&&(s[3+o]/=l),i(s)}};let So=!1;class tP extends E.Component{componentDidMount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n,layoutId:s}=this.props,{projection:i}=e;Sj(rP),i&&(r.group&&r.group.add(i),n&&n.register&&s&&n.register(i),So&&i.root.didUpdate(),i.addEventListener("animationComplete",()=>{this.safeToRemove()}),i.setOptions({...i.options,onExitComplete:()=>this.safeToRemove()})),Ws.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:r,visualElement:n,drag:s,isPresent:i}=this.props,{projection:o}=n;return o&&(o.isPresent=i,So=!0,s||e.layoutDependency!==r||r===void 0||e.isPresent!==i?o.willUpdate():this.safeToRemove(),e.isPresent!==i&&(i?o.promote():o.relegate()||pe.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),Mc.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:r,switchLayoutGroup:n}=this.props,{projection:s}=e;So=!0,s&&(s.scheduleCheckAfterUnmount(),r&&r.group&&r.group.remove(s),n&&n.deregister&&n.deregister(s))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function Vm(t){const[e,r]=um(),n=E.useContext(mc);return d.jsx(tP,{...t,layoutGroup:n,switchLayoutGroup:E.useContext(xm),isPresent:e,safeToRemove:r})}const rP={borderRadius:{...yn,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:yn,borderTopRightRadius:yn,borderBottomLeftRadius:yn,borderBottomRightRadius:yn,boxShadow:eP};function nP(t,e,r){const n=Ne(t)?t:Yr(t);return n.start(Kc("",n,e,r)),n.animation}const sP=(t,e)=>t.depth-e.depth;class iP{constructor(){this.children=[],this.isDirty=!1}add(e){vc(this.children,e),this.isDirty=!0}remove(e){wc(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sP),this.isDirty=!1,this.children.forEach(e)}}function oP(t,e){const r=Be.now(),n=({timestamp:s})=>{const i=s-r;i>=e&&(qt(n),t(i-e))};return pe.setup(n,!0),()=>qt(n)}const qm=["TopLeft","TopRight","BottomLeft","BottomRight"],aP=qm.length,Ed=t=>typeof t=="string"?parseFloat(t):t,Td=t=>typeof t=="number"||K.test(t);function cP(t,e,r,n,s,i){s?(t.opacity=me(0,r.opacity??1,lP(n)),t.opacityExit=me(e.opacity??1,0,uP(n))):i&&(t.opacity=me(e.opacity??1,r.opacity??1,n));for(let o=0;o<aP;o++){const a=`border${qm[o]}Radius`;let c=kd(e,a),l=kd(r,a);if(c===void 0&&l===void 0)continue;c||(c=0),l||(l=0),c===0||l===0||Td(c)===Td(l)?(t[a]=Math.max(me(Ed(c),Ed(l),n),0),(ht.test(l)||ht.test(c))&&(t[a]+="%")):t[a]=l}(e.rotate||r.rotate)&&(t.rotate=me(e.rotate||0,r.rotate||0,n))}function kd(t,e){return t[e]!==void 0?t[e]:t.borderRadius}const lP=Hm(0,.5,Cp),uP=Hm(.5,.95,Ze);function Hm(t,e,r){return n=>n<t?0:n>e?1:r(Un(t,e,n))}function jd(t,e){t.min=e.min,t.max=e.max}function Ke(t,e){jd(t.x,e.x),jd(t.y,e.y)}function Ad(t,e){t.translate=e.translate,t.scale=e.scale,t.originPoint=e.originPoint,t.origin=e.origin}function Pd(t,e,r,n,s){return t-=e,t=mi(t,1/r,n),s!==void 0&&(t=mi(t,1/s,n)),t}function dP(t,e=0,r=1,n=.5,s,i=t,o=t){if(ht.test(e)&&(e=parseFloat(e),e=me(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=me(i.min,i.max,n);t===i&&(a-=e),t.min=Pd(t.min,e,r,a,s),t.max=Pd(t.max,e,r,a,s)}function Cd(t,e,[r,n,s],i,o){dP(t,e[r],e[n],e[s],e.scale,i,o)}const hP=["x","scaleX","originX"],fP=["y","scaleY","originY"];function Rd(t,e,r,n){Cd(t.x,e,hP,r?r.x:void 0,n?n.x:void 0),Cd(t.y,e,fP,r?r.y:void 0,n?n.y:void 0)}function Id(t){return t.translate===0&&t.scale===1}function zm(t){return Id(t.x)&&Id(t.y)}function Nd(t,e){return t.min===e.min&&t.max===e.max}function pP(t,e){return Nd(t.x,e.x)&&Nd(t.y,e.y)}function Od(t,e){return Math.round(t.min)===Math.round(e.min)&&Math.round(t.max)===Math.round(e.max)}function Wm(t,e){return Od(t.x,e.x)&&Od(t.y,e.y)}function Dd(t){return Me(t.x)/Me(t.y)}function Ld(t,e){return t.translate===e.translate&&t.scale===e.scale&&t.originPoint===e.originPoint}class mP{constructor(){this.members=[]}add(e){vc(this.members,e),e.scheduleRender()}remove(e){if(wc(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const r=this.members[this.members.length-1];r&&this.promote(r)}}relegate(e){const r=this.members.findIndex(s=>e===s);if(r===0)return!1;let n;for(let s=r;s>=0;s--){const i=this.members[s];if(i.isPresent!==!1){n=i;break}}return n?(this.promote(n),!0):!1}promote(e,r){const n=this.lead;if(e!==n&&(this.prevLead=n,this.lead=e,e.show(),n)){n.instance&&n.scheduleRender(),e.scheduleRender(),e.resumeFrom=n,r&&(e.resumeFrom.preserveOpacity=!0),n.snapshot&&(e.snapshot=n.snapshot,e.snapshot.latestValues=n.animationValues||n.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:s}=e.options;s===!1&&n.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:r,resumingFrom:n}=e;r.onExitComplete&&r.onExitComplete(),n&&n.options.onExitComplete&&n.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gP(t,e,r){let n="";const s=t.x.translate/e.x,i=t.y.translate/e.y,o=(r==null?void 0:r.z)||0;if((s||i||o)&&(n=`translate3d(${s}px, ${i}px, ${o}px) `),(e.x!==1||e.y!==1)&&(n+=`scale(${1/e.x}, ${1/e.y}) `),r){const{transformPerspective:l,rotate:u,rotateX:h,rotateY:f,skewX:p,skewY:m}=r;l&&(n=`perspective(${l}px) ${n}`),u&&(n+=`rotate(${u}deg) `),h&&(n+=`rotateX(${h}deg) `),f&&(n+=`rotateY(${f}deg) `),p&&(n+=`skewX(${p}deg) `),m&&(n+=`skewY(${m}deg) `)}const a=t.x.scale*e.x,c=t.y.scale*e.y;return(a!==1||c!==1)&&(n+=`scale(${a}, ${c})`),n||"none"}const Eo=["","X","Y","Z"],yP=1e3;let vP=0;function To(t,e,r,n){const{latestValues:s}=e;s[t]&&(r[t]=s[t],e.setStaticValue(t,0),n&&(n[t]=0))}function Gm(t){if(t.hasCheckedOptimisedAppear=!0,t.root===t)return;const{visualElement:e}=t.options;if(!e)return;const r=Im(e);if(window.MotionHasOptimisedAnimation(r,"transform")){const{layout:s,layoutId:i}=t.options;window.MotionCancelOptimisedAnimation(r,"transform",pe,!(s||i))}const{parent:n}=t;n&&!n.hasCheckedOptimisedAppear&&Gm(n)}function Km({attachResizeListener:t,defaultParent:e,measureScroll:r,checkIsScrollRoot:n,resetTransform:s}){return class{constructor(o={},a=e==null?void 0:e()){this.id=vP++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(_P),this.nodes.forEach(TP),this.nodes.forEach(kP),this.nodes.forEach(xP)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new iP)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new xc),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const c=this.eventHandlers.get(o);c&&c.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=lm(o)&&!uj(o),this.instance=o;const{layoutId:a,layout:c,visualElement:l}=this.options;if(l&&!l.current&&l.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||a)&&(this.isLayoutDirty=!0),t){let u,h=0;const f=()=>this.root.updateBlockedByResize=!1;pe.read(()=>{h=window.innerWidth}),t(o,()=>{const p=window.innerWidth;p!==h&&(h=p,this.root.updateBlockedByResize=!0,u&&u(),u=oP(f,250),Ws.hasAnimatedSinceResize&&(Ws.hasAnimatedSinceResize=!1,this.nodes.forEach($d)))})}a&&this.root.registerSharedNode(a,this),this.options.animate!==!1&&l&&(a||c)&&this.addEventListener("didUpdate",({delta:u,hasLayoutChanged:h,hasRelativeLayoutChanged:f,layout:p})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const m=this.options.transition||l.getDefaultTransition()||RP,{onLayoutAnimationStart:y,onLayoutAnimationComplete:x}=l.getProps(),S=!this.targetLayout||!Wm(this.targetLayout,p),_=!h&&f;if(this.options.layoutRoot||this.resumeFrom||_||h&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const b={...Dc(m,"layout"),onPlay:y,onComplete:x};(l.shouldReduceMotion||this.options.layoutRoot)&&(b.delay=0,b.type=!1),this.startAnimation(b),this.setAnimationOrigin(u,_)}else h||$d(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=p})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),qt(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(jP),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Gm(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const h=this.path[u];h.shouldResetTransform=!0,h.updateScroll("snapshot"),h.options.layoutRoot&&h.willUpdate(!1)}const{layoutId:a,layout:c}=this.options;if(a===void 0&&!c)return;const l=this.getTransformTemplate();this.prevTransformTemplateValue=l?l(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(Md);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(Fd);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(EP),this.nodes.forEach(wP),this.nodes.forEach(bP)):this.nodes.forEach(Fd),this.clearAllSnapshots();const a=Be.now();Ce.delta=Et(0,1e3/60,a-Ce.timestamp),Ce.timestamp=a,Ce.isProcessing=!0,fo.update.process(Ce),fo.preRender.process(Ce),fo.render.process(Ce),Ce.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,Mc.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(SP),this.sharedNodes.forEach(AP)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,pe.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){pe.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!Me(this.snapshot.measuredBox.x)&&!Me(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ve(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a&&this.instance){const c=n(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:r(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!s)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!zm(this.projectionDelta),c=this.getTransformTemplate(),l=c?c(this.latestValues,""):void 0,u=l!==this.prevTransformTemplateValue;o&&this.instance&&(a||tr(this.latestValues)||u)&&(s(this.instance,l),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let c=this.removeElementScroll(a);return o&&(c=this.removeTransform(c)),IP(c),{animationId:this.root.animationId,measuredBox:a,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){var l;const{visualElement:o}=this.options;if(!o)return ve();const a=o.measureViewportBox();if(!(((l=this.scroll)==null?void 0:l.wasRoot)||this.path.some(NP))){const{scroll:u}=this.root;u&&(Ur(a.x,u.offset.x),Ur(a.y,u.offset.y))}return a}removeElementScroll(o){var c;const a=ve();if(Ke(a,o),(c=this.scroll)!=null&&c.wasRoot)return a;for(let l=0;l<this.path.length;l++){const u=this.path[l],{scroll:h,options:f}=u;u!==this.root&&h&&f.layoutScroll&&(h.wasRoot&&Ke(a,o),Ur(a.x,h.offset.x),Ur(a.y,h.offset.y))}return a}applyTransform(o,a=!1){const c=ve();Ke(c,o);for(let l=0;l<this.path.length;l++){const u=this.path[l];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Br(c,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),tr(u.latestValues)&&Br(c,u.latestValues)}return tr(this.latestValues)&&Br(c,this.latestValues),c}removeTransform(o){const a=ve();Ke(a,o);for(let c=0;c<this.path.length;c++){const l=this.path[c];if(!l.instance||!tr(l.latestValues))continue;Sa(l.latestValues)&&l.updateSnapshot();const u=ve(),h=l.measurePageBox();Ke(u,h),Rd(a,l.latestValues,l.snapshot?l.snapshot.layoutBox:void 0,u)}return tr(this.latestValues)&&Rd(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Ce.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var f;const a=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=a.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=a.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=a.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==a;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||(f=this.parent)!=null&&f.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:u,layoutId:h}=this.options;if(!(!this.layout||!(u||h))){if(this.resolvedRelativeTargetAt=Ce.timestamp,!this.targetDelta&&!this.relativeTarget){const p=this.getClosestProjectingParent();p&&p.layout&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ve(),this.relativeTargetOrigin=ve(),Pn(this.relativeTargetOrigin,this.layout.layoutBox,p.layout.layoutBox),Ke(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ve(),this.targetWithTransforms=ve()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),$A(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ke(this.target,this.layout.layoutBox),km(this.target,this.targetDelta)):Ke(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const p=this.getClosestProjectingParent();p&&!!p.resumingFrom==!!this.resumingFrom&&!p.options.layoutScroll&&p.target&&this.animationProgress!==1?(this.relativeParent=p,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ve(),this.relativeTargetOrigin=ve(),Pn(this.relativeTargetOrigin,this.target,p.target),Ke(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||Sa(this.parent.latestValues)||Tm(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var m;const o=this.getLead(),a=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||(m=this.parent)!=null&&m.isProjectionDirty)&&(c=!1),a&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Ce.timestamp&&(c=!1),c)return;const{layout:l,layoutId:u}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(l||u))return;Ke(this.layoutCorrected,this.layout.layoutBox);const h=this.treeScale.x,f=this.treeScale.y;Yj(this.layoutCorrected,this.treeScale,this.path,a),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ve());const{target:p}=o;if(!p){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Ad(this.prevProjectionDelta.x,this.projectionDelta.x),Ad(this.prevProjectionDelta.y,this.projectionDelta.y)),An(this.projectionDelta,this.layoutCorrected,p,this.latestValues),(this.treeScale.x!==h||this.treeScale.y!==f||!Ld(this.projectionDelta.x,this.prevProjectionDelta.x)||!Ld(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",p))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)==null||a.scheduleRender(),o){const c=this.getStack();c&&c.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Vr(),this.projectionDelta=Vr(),this.projectionDeltaWithTransform=Vr()}setAnimationOrigin(o,a=!1){const c=this.snapshot,l=c?c.latestValues:{},u={...this.latestValues},h=Vr();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const f=ve(),p=c?c.source:void 0,m=this.layout?this.layout.source:void 0,y=p!==m,x=this.getStack(),S=!x||x.members.length<=1,_=!!(y&&!S&&this.options.crossfade===!0&&!this.path.some(CP));this.animationProgress=0;let b;this.mixTargetDelta=w=>{const v=w/1e3;Ud(h.x,o.x,v),Ud(h.y,o.y,v),this.setTargetDelta(h),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Pn(f,this.layout.layoutBox,this.relativeParent.layout.layoutBox),PP(this.relativeTarget,this.relativeTargetOrigin,f,v),b&&pP(this.relativeTarget,b)&&(this.isProjectionDirty=!1),b||(b=ve()),Ke(b,this.relativeTarget)),y&&(this.animationValues=u,cP(u,l,this.latestValues,v,_,S)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=v},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){var a,c,l;this.notifyListeners("animationStart"),(a=this.currentAnimation)==null||a.stop(),(l=(c=this.resumingFrom)==null?void 0:c.currentAnimation)==null||l.stop(),this.pendingAnimation&&(qt(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=pe.update(()=>{Ws.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=Yr(0)),this.currentAnimation=nP(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:u=>{this.mixTargetDelta(u),o.onUpdate&&o.onUpdate(u)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yP),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:c,layout:l,latestValues:u}=o;if(!(!a||!c||!l)){if(this!==o&&this.layout&&l&&Xm(this.options.animationType,this.layout.layoutBox,l.layoutBox)){c=this.target||ve();const h=Me(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+h;const f=Me(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+f}Ke(a,c),Br(a,u),An(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mP),this.sharedNodes.get(o).add(a);const l=a.options.initialPromotionConfig;a.promote({transition:l?l.transition:void 0,preserveFollowOpacity:l&&l.shouldPreserveFollowOpacity?l.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var a;const{layoutId:o}=this.options;return o?((a=this.getStack())==null?void 0:a.lead)||this:this}getPrevLead(){var a;const{layoutId:o}=this.options;return o?(a=this.getStack())==null?void 0:a.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:c}={}){const l=this.getStack();l&&l.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(a=!0),!a)return;const l={};c.z&&To("z",o,l,this.animationValues);for(let u=0;u<Eo.length;u++)To(`rotate${Eo[u]}`,o,l,this.animationValues),To(`skew${Eo[u]}`,o,l,this.animationValues);o.render();for(const u in l)o.setStaticValue(u,l[u]),this.animationValues&&(this.animationValues[u]=l[u]);o.scheduleRender()}applyProjectionStyles(o,a){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=zs(a==null?void 0:a.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const l=this.getLead();if(!this.projectionDelta||!this.layout||!l.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=zs(a==null?void 0:a.pointerEvents)||""),this.hasProjected&&!tr(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const u=l.animationValues||l.latestValues;this.applyTransformsToTarget();let h=gP(this.projectionDeltaWithTransform,this.treeScale,u);c&&(h=c(u,h)),o.transform=h;const{x:f,y:p}=this.projectionDelta;o.transformOrigin=`${f.origin*100}% ${p.origin*100}% 0`,l.animationValues?o.opacity=l===this?u.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:u.opacityExit:o.opacity=l===this?u.opacity!==void 0?u.opacity:"":u.opacityExit!==void 0?u.opacityExit:0;for(const m in Hn){if(u[m]===void 0)continue;const{correct:y,applyTo:x,isCSSVariable:S}=Hn[m],_=h==="none"?u[m]:y(u[m],l);if(x){const b=x.length;for(let w=0;w<b;w++)o[x[w]]=_}else S?this.options.visualElement.renderState.vars[m]=_:o[m]=_}this.options.layoutId&&(o.pointerEvents=l===this?zs(a==null?void 0:a.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)==null?void 0:a.stop()}),this.root.nodes.forEach(Md),this.root.sharedNodes.clear()}}}function wP(t){t.updateLayout()}function bP(t){var r;const e=((r=t.resumeFrom)==null?void 0:r.snapshot)||t.snapshot;if(t.isLead()&&t.layout&&e&&t.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:s}=t.layout,{animationType:i}=t.options,o=e.source!==t.layout.source;i==="size"?Xe(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Me(f);f.min=n[h].min,f.max=f.min+p}):Xm(i,e.layoutBox,n)&&Xe(h=>{const f=o?e.measuredBox[h]:e.layoutBox[h],p=Me(n[h]);f.max=f.min+p,t.relativeTarget&&!t.currentAnimation&&(t.isProjectionDirty=!0,t.relativeTarget[h].max=t.relativeTarget[h].min+p)});const a=Vr();An(a,n,e.layoutBox);const c=Vr();o?An(c,t.applyTransform(s,!0),e.measuredBox):An(c,n,e.layoutBox);const l=!zm(a);let u=!1;if(!t.resumeFrom){const h=t.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:f,layout:p}=h;if(f&&p){const m=ve();Pn(m,e.layoutBox,f.layoutBox);const y=ve();Pn(y,n,p.layoutBox),Wm(m,y)||(u=!0),h.options.layoutRoot&&(t.relativeTarget=y,t.relativeTargetOrigin=m,t.relativeParent=h)}}}t.notifyListeners("didUpdate",{layout:n,snapshot:e,delta:c,layoutDelta:a,hasLayoutChanged:l,hasRelativeLayoutChanged:u})}else if(t.isLead()){const{onExitComplete:n}=t.options;n&&n()}t.options.transition=void 0}function _P(t){t.parent&&(t.isProjecting()||(t.isProjectionDirty=t.parent.isProjectionDirty),t.isSharedProjectionDirty||(t.isSharedProjectionDirty=!!(t.isProjectionDirty||t.parent.isProjectionDirty||t.parent.isSharedProjectionDirty)),t.isTransformDirty||(t.isTransformDirty=t.parent.isTransformDirty))}function xP(t){t.isProjectionDirty=t.isSharedProjectionDirty=t.isTransformDirty=!1}function SP(t){t.clearSnapshot()}function Md(t){t.clearMeasurements()}function Fd(t){t.isLayoutDirty=!1}function EP(t){const{visualElement:e}=t.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),t.resetTransform()}function $d(t){t.finishAnimation(),t.targetDelta=t.relativeTarget=t.target=void 0,t.isProjectionDirty=!0}function TP(t){t.resolveTargetDelta()}function kP(t){t.calcProjection()}function jP(t){t.resetSkewAndRotation()}function AP(t){t.removeLeadSnapshot()}function Ud(t,e,r){t.translate=me(e.translate,0,r),t.scale=me(e.scale,1,r),t.origin=e.origin,t.originPoint=e.originPoint}function Bd(t,e,r,n){t.min=me(e.min,r.min,n),t.max=me(e.max,r.max,n)}function PP(t,e,r,n){Bd(t.x,e.x,r.x,n),Bd(t.y,e.y,r.y,n)}function CP(t){return t.animationValues&&t.animationValues.opacityExit!==void 0}const RP={duration:.45,ease:[.4,0,.1,1]},Vd=t=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(t),qd=Vd("applewebkit/")&&!Vd("chrome/")?Math.round:Ze;function Hd(t){t.min=qd(t.min),t.max=qd(t.max)}function IP(t){Hd(t.x),Hd(t.y)}function Xm(t,e,r){return t==="position"||t==="preserve-aspect"&&!FA(Dd(e),Dd(r),.2)}function NP(t){var e;return t!==t.root&&((e=t.scroll)==null?void 0:e.wasRoot)}const OP=Km({attachResizeListener:(t,e)=>zn(t,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ko={current:void 0},Jm=Km({measureScroll:t=>({x:t.scrollLeft,y:t.scrollTop}),defaultParent:()=>{if(!ko.current){const t=new OP({});t.mount(window),t.setOptions({layoutScroll:!0}),ko.current=t}return ko.current},resetTransform:(t,e)=>{t.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:t=>window.getComputedStyle(t).position==="fixed"}),DP={pan:{Feature:ZA},drag:{Feature:QA,ProjectionNode:Jm,MeasureLayout:Vm}};function zd(t,e,r){const{props:n}=t;t.animationState&&n.whileHover&&t.animationState.setActive("whileHover",r==="Start");const s="onHover"+r,i=n[s];i&&pe.postRender(()=>i(e,ls(e)))}class LP extends Kt{mount(){const{current:e}=this.node;e&&(this.unmount=ij(e,(r,n)=>(zd(this.node,n,"Start"),s=>zd(this.node,s,"End"))))}unmount(){}}class MP extends Kt{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=os(zn(this.node.current,"focus",()=>this.onFocus()),zn(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Wd(t,e,r){const{props:n}=t;if(t.current instanceof HTMLButtonElement&&t.current.disabled)return;t.animationState&&n.whileTap&&t.animationState.setActive("whileTap",r==="Start");const s="onTap"+(r==="End"?"":r),i=n[s];i&&pe.postRender(()=>i(e,ls(e)))}class FP extends Kt{mount(){const{current:e}=this.node;e&&(this.unmount=lj(e,(r,n)=>(Wd(this.node,n,"Start"),(s,{success:i})=>Wd(this.node,s,i?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const Ca=new WeakMap,jo=new WeakMap,$P=t=>{const e=Ca.get(t.target);e&&e(t)},UP=t=>{t.forEach($P)};function BP({root:t,...e}){const r=t||document;jo.has(r)||jo.set(r,{});const n=jo.get(r),s=JSON.stringify(e);return n[s]||(n[s]=new IntersectionObserver(UP,{root:t,...e})),n[s]}function VP(t,e,r){const n=BP(e);return Ca.set(t,r),n.observe(t),()=>{Ca.delete(t),n.unobserve(t)}}const qP={some:0,all:1};class HP extends Kt{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:r,margin:n,amount:s="some",once:i}=e,o={root:r?r.current:void 0,rootMargin:n,threshold:typeof s=="number"?s:qP[s]},a=c=>{const{isIntersecting:l}=c;if(this.isInView===l||(this.isInView=l,i&&!l&&this.hasEnteredView))return;l&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",l);const{onViewportEnter:u,onViewportLeave:h}=this.node.getProps(),f=l?u:h;f&&f(c)};return VP(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:r}=this.node;["amount","margin","root"].some(zP(e,r))&&this.startObserver()}unmount(){}}function zP({viewport:t={}},{viewport:e={}}={}){return r=>t[r]!==e[r]}const WP={inView:{Feature:HP},tap:{Feature:FP},focus:{Feature:MP},hover:{Feature:LP}},GP={layout:{ProjectionNode:Jm,MeasureLayout:Vm}},KP={...IA,...WP,...DP,...GP},Ot=Kj(KP,aA),XP=({isOpen:t,onClose:e})=>{const[r,n]=E.useState(""),{products:s}=Rh(),[i,o]=E.useState([]);E.useEffect(()=>{if(r.length>1){const c=s.filter(l=>l.name.toLowerCase().includes(r.toLowerCase())).slice(0,5);o(c)}else o([])},[r,s]);const a=["Wireless Headphones","Smart Watch","Running Shoes","Organic Coffee"];return d.jsx(d.Fragment,{children:t&&d.jsxs(Ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-[100] bg-black/70 backdrop-blur-xl flex items-start justify-center pt-24",onClick:e,children:[d.jsxs("div",{className:"max-w-3xl w-full mx-auto px-6",onClick:c=>c.stopPropagation(),children:[d.jsx(Ot.div,{initial:{y:-30,opacity:0,scale:.95},animate:{y:0,opacity:1,scale:1},exit:{y:-30,opacity:0,scale:.95},transition:{duration:.3,ease:"easeOut"},children:d.jsxs("div",{className:"relative",children:[d.jsx(xh,{className:"absolute left-6 top-1/2 -translate-y-1/2 h-6 w-6 text-neutral-400"}),d.jsx("input",{type:"text",value:r,onChange:c=>n(c.target.value),placeholder:"Search for luxury products...",className:"w-full pl-16 pr-6 py-6 text-lg rounded-3xl shadow-2xl border-2 border-neutral-200/50 bg-white/95 backdrop-blur-xl focus:border-neutral-400 focus:ring-4 focus:ring-neutral-200/30 transition-all duration-300 font-medium tracking-wide placeholder:text-neutral-400",autoFocus:!0}),d.jsx(Ot.button,{onClick:e,className:"absolute right-4 top-1/2 -translate-y-1/2 p-2 rounded-full text-neutral-400 hover:text-neutral-600 hover:bg-neutral-100 transition-all duration-200",whileHover:{scale:1.1},whileTap:{scale:.9},children:d.jsx(bt,{className:"h-5 w-5"})})]})}),d.jsx(Ot.div,{initial:{y:50,opacity:0},animate:{y:0,opacity:1},exit:{y:50,opacity:0},transition:{delay:.1},className:"mt-6 card-luxury p-6 shadow-2xl",children:i.length>0?d.jsxs("div",{className:"space-y-3",children:[d.jsx("h3",{className:"text-sm font-semibold px-2 text-neutral-600 uppercase tracking-wide",children:"Product Suggestions"}),i.map(c=>d.jsxs(Ie,{to:`/products/${c.id}`,onClick:e,className:"flex items-center space-x-4 p-4 rounded-xl transition-all duration-200 hover:bg-neutral-50 hover:shadow-md luxury-hover-lift",children:[d.jsx("img",{src:c.images[0],alt:c.name,className:"w-14 h-14 object-cover rounded-lg shadow-sm"}),d.jsxs("div",{className:"flex-1",children:[d.jsx("p",{className:"font-semibold text-neutral-900",children:c.name}),d.jsxs("p",{className:"text-lg font-bold text-neutral-700",children:["",c.price.toLocaleString("en-IN")]})]})]},c.id))]}):d.jsxs("div",{className:"space-y-6",children:[d.jsxs("h3",{className:"text-sm font-semibold flex items-center text-neutral-600 uppercase tracking-wide",children:[d.jsx(nw,{className:"h-4 w-4 mr-2"}),"Trending Searches"]}),d.jsx("div",{className:"flex flex-wrap gap-3",children:a.map(c=>d.jsx("button",{onClick:()=>n(c),className:"px-5 py-3 rounded-full transition-all duration-200 bg-neutral-100 text-neutral-700 hover:bg-neutral-900 hover:text-white font-medium shadow-sm hover:shadow-md",children:c},c))})]})})]}),d.jsx("button",{onClick:e,className:"absolute top-6 right-6 p-2 rounded-full transition-colors text-gray-300 hover:text-white hover:bg-black/20",children:d.jsx(bt,{className:"h-8 w-8"})})]})})},JP=()=>{const t=E.useRef({subscriptions:[],timers:[],intervals:[],eventListeners:[],observers:[],abortControllers:[]}),e=E.useRef(!1),r=E.useCallback(f=>(e.current||t.current.subscriptions.push(f),f),[]),n=E.useCallback(f=>(e.current||t.current.timers.push(f),f),[]),s=E.useCallback(f=>(e.current||t.current.intervals.push(f),f),[]),i=E.useCallback((f,p,m,y)=>(e.current||(f.addEventListener(p,m,y),t.current.eventListeners.push({element:f,event:p,handler:m,options:y})),()=>{f.removeEventListener(p,m,y)}),[]),o=E.useCallback(f=>(e.current||t.current.observers.push(f),f),[]),a=E.useCallback(()=>{const f=new AbortController;return e.current||t.current.abortControllers.push(f),f},[]),c=E.useCallback((f,p)=>{const m=setTimeout(()=>{e.current||f()},p);return n(m)},[n]),l=E.useCallback((f,p)=>{const m=setInterval(()=>{e.current||f()},p);return s(m)},[s]),u=E.useCallback(async(f,p)=>{const m=a();return fetch(f,{...p,signal:m.signal})},[a]),h=E.useCallback(()=>{const f=t.current;f.subscriptions.forEach(p=>{try{p()}catch(m){console.warn("Error during subscription cleanup:",m)}}),f.timers.forEach(p=>{try{clearTimeout(p)}catch(m){console.warn("Error during timer cleanup:",m)}}),f.intervals.forEach(p=>{try{clearInterval(p)}catch(m){console.warn("Error during interval cleanup:",m)}}),f.eventListeners.forEach(({element:p,event:m,handler:y,options:x})=>{try{p.removeEventListener(m,y,x)}catch(S){console.warn("Error during event listener cleanup:",S)}}),f.observers.forEach(p=>{try{p.disconnect()}catch(m){console.warn("Error during observer cleanup:",m)}}),f.abortControllers.forEach(p=>{try{p.abort()}catch(m){console.warn("Error during AbortController cleanup:",m)}}),f.subscriptions=[],f.timers=[],f.intervals=[],f.eventListeners=[],f.observers=[],f.abortControllers=[]},[]);return E.useEffect(()=>()=>{e.current=!0,h()},[h]),{registerSubscription:r,registerTimer:n,registerInterval:s,registerEventListener:i,registerObserver:o,registerAbortController:a,safeSetTimeout:c,safeSetInterval:l,safeFetch:u,cleanup:h,isUnmounted:()=>e.current}},YP=(t,e)=>{let r;return((...n)=>{r||(t.apply(void 0,n),r=!0,setTimeout(()=>r=!1,e))})},QP=(t,e={})=>{const{minSwipeDistance:r=50,maxSwipeTime:n=300,preventDefaultTouchmove:s=!0,throttleMs:i=16}=e,[o,a]=E.useState(null),[c,l]=E.useState(null),{registerEventListener:u}=JP(),h=E.useRef(null),f=E.useCallback(x=>{Je.startMeasure("touch-gesture-start");const S=x.targetTouches[0];l(null),a({x:S.clientX,y:S.clientY,time:performance.now()}),Je.endMeasure("touch-gesture-start")},[]),p=E.useCallback(YP(x=>{s&&x.preventDefault();const S=x.targetTouches[0];l({x:S.clientX,y:S.clientY,time:performance.now()})},i),[s,i]),m=E.useCallback(()=>{var v,g,k,T;if(Je.startMeasure("touch-gesture-end"),!o||!c){Je.endMeasure("touch-gesture-end",!1);return}const x=o.x-c.x,S=o.y-c.y;if(c.time-o.time>n){Je.endMeasure("touch-gesture-end",!1);return}const b=Math.abs(x),w=Math.abs(S);b>w?b>r&&(x>0?(v=t.onSwipeLeft)==null||v.call(t):(g=t.onSwipeRight)==null||g.call(t)):w>r&&(S>0?(k=t.onSwipeUp)==null||k.call(t):(T=t.onSwipeDown)==null||T.call(t)),Je.endMeasure("touch-gesture-end")},[o,c,r,n,t]),y=E.useCallback(x=>{h.current&&(h.current=null),x&&(h.current=x,u(x,"touchstart",f,{passive:!0}),u(x,"touchmove",p,{passive:!s}),u(x,"touchend",m,{passive:!0}))},[f,p,m,s,u]);return{onTouchStart:f,onTouchMove:p,onTouchEnd:m,bindGestures:y}},mR=()=>{const[t,e]=E.useState(!1),[r,n]=E.useState("portrait"),s=E.useCallback(()=>{const o=navigator.userAgent;e(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(o)||window.innerWidth<=768)},[]),i=E.useCallback(()=>{n(window.innerHeight>window.innerWidth?"portrait":"landscape")},[]);return E.useEffect(()=>{s(),i();const o=()=>{s(),i()};return window.addEventListener("resize",o),window.addEventListener("orientationchange",i),()=>{window.removeEventListener("resize",o),window.removeEventListener("orientationchange",i)}},[s,i]),{isMobile:t,orientation:r,isPortrait:r==="portrait",isLandscape:r==="landscape"}},ZP=({isOpen:t,onClose:e,onCartClick:r})=>{const{user:n,logout:s}=kt(),{itemCount:i}=za(),{items:o}=Ph(),a=gi(),c=Kd(),l=E.useRef(null),[u,h]=E.useState(null),f=[{name:"Home",href:"/",icon:d.jsx(wh,{className:"h-5 w-5"})},{name:"Collections",href:"/products",icon:d.jsx(Uo,{className:"h-5 w-5"}),hasDropdown:!0,dropdownItems:[{name:"All Products",href:"/products"},{name:"Oudh Attars",href:"/categories/oudh-attars"},{name:"Floral Attars",href:"/categories/floral-attars"},{name:"Musk Attars",href:"/categories/musk-attars"},{name:"Amber Attars",href:"/categories/amber-attars"},{name:"Saffron Attars",href:"/categories/saffron-attars"},{name:"Sandalwood Attars",href:"/categories/sandalwood-attars"},{name:"Jasmine Attars",href:"/categories/jasmine-attars"},{name:"Attar Blends",href:"/categories/attar-blends"},{name:"Seasonal Attars",href:"/categories/seasonal-attars"},{name:"Heritage Attars",href:"/categories/heritage-attars"}]},{name:"New Arrivals",href:"/new-arrivals",icon:d.jsx(Sh,{className:"h-5 w-5"})},{name:"Offers",href:"/deals",icon:d.jsx(tw,{className:"h-5 w-5"})},{name:"About",href:"/about",icon:d.jsx(Nt,{className:"h-5 w-5"})}],{bindGestures:p}=QP({onSwipeLeft:()=>e()});E.useEffect(()=>{e(),h(null)},[a.pathname,e]),E.useEffect(()=>{l.current&&t&&p(l.current)},[t,p]),E.useEffect(()=>{const x=S=>{S.key==="Escape"&&t&&e()};return document.addEventListener("keydown",x),()=>document.removeEventListener("keydown",x)},[t,e]);const m=x=>a.pathname===x,y=x=>{h(u===x?null:x)};return E.useEffect(()=>{if(t&&l.current){const x=l.current.querySelector("button, a, input");x&&x.focus()}},[t]),d.jsxs(d.Fragment,{children:[t&&d.jsx("div",{className:"fixed inset-0 bg-black/50 z-40 transition-opacity duration-300 md:hidden",onClick:e,role:"button",tabIndex:0,onKeyDown:x=>{(x.key==="Enter"||x.key===" ")&&e()},"aria-label":"Close navigation menu"}),d.jsxs("div",{ref:l,className:`fixed top-0 left-0 h-full w-80 max-w-[90vw] bg-white z-50 shadow-2xl transform transition-transform duration-300 ease-out md:hidden ${t?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true","aria-labelledby":"mobile-nav-title","aria-hidden":!t,children:[d.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200",children:[d.jsx("h2",{id:"mobile-nav-title",className:"text-lg font-semibold text-gray-900",children:"Menu"}),d.jsx("button",{onClick:e,className:"p-2 rounded-full hover:bg-gray-100 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500","aria-label":"Close menu",children:d.jsx(bt,{className:"h-5 w-5 text-gray-600"})})]}),d.jsx("div",{className:"p-4 border-b border-gray-200",children:n?d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("img",{src:n.avatar||`https://api.dicebear.com/8.x/initials/svg?seed=${n.name}`,alt:n.name,className:"h-12 w-12 rounded-full border-2 border-purple-200"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:n.name}),d.jsx("p",{className:"text-xs text-gray-500 uppercase",children:n.role})]})]}):d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"h-12 w-12 rounded-full bg-gray-200 flex items-center justify-center",children:d.jsx(Nt,{className:"h-6 w-6 text-gray-500"})}),d.jsxs("div",{children:[d.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Guest"}),d.jsx("button",{onClick:()=>{c("/auth"),e()},className:"text-xs text-purple-600 font-medium hover:text-purple-700 focus:outline-none focus:underline",children:"Sign in"})]})]})}),d.jsxs("div",{className:"grid grid-cols-3 gap-2 p-4 border-b border-gray-200",children:[d.jsxs(Ie,{to:"/wishlist",onClick:e,className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500",children:[d.jsxs("div",{className:"relative",children:[d.jsx($a,{className:"h-6 w-6 text-gray-600"}),o.length>0&&d.jsx("span",{className:"absolute -top-2 -right-2 h-5 w-5 text-xs rounded-full flex items-center justify-center font-medium bg-purple-600 text-white",children:o.length>9?"9+":o.length})]}),d.jsx("span",{className:"text-xs mt-1 text-gray-600",children:"Wishlist"})]}),d.jsxs("button",{onClick:()=>{r(),e()},className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500",children:[d.jsxs("div",{className:"relative",children:[d.jsx(qa,{className:"h-6 w-6 text-gray-600"}),i>0&&d.jsx("span",{className:"absolute -top-2 -right-2 h-5 w-5 text-xs rounded-full flex items-center justify-center font-medium bg-purple-600 text-white",children:i>9?"9+":i})]}),d.jsx("span",{className:"text-xs mt-1 text-gray-600",children:"Cart"})]}),n?d.jsxs(Ie,{to:"/profile",onClick:e,className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500",children:[d.jsx(Nt,{className:"h-6 w-6 text-gray-600"}),d.jsx("span",{className:"text-xs mt-1 text-gray-600",children:"Profile"})]}):d.jsxs("button",{onClick:()=>{c("/auth"),e()},className:"flex flex-col items-center p-3 rounded-lg hover:bg-gray-50 transition-colors focus:outline-none focus:ring-2 focus:ring-purple-500",children:[d.jsx(Nt,{className:"h-6 w-6 text-gray-600"}),d.jsx("span",{className:"text-xs mt-1 text-gray-600",children:"Account"})]})]}),d.jsx("div",{className:"flex-1 overflow-y-auto",children:d.jsx("nav",{className:"py-2",children:f.map(x=>{var S;return d.jsx("div",{children:x.hasDropdown?d.jsxs(d.Fragment,{children:[d.jsxs("button",{onClick:()=>y(x.name),className:`w-full flex items-center justify-between px-4 py-3 text-base font-medium ${m(x.href)?"text-purple-600 bg-purple-50":"text-gray-700 hover:bg-gray-50"}`,"aria-expanded":u===x.name,children:[d.jsxs("div",{className:"flex items-center",children:[d.jsx("span",{className:"mr-3 text-gray-500",children:x.icon}),d.jsx("span",{children:x.name})]}),d.jsx(lv,{className:`h-5 w-5 text-gray-400 transition-transform ${u===x.name?"rotate-90":""}`})]}),u===x.name&&d.jsx("div",{className:"bg-gray-50",role:"region","aria-label":`${x.name} submenu`,children:(S=x.dropdownItems)==null?void 0:S.map(_=>d.jsx(Ie,{to:_.href,onClick:e,className:`block px-12 py-3 text-sm ${m(_.href)?"text-purple-600 bg-purple-50":"text-gray-600 hover:bg-gray-100"}`,children:_.name},_.name))})]}):d.jsxs(Ie,{to:x.href,onClick:e,className:`flex items-center px-4 py-3 text-base font-medium ${m(x.href)?"text-purple-600 bg-purple-50":"text-gray-700 hover:bg-gray-50"}`,children:[d.jsx("span",{className:"mr-3 text-gray-500",children:x.icon}),d.jsx("span",{children:x.name})]})},x.name)})})}),n&&d.jsxs("div",{className:"border-t border-gray-200 py-2",children:[d.jsxs(Ie,{to:"/dashboard",onClick:e,className:"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[d.jsx(Va,{className:"h-5 w-5 text-gray-500 mr-3"}),d.jsx("span",{children:"Dashboard"})]}),d.jsxs(Ie,{to:"/orders",onClick:e,className:"flex items-center px-4 py-3 text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-purple-500",children:[d.jsx(Uo,{className:"h-5 w-5 text-gray-500 mr-3"}),d.jsx("span",{children:"My Orders"})]}),d.jsxs("button",{onClick:()=>{s(),e()},className:"flex items-center w-full px-4 py-3 text-base font-medium text-red-600 hover:bg-red-50 focus:outline-none focus:ring-2 focus:ring-red-500",children:[d.jsx(Ua,{className:"h-5 w-5 text-red-500 mr-3"}),d.jsx("span",{children:"Sign Out"})]})]})]})]})},Gd="data:image/webp;base64,UklGRlwPAABXRUJQVlA4WAoAAAAQAAAATwAATwAAQUxQSPQIAAABsL9t2/FI8qDu931TmeqxbdueaY3RGtu2PWvvjm3bts22u8dos/w9uH/Il+9LdW1ETAAW0BCxw98XQcR77I+Enh8izpjNU1DFpRy3AkKPCyH+mcqxiwQMJG9H7GkB1ZuoKjwJ2MFceiP2rBBwK8Vc+WUVa893vorQsyKupJq7KwdixalU2wWxJyUc5Gbu7sLHsORP7OKdSD0oYKVxVK81zli++WcKf1kaoedEXEPxfOXB1RlU415IC0gI5SI2nEmrI7xt+Q6a8A8LQEgpxQAgxBRDsX9QvK7ykz3pJnwCsdvKxlgnYMnx1HrGX26guvATdP9Gx5/+x3uef/fTT9++49T+vYAYcxIG0KyeM5tBc+WICkL3BOz15C+sL+Ou3QpIAUDEjRQvrRxd7a7aph3+PZGULhEjO57ZCjECwKeUjkKWMzR2X6UpAIse+qFTzFSMbX+uIgYsNpazv6YVqBW+h4AFNA4aTTF3E+Wbq6IJm8zl0Heppe5Hygn5jYib7Lj1xssGBDT9h27ubhknbQL0Uz7wcQMurgkpIT+mFIpFrDqd2vXz169cdczOYcA0mrt7xh83xSDygjFlzNgXKUUAiE3VagW1MRUJWO43GvOn3nyzssYzTlr8GM4fPJVWTPn94ojA0oP/9sHQkaNGDfvq8bP2WBQIsR6AD5iZiogYKer5GZ+7hON2aCsjvB8x9r/7R2dBn3xj3yYUTHiS4rmmmXl9k9/49iZWwpx90P/FjFQRrRURJW3ovogFrqhX1oT3rq4llCNO/6aF9My8oGmW8VikEOr0pllDvIt/W6ajhHtLRk5566FRtALuwhcQAlJOwOKTqI3JeFF1ZjETZ9eLxx/70E9e3DhnE6RQPS4HCTcya4zwLIyj1jMxzvnv2ls/1E4vmfFsVBL+cWtexLbi1qDT8Raljipn/W3Jha4RmlixjE+hknB+x455CHia0qDzcSOzPHO7b03s8RNVzIsLRyyDiD/xfdSN2KHLrREZr8AxlBzlT/sAf6Fn5iWF0zYH1rxPeWw9RNzAzN3NSgjvxAYttLyDseijFPWyyvl90Xz2FHLsogUClh5FcVPXYkbZC59S3F05vlevV9hlXtY4ZVsc8TW9kyci1UPEji0UjvyFWSFX/rbkxTnCP+AlZl7a+MPBp44lNeO7EaEAEg7qMp9//bcULeLCZzdspblx5sp3sMsb8csUuoqxdRtEFE44sM199tn30jMr4MJT76S48I9nMLMGuDtF3IRnIaFkBXtMpbcdfdA0amb1jL+e1Unlj8e20ryhZu6W8RpElE5Y7yM6L1n6hg66ZJbjwqdfYhdv/IzqDRfhLQihHBIWOmcq+XSvVW+fRadmombundfP4tB7KJ5rVsrE+SfEgNIhBQSs8rjyhz5Y/qy35jHf+PHD/MfvzKTW6ZkV0sz480CkgLIhBYRe25772FAVt7uXQ1jz0P++Mvq3Oa0d7XLHTW/QmD+7lSY1ZiqZOVuuXRYpoGwMqOzz1MT5dLqrcuolSwCVNXY/9S+33HvHA4ev+ujjTz754LUXH7fXlittfk87Rd1Z6xP/uS5iRNkQ0TT4HSFdRN3dMuOkZ7+d0q5mJj7nktO/Hjly2Gev3Hnx3isiYNM3aOId7b+/94/dFwFSQNkQ0fdDpYma11Vhrbu78pFvP36FxtyOodf0ruCoWeSHu1YAIEWUjhGXClXMi6uombkbJ9/O7LppFBURJWlDz6ou+zZt/EBUmgLKByx2D03MG6383wTy83soXmuamfO30yv/JLtuXAqpXMAiL1HM3RqU8cn/UZRXj6TWuLuJOEf1PqGTHL8TUqmIW5mZa+aNVX7ffypN+cHRBdxdhfz3Ga3OeQcilUg4mWqiZJs2Qs12+TvFXbn3zcwKuIvw42ta3LIjkApFrD+Fos5x5z1KK6fKo5adRXMXPrHIeGoRt4w/fmzq7bsjFQl4jJ3Gbw7FRe7lVHkeLqe4u3HWUtu00Yq4K9s7KfxlLcR6Edu2C2ef3Yy/Uc3LisvJaBpKdXdXHoHzKcXc3N0zvoJQ5F/kB+sCF1PMS2rGmQOBS2lem/E2bGduxfKFJyHVwQbTeUM1Yh8x8+KWKT9eB5u+RvNc4ZfYoJ0NUU5YAqHOLTwXFaw8keKFTYytF2CFa1sodYzTl1i1tTEuPB0pb4Wfz0Ql4UGKF1V1tt+2ykr/m00Tr2vOTVZub5Dyy4CQs+dZqCScRvXinHLnXgMea6eLeUHl7qtrg8x9R8Sc5hQi1vq1hE1+/Nr7J5GWmRcWHrYRrTGe8Q9IOYgIeJxdXlh/mOJ0fv48Sx3bj6qNEb6NkBMQsOxYmmWilmOmTuevly7yLqXMyceyQ62AqdVR/rY0Qg2AgJWuGOMkXWqNJMdcuBw2bKGVOeFPfPNxZvWcnmVq5m5uWyPWqW3u/9+Ppilrfe5X1+3ejAoG0Eod9wRfWXIMJcf4/oesNRXp4iCkAjEBCMttf9BJZ5xyRN9VE4CUcAPFixtPHcl3seF3zPJ+Hbzexc+NbSVJ5bmFgJBSQMGUQkDzaGoJdv1xPl8GNvmJmbu7MTsX6LVu70PO/uM/b+qNWAhACDGlSkopBgAR26tbMeOvd5H3oYoNhjNTdzflp9shYMFMGED14spRn5B/REpY6lG6iLkJO25YGYjVajV230GljHNanIchIQYcNpFumagof79upwoWwIQTc6yAuxs7N0EEQsRiZ41mrXY520fdeELvpbvvDIqXNeXoKgIApIDmPa79bJqw1uePuGcHhO46kurK4cOo9Vx4IxJyQwpAWH6r3QYM2GvX9RdH9yfsR3XhNddS6pmzD2IeEFJC0Ri7K2IbdROedmAR4fsoG2KqjQHdH9A8iio8cOWMVkc5BKnEAh3xGEU5CG9R8oSvI6DnJhxMVQ7GUdQc47wtEHtQwNLfM+PBWHo81d0t41lI6MkJf2AnTwL+QXH3jDcjokcHrPgj+Vdgqw6aZXw0htCzkHAO+TgqeI5dGe+vhIAeHtD0Lr9JAf3d+TeEgB4fscG0tjWQ8GTbgUgB/wcT9uUQVLDimkgBCyhWUDggQgYAAPAdAJ0BKlAAUAA+bS6RRaQioZXNVvxABsS2AFlkgBzO18+Z/ib+W/yn1D+pfiT8ZufBLv2n/pPu57avibf5vq5eZL9XP1P97DpAP1N///YJf0z1AP1y9L79u/gh/Y39sPgJ/Yz/2YT1N1t3m3sH9LKzB6AXSR9FD9RkjtYr3fPdOiQiS4ka+KVWvroI/OghX9W40OvPzNUHyK7bR+leE7mcZ54jBc/a5PPANgfY/ht30IbpStXKnCocxBfX5KQj3WgYVwdFTEajcOmSfh26fZ8vh3TZesAE7LF7qCTX9+1S5dv4a+g8fElIdqM74fzGf9lrhK3TDoBaAP7/Vkb/deLT5/g8FfEDhyrxP2I8un5mTbCZ7FpMuIvaydgBP5GTW8vcq/fRb1LFXkrdUisQIl3/PQ1lz/tTfjdETECc//EriZZ7rZPw35oB5RNyoiPcE/7r4rOQopkSZIqEmn/FbH7R+mXT6Fm5y1u1VA/ePugpZSMHgcLIC3B/kzjtyh0MnFPpgpUZEJ1yCCWu6Mojjr7mXAzx0hLUJSK/pgaAMcc4ZBJV0UGJ9FSZkCZC7/rMchnl3AhFpJvEzY5PWixR73rOd2MmbuHwEQAn49li3YJRFVPCkuwTMTS1QV4exOeJW7URKNG5RHzFQ9u0/ocY8aCr7Ju2cpfgpwmqnVFjB6CteO/4196eHrEz2mbSR5y7h0EzFldz2uZUvGkUVDMmokhe4IHvhv+XxwDOTsx9MTOyo7BoPgVPUtpNEJU30Qba7bRpJzZeoHji5nLpa6Xcb9hsUOdA6ygnW5EIzUf0oxadO4T5eJzQfXo5jqoECovzKYVSfj/f5jVIYqxTIrbPmKVNV0ZI2bIb8k2IsC58s22N73Gu7zI0kPmLd3u/RBgjvvNW7EISipZlcjq9rNw36vbKAiCbboGXYXPxfk8Bc4RTvIM92zVu1fkkuNKIoD2qbWHsxa8C5A5wXwEMvV9vTHiGYqAgMRXqqcf5QRH7+y0VPCAEAlJ9zPpfRV3JEJF0UMnhsG9enb7M6K+mfl5fP/OIa6Nw2C9X7ncoJE1STaOX7/1Qr6ATvJvjgrV4NsJKaCfs4tR8CfQ4BnivLXnWCseag65sHSt9RccYeLVLVCXu5jv8vHWR4LewhcZdZ8u8HcoWen+XNVuG7FLW8krA7NtBusiezEj7EpJeND/wP1r48avRMszDKAhq0ENPf+curNF2n80uNtkmsAbjzgV8QJBgdeRCWCdMnkbXiOBoV7nuGm8H29MjkA3MxGX0C+8/wPQpjA67RJq8Y+vtw5R+azMz+1Qo3XU4rBNDcd4EfsDLD8NDxI+adEoMGJ5hixzZ+UkgcD3DyhqGHPC+Z8JbEaBg0f0w53thscX/Fr7vk5HWLlrjcFR/aMLx5RMv+K7yujzjfb5kfTEZEpsfgHuLPsZ1MaV2Aj+6l/2PRi3QeUorkrZGQkQQwmkwfC9siPI0XNFyEV7Dkzi3mbzdPoGUv7sG84te4IGmvCj0sbAZCT8jSpIaDzTN22VTo+HLvAJk03FgYYJSOzU4L5u5qQOnoH73CrBPMLOfL50ROsRuCO3XwAaDEWT7C+tUjB/5fJ1jEtBw+KKAD0XL3f9TQjhvh7Y+JXdHzsMiMeUWceHM1txvrmg2l9VHsdroAgJW7Zk80WPFuv74BO8qQ7u53AdqzU0Z+JN7DYybUhuUclSc+xnYGixC52p4bnMlWr49XRIa16YiihYJRMjfGoj9TWq10V8fznrGcHA/UqiM8JtJcrBtQBly2sOx6xNCCq5aN75wEDRdCMLzTOv80yFIj21Lyx4fNTFs/nVOeCpn0zLB6mf3TCQ6EfYyoAxJvBYKuayqnMStI8/Ry8xv7oyInnOsaMG5LlmTEsg4ITNE8LTqzWhzqEirDxD/NtbEGB/UyLVM/6Lke39SUGRWJL+5uq6Vs13Ywl7sCSJNnAc09WLkzCOdQihK87tft8pizyMdXLTxAwdETtk7rPP4iOjJxYHN3/dDnBmv7qQj28uIYMnIi1icMZhCL5B1+/+KwfLuMoNta1LHH5kTgXs3U313DVYQ78FWCEG4tcx45ynlD4w5SOCchPw3ZlT1ROtwsRQTJQbbqg+IiWEBxNmkrVdvstfHKmSAAA==",eC=t=>{const e=new Image;e.src=t},tC=Ae.memo(()=>{const[t,e]=E.useState(!1);return E.useEffect(()=>{eC(Gd),e(!0)},[]),t?d.jsx("img",{src:Gd,alt:"S.Essences Logo",width:40,height:40,loading:"eager",fetchPriority:"high",decoding:"async",className:"object-contain w-10 h-10 transition-all duration-300 md:w-8 md:h-8"}):d.jsx("div",{className:"w-10 h-10 flex items-center justify-center",children:d.jsx("div",{className:"w-8 h-8 bg-gray-200 rounded-full animate-pulse"})})}),rC=({onAuthClick:t,onCartClick:e})=>{const{user:r,logout:n}=kt(),{itemCount:s}=za(),{items:i}=Ph(),[o,a]=E.useState(!1),[c,l]=E.useState(!1),[u,h]=E.useState(!1),[f,p]=E.useState(!1),[m,y]=E.useState(!1),x=gi(),S=Kd(),_=E.useRef(null),b=E.useRef(null),w=[{name:"Home",href:"/"},{name:"Collections",href:"/products",hasDropdown:!0,dropdownItems:[{name:"All Products",href:"/products"},{name:"Oudh Attars",href:"/categories/oudh-attars"},{name:"Floral Attars",href:"/categories/floral-attars"},{name:"Musk Attars",href:"/categories/musk-attars"},{name:"Amber Attars",href:"/categories/amber-attars"},{name:"Saffron Attars",href:"/categories/saffron-attars"},{name:"Sandalwood Attars",href:"/categories/sandalwood-attars"},{name:"Jasmine Attars",href:"/categories/jasmine-attars"},{name:"Attar Blends",href:"/categories/attar-blends"},{name:"Seasonal Attars",href:"/categories/seasonal-attars"},{name:"Heritage Attars",href:"/categories/heritage-attars"}]},{name:"New Arrivals",href:"/new-arrivals"},{name:"Offers",href:"/deals"},{name:"About",href:"/about"}],v=j=>x.pathname===j;E.useEffect(()=>{const j=()=>{const P=window.scrollY;y(P>50)};return window.addEventListener("scroll",j,{passive:!0}),()=>window.removeEventListener("scroll",j)},[]),E.useEffect(()=>{const j=P=>{_.current&&!_.current.contains(P.target)&&p(!1),b.current&&!b.current.contains(P.target)&&l(!1)};return document.addEventListener("mousedown",j),()=>document.removeEventListener("mousedown",j)},[]),E.useEffect(()=>{c&&l(!1),f&&p(!1),u&&h(!1)},[x.pathname,c,f,u]),E.useEffect(()=>{const j=P=>{P.key==="Escape"&&(l(!1),p(!1),h(!1))};return document.addEventListener("keydown",j),()=>document.removeEventListener("keydown",j)},[]);const g=x.pathname==="/",k=`
    fixed top-0 left-0 right-0 z-50 transition-all duration-300 ease-in-out
    ${g&&!m?"bg-transparent backdrop-blur-none shadow-none":"bg-white/90 backdrop-blur-xl shadow-lg border-b border-white/20"}
  `,T=`
    mx-auto px-4 sm:px-6 lg:px-8 transition-all duration-300
    ${m?"max-w-6xl mt-4 mb-4 bg-white/90 backdrop-blur-2xl rounded-2xl shadow-xl border border-white/30":"max-w-7xl"}
  `;return d.jsxs(d.Fragment,{children:[d.jsx("header",{className:k,children:d.jsx("div",{className:T,children:d.jsxs("div",{className:`flex items-center justify-between transition-all duration-300 ${m?"h-14 py-2":"h-16 sm:h-18 py-2 sm:py-3"}`,children:[d.jsxs(Ie,{to:"/",className:"flex items-center space-x-2 flex-shrink-0 group",onClick:()=>window.scrollTo(0,0),children:[d.jsx(tC,{}),d.jsx("span",{className:`font-bold tracking-tight transition-all duration-300 ${m?"text-gray-900 text-lg":g&&!m?"text-white text-xl drop-shadow-lg":"text-gray-900 text-xl"}`,children:"S.Essences"})]}),d.jsx("nav",{className:"hidden md:flex items-center justify-center flex-1",children:d.jsx("div",{className:`flex items-center transition-all duration-300 ${m?"space-x-6":"space-x-8"}`,children:w.map(j=>{var P;return d.jsx("div",{className:"relative",children:j.hasDropdown?d.jsxs("div",{className:"relative",ref:_,children:[d.jsxs("button",{onClick:()=>p(!f),className:`flex items-center space-x-1 px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg ${v(j.href)?"text-purple-600 bg-purple-50/50":g&&!m?"text-white hover:text-purple-200 hover:bg-white/10":"text-gray-700 hover:text-purple-600 hover:bg-gray-50"}`,children:[d.jsx("span",{children:j.name}),d.jsx(av,{className:`h-4 w-4 transition-transform duration-200 ${f?"rotate-180":""}`})]}),f&&d.jsx("div",{className:"absolute top-full left-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50 py-2",children:(P=j.dropdownItems)==null?void 0:P.map(C=>d.jsx(Ie,{to:C.href,onClick:()=>{p(!1),window.scrollTo(0,0)},className:"block px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600",children:C.name},C.name))})]}):d.jsx(Ie,{to:j.href,onClick:()=>window.scrollTo(0,0),className:`px-3 py-2 text-sm font-medium transition-all duration-200 rounded-lg ${v(j.href)?"text-purple-600 bg-purple-50/50":g&&!m?"text-white hover:text-purple-200 hover:bg-white/10":"text-gray-700 hover:text-purple-600 hover:bg-gray-50"}`,children:j.name})},j.name)})})}),d.jsxs("div",{className:`flex items-center transition-all duration-300 ${m?"space-x-2":"space-x-3"}`,children:[d.jsx("button",{onClick:()=>h(!0),className:`p-2 transition-all duration-200 rounded-lg ${g&&!m?"text-white/90 hover:text-white hover:bg-white/10":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,"aria-label":"Search",children:d.jsx(xh,{className:"h-5 w-5"})}),d.jsxs(Ie,{to:"/wishlist",className:`relative p-2 transition-all duration-200 rounded-lg ${g&&!m?"text-white/90 hover:text-white hover:bg-white/10":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,children:[d.jsx($a,{className:"h-5 w-5"}),i.length>0&&d.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 text-xs rounded-full flex items-center justify-center font-medium bg-purple-600 text-white shadow-sm",children:i.length>9?"9+":i.length})]}),d.jsxs("button",{onClick:()=>{e(),window.scrollTo(0,0)},className:`relative p-2 transition-all duration-200 rounded-lg ${g&&!m?"text-white/90 hover:text-white hover:bg-white/10":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,"aria-label":`Shopping cart (${s} items)`,children:[d.jsx(qa,{className:"h-5 w-5"}),s>0&&d.jsx("span",{className:"absolute -top-1 -right-1 h-5 w-5 text-xs rounded-full flex items-center justify-center font-medium bg-purple-600 text-white shadow-sm",children:s>9?"9+":s})]}),r?d.jsxs("div",{className:"relative",ref:b,children:[d.jsx("button",{onClick:()=>l(!c),className:`flex items-center space-x-2 p-2 transition-all duration-200 rounded-lg ${g&&!m?"text-white/90 hover:text-white hover:bg-white/10":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,children:d.jsx("img",{src:r.avatar||`https://api.dicebear.com/8.x/initials/svg?seed=${r.name}`,alt:r.name,className:"h-8 w-8 rounded-full border-2 border-white/30 shadow-sm"})}),c&&d.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg z-50 py-2",children:[d.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[d.jsx("p",{className:"text-sm font-semibold text-gray-900",children:r.name}),d.jsx("p",{className:"text-xs text-gray-500 uppercase mt-1",children:r.role})]}),d.jsxs("div",{className:"py-1",children:[d.jsxs(Ie,{to:"/profile",onClick:()=>{l(!1),window.scrollTo(0,0)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600",children:[d.jsx(Nt,{className:"h-4 w-4 mr-3"}),d.jsx("span",{children:"Profile"})]}),d.jsxs(Ie,{to:"/dashboard",onClick:()=>{l(!1),window.scrollTo(0,0)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600",children:[d.jsx(Va,{className:"h-4 w-4 mr-3"}),d.jsx("span",{children:"Dashboard"})]}),d.jsxs(Ie,{to:"/orders",onClick:()=>{l(!1),window.scrollTo(0,0)},className:"flex items-center px-4 py-2 text-sm text-gray-700 hover:bg-purple-50 hover:text-purple-600",children:[d.jsx(Uo,{className:"h-4 w-4 mr-3"}),d.jsx("span",{children:"My Orders"})]})]}),d.jsx("div",{className:"border-t border-gray-200 py-1",children:d.jsxs("button",{onClick:()=>{n(),l(!1),window.scrollTo(0,0)},className:"flex items-center w-full px-4 py-2 text-sm text-gray-700 hover:bg-red-50 hover:text-red-600",children:[d.jsx(Ua,{className:"h-4 w-4 mr-3"}),d.jsx("span",{children:"Sign Out"})]})})]})]}):d.jsxs("button",{onClick:()=>{S("/auth"),window.scrollTo(0,0)},className:`px-6 py-2.5 text-sm font-semibold rounded-full transition-all duration-200 shadow-sm hover:shadow-md flex items-center space-x-2 ${g&&!m?"bg-white/20 hover:bg-white/30 text-white border border-white/30":"bg-gradient-to-r from-purple-600 to-indigo-600 hover:from-purple-700 hover:to-indigo-700 text-white shadow-lg hover:shadow-xl"}`,"aria-label":"Get Started",children:[d.jsx(Ha,{className:"h-4 w-4"}),d.jsx("span",{children:"Get Started"})]}),d.jsx("button",{onClick:()=>a(!0),className:`md:hidden p-2 transition-all duration-200 rounded-lg ${g&&!m?"text-white/90 hover:text-white hover:bg-white/10":"text-gray-600 hover:text-purple-600 hover:bg-purple-50"}`,"aria-label":"Open menu",children:d.jsx(Fv,{className:"h-6 w-6"})})]})]})})}),d.jsx(ZP,{isOpen:o,onClose:()=>a(!1),onCartClick:e}),d.jsx(XP,{isOpen:u,onClose:()=>h(!1)})]})},nC="/assets/logo-DVqTeVNI.png",sC=()=>{const t=[{title:"Company",links:["About Us","Careers","Press","News","Privacy Policy","Terms of Service"]},{title:"Customer Service",links:["Help Center","Contact Us","Return Policy","Size Guide","Track Your Order","FAQ"]},{title:"Categories",links:["Oudh Attars","Floral Attars","Musk Attars","Amber Attars","Sandalwood Attars","Heritage Attars"]},{title:"Quick Links",links:["New Arrivals","Best Sellers","Sale","Brands","Gift Cards","Wishlist"]}];return d.jsx("footer",{className:"bg-neutral-900 text-text-inverse",children:d.jsxs("div",{className:"container-luxury section-padding",children:[d.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-8 md:gap-10 lg:gap-12",children:[d.jsxs("div",{className:"lg:col-span-2 xl:col-span-2",children:[d.jsxs("div",{className:"flex items-center space-x-3 mb-6",children:[d.jsx("img",{src:nC,alt:"Logo",className:"w-8 h-8 object-contain"}),d.jsx("h3",{className:"text-2xl font-semibold text-text-inverse font-luxury",children:"S.Essences"})]}),d.jsx("p",{className:"text-neutral-300 mb-8 leading-relaxed max-w-md",children:"Your destination for curated excellence. We bring together the finest products with uncompromising quality and sophisticated design."}),d.jsxs("div",{className:"flex space-x-4",children:[d.jsx("a",{href:"#",className:"text-neutral-400 hover:text-text-inverse transition-colors duration-200 p-2 rounded-lg hover:bg-neutral-800",children:d.jsx(vv,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"text-neutral-400 hover:text-text-inverse transition-colors duration-200 p-2 rounded-lg hover:bg-neutral-800",children:d.jsx(ow,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"text-neutral-400 hover:text-text-inverse transition-colors duration-200 p-2 rounded-lg hover:bg-neutral-800",children:d.jsx(Pv,{className:"h-5 w-5"})}),d.jsx("a",{href:"#",className:"text-neutral-400 hover:text-text-inverse transition-colors duration-200 p-2 rounded-lg hover:bg-neutral-800",children:d.jsx(dw,{className:"h-5 w-5"})})]})]}),t.map((e,r)=>d.jsxs("div",{className:`${r===0?"md:col-span-1":""} ${r===1?"md:col-span-1":""}`,children:[d.jsx("h4",{className:"text-lg font-medium mb-6 text-text-inverse",children:e.title}),d.jsx("ul",{className:"space-y-3",children:e.links.map(n=>d.jsx("li",{children:d.jsx("a",{href:"#",className:"text-neutral-300 hover:text-text-inverse transition-colors duration-200 text-sm leading-relaxed",children:n})},n))})]},e.title))]}),d.jsx("div",{className:"border-t border-neutral-800 mt-12 md:mt-16 pt-8 md:pt-12",children:d.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6 md:gap-8",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"p-2 bg-neutral-800 rounded-lg",children:d.jsx(In,{className:"h-5 w-5 text-primary-400"})}),d.jsx("span",{className:"text-neutral-300 text-sm md:text-base",children:"support@sophisticatedcommerce.com"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"p-2 bg-neutral-800 rounded-lg",children:d.jsx(Ba,{className:"h-5 w-5 text-primary-400"})}),d.jsx("span",{className:"text-neutral-300 text-sm md:text-base",children:"+1 (555) 123-4567"})]}),d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsx("div",{className:"p-2 bg-neutral-800 rounded-lg",children:d.jsx(Lv,{className:"h-5 w-5 text-primary-400"})}),d.jsx("span",{className:"text-neutral-300 text-sm md:text-base",children:"123 Commerce St, City, State 12345"})]})]})}),d.jsx("div",{className:"border-t border-neutral-800 mt-8 md:mt-12 pt-6 md:pt-8",children:d.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center space-y-4 md:space-y-0",children:[d.jsx("p",{className:"text-neutral-400 text-sm",children:" 2025 S.Essences. All rights reserved."}),d.jsxs("div",{className:"flex flex-wrap justify-center md:justify-end space-x-4 md:space-x-6 text-sm",children:[d.jsx("a",{href:"#",className:"text-neutral-400 hover:text-text-inverse transition-colors duration-200",children:"Privacy Policy"}),d.jsx("a",{href:"#",className:"text-neutral-400 hover:text-text-inverse transition-colors duration-200",children:"Terms of Service"}),d.jsx("a",{href:"#",className:"text-neutral-400 hover:text-text-inverse transition-colors duration-200",children:"Cookie Policy"})]})]})})]})})},iC=({isOpen:t,onClose:e})=>{const{items:r,updateQuantity:n,removeItem:s,total:i,clearCart:o,loading:a,itemCount:c}=za();return d.jsx(ed,{children:t&&d.jsxs(d.Fragment,{children:[d.jsx(Ot.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50",onClick:e}),d.jsx(Ot.div,{initial:{x:"100%"},animate:{x:0},exit:{x:"100%"},transition:{type:"spring",damping:25,stiffness:200},className:"fixed right-0 top-0 h-screen w-full max-w-md bg-white shadow-xl z-50",style:{height:"100vh",maxHeight:"100vh"},children:d.jsxs("div",{className:"flex flex-col h-full max-h-screen",children:[d.jsxs("div",{className:"flex-shrink-0 flex items-center justify-between p-6 border-b border-neutral-200",children:[d.jsxs("h2",{className:"text-xl font-semibold text-neutral-900",children:["Shopping Cart (",c,")"]}),d.jsx("button",{onClick:e,className:"p-2 hover:bg-neutral-100 rounded-lg transition-colors duration-200","aria-label":"Close cart",children:d.jsx(bt,{className:"h-5 w-5 text-neutral-600"})})]}),d.jsx("div",{className:"flex-grow overflow-y-auto p-6",children:a?d.jsx("div",{className:"flex items-center justify-center h-full",children:d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-neutral-900"})}):r.length===0?d.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-neutral-500",children:[d.jsx(Jv,{className:"h-16 w-16 mb-4 text-neutral-300"}),d.jsx("p",{className:"text-lg font-medium mb-2 text-neutral-700",children:"Your cart is empty"}),d.jsx("p",{className:"text-sm text-neutral-500",children:"Add some products to get started!"})]}):d.jsxs("div",{className:"space-y-4",children:[d.jsx(ed,{children:r.map(l=>d.jsxs(Ot.div,{layout:!0,initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"flex items-center space-x-4 p-4 border border-gray-200 rounded-lg",children:[d.jsx("img",{src:l.product.images[0],alt:l.product.name,className:"w-16 h-16 object-cover rounded-lg"}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h3",{className:"font-medium text-gray-900 truncate",children:l.product.name}),d.jsxs("p",{className:"text-sm text-gray-500",children:["",l.product.price.toLocaleString("en-IN")]}),d.jsxs("div",{className:"flex items-center space-x-2 mt-2",children:[d.jsx("button",{onClick:()=>n(l.product.id,l.quantity-1),className:"p-1 hover:bg-gray-100 rounded","aria-label":`Decrease quantity of ${l.product.name}`,disabled:l.quantity<=1,children:d.jsx(Uv,{className:"h-4 w-4"})}),d.jsx("span",{className:"px-2 py-1 bg-gray-100 rounded text-sm min-w-[40px] text-center",children:l.quantity}),d.jsx("button",{onClick:()=>n(l.product.id,l.quantity+1),className:"p-1 hover:bg-gray-100 rounded","aria-label":`Increase quantity of ${l.product.name}`,children:d.jsx(Hv,{className:"h-4 w-4"})})]})]}),d.jsxs("div",{className:"text-right",children:[d.jsxs("p",{className:"font-semibold text-gray-900",children:["",(l.product.price*l.quantity).toLocaleString("en-IN")]}),d.jsx("button",{onClick:()=>s(l.product.id),className:"text-red-500 text-sm hover:text-red-700 mt-1","aria-label":`Remove ${l.product.name} from cart`,children:"Remove"})]})]},l.product.id))}),r.length>0&&d.jsx("button",{onClick:o,className:"w-full text-red-500 text-sm hover:text-red-700 py-2 border border-red-200 rounded-lg hover:bg-red-50 transition-colors",children:"Clear Cart"})]})}),r.length>0&&d.jsxs("div",{className:"flex-shrink-0 border-t border-neutral-200 p-6 bg-neutral-50",children:[d.jsxs("div",{className:"flex items-center justify-between mb-6",children:[d.jsx("span",{className:"text-lg font-semibold text-neutral-700",children:"Total:"}),d.jsxs("span",{className:"text-2xl font-bold text-neutral-900",children:["$",i.toFixed(2)]})]}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(Ie,{to:"/checkout",onClick:e,children:d.jsx(Ot.button,{className:"w-full bg-neutral-900 text-white py-3.5 px-6 rounded-lg font-medium hover:bg-neutral-800 transition-colors duration-200 shadow-lg hover:shadow-xl",whileHover:{scale:1.02},whileTap:{scale:.98},children:"Proceed to Checkout"})}),d.jsx("button",{onClick:e,className:"w-full bg-white border-2 border-neutral-200 text-neutral-900 py-3.5 px-6 rounded-lg font-medium hover:bg-neutral-50 hover:border-neutral-300 transition-colors duration-200",children:"Continue Shopping"})]})]})]})})]})})},oC=()=>{const{items:t,removeItem:e,clearCompare:r}=Rw();return t.length===0?null:d.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-40 bg-white/90 backdrop-blur-lg shadow-[0_-5px_20px_rgba(0,0,0,0.1)]",children:d.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsxs("div",{className:"flex items-center space-x-4",children:[d.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Compare Products (",t.length,"/4)"]}),d.jsx("div",{className:"flex -space-x-4",children:t.map(n=>d.jsxs("div",{className:"relative group",children:[d.jsx("img",{src:n.images[0],alt:n.name,className:"w-12 h-12 object-cover rounded-full border-2 border-white shadow-md"}),d.jsx("button",{onClick:()=>e(n.id),className:"absolute -top-1 -right-1 bg-red-500 text-white rounded-full p-0.5 opacity-0 group-hover:opacity-100 transition-opacity",children:d.jsx(bt,{className:"h-3 w-3"})})]},n.id))})]}),d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("button",{onClick:r,className:"text-sm text-gray-600 hover:text-red-600",children:"Clear All"}),d.jsx(Ie,{to:"/compare",children:d.jsxs("button",{className:"bg-indigo-600 text-white px-6 py-2.5 rounded-lg hover:bg-indigo-700 transition-colors flex items-center space-x-2 font-medium",children:[d.jsx(Sv,{className:"h-5 w-5"}),d.jsx("span",{children:"Compare Now"})]})})]})]})})})},aC=({children:t})=>{const[e,r]=E.useState(!1),n=gi(),s=n.pathname==="/",i=n.pathname.startsWith("/dashboard");return d.jsxs("div",{className:"min-h-screen transition-colors duration-300 bg-background-primary",children:[!i&&d.jsx(rC,{onAuthClick:()=>{},onCartClick:()=>r(!0)}),d.jsx("main",{className:`${s?"":"pt-8"} relative`,children:d.jsx("div",{className:"min-h-[calc(100vh-200px)]",children:t})}),!i&&d.jsx(sC,{}),d.jsx(iC,{isOpen:e,onClose:()=>r(!1)}),d.jsx(oC,{})]})},cC=()=>{const{error:t,setError:e}=Fa();if(!t)return null;const r=new Error(t),n=Th(r),s=t.includes("row-level security")||t.includes("policy"),i=t.includes("connection")||t.includes("network"),a=n?{title:"RLS Infinite Recursion Detected",description:"Your database Row Level Security policies are causing an infinite loop. This is a common setup issue that can be easily fixed.",solution:["Run the rls_policies_fix.sql script in your Supabase SQL Editor","This script replaces problematic policies with safe alternatives","The fix includes role caching to prevent future recursion issues","After running the script, refresh this page"],scriptFile:"rls_policies_fix.sql",severity:"critical"}:s?{title:"Row Level Security Policy Issue",description:"There's an issue with your database security policies. This affects data access permissions.",solution:["Check your user role and permissions","Run the database_schema_fixes.sql script to ensure policies are correct","Verify you have the necessary access rights","Contact support if the issue persists"],scriptFile:"database_schema_fixes.sql",severity:"high"}:i?{title:"Database Connection Error",description:"Unable to connect to the database. This could be a network or configuration issue.",solution:["Check your internet connection","Verify your Supabase project is active","Check environment variables (VITE_SUPABASE_URL, VITE_SUPABASE_ANON_KEY)","Try refreshing the page"],scriptFile:null,severity:"medium"}:{title:"Database Configuration Required",description:"A critical database setup error has been detected. Your database needs proper configuration.",solution:["Run the complete_ecommerce_schema.sql script in your Supabase SQL Editor","Then run the database_schema_fixes.sql script","Finally run the rls_policies_fix.sql script","Refresh the page after completing all scripts"],scriptFile:"complete_ecommerce_schema.sql",severity:"critical"},c=()=>{switch(a.severity){case"critical":return"bg-red-900/95";case"high":return"bg-orange-900/95";case"medium":return"bg-yellow-900/95";default:return"bg-red-900/95"}},u=(()=>{switch(a.severity){case"critical":return Nn;case"high":return pv;case"medium":return Qs;default:return Nn}})();return d.jsx("div",{className:`fixed inset-0 ${c()} text-white z-[200] flex items-center justify-center p-8`,children:d.jsxs("div",{className:"max-w-4xl text-center",children:[d.jsx(u,{className:"mx-auto h-16 w-16 text-yellow-400 mb-6"}),d.jsx("h1",{className:"text-4xl font-bold mb-4",children:a.title}),d.jsx("p",{className:"text-xl text-red-100 mb-8",children:a.description}),d.jsxs("div",{className:"bg-black/30 p-6 rounded-lg text-left font-mono text-sm mb-8 max-h-32 overflow-y-auto",children:[d.jsx("p",{className:"font-bold text-yellow-300 mb-2",children:"> Error Details:"}),d.jsx("p",{className:"break-words",children:t})]}),d.jsxs("div",{className:"bg-black/20 p-6 rounded-lg text-left mb-8",children:[d.jsx("h3",{className:"font-bold text-yellow-300 mb-4 text-lg",children:" How to Fix This:"}),d.jsx("ol",{className:"list-decimal list-inside space-y-2 text-red-100",children:a.solution.map((h,f)=>d.jsx("li",{className:"leading-relaxed",children:h},f))}),a.scriptFile&&d.jsx("div",{className:"mt-4 p-3 bg-blue-900/30 rounded border border-blue-500",children:d.jsxs("p",{className:"text-blue-200 text-sm",children:[" ",d.jsx("strong",{children:"Script to run:"})," ",d.jsx("code",{className:"bg-black/30 px-2 py-1 rounded",children:a.scriptFile})]})})]}),n&&d.jsxs("div",{className:"bg-purple-900/20 border border-purple-500 p-4 rounded-lg mb-8 text-left",children:[d.jsx("h4",{className:"font-bold text-purple-300 mb-2",children:" Understanding RLS Recursion:"}),d.jsx("p",{className:"text-purple-100 text-sm leading-relaxed",children:"Row Level Security (RLS) infinite recursion occurs when a security policy on a table references the same table in its condition. For example, checking if a user is an admin by querying the profiles table from within a profiles table policy creates a loop. Our fix uses safe role caching to avoid this issue."})]}),d.jsxs("div",{className:"flex justify-center space-x-4",children:[d.jsxs("button",{onClick:()=>e(null),className:"bg-yellow-400 text-red-900 font-bold px-8 py-3 rounded-lg hover:bg-yellow-300 transition-colors flex items-center",children:[d.jsx(bt,{className:"mr-2 h-5 w-5"}),"I will fix this (Dismiss)"]}),d.jsxs("button",{onClick:()=>window.location.reload(),className:"bg-blue-600 text-white font-bold px-8 py-3 rounded-lg hover:bg-blue-500 transition-colors flex items-center",children:[d.jsx(Qs,{className:"mr-2 h-5 w-5"}),"Refresh Page"]})]}),d.jsxs("div",{className:"mt-8 text-sm text-red-200",children:[d.jsx("p",{children:"Need help? Check the project documentation or contact support."}),d.jsxs("p",{className:"mt-2",children:[" ",d.jsx("strong",{children:"Files in your project:"})," All SQL scripts are in your project root directory"]})]})]})})},ir=class ir{constructor(){fe(this,"errorLog",[]);this.setupGlobalErrorHandlers()}static getInstance(){return ir.instance||(ir.instance=new ir),ir.instance}setupGlobalErrorHandlers(){window.addEventListener("unhandledrejection",e=>{var r;this.isNetworkError(e.reason)&&(this.logError("Unhandled network rejection",(r=e.reason)==null?void 0:r.message),e.preventDefault())}),window.addEventListener("error",e=>{if(e.target&&e.target!==window){const r=e.target;(r.tagName==="LINK"||r.tagName==="SCRIPT"||r.tagName==="IMG")&&this.handleResourceError(r)}},!0)}isNetworkError(e){if(!e)return!1;const r=["Failed to fetch","ERR_BLOCKED_BY_CLIENT","ERR_NETWORK","ERR_INTERNET_DISCONNECTED","TypeError: Failed to fetch"],n=e.message||e.toString();return r.some(s=>n.includes(s))}handleResourceError(e){const r=e.src||e.href;this.logError("Resource loading failed",`Failed to load: ${r}`),e.tagName==="LINK"&&e.rel==="stylesheet"?this.handleStylesheetError(e):e.tagName==="SCRIPT"&&this.handleScriptError(e)}handleStylesheetError(e){e.href.includes("googleapis.com")&&console.warn("Google Fonts blocked - using system fonts as fallback")}handleScriptError(e){(e.src.includes("google-analytics")||e.src.includes("gtag"))&&console.warn("Analytics script blocked - continuing without tracking")}logError(e,r,n){const s={timestamp:new Date,error:`${e}: ${r}`,url:n};this.errorLog.push(s),this.errorLog.length>50&&this.errorLog.shift()}getErrorLog(){return[...this.errorLog]}clearErrorLog(){this.errorLog=[]}async safeFetch(e,r){try{return await fetch(e,r)}catch(n){if(this.isNetworkError(n))return this.logError("Fetch failed",`Network error for ${e}`,e),null;throw n}}};fe(ir,"instance");let Ra=ir;Ra.getInstance();class lC extends E.Component{constructor(r){super(r);fe(this,"handleRetry",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r}}componentDidCatch(r,n){const i=["XrayWrapper","cross-origin","webkit-text-size-adjust","content-script","__cf_bm","Invalid URI","Load of media resource","ERR_BLOCKED_BY_CLIENT","Failed to fetch","google-analytics","googleapis.com","contentScript.bundle.js","i18next","preloaded using link preload"].some(o=>{var a,c;return((a=r.message)==null?void 0:a.includes(o))||((c=r.stack)==null?void 0:c.includes(o))});i||console.error("Error caught by boundary:",r,n),this.setState({error:r,errorInfo:n}),this.props.onError&&!i&&this.props.onError(r,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:d.jsx("div",{className:"max-w-md w-full mx-auto text-center",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-8",children:[d.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-6",children:d.jsx(Nn,{className:"h-8 w-8 text-red-600"})}),d.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Something went wrong"}),d.jsx("p",{className:"text-gray-600 mb-6",children:"We're sorry, but something unexpected happened. Please try again or return to the home page."}),!1,d.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[d.jsxs("button",{onClick:this.handleRetry,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 transition-colors font-medium flex items-center justify-center",children:[d.jsx(Qs,{className:"h-4 w-4 mr-2"}),"Try Again"]}),d.jsxs("a",{href:"/",className:"flex-1 bg-gray-600 text-white px-4 py-2 rounded-lg hover:bg-gray-700 transition-colors font-medium flex items-center justify-center",children:[d.jsx(wh,{className:"h-4 w-4 mr-2"}),"Go Home"]})]})]})})}):this.props.children}}const uC=()=>null,dC=()=>{const{pathname:t}=gi();return E.useEffect(()=>{const e=setTimeout(()=>{window.scrollTo({top:0,left:0,behavior:"smooth"})},100);return()=>clearTimeout(e)},[t]),null},hC=({size:t="medium",text:e,subText:r,overlay:n=!1,className:s="",stage:i="loading",progress:o=0,showProgress:a=!1,onRetry:c})=>{const l={small:"h-4 w-4",medium:"h-10 w-10",large:"h-12 w-12"},u=()=>{switch(i){case"success":return d.jsx(vi,{className:`${l[t]} text-green-500`});case"error":return d.jsx(Le,{className:`${l[t]} text-red-500`});case"offline":return d.jsx(Rl,{className:`${l[t]} text-gray-500`});default:return d.jsx(_h,{className:`${l[t]} text-primary`})}},h=()=>{switch(i){case"success":return"text-green-600";case"error":return"text-red-600";case"offline":return"text-gray-600";default:return"text-gray-600"}},f=d.jsx("div",{className:`flex flex-col items-center justify-center py-8 ${s}`,children:d.jsxs("div",{className:"flex flex-col items-center",children:[u(),a&&i==="loading"&&d.jsx("div",{className:"w-32 h-2 bg-gray-200 rounded-full mt-4 overflow-hidden",children:d.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-300",style:{width:`${o}%`}})}),e&&d.jsx("p",{className:`mt-4 text-sm font-medium ${h()}`,children:e}),r&&d.jsx("p",{className:"mt-2 text-xs text-gray-500 text-center max-w-xs",children:r}),i==="error"&&c&&d.jsx("button",{onClick:c,className:"mt-4 px-4 py-2 bg-primary text-white rounded-lg hover:bg-primary-dark transition-colors text-sm font-medium",children:"Try Again"}),i==="offline"&&d.jsxs("div",{className:"mt-4 flex items-center text-xs text-gray-500",children:[d.jsx(Rl,{className:"h-3 w-3 mr-1"}),d.jsx("span",{children:"Check your internet connection"})]})]})});return n?d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:d.jsx("div",{className:"bg-white rounded-lg p-6 shadow-xl",children:f})}):f},gR=({stages:t,className:e=""})=>{const r=t.filter(i=>i.completed).length,n=t.length,s=r/n*100;return d.jsxs("div",{className:`bg-white rounded-lg border border-gray-200 p-6 ${e}`,children:[d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"Loading Content"}),d.jsxs("span",{className:"text-xs text-gray-500",children:[r,"/",n]})]}),d.jsx("div",{className:"w-full h-2 bg-gray-200 rounded-full overflow-hidden",children:d.jsx("div",{className:"h-full bg-primary rounded-full transition-all duration-500",style:{width:`${s}%`}})})]}),d.jsx("div",{className:"space-y-3",children:t.map(i=>d.jsxs("div",{className:"flex items-center space-x-3",children:[d.jsx("div",{className:"flex-shrink-0",children:i.completed?d.jsx(vi,{className:"h-4 w-4 text-green-500"}):i.error?d.jsx(Le,{className:"h-4 w-4 text-red-500"}):i.loading?d.jsx(_h,{className:"h-4 w-4 text-primary"}):d.jsx("div",{className:"h-4 w-4 border-2 border-gray-300 rounded-full"})}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`text-sm font-medium ${i.completed?"text-green-600":i.error?"text-red-600":i.loading?"text-primary":"text-gray-500"}`,children:i.name}),i.description&&d.jsx("p",{className:"text-xs text-gray-500 mt-1",children:i.description})]})]},i.name))})]})},fC=({children:t,priority:e="medium",preloadImages:r=[],criticalCSS:n})=>{const s=E.useRef(null),i=E.useRef(null);return E.useEffect(()=>{if(r.forEach(o=>{const a=document.createElement("link");a.rel="preload",a.as="image",a.href=o,a.fetchPriority=e,document.head.appendChild(a)}),n){const o=document.createElement("style");o.textContent=n,o.setAttribute("data-critical","true"),document.head.appendChild(o)}return"IntersectionObserver"in window&&(i.current=new IntersectionObserver(o=>{o.forEach(a=>{a.isIntersecting&&a.target.setAttribute("data-visible","true")})},{rootMargin:"50px",threshold:.1}),s.current&&i.current.observe(s.current)),()=>{i.current&&i.current.disconnect()}},[r,n,e]),d.jsx("div",{ref:s,className:"lcp-optimized",style:{contentVisibility:"auto",containIntrinsicSize:"1px 1000px"},children:t})},pC=({resources:t})=>(E.useEffect(()=>{t.forEach(e=>{const r=document.createElement("link");r.rel="preload",r.href=e.href,r.as=e.as,e.type&&(r.type=e.type),e.crossOrigin&&(r.crossOrigin=e.crossOrigin),document.head.appendChild(r)})},[t]),null),mC=()=>(E.useEffect(()=>{["fonts.googleapis.com","fonts.gstatic.com"].forEach(r=>{const n=document.createElement("link");n.rel="dns-prefetch",n.href=`//${r}`,document.head.appendChild(n)}),["https://fonts.googleapis.com","https://fonts.gstatic.com"].forEach(r=>{const n=document.createElement("link");n.rel="preconnect",n.href=r,n.crossOrigin="anonymous",document.head.appendChild(n)})},[]),null),gC=()=>(E.useEffect(()=>{if("PerformanceObserver"in window){const t=new PerformanceObserver(e=>{const r=e.getEntries(),n=r[r.length-1];if(n){const s=n.startTime;console.log(` LCP: ${s.toFixed(2)}ms`),s>2500?console.warn(` Poor LCP: ${s.toFixed(2)}ms (should be < 2500ms)`):s>4e3?console.error(` Very poor LCP: ${s.toFixed(2)}ms (should be < 2500ms)`):console.log(` Good LCP: ${s.toFixed(2)}ms`)}});try{t.observe({type:"largest-contentful-paint",buffered:!0})}catch(e){console.warn("LCP monitoring not supported:",e)}return()=>t.disconnect()}},[]),null),yC=({children:t,enableLCPMonitoring:e=!0,preloadResources:r=[],criticalImages:n=[]})=>d.jsxs(d.Fragment,{children:[d.jsx(mC,{}),e&&d.jsx(gC,{}),r.length>0&&d.jsx(pC,{resources:r}),d.jsx(fC,{preloadImages:n,children:t})]}),yR=({src:t,alt:e,fallbackSrc:r,className:n="",width:s,height:i,onError:o,onLoad:a,retryAttempts:c=2,placeholder:l})=>{const[u,h]=E.useState(t),[f,p]=E.useState(!1),[m,y]=E.useState(!0),[x,S]=E.useState(0),_=E.useRef(null),b=g=>{if(console.warn(`Image load failed: ${u}`),o&&o(g.nativeEvent),x<c){S(T=>T+1);const k=u.includes("?")?"&":"?";h(`${u}${k}retry=${x+1}`)}else r&&u!==r?(h(r),S(0)):(p(!0),y(!1))},w=()=>{y(!1),p(!1),a&&a()},v=()=>{p(!1),y(!0),S(0),h(t)};return E.useEffect(()=>{h(t),p(!1),y(!0),S(0)},[t]),f?d.jsxs("div",{className:`flex flex-col items-center justify-center bg-gray-100 border border-gray-200 rounded ${n}`,style:{width:s,height:i||"auto",minHeight:i?`${i}px`:"100px"},children:[d.jsx(Nn,{className:"h-8 w-8 text-gray-400 mb-2"}),d.jsx("p",{className:"text-sm text-gray-500 text-center mb-2",children:"Failed to load image"}),d.jsxs("button",{onClick:v,className:"flex items-center px-3 py-1 text-xs bg-gray-200 hover:bg-gray-300 rounded transition-colors",children:[d.jsx(Qs,{className:"h-3 w-3 mr-1"}),"Retry"]})]}):d.jsxs("div",{className:"relative",children:[m&&l&&d.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-gray-100 rounded",children:l}),d.jsx("img",{ref:_,src:u,alt:e,width:s,height:i,className:`${n} ${m?"opacity-0":"opacity-100"} transition-opacity duration-300`,onError:b,onLoad:w,loading:"lazy",decoding:"async",crossOrigin:"anonymous",style:{...s&&i&&{aspectRatio:`${s} / ${i}`}}})]})},vC=()=>(E.useEffect(()=>{const t=e=>{const r=e.target;r&&(r.tagName==="IMG"||r.tagName==="VIDEO"||r.tagName==="AUDIO")&&(console.warn("Global media error caught:",{src:r.src||r.src,tagName:r.tagName,error:r.error}),e.preventDefault(),e.stopPropagation())};return document.addEventListener("error",t,!0),()=>{document.removeEventListener("error",t,!0)}},[]),null),Ym=({href:t,children:e})=>d.jsx("a",{href:t,className:"sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-md focus:shadow-lg",onFocus:r=>r.currentTarget.classList.remove("sr-only"),onBlur:r=>r.currentTarget.classList.add("sr-only"),children:e}),wC=()=>{var t;if(!document.querySelector("[data-skip-link]")){const e=document.createElement("a");e.href="#main-content",e.textContent="Skip to main content",e.className="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-50 focus:px-4 focus:py-2 focus:bg-blue-600 focus:text-white focus:rounded-md",e.setAttribute("data-skip-link","true"),document.body.insertBefore(e,document.body.firstChild)}if(!document.querySelector("main")){const e=document.querySelector('#main-content, .main-content, [role="main"]');if(e&&e.tagName!=="MAIN"){const r=document.createElement("main");r.id="main-content",(t=e.parentNode)==null||t.insertBefore(r,e),r.appendChild(e)}}document.addEventListener("keydown",e=>{e.key==="Escape"&&document.querySelectorAll('[role="dialog"][aria-hidden="false"]').forEach(n=>{const s=n.querySelector('[data-close], [aria-label*="close"]');s&&s.click()})})},bC=Object.freeze(Object.defineProperty({__proto__:null,SkipLink:Ym,initializeAccessibility:wC},Symbol.toStringTag,{value:"Module"})),_C=()=>typeof window<"u"&&navigator.userAgent.includes("Firefox"),xC=()=>{if(!_C())return;console.log(" Initializing XrayWrapper fixes for Firefox");const t={...console};["log","warn","error","info","debug"].forEach((e,r)=>{console[e]=(...n)=>{try{const s=t[e];typeof s=="function"&&s.apply(t,n)}catch{if(typeof window<"u"&&window.wrappedJSObject)try{const i=window.wrappedJSObject.console[e];typeof i=="function"&&i.apply(window.wrappedJSObject.console,n)}catch{}}}}),window.addEventListener("error",e=>{var r,n,s,i;if((n=(r=e.error)==null?void 0:r.message)!=null&&n.includes("XrayWrapper")||(i=(s=e.error)==null?void 0:s.message)!=null&&i.includes("cross-origin object"))return console.warn("XrayWrapper error intercepted:",e.error),e.preventDefault(),!1}),console.log(" XrayWrapper fixes initialized")},SC=Ae.lazy(()=>de(()=>import("./HomePage--guHO31L.js"),__vite__mapDeps([0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17]))),Ao=Ae.lazy(()=>de(()=>import("./ProductsPage-DTbpS5de.js"),__vite__mapDeps([18,1,2,10,11,3,9,12,13,19,20,5,6,7,21,22]))),EC=Ae.lazy(()=>de(()=>import("./ProductDetailPage-DCxSN5lY.js"),__vite__mapDeps([23,1,2,24,4,5,6,7,8,9,25,26,27,11,3,12,13,28]))),TC=Ae.lazy(()=>de(()=>import("./DashboardPage-DbNXhXpd.js"),__vite__mapDeps([29,1,2,20,3,7,19,30,31,28,9,27,25,32,24,17,15,13,16]))),kC=Ae.lazy(()=>de(()=>import("./ProfilePage-BfIA-SPx.js"),__vite__mapDeps([33,1,2,34,31]))),jC=Ae.lazy(()=>de(()=>import("./CheckoutPage-Dwxa0h_o.js"),__vite__mapDeps([35,1,2,26,27,12,3,13,6,8,36]))),AC=Ae.lazy(()=>de(()=>import("./SearchPage-VRq5_0fX.js"),__vite__mapDeps([37,1,2,10,11,3,9,12,13,14,19]))),PC=Ae.lazy(()=>de(()=>import("./WishlistPage-QRd0RV2e.js"),__vite__mapDeps([38,1,2,10,11,3,9,12,13,14,30]))),CC=Ae.lazy(()=>de(()=>import("./OrdersPage-D0h-RFwY.js"),__vite__mapDeps([39,1,2,3,28]))),RC=Ae.lazy(()=>de(()=>import("./ComparePage-DyIcQLu0.js"),__vite__mapDeps([40,30,32,1,2]))),IC=Ae.lazy(()=>de(()=>import("./NewArrivalsPage-CtLzazIo.js"),__vite__mapDeps([41,10,1,2,11,3,9,12,13]))),NC=Ae.lazy(()=>de(()=>import("./DealsPage-SBKkh1cc.js"),__vite__mapDeps([42,10,1,2,11,3,9,12,13]))),OC=Ae.lazy(()=>de(()=>import("./CategoriesPage-W-tHxpDN.js"),__vite__mapDeps([43,8,1,2,21]))),DC=Ae.lazy(()=>de(()=>import("./CollectionsPage-DNdwargc.js"),__vite__mapDeps([44,1,2,21,22,8,17]))),LC=Ae.lazy(()=>de(()=>import("./SettingsPage-CbFvWiMB.js"),__vite__mapDeps([45,1,2,32,34,31,25,28,30,36,27,16]))),MC=Ae.lazy(()=>de(()=>import("./AuthPage-XpgD4ZnT.js"),__vite__mapDeps([46,1,2]))),FC=Ae.lazy(()=>de(()=>import("./NotFoundPage-CMYa7g__.js"),__vite__mapDeps([47,1,2]))),$C=()=>d.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background-primary",children:d.jsxs("div",{className:"text-center",children:[d.jsx(hC,{size:"large"}),d.jsx("p",{className:"mt-4 text-text-secondary",children:"Loading page..."})]})});function UC(){return E.useEffect(()=>{const t=e=>{const r=e.target;console.warn("Media error caught:",{src:r.src,tagName:r.tagName,error:r.error}),e.stopImmediatePropagation()};return document.addEventListener("error",t,!0),()=>{document.removeEventListener("error",t,!0)}},[]),E.useEffect(()=>{xC()},[]),E.useEffect(()=>{(async()=>{await new Promise(e=>setTimeout(e,2e3));try{const{initializeAccessibility:e}=await de(async()=>{const{initializeAccessibility:r}=await Promise.resolve().then(()=>bC);return{initializeAccessibility:r}},void 0);e()}catch(e){console.warn("Failed to initialize accessibility features:",e)}try{{const{initMonitoring:e}=await de(async()=>{const{initMonitoring:r}=await Promise.resolve().then(()=>pk);return{initMonitoring:r}},void 0);e({sentry:{dsn:"",environment:"production",release:"1.0.0",tracesSampleRate:.1},logRocket:{appId:""}})}}catch(e){console.warn("Failed to initialize monitoring:",e)}})()},[]),d.jsxs(lC,{children:[d.jsx(yC,{enableLCPMonitoring:!0,preloadResources:[],criticalImages:[],children:d.jsx(K0,{children:d.jsx($w,{children:d.jsx(gk,{children:d.jsx(fw,{children:d.jsx(yw,{children:d.jsx(Bw,{children:d.jsx(Aw,{children:d.jsx(Cw,{children:d.jsx(vw,{children:d.jsx(ww,{children:d.jsx(Iw,{children:d.jsx(Nw,{children:d.jsx(Ow,{children:d.jsx(Mw,{children:d.jsxs(ug,{children:[d.jsx(vC,{}),d.jsx(dC,{}),d.jsx(Ym,{href:"#main-content",children:"Skip to main content"}),d.jsx(aC,{children:d.jsx("main",{id:"main-content",className:"focus:outline-none",children:d.jsx(E.Suspense,{fallback:d.jsx($C,{}),children:d.jsxs(dg,{children:[d.jsx(_e,{path:"/",element:d.jsx(SC,{})}),d.jsx(_e,{path:"/products",element:d.jsx(Ao,{})}),d.jsx(_e,{path:"/products/:id",element:d.jsx(EC,{})}),d.jsx(_e,{path:"/search",element:d.jsx(AC,{})}),d.jsx(_e,{path:"/compare",element:d.jsx(RC,{})}),d.jsx(_e,{path:"/dashboard",element:d.jsx(TC,{})}),d.jsx(_e,{path:"/profile",element:d.jsx(kC,{})}),d.jsx(_e,{path:"/wishlist",element:d.jsx(PC,{})}),d.jsx(_e,{path:"/orders",element:d.jsx(CC,{})}),d.jsx(_e,{path:"/checkout",element:d.jsx(jC,{})}),d.jsx(_e,{path:"/settings",element:d.jsx(LC,{})}),d.jsx(_e,{path:"/new-arrivals",element:d.jsx(IC,{})}),d.jsx(_e,{path:"/deals",element:d.jsx(NC,{})}),d.jsx(_e,{path:"/categories",element:d.jsx(OC,{})}),d.jsx(_e,{path:"/categories/:slug",element:d.jsx(Ao,{})}),d.jsx(_e,{path:"/collections",element:d.jsx(DC,{})}),d.jsx(_e,{path:"/collections/:slug",element:d.jsx(Ao,{})}),d.jsx(_e,{path:"/auth",element:d.jsx(MC,{})}),d.jsx(_e,{path:"*",element:d.jsx(FC,{})})]})})})}),d.jsx(cC,{})]})})})})})})})})})})})})})})})}),d.jsx(uC,{})]})}const or=class or{constructor(){fe(this,"originalConsoleError");fe(this,"originalConsoleWarn");fe(this,"suppressedErrors",[{pattern:/ERR_BLOCKED_BY_CLIENT/,description:"Ad blocker blocking resources",suppress:!0},{pattern:/google-analytics\.com.*Failed to load resource/,description:"Google Analytics blocked by ad blocker",suppress:!0},{pattern:/googleapis\.com.*Failed to load resource/,description:"Google Fonts blocked by ad blocker",suppress:!0},{pattern:/preloaded using link preload but not used/,description:"Preload resource timing warning",suppress:!0},{pattern:/contentScript\.bundle\.js.*Failed to fetch/,description:"Browser extension script error",suppress:!0},{pattern:/i18next: languageChanged/,description:"Browser extension i18n messages",suppress:!0},{pattern:/i18next: initialized/,description:"Browser extension i18n initialization",suppress:!0}]);this.originalConsoleError=console.error,this.originalConsoleWarn=console.warn,this.setupErrorSuppression()}static getInstance(){return or.instance||(or.instance=new or),or.instance}setupErrorSuppression(){console.error=(...e)=>{this.shouldSuppressMessage(e)||this.originalConsoleError.apply(console,e)},console.warn=(...e)=>{this.shouldSuppressMessage(e)||this.originalConsoleWarn.apply(console,e)}}shouldSuppressMessage(e){const r=e.join(" ");return this.suppressedErrors.some(n=>!!(n.suppress&&n.pattern.test(r)))}addSuppressionPattern(e,r){this.suppressedErrors.push({pattern:e,description:r,suppress:!0})}removeSuppressionPattern(e){this.suppressedErrors=this.suppressedErrors.filter(r=>r.pattern.source!==e.source)}getSuppressionPatterns(){return[...this.suppressedErrors]}restore(){console.error=this.originalConsoleError,console.warn=this.originalConsoleWarn}};fe(or,"instance");let Ia=or;Ia.getInstance();yg.createRoot(document.getElementById("root")).render(d.jsx(E.StrictMode,{children:d.jsx(UC,{})}));setTimeout(()=>{de(()=>import("./serviceWorker-RTp7NGAG.js"),[]).catch(console.error)},1e3);export{wh as $,rv as A,Le as B,yh as C,gR as D,Js as E,kt as F,_v as G,$a as H,Uv as I,Hv as J,xh as K,hC as L,Lv as M,Nn as N,pv as O,Uo as P,Xi as Q,Qs as R,Jv as S,nw as T,oR as U,iR as V,sv as W,bt as X,Va as Y,YC as Z,Ji as _,mR as a,bh as a0,Nt as a1,cR as a2,aR as a3,In as a4,Xs as a5,jv as a6,Fv as a7,jl as a8,Rl as a9,Ua as aa,mh as ab,Ys as ac,Ba as ad,uR as ae,JC as af,Gi as ag,XC as ah,$0 as ai,Ki as aj,ys as ak,kl as al,fR as am,dR as an,QC as ao,ZC as ap,eR as aq,tR as ar,rR as as,sR as at,nR as au,Sh as b,J as c,tw as d,lR as e,gh as f,Ha as g,yR as h,QP as i,d as j,lv as k,hR as l,Ot as m,vi as n,Bo as o,ed as p,za as q,Ph as r,F as s,Rw as t,Rh as u,vr as v,Sv as w,qa as x,av as y,Fa as z};
